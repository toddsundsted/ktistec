{"version":3,"file":"settings.bundle.js","mappings":"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","sources":["webpack://ktistec/./node_modules/filepond-plugin-image-resize/dist/filepond-plugin-image-resize.js","webpack://ktistec/./node_modules/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.js","webpack://ktistec/./node_modules/filepond-plugin-file-validate-type/dist/filepond-plugin-file-validate-type.js","webpack://ktistec/./node_modules/filepond-plugin-image-transform/dist/filepond-plugin-image-transform.js","webpack://ktistec/./node_modules/filepond/dist/filepond.js","webpack://ktistec/webpack/bootstrap","webpack://ktistec/webpack/runtime/compat get default export","webpack://ktistec/webpack/runtime/define property getters","webpack://ktistec/webpack/runtime/hasOwnProperty shorthand","webpack://ktistec/./src/assets/settings.js"],"sourcesContent":["/*!\n * FilePondPluginImageResize 2.0.10\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined'\n        ? (module.exports = factory())\n        : typeof define === 'function' && define.amd\n        ? define(factory)\n        : ((global = global || self), (global.FilePondPluginImageResize = factory()));\n})(this, function() {\n    'use strict';\n\n    // test if file is of type image\n    var isImage = function isImage(file) {\n        return /^image/.test(file.type);\n    };\n\n    var getImageSize = function getImageSize(url, cb) {\n        var image = new Image();\n        image.onload = function() {\n            var width = image.naturalWidth;\n            var height = image.naturalHeight;\n            image = null;\n            cb({ width: width, height: height });\n        };\n        image.onerror = function() {\n            return cb(null);\n        };\n        image.src = url;\n    };\n\n    /**\n     * Image Auto Resize Plugin\n     */\n    var plugin = function plugin(_ref) {\n        var addFilter = _ref.addFilter,\n            utils = _ref.utils;\n        var Type = utils.Type;\n\n        // subscribe to file load and append required transformations\n        addFilter('DID_LOAD_ITEM', function(item, _ref2) {\n            var query = _ref2.query;\n            return new Promise(function(resolve, reject) {\n                // get file reference\n                var file = item.file;\n\n                // if this is not an image we do not have any business cropping it\n                if (!isImage(file) || !query('GET_ALLOW_IMAGE_RESIZE')) {\n                    // continue with the unaltered dataset\n                    return resolve(item);\n                }\n\n                var mode = query('GET_IMAGE_RESIZE_MODE');\n                var width = query('GET_IMAGE_RESIZE_TARGET_WIDTH');\n                var height = query('GET_IMAGE_RESIZE_TARGET_HEIGHT');\n                var upscale = query('GET_IMAGE_RESIZE_UPSCALE');\n\n                // no resizing to be done\n                if (width === null && height === null) return resolve(item);\n\n                var targetWidth = width === null ? height : width;\n                var targetHeight = height === null ? targetWidth : height;\n\n                // if should not upscale, we need to determine the size of the file\n                var fileURL = URL.createObjectURL(file);\n                getImageSize(fileURL, function(size) {\n                    URL.revokeObjectURL(fileURL);\n\n                    // something went wrong\n                    if (!size) return resolve(item);\n                    var imageWidth = size.width,\n                        imageHeight = size.height;\n\n                    // get exif orientation\n                    var orientation = (item.getMetadata('exif') || {}).orientation || -1;\n\n                    // swap width and height if orientation needs correcting\n                    if (orientation >= 5 && orientation <= 8) {\n                        var _ref3 = [imageHeight, imageWidth];\n                        imageWidth = _ref3[0];\n                        imageHeight = _ref3[1];\n                    }\n\n                    // image is already perfect size, no transformations required\n                    if (imageWidth === targetWidth && imageHeight === targetHeight)\n                        return resolve(item);\n\n                    // already contained?\n                    // can't upscale image, so if already at correct scale, exit\n                    if (!upscale) {\n                        // covering target size\n                        if (mode === 'cover') {\n                            // if one of edges is smaller than target size, exit\n                            if (imageWidth <= targetWidth || imageHeight <= targetHeight)\n                                return resolve(item);\n                        }\n\n                        // not covering target size, if image is contained in target size, exit\n                        else if (imageWidth <= targetWidth && imageHeight <= targetWidth) {\n                            return resolve(item);\n                        }\n                    }\n\n                    // the image needs to be resized\n                    item.setMetadata('resize', {\n                        mode: mode,\n                        upscale: upscale,\n                        size: {\n                            width: targetWidth,\n                            height: targetHeight,\n                        },\n                    });\n\n                    resolve(item);\n                });\n            });\n        });\n\n        // Expose plugin options\n        return {\n            options: {\n                // Enable or disable image resizing\n                allowImageResize: [true, Type.BOOLEAN],\n\n                // the method of rescaling\n                // - force => force set size\n                // - cover => pick biggest dimension\n                // - contain => pick smaller dimension\n                imageResizeMode: ['cover', Type.STRING],\n\n                // set to false to disable upscaling of image smaller than the target width / height\n                imageResizeUpscale: [true, Type.BOOLEAN],\n\n                // target width\n                imageResizeTargetWidth: [null, Type.INT],\n\n                // target height\n                imageResizeTargetHeight: [null, Type.INT],\n            },\n        };\n    };\n\n    // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n    var isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n    if (isBrowser) {\n        document.dispatchEvent(new CustomEvent('FilePond:pluginloaded', { detail: plugin }));\n    }\n\n    return plugin;\n});\n","/*!\n * FilePondPluginImagePreview 4.6.12\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined'\n    ? (module.exports = factory())\n    : typeof define === 'function' && define.amd\n    ? define(factory)\n    : ((global = global || self),\n      (global.FilePondPluginImagePreview = factory()));\n})(this, function() {\n  'use strict';\n\n  // test if file is of type image and can be viewed in canvas\n  var isPreviewableImage = function isPreviewableImage(file) {\n    return /^image/.test(file.type);\n  };\n\n  function _typeof(obj) {\n    if (typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol') {\n      _typeof = function(obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function(obj) {\n        return obj &&\n          typeof Symbol === 'function' &&\n          obj.constructor === Symbol &&\n          obj !== Symbol.prototype\n          ? 'symbol'\n          : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  var REACT_ELEMENT_TYPE;\n\n  function _jsx(type, props, key, children) {\n    if (!REACT_ELEMENT_TYPE) {\n      REACT_ELEMENT_TYPE =\n        (typeof Symbol === 'function' &&\n          Symbol.for &&\n          Symbol.for('react.element')) ||\n        0xeac7;\n    }\n\n    var defaultProps = type && type.defaultProps;\n    var childrenLength = arguments.length - 3;\n\n    if (!props && childrenLength !== 0) {\n      props = {\n        children: void 0\n      };\n    }\n\n    if (props && defaultProps) {\n      for (var propName in defaultProps) {\n        if (props[propName] === void 0) {\n          props[propName] = defaultProps[propName];\n        }\n      }\n    } else if (!props) {\n      props = defaultProps || {};\n    }\n\n    if (childrenLength === 1) {\n      props.children = children;\n    } else if (childrenLength > 1) {\n      var childArray = new Array(childrenLength);\n\n      for (var i = 0; i < childrenLength; i++) {\n        childArray[i] = arguments[i + 3];\n      }\n\n      props.children = childArray;\n    }\n\n    return {\n      $$typeof: REACT_ELEMENT_TYPE,\n      type: type,\n      key: key === undefined ? null : '' + key,\n      ref: null,\n      props: props,\n      _owner: null\n    };\n  }\n\n  function _asyncIterator(iterable) {\n    var method;\n\n    if (typeof Symbol === 'function') {\n      if (Symbol.asyncIterator) {\n        method = iterable[Symbol.asyncIterator];\n        if (method != null) return method.call(iterable);\n      }\n\n      if (Symbol.iterator) {\n        method = iterable[Symbol.iterator];\n        if (method != null) return method.call(iterable);\n      }\n    }\n\n    throw new TypeError('Object is not async iterable');\n  }\n\n  function _AwaitValue(value) {\n    this.wrapped = value;\n  }\n\n  function _AsyncGenerator(gen) {\n    var front, back;\n\n    function send(key, arg) {\n      return new Promise(function(resolve, reject) {\n        var request = {\n          key: key,\n          arg: arg,\n          resolve: resolve,\n          reject: reject,\n          next: null\n        };\n\n        if (back) {\n          back = back.next = request;\n        } else {\n          front = back = request;\n          resume(key, arg);\n        }\n      });\n    }\n\n    function resume(key, arg) {\n      try {\n        var result = gen[key](arg);\n        var value = result.value;\n        var wrappedAwait = value instanceof _AwaitValue;\n        Promise.resolve(wrappedAwait ? value.wrapped : value).then(\n          function(arg) {\n            if (wrappedAwait) {\n              resume('next', arg);\n              return;\n            }\n\n            settle(result.done ? 'return' : 'normal', arg);\n          },\n          function(err) {\n            resume('throw', err);\n          }\n        );\n      } catch (err) {\n        settle('throw', err);\n      }\n    }\n\n    function settle(type, value) {\n      switch (type) {\n        case 'return':\n          front.resolve({\n            value: value,\n            done: true\n          });\n          break;\n\n        case 'throw':\n          front.reject(value);\n          break;\n\n        default:\n          front.resolve({\n            value: value,\n            done: false\n          });\n          break;\n      }\n\n      front = front.next;\n\n      if (front) {\n        resume(front.key, front.arg);\n      } else {\n        back = null;\n      }\n    }\n\n    this._invoke = send;\n\n    if (typeof gen.return !== 'function') {\n      this.return = undefined;\n    }\n  }\n\n  if (typeof Symbol === 'function' && Symbol.asyncIterator) {\n    _AsyncGenerator.prototype[Symbol.asyncIterator] = function() {\n      return this;\n    };\n  }\n\n  _AsyncGenerator.prototype.next = function(arg) {\n    return this._invoke('next', arg);\n  };\n\n  _AsyncGenerator.prototype.throw = function(arg) {\n    return this._invoke('throw', arg);\n  };\n\n  _AsyncGenerator.prototype.return = function(arg) {\n    return this._invoke('return', arg);\n  };\n\n  function _wrapAsyncGenerator(fn) {\n    return function() {\n      return new _AsyncGenerator(fn.apply(this, arguments));\n    };\n  }\n\n  function _awaitAsyncGenerator(value) {\n    return new _AwaitValue(value);\n  }\n\n  function _asyncGeneratorDelegate(inner, awaitWrap) {\n    var iter = {},\n      waiting = false;\n\n    function pump(key, value) {\n      waiting = true;\n      value = new Promise(function(resolve) {\n        resolve(inner[key](value));\n      });\n      return {\n        done: false,\n        value: awaitWrap(value)\n      };\n    }\n\n    if (typeof Symbol === 'function' && Symbol.iterator) {\n      iter[Symbol.iterator] = function() {\n        return this;\n      };\n    }\n\n    iter.next = function(value) {\n      if (waiting) {\n        waiting = false;\n        return value;\n      }\n\n      return pump('next', value);\n    };\n\n    if (typeof inner.throw === 'function') {\n      iter.throw = function(value) {\n        if (waiting) {\n          waiting = false;\n          throw value;\n        }\n\n        return pump('throw', value);\n      };\n    }\n\n    if (typeof inner.return === 'function') {\n      iter.return = function(value) {\n        return pump('return', value);\n      };\n    }\n\n    return iter;\n  }\n\n  function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n    try {\n      var info = gen[key](arg);\n      var value = info.value;\n    } catch (error) {\n      reject(error);\n      return;\n    }\n\n    if (info.done) {\n      resolve(value);\n    } else {\n      Promise.resolve(value).then(_next, _throw);\n    }\n  }\n\n  function _asyncToGenerator(fn) {\n    return function() {\n      var self = this,\n        args = arguments;\n      return new Promise(function(resolve, reject) {\n        var gen = fn.apply(self, args);\n\n        function _next(value) {\n          asyncGeneratorStep(\n            gen,\n            resolve,\n            reject,\n            _next,\n            _throw,\n            'next',\n            value\n          );\n        }\n\n        function _throw(err) {\n          asyncGeneratorStep(gen, resolve, reject, _next, _throw, 'throw', err);\n        }\n\n        _next(undefined);\n      });\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError('Cannot call a class as a function');\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if ('value' in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineEnumerableProperties(obj, descs) {\n    for (var key in descs) {\n      var desc = descs[key];\n      desc.configurable = desc.enumerable = true;\n      if ('value' in desc) desc.writable = true;\n      Object.defineProperty(obj, key, desc);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var objectSymbols = Object.getOwnPropertySymbols(descs);\n\n      for (var i = 0; i < objectSymbols.length; i++) {\n        var sym = objectSymbols[i];\n        var desc = descs[sym];\n        desc.configurable = desc.enumerable = true;\n        if ('value' in desc) desc.writable = true;\n        Object.defineProperty(obj, sym, desc);\n      }\n    }\n\n    return obj;\n  }\n\n  function _defaults(obj, defaults) {\n    var keys = Object.getOwnPropertyNames(defaults);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n      if (value && value.configurable && obj[key] === undefined) {\n        Object.defineProperty(obj, key, value);\n      }\n    }\n\n    return obj;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _extends() {\n    _extends =\n      Object.assign ||\n      function(target) {\n        for (var i = 1; i < arguments.length; i++) {\n          var source = arguments[i];\n\n          for (var key in source) {\n            if (Object.prototype.hasOwnProperty.call(source, key)) {\n              target[key] = source[key];\n            }\n          }\n        }\n\n        return target;\n      };\n\n    return _extends.apply(this, arguments);\n  }\n\n  function _objectSpread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n      var ownKeys = Object.keys(source);\n\n      if (typeof Object.getOwnPropertySymbols === 'function') {\n        ownKeys = ownKeys.concat(\n          Object.getOwnPropertySymbols(source).filter(function(sym) {\n            return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n          })\n        );\n      }\n\n      ownKeys.forEach(function(key) {\n        _defineProperty(target, key, source[key]);\n      });\n    }\n\n    return target;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== 'function' && superClass !== null) {\n      throw new TypeError('Super expression must either be null or a function');\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _inheritsLoose(subClass, superClass) {\n    subClass.prototype = Object.create(superClass.prototype);\n    subClass.prototype.constructor = subClass;\n    subClass.__proto__ = superClass;\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf\n      ? Object.getPrototypeOf\n      : function _getPrototypeOf(o) {\n          return o.__proto__ || Object.getPrototypeOf(o);\n        };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf =\n      Object.setPrototypeOf ||\n      function _setPrototypeOf(o, p) {\n        o.__proto__ = p;\n        return o;\n      };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function isNativeReflectConstruct() {\n    if (typeof Reflect === 'undefined' || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === 'function') return true;\n\n    try {\n      Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function _construct(Parent, args, Class) {\n    if (isNativeReflectConstruct()) {\n      _construct = Reflect.construct;\n    } else {\n      _construct = function _construct(Parent, args, Class) {\n        var a = [null];\n        a.push.apply(a, args);\n        var Constructor = Function.bind.apply(Parent, a);\n        var instance = new Constructor();\n        if (Class) _setPrototypeOf(instance, Class.prototype);\n        return instance;\n      };\n    }\n\n    return _construct.apply(null, arguments);\n  }\n\n  function _isNativeFunction(fn) {\n    return Function.toString.call(fn).indexOf('[native code]') !== -1;\n  }\n\n  function _wrapNativeSuper(Class) {\n    var _cache = typeof Map === 'function' ? new Map() : undefined;\n\n    _wrapNativeSuper = function _wrapNativeSuper(Class) {\n      if (Class === null || !_isNativeFunction(Class)) return Class;\n\n      if (typeof Class !== 'function') {\n        throw new TypeError(\n          'Super expression must either be null or a function'\n        );\n      }\n\n      if (typeof _cache !== 'undefined') {\n        if (_cache.has(Class)) return _cache.get(Class);\n\n        _cache.set(Class, Wrapper);\n      }\n\n      function Wrapper() {\n        return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n      }\n\n      Wrapper.prototype = Object.create(Class.prototype, {\n        constructor: {\n          value: Wrapper,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      return _setPrototypeOf(Wrapper, Class);\n    };\n\n    return _wrapNativeSuper(Class);\n  }\n\n  function _instanceof(left, right) {\n    if (\n      right != null &&\n      typeof Symbol !== 'undefined' &&\n      right[Symbol.hasInstance]\n    ) {\n      return right[Symbol.hasInstance](left);\n    } else {\n      return left instanceof right;\n    }\n  }\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule\n      ? obj\n      : {\n          default: obj\n        };\n  }\n\n  function _interopRequireWildcard(obj) {\n    if (obj && obj.__esModule) {\n      return obj;\n    } else {\n      var newObj = {};\n\n      if (obj != null) {\n        for (var key in obj) {\n          if (Object.prototype.hasOwnProperty.call(obj, key)) {\n            var desc =\n              Object.defineProperty && Object.getOwnPropertyDescriptor\n                ? Object.getOwnPropertyDescriptor(obj, key)\n                : {};\n\n            if (desc.get || desc.set) {\n              Object.defineProperty(newObj, key, desc);\n            } else {\n              newObj[key] = obj[key];\n            }\n          }\n        }\n      }\n\n      newObj.default = obj;\n      return newObj;\n    }\n  }\n\n  function _newArrowCheck(innerThis, boundThis) {\n    if (innerThis !== boundThis) {\n      throw new TypeError('Cannot instantiate an arrow function');\n    }\n  }\n\n  function _objectDestructuringEmpty(obj) {\n    if (obj == null) throw new TypeError('Cannot destructure undefined');\n  }\n\n  function _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n\n    for (i = 0; i < sourceKeys.length; i++) {\n      key = sourceKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      target[key] = source[key];\n    }\n\n    return target;\n  }\n\n  function _objectWithoutProperties(source, excluded) {\n    if (source == null) return {};\n\n    var target = _objectWithoutPropertiesLoose(source, excluded);\n\n    var key, i;\n\n    if (Object.getOwnPropertySymbols) {\n      var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n      for (i = 0; i < sourceSymbolKeys.length; i++) {\n        key = sourceSymbolKeys[i];\n        if (excluded.indexOf(key) >= 0) continue;\n        if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n        target[key] = source[key];\n      }\n    }\n\n    return target;\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\n        \"this hasn't been initialised - super() hasn't been called\"\n      );\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === 'object' || typeof call === 'function')) {\n      return call;\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  function _superPropBase(object, property) {\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\n      object = _getPrototypeOf(object);\n      if (object === null) break;\n    }\n\n    return object;\n  }\n\n  function _get(target, property, receiver) {\n    if (typeof Reflect !== 'undefined' && Reflect.get) {\n      _get = Reflect.get;\n    } else {\n      _get = function _get(target, property, receiver) {\n        var base = _superPropBase(target, property);\n\n        if (!base) return;\n        var desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.get) {\n          return desc.get.call(receiver);\n        }\n\n        return desc.value;\n      };\n    }\n\n    return _get(target, property, receiver || target);\n  }\n\n  function set(target, property, value, receiver) {\n    if (typeof Reflect !== 'undefined' && Reflect.set) {\n      set = Reflect.set;\n    } else {\n      set = function set(target, property, value, receiver) {\n        var base = _superPropBase(target, property);\n\n        var desc;\n\n        if (base) {\n          desc = Object.getOwnPropertyDescriptor(base, property);\n\n          if (desc.set) {\n            desc.set.call(receiver, value);\n            return true;\n          } else if (!desc.writable) {\n            return false;\n          }\n        }\n\n        desc = Object.getOwnPropertyDescriptor(receiver, property);\n\n        if (desc) {\n          if (!desc.writable) {\n            return false;\n          }\n\n          desc.value = value;\n          Object.defineProperty(receiver, property, desc);\n        } else {\n          _defineProperty(receiver, property, value);\n        }\n\n        return true;\n      };\n    }\n\n    return set(target, property, value, receiver);\n  }\n\n  function _set(target, property, value, receiver, isStrict) {\n    var s = set(target, property, value, receiver || target);\n\n    if (!s && isStrict) {\n      throw new Error('failed to set property');\n    }\n\n    return value;\n  }\n\n  function _taggedTemplateLiteral(strings, raw) {\n    if (!raw) {\n      raw = strings.slice(0);\n    }\n\n    return Object.freeze(\n      Object.defineProperties(strings, {\n        raw: {\n          value: Object.freeze(raw)\n        }\n      })\n    );\n  }\n\n  function _taggedTemplateLiteralLoose(strings, raw) {\n    if (!raw) {\n      raw = strings.slice(0);\n    }\n\n    strings.raw = raw;\n    return strings;\n  }\n\n  function _temporalRef(val, name) {\n    if (val === _temporalUndefined) {\n      throw new ReferenceError(name + ' is not defined - temporal dead zone');\n    } else {\n      return val;\n    }\n  }\n\n  function _readOnlyError(name) {\n    throw new Error('\"' + name + '\" is read-only');\n  }\n\n  function _classNameTDZError(name) {\n    throw new Error(\n      'Class \"' + name + '\" cannot be referenced in computed property keys.'\n    );\n  }\n\n  var _temporalUndefined = {};\n\n  function _slicedToArray(arr, i) {\n    return (\n      _arrayWithHoles(arr) ||\n      _iterableToArrayLimit(arr, i) ||\n      _nonIterableRest()\n    );\n  }\n\n  function _slicedToArrayLoose(arr, i) {\n    return (\n      _arrayWithHoles(arr) ||\n      _iterableToArrayLimitLoose(arr, i) ||\n      _nonIterableRest()\n    );\n  }\n\n  function _toArray(arr) {\n    return _arrayWithHoles(arr) || _iterableToArray(arr) || _nonIterableRest();\n  }\n\n  function _toConsumableArray(arr) {\n    return (\n      _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread()\n    );\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) {\n      for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++)\n        arr2[i] = arr[i];\n\n      return arr2;\n    }\n  }\n\n  function _arrayWithHoles(arr) {\n    if (Array.isArray(arr)) return arr;\n  }\n\n  function _iterableToArray(iter) {\n    if (\n      Symbol.iterator in Object(iter) ||\n      Object.prototype.toString.call(iter) === '[object Arguments]'\n    )\n      return Array.from(iter);\n  }\n\n  function _iterableToArrayLimit(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (\n        var _i = arr[Symbol.iterator](), _s;\n        !(_n = (_s = _i.next()).done);\n        _n = true\n      ) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i['return'] != null) _i['return']();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  function _iterableToArrayLimitLoose(arr, i) {\n    var _arr = [];\n\n    for (\n      var _iterator = arr[Symbol.iterator](), _step;\n      !(_step = _iterator.next()).done;\n\n    ) {\n      _arr.push(_step.value);\n\n      if (i && _arr.length === i) break;\n    }\n\n    return _arr;\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError('Invalid attempt to spread non-iterable instance');\n  }\n\n  function _nonIterableRest() {\n    throw new TypeError('Invalid attempt to destructure non-iterable instance');\n  }\n\n  function _skipFirstGeneratorNext(fn) {\n    return function() {\n      var it = fn.apply(this, arguments);\n      it.next();\n      return it;\n    };\n  }\n\n  function _toPrimitive(input, hint) {\n    if (typeof input !== 'object' || input === null) return input;\n    var prim = input[Symbol.toPrimitive];\n\n    if (prim !== undefined) {\n      var res = prim.call(input, hint || 'default');\n      if (typeof res !== 'object') return res;\n      throw new TypeError('@@toPrimitive must return a primitive value.');\n    }\n\n    return (hint === 'string' ? String : Number)(input);\n  }\n\n  function _toPropertyKey(arg) {\n    var key = _toPrimitive(arg, 'string');\n\n    return typeof key === 'symbol' ? key : String(key);\n  }\n\n  function _initializerWarningHelper(descriptor, context) {\n    throw new Error(\n      'Decorating class property failed. Please ensure that ' +\n        'proposal-class-properties is enabled and set to use loose mode. ' +\n        'To use proposal-class-properties in spec mode with decorators, wait for ' +\n        'the next major version of decorators in stage 2.'\n    );\n  }\n\n  function _initializerDefineProperty(target, property, descriptor, context) {\n    if (!descriptor) return;\n    Object.defineProperty(target, property, {\n      enumerable: descriptor.enumerable,\n      configurable: descriptor.configurable,\n      writable: descriptor.writable,\n      value: descriptor.initializer\n        ? descriptor.initializer.call(context)\n        : void 0\n    });\n  }\n\n  function _applyDecoratedDescriptor(\n    target,\n    property,\n    decorators,\n    descriptor,\n    context\n  ) {\n    var desc = {};\n    Object.keys(descriptor).forEach(function(key) {\n      desc[key] = descriptor[key];\n    });\n    desc.enumerable = !!desc.enumerable;\n    desc.configurable = !!desc.configurable;\n\n    if ('value' in desc || desc.initializer) {\n      desc.writable = true;\n    }\n\n    desc = decorators\n      .slice()\n      .reverse()\n      .reduce(function(desc, decorator) {\n        return decorator(target, property, desc) || desc;\n      }, desc);\n\n    if (context && desc.initializer !== void 0) {\n      desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n      desc.initializer = undefined;\n    }\n\n    if (desc.initializer === void 0) {\n      Object.defineProperty(target, property, desc);\n      desc = null;\n    }\n\n    return desc;\n  }\n\n  var id = 0;\n\n  function _classPrivateFieldLooseKey(name) {\n    return '__private_' + id++ + '_' + name;\n  }\n\n  function _classPrivateFieldLooseBase(receiver, privateKey) {\n    if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) {\n      throw new TypeError('attempted to use private field on non-instance');\n    }\n\n    return receiver;\n  }\n\n  function _classPrivateFieldGet(receiver, privateMap) {\n    if (!privateMap.has(receiver)) {\n      throw new TypeError('attempted to get private field on non-instance');\n    }\n\n    var descriptor = privateMap.get(receiver);\n\n    if (descriptor.get) {\n      return descriptor.get.call(receiver);\n    }\n\n    return descriptor.value;\n  }\n\n  function _classPrivateFieldSet(receiver, privateMap, value) {\n    if (!privateMap.has(receiver)) {\n      throw new TypeError('attempted to set private field on non-instance');\n    }\n\n    var descriptor = privateMap.get(receiver);\n\n    if (descriptor.set) {\n      descriptor.set.call(receiver, value);\n    } else {\n      if (!descriptor.writable) {\n        throw new TypeError('attempted to set read only private field');\n      }\n\n      descriptor.value = value;\n    }\n\n    return value;\n  }\n\n  function _classStaticPrivateFieldSpecGet(\n    receiver,\n    classConstructor,\n    descriptor\n  ) {\n    if (receiver !== classConstructor) {\n      throw new TypeError('Private static access of wrong provenance');\n    }\n\n    return descriptor.value;\n  }\n\n  function _classStaticPrivateFieldSpecSet(\n    receiver,\n    classConstructor,\n    descriptor,\n    value\n  ) {\n    if (receiver !== classConstructor) {\n      throw new TypeError('Private static access of wrong provenance');\n    }\n\n    if (!descriptor.writable) {\n      throw new TypeError('attempted to set read only private field');\n    }\n\n    descriptor.value = value;\n    return value;\n  }\n\n  function _classStaticPrivateMethodGet(receiver, classConstructor, method) {\n    if (receiver !== classConstructor) {\n      throw new TypeError('Private static access of wrong provenance');\n    }\n\n    return method;\n  }\n\n  function _classStaticPrivateMethodSet() {\n    throw new TypeError('attempted to set read only static private field');\n  }\n\n  function _decorate(decorators, factory, superClass, mixins) {\n    var api = _getDecoratorsApi();\n\n    if (mixins) {\n      for (var i = 0; i < mixins.length; i++) {\n        api = mixins[i](api);\n      }\n    }\n\n    var r = factory(function initialize(O) {\n      api.initializeInstanceElements(O, decorated.elements);\n    }, superClass);\n    var decorated = api.decorateClass(\n      _coalesceClassElements(r.d.map(_createElementDescriptor)),\n      decorators\n    );\n    api.initializeClassElements(r.F, decorated.elements);\n    return api.runClassFinishers(r.F, decorated.finishers);\n  }\n\n  function _getDecoratorsApi() {\n    _getDecoratorsApi = function() {\n      return api;\n    };\n\n    var api = {\n      elementsDefinitionOrder: [['method'], ['field']],\n      initializeInstanceElements: function(O, elements) {\n        ['method', 'field'].forEach(function(kind) {\n          elements.forEach(function(element) {\n            if (element.kind === kind && element.placement === 'own') {\n              this.defineClassElement(O, element);\n            }\n          }, this);\n        }, this);\n      },\n      initializeClassElements: function(F, elements) {\n        var proto = F.prototype;\n        ['method', 'field'].forEach(function(kind) {\n          elements.forEach(function(element) {\n            var placement = element.placement;\n\n            if (\n              element.kind === kind &&\n              (placement === 'static' || placement === 'prototype')\n            ) {\n              var receiver = placement === 'static' ? F : proto;\n              this.defineClassElement(receiver, element);\n            }\n          }, this);\n        }, this);\n      },\n      defineClassElement: function(receiver, element) {\n        var descriptor = element.descriptor;\n\n        if (element.kind === 'field') {\n          var initializer = element.initializer;\n          descriptor = {\n            enumerable: descriptor.enumerable,\n            writable: descriptor.writable,\n            configurable: descriptor.configurable,\n            value: initializer === void 0 ? void 0 : initializer.call(receiver)\n          };\n        }\n\n        Object.defineProperty(receiver, element.key, descriptor);\n      },\n      decorateClass: function(elements, decorators) {\n        var newElements = [];\n        var finishers = [];\n        var placements = {\n          static: [],\n          prototype: [],\n          own: []\n        };\n        elements.forEach(function(element) {\n          this.addElementPlacement(element, placements);\n        }, this);\n        elements.forEach(function(element) {\n          if (!_hasDecorators(element)) return newElements.push(element);\n          var elementFinishersExtras = this.decorateElement(\n            element,\n            placements\n          );\n          newElements.push(elementFinishersExtras.element);\n          newElements.push.apply(newElements, elementFinishersExtras.extras);\n          finishers.push.apply(finishers, elementFinishersExtras.finishers);\n        }, this);\n\n        if (!decorators) {\n          return {\n            elements: newElements,\n            finishers: finishers\n          };\n        }\n\n        var result = this.decorateConstructor(newElements, decorators);\n        finishers.push.apply(finishers, result.finishers);\n        result.finishers = finishers;\n        return result;\n      },\n      addElementPlacement: function(element, placements, silent) {\n        var keys = placements[element.placement];\n\n        if (!silent && keys.indexOf(element.key) !== -1) {\n          throw new TypeError('Duplicated element (' + element.key + ')');\n        }\n\n        keys.push(element.key);\n      },\n      decorateElement: function(element, placements) {\n        var extras = [];\n        var finishers = [];\n\n        for (\n          var decorators = element.decorators, i = decorators.length - 1;\n          i >= 0;\n          i--\n        ) {\n          var keys = placements[element.placement];\n          keys.splice(keys.indexOf(element.key), 1);\n          var elementObject = this.fromElementDescriptor(element);\n          var elementFinisherExtras = this.toElementFinisherExtras(\n            (0, decorators[i])(elementObject) || elementObject\n          );\n          element = elementFinisherExtras.element;\n          this.addElementPlacement(element, placements);\n\n          if (elementFinisherExtras.finisher) {\n            finishers.push(elementFinisherExtras.finisher);\n          }\n\n          var newExtras = elementFinisherExtras.extras;\n\n          if (newExtras) {\n            for (var j = 0; j < newExtras.length; j++) {\n              this.addElementPlacement(newExtras[j], placements);\n            }\n\n            extras.push.apply(extras, newExtras);\n          }\n        }\n\n        return {\n          element: element,\n          finishers: finishers,\n          extras: extras\n        };\n      },\n      decorateConstructor: function(elements, decorators) {\n        var finishers = [];\n\n        for (var i = decorators.length - 1; i >= 0; i--) {\n          var obj = this.fromClassDescriptor(elements);\n          var elementsAndFinisher = this.toClassDescriptor(\n            (0, decorators[i])(obj) || obj\n          );\n\n          if (elementsAndFinisher.finisher !== undefined) {\n            finishers.push(elementsAndFinisher.finisher);\n          }\n\n          if (elementsAndFinisher.elements !== undefined) {\n            elements = elementsAndFinisher.elements;\n\n            for (var j = 0; j < elements.length - 1; j++) {\n              for (var k = j + 1; k < elements.length; k++) {\n                if (\n                  elements[j].key === elements[k].key &&\n                  elements[j].placement === elements[k].placement\n                ) {\n                  throw new TypeError(\n                    'Duplicated element (' + elements[j].key + ')'\n                  );\n                }\n              }\n            }\n          }\n        }\n\n        return {\n          elements: elements,\n          finishers: finishers\n        };\n      },\n      fromElementDescriptor: function(element) {\n        var obj = {\n          kind: element.kind,\n          key: element.key,\n          placement: element.placement,\n          descriptor: element.descriptor\n        };\n        var desc = {\n          value: 'Descriptor',\n          configurable: true\n        };\n        Object.defineProperty(obj, Symbol.toStringTag, desc);\n        if (element.kind === 'field') obj.initializer = element.initializer;\n        return obj;\n      },\n      toElementDescriptors: function(elementObjects) {\n        if (elementObjects === undefined) return;\n        return _toArray(elementObjects).map(function(elementObject) {\n          var element = this.toElementDescriptor(elementObject);\n          this.disallowProperty(\n            elementObject,\n            'finisher',\n            'An element descriptor'\n          );\n          this.disallowProperty(\n            elementObject,\n            'extras',\n            'An element descriptor'\n          );\n          return element;\n        }, this);\n      },\n      toElementDescriptor: function(elementObject) {\n        var kind = String(elementObject.kind);\n\n        if (kind !== 'method' && kind !== 'field') {\n          throw new TypeError(\n            'An element descriptor\\'s .kind property must be either \"method\" or' +\n              ' \"field\", but a decorator created an element descriptor with' +\n              ' .kind \"' +\n              kind +\n              '\"'\n          );\n        }\n\n        var key = _toPropertyKey(elementObject.key);\n\n        var placement = String(elementObject.placement);\n\n        if (\n          placement !== 'static' &&\n          placement !== 'prototype' &&\n          placement !== 'own'\n        ) {\n          throw new TypeError(\n            'An element descriptor\\'s .placement property must be one of \"static\",' +\n              ' \"prototype\" or \"own\", but a decorator created an element descriptor' +\n              ' with .placement \"' +\n              placement +\n              '\"'\n          );\n        }\n\n        var descriptor = elementObject.descriptor;\n        this.disallowProperty(\n          elementObject,\n          'elements',\n          'An element descriptor'\n        );\n        var element = {\n          kind: kind,\n          key: key,\n          placement: placement,\n          descriptor: Object.assign({}, descriptor)\n        };\n\n        if (kind !== 'field') {\n          this.disallowProperty(\n            elementObject,\n            'initializer',\n            'A method descriptor'\n          );\n        } else {\n          this.disallowProperty(\n            descriptor,\n            'get',\n            'The property descriptor of a field descriptor'\n          );\n          this.disallowProperty(\n            descriptor,\n            'set',\n            'The property descriptor of a field descriptor'\n          );\n          this.disallowProperty(\n            descriptor,\n            'value',\n            'The property descriptor of a field descriptor'\n          );\n          element.initializer = elementObject.initializer;\n        }\n\n        return element;\n      },\n      toElementFinisherExtras: function(elementObject) {\n        var element = this.toElementDescriptor(elementObject);\n\n        var finisher = _optionalCallableProperty(elementObject, 'finisher');\n\n        var extras = this.toElementDescriptors(elementObject.extras);\n        return {\n          element: element,\n          finisher: finisher,\n          extras: extras\n        };\n      },\n      fromClassDescriptor: function(elements) {\n        var obj = {\n          kind: 'class',\n          elements: elements.map(this.fromElementDescriptor, this)\n        };\n        var desc = {\n          value: 'Descriptor',\n          configurable: true\n        };\n        Object.defineProperty(obj, Symbol.toStringTag, desc);\n        return obj;\n      },\n      toClassDescriptor: function(obj) {\n        var kind = String(obj.kind);\n\n        if (kind !== 'class') {\n          throw new TypeError(\n            'A class descriptor\\'s .kind property must be \"class\", but a decorator' +\n              ' created a class descriptor with .kind \"' +\n              kind +\n              '\"'\n          );\n        }\n\n        this.disallowProperty(obj, 'key', 'A class descriptor');\n        this.disallowProperty(obj, 'placement', 'A class descriptor');\n        this.disallowProperty(obj, 'descriptor', 'A class descriptor');\n        this.disallowProperty(obj, 'initializer', 'A class descriptor');\n        this.disallowProperty(obj, 'extras', 'A class descriptor');\n\n        var finisher = _optionalCallableProperty(obj, 'finisher');\n\n        var elements = this.toElementDescriptors(obj.elements);\n        return {\n          elements: elements,\n          finisher: finisher\n        };\n      },\n      runClassFinishers: function(constructor, finishers) {\n        for (var i = 0; i < finishers.length; i++) {\n          var newConstructor = (0, finishers[i])(constructor);\n\n          if (newConstructor !== undefined) {\n            if (typeof newConstructor !== 'function') {\n              throw new TypeError('Finishers must return a constructor.');\n            }\n\n            constructor = newConstructor;\n          }\n        }\n\n        return constructor;\n      },\n      disallowProperty: function(obj, name, objectType) {\n        if (obj[name] !== undefined) {\n          throw new TypeError(\n            objectType + \" can't have a .\" + name + ' property.'\n          );\n        }\n      }\n    };\n    return api;\n  }\n\n  function _createElementDescriptor(def) {\n    var key = _toPropertyKey(def.key);\n\n    var descriptor;\n\n    if (def.kind === 'method') {\n      descriptor = {\n        value: def.value,\n        writable: true,\n        configurable: true,\n        enumerable: false\n      };\n    } else if (def.kind === 'get') {\n      descriptor = {\n        get: def.value,\n        configurable: true,\n        enumerable: false\n      };\n    } else if (def.kind === 'set') {\n      descriptor = {\n        set: def.value,\n        configurable: true,\n        enumerable: false\n      };\n    } else if (def.kind === 'field') {\n      descriptor = {\n        configurable: true,\n        writable: true,\n        enumerable: true\n      };\n    }\n\n    var element = {\n      kind: def.kind === 'field' ? 'field' : 'method',\n      key: key,\n      placement: def.static\n        ? 'static'\n        : def.kind === 'field'\n        ? 'own'\n        : 'prototype',\n      descriptor: descriptor\n    };\n    if (def.decorators) element.decorators = def.decorators;\n    if (def.kind === 'field') element.initializer = def.value;\n    return element;\n  }\n\n  function _coalesceGetterSetter(element, other) {\n    if (element.descriptor.get !== undefined) {\n      other.descriptor.get = element.descriptor.get;\n    } else {\n      other.descriptor.set = element.descriptor.set;\n    }\n  }\n\n  function _coalesceClassElements(elements) {\n    var newElements = [];\n\n    var isSameElement = function(other) {\n      return (\n        other.kind === 'method' &&\n        other.key === element.key &&\n        other.placement === element.placement\n      );\n    };\n\n    for (var i = 0; i < elements.length; i++) {\n      var element = elements[i];\n      var other;\n\n      if (\n        element.kind === 'method' &&\n        (other = newElements.find(isSameElement))\n      ) {\n        if (\n          _isDataDescriptor(element.descriptor) ||\n          _isDataDescriptor(other.descriptor)\n        ) {\n          if (_hasDecorators(element) || _hasDecorators(other)) {\n            throw new ReferenceError(\n              'Duplicated methods (' + element.key + \") can't be decorated.\"\n            );\n          }\n\n          other.descriptor = element.descriptor;\n        } else {\n          if (_hasDecorators(element)) {\n            if (_hasDecorators(other)) {\n              throw new ReferenceError(\n                \"Decorators can't be placed on different accessors with for \" +\n                  'the same property (' +\n                  element.key +\n                  ').'\n              );\n            }\n\n            other.decorators = element.decorators;\n          }\n\n          _coalesceGetterSetter(element, other);\n        }\n      } else {\n        newElements.push(element);\n      }\n    }\n\n    return newElements;\n  }\n\n  function _hasDecorators(element) {\n    return element.decorators && element.decorators.length;\n  }\n\n  function _isDataDescriptor(desc) {\n    return (\n      desc !== undefined &&\n      !(desc.value === undefined && desc.writable === undefined)\n    );\n  }\n\n  function _optionalCallableProperty(obj, name) {\n    var value = obj[name];\n\n    if (value !== undefined && typeof value !== 'function') {\n      throw new TypeError(\"Expected '\" + name + \"' to be a function\");\n    }\n\n    return value;\n  }\n\n  function _classPrivateMethodGet(receiver, privateSet, fn) {\n    if (!privateSet.has(receiver)) {\n      throw new TypeError('attempted to get private field on non-instance');\n    }\n\n    return fn;\n  }\n\n  function _classPrivateMethodSet() {\n    throw new TypeError('attempted to reassign private method');\n  }\n\n  function _wrapRegExp(re, groups) {\n    _wrapRegExp = function(re, groups) {\n      return new BabelRegExp(re, groups);\n    };\n\n    var _RegExp = _wrapNativeSuper(RegExp);\n\n    var _super = RegExp.prototype;\n\n    var _groups = new WeakMap();\n\n    function BabelRegExp(re, groups) {\n      var _this = _RegExp.call(this, re);\n\n      _groups.set(_this, groups);\n\n      return _this;\n    }\n\n    _inherits(BabelRegExp, _RegExp);\n\n    BabelRegExp.prototype.exec = function(str) {\n      var result = _super.exec.call(this, str);\n\n      if (result) result.groups = buildGroups(result, this);\n      return result;\n    };\n\n    BabelRegExp.prototype[Symbol.replace] = function(str, substitution) {\n      if (typeof substitution === 'string') {\n        var groups = _groups.get(this);\n\n        return _super[Symbol.replace].call(\n          this,\n          str,\n          substitution.replace(/\\$<([^>]+)>/g, function(_, name) {\n            return '$' + groups[name];\n          })\n        );\n      } else if (typeof substitution === 'function') {\n        var _this = this;\n\n        return _super[Symbol.replace].call(this, str, function() {\n          var args = [];\n          args.push.apply(args, arguments);\n\n          if (typeof args[args.length - 1] !== 'object') {\n            args.push(buildGroups(args, _this));\n          }\n\n          return substitution.apply(this, args);\n        });\n      } else {\n        return _super[Symbol.replace].call(this, str, substitution);\n      }\n    };\n\n    function buildGroups(result, re) {\n      var g = _groups.get(re);\n\n      return Object.keys(g).reduce(function(groups, name) {\n        groups[name] = result[g[name]];\n        return groups;\n      }, Object.create(null));\n    }\n\n    return _wrapRegExp.apply(this, arguments);\n  }\n\n  var vectorMultiply = function vectorMultiply(v, amount) {\n    return createVector(v.x * amount, v.y * amount);\n  };\n\n  var vectorAdd = function vectorAdd(a, b) {\n    return createVector(a.x + b.x, a.y + b.y);\n  };\n\n  var vectorNormalize = function vectorNormalize(v) {\n    var l = Math.sqrt(v.x * v.x + v.y * v.y);\n    if (l === 0) {\n      return {\n        x: 0,\n        y: 0\n      };\n    }\n    return createVector(v.x / l, v.y / l);\n  };\n\n  var vectorRotate = function vectorRotate(v, radians, origin) {\n    var cos = Math.cos(radians);\n    var sin = Math.sin(radians);\n    var t = createVector(v.x - origin.x, v.y - origin.y);\n    return createVector(\n      origin.x + cos * t.x - sin * t.y,\n      origin.y + sin * t.x + cos * t.y\n    );\n  };\n\n  var createVector = function createVector() {\n    var x =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    return { x: x, y: y };\n  };\n\n  var getMarkupValue = function getMarkupValue(value, size) {\n    var scalar =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n    var axis = arguments.length > 3 ? arguments[3] : undefined;\n    if (typeof value === 'string') {\n      return parseFloat(value) * scalar;\n    }\n    if (typeof value === 'number') {\n      return value * (axis ? size[axis] : Math.min(size.width, size.height));\n    }\n    return;\n  };\n\n  var getMarkupStyles = function getMarkupStyles(markup, size, scale) {\n    var lineStyle = markup.borderStyle || markup.lineStyle || 'solid';\n    var fill = markup.backgroundColor || markup.fontColor || 'transparent';\n    var stroke = markup.borderColor || markup.lineColor || 'transparent';\n    var strokeWidth = getMarkupValue(\n      markup.borderWidth || markup.lineWidth,\n      size,\n      scale\n    );\n    var lineCap = markup.lineCap || 'round';\n    var lineJoin = markup.lineJoin || 'round';\n    var dashes =\n      typeof lineStyle === 'string'\n        ? ''\n        : lineStyle\n            .map(function(v) {\n              return getMarkupValue(v, size, scale);\n            })\n            .join(',');\n    var opacity = markup.opacity || 1;\n    return {\n      'stroke-linecap': lineCap,\n      'stroke-linejoin': lineJoin,\n      'stroke-width': strokeWidth || 0,\n      'stroke-dasharray': dashes,\n      stroke: stroke,\n      fill: fill,\n      opacity: opacity\n    };\n  };\n\n  var isDefined = function isDefined(value) {\n    return value != null;\n  };\n\n  var getMarkupRect = function getMarkupRect(rect, size) {\n    var scalar =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n    var left =\n      getMarkupValue(rect.x, size, scalar, 'width') ||\n      getMarkupValue(rect.left, size, scalar, 'width');\n    var top =\n      getMarkupValue(rect.y, size, scalar, 'height') ||\n      getMarkupValue(rect.top, size, scalar, 'height');\n    var width = getMarkupValue(rect.width, size, scalar, 'width');\n    var height = getMarkupValue(rect.height, size, scalar, 'height');\n    var right = getMarkupValue(rect.right, size, scalar, 'width');\n    var bottom = getMarkupValue(rect.bottom, size, scalar, 'height');\n\n    if (!isDefined(top)) {\n      if (isDefined(height) && isDefined(bottom)) {\n        top = size.height - height - bottom;\n      } else {\n        top = bottom;\n      }\n    }\n\n    if (!isDefined(left)) {\n      if (isDefined(width) && isDefined(right)) {\n        left = size.width - width - right;\n      } else {\n        left = right;\n      }\n    }\n\n    if (!isDefined(width)) {\n      if (isDefined(left) && isDefined(right)) {\n        width = size.width - left - right;\n      } else {\n        width = 0;\n      }\n    }\n\n    if (!isDefined(height)) {\n      if (isDefined(top) && isDefined(bottom)) {\n        height = size.height - top - bottom;\n      } else {\n        height = 0;\n      }\n    }\n\n    return {\n      x: left || 0,\n      y: top || 0,\n      width: width || 0,\n      height: height || 0\n    };\n  };\n\n  var pointsToPathShape = function pointsToPathShape(points) {\n    return points\n      .map(function(point, index) {\n        return ''\n          .concat(index === 0 ? 'M' : 'L', ' ')\n          .concat(point.x, ' ')\n          .concat(point.y);\n      })\n      .join(' ');\n  };\n\n  var setAttributes = function setAttributes(element, attr) {\n    return Object.keys(attr).forEach(function(key) {\n      return element.setAttribute(key, attr[key]);\n    });\n  };\n\n  var ns = 'http://www.w3.org/2000/svg';\n  var svg = function svg(tag, attr) {\n    var element = document.createElementNS(ns, tag);\n    if (attr) {\n      setAttributes(element, attr);\n    }\n    return element;\n  };\n\n  var updateRect = function updateRect(element) {\n    return setAttributes(\n      element,\n      Object.assign({}, element.rect, element.styles)\n    );\n  };\n\n  var updateEllipse = function updateEllipse(element) {\n    var cx = element.rect.x + element.rect.width * 0.5;\n    var cy = element.rect.y + element.rect.height * 0.5;\n    var rx = element.rect.width * 0.5;\n    var ry = element.rect.height * 0.5;\n    return setAttributes(\n      element,\n      Object.assign(\n        {\n          cx: cx,\n          cy: cy,\n          rx: rx,\n          ry: ry\n        },\n        element.styles\n      )\n    );\n  };\n\n  var IMAGE_FIT_STYLE = {\n    contain: 'xMidYMid meet',\n    cover: 'xMidYMid slice'\n  };\n\n  var updateImage = function updateImage(element, markup) {\n    setAttributes(\n      element,\n      Object.assign({}, element.rect, element.styles, {\n        preserveAspectRatio: IMAGE_FIT_STYLE[markup.fit] || 'none'\n      })\n    );\n  };\n\n  var TEXT_ANCHOR = {\n    left: 'start',\n    center: 'middle',\n    right: 'end'\n  };\n\n  var updateText = function updateText(element, markup, size, scale) {\n    var fontSize = getMarkupValue(markup.fontSize, size, scale);\n    var fontFamily = markup.fontFamily || 'sans-serif';\n    var fontWeight = markup.fontWeight || 'normal';\n    var textAlign = TEXT_ANCHOR[markup.textAlign] || 'start';\n\n    setAttributes(\n      element,\n      Object.assign({}, element.rect, element.styles, {\n        'stroke-width': 0,\n        'font-weight': fontWeight,\n        'font-size': fontSize,\n        'font-family': fontFamily,\n        'text-anchor': textAlign\n      })\n    );\n\n    // update text\n    if (element.text !== markup.text) {\n      element.text = markup.text;\n      element.textContent = markup.text.length ? markup.text : ' ';\n    }\n  };\n\n  var updateLine = function updateLine(element, markup, size, scale) {\n    setAttributes(\n      element,\n      Object.assign({}, element.rect, element.styles, {\n        fill: 'none'\n      })\n    );\n\n    var line = element.childNodes[0];\n    var begin = element.childNodes[1];\n    var end = element.childNodes[2];\n\n    var origin = element.rect;\n\n    var target = {\n      x: element.rect.x + element.rect.width,\n      y: element.rect.y + element.rect.height\n    };\n\n    setAttributes(line, {\n      x1: origin.x,\n      y1: origin.y,\n      x2: target.x,\n      y2: target.y\n    });\n\n    if (!markup.lineDecoration) return;\n\n    begin.style.display = 'none';\n    end.style.display = 'none';\n\n    var v = vectorNormalize({\n      x: target.x - origin.x,\n      y: target.y - origin.y\n    });\n\n    var l = getMarkupValue(0.05, size, scale);\n\n    if (markup.lineDecoration.indexOf('arrow-begin') !== -1) {\n      var arrowBeginRotationPoint = vectorMultiply(v, l);\n      var arrowBeginCenter = vectorAdd(origin, arrowBeginRotationPoint);\n      var arrowBeginA = vectorRotate(origin, 2, arrowBeginCenter);\n      var arrowBeginB = vectorRotate(origin, -2, arrowBeginCenter);\n\n      setAttributes(begin, {\n        style: 'display:block;',\n        d: 'M'\n          .concat(arrowBeginA.x, ',')\n          .concat(arrowBeginA.y, ' L')\n          .concat(origin.x, ',')\n          .concat(origin.y, ' L')\n          .concat(arrowBeginB.x, ',')\n          .concat(arrowBeginB.y)\n      });\n    }\n\n    if (markup.lineDecoration.indexOf('arrow-end') !== -1) {\n      var arrowEndRotationPoint = vectorMultiply(v, -l);\n      var arrowEndCenter = vectorAdd(target, arrowEndRotationPoint);\n      var arrowEndA = vectorRotate(target, 2, arrowEndCenter);\n      var arrowEndB = vectorRotate(target, -2, arrowEndCenter);\n\n      setAttributes(end, {\n        style: 'display:block;',\n        d: 'M'\n          .concat(arrowEndA.x, ',')\n          .concat(arrowEndA.y, ' L')\n          .concat(target.x, ',')\n          .concat(target.y, ' L')\n          .concat(arrowEndB.x, ',')\n          .concat(arrowEndB.y)\n      });\n    }\n  };\n\n  var updatePath = function updatePath(element, markup, size, scale) {\n    setAttributes(\n      element,\n      Object.assign({}, element.styles, {\n        fill: 'none',\n        d: pointsToPathShape(\n          markup.points.map(function(point) {\n            return {\n              x: getMarkupValue(point.x, size, scale, 'width'),\n              y: getMarkupValue(point.y, size, scale, 'height')\n            };\n          })\n        )\n      })\n    );\n  };\n\n  var createShape = function createShape(node) {\n    return function(markup) {\n      return svg(node, { id: markup.id });\n    };\n  };\n\n  var createImage = function createImage(markup) {\n    var shape = svg('image', {\n      id: markup.id,\n      'stroke-linecap': 'round',\n      'stroke-linejoin': 'round',\n      opacity: '0'\n    });\n\n    shape.onload = function() {\n      shape.setAttribute('opacity', markup.opacity || 1);\n    };\n    shape.setAttributeNS(\n      'http://www.w3.org/1999/xlink',\n      'xlink:href',\n      markup.src\n    );\n    return shape;\n  };\n\n  var createLine = function createLine(markup) {\n    var shape = svg('g', {\n      id: markup.id,\n      'stroke-linecap': 'round',\n      'stroke-linejoin': 'round'\n    });\n\n    var line = svg('line');\n    shape.appendChild(line);\n\n    var begin = svg('path');\n    shape.appendChild(begin);\n\n    var end = svg('path');\n    shape.appendChild(end);\n\n    return shape;\n  };\n\n  var CREATE_TYPE_ROUTES = {\n    image: createImage,\n    rect: createShape('rect'),\n    ellipse: createShape('ellipse'),\n    text: createShape('text'),\n    path: createShape('path'),\n    line: createLine\n  };\n\n  var UPDATE_TYPE_ROUTES = {\n    rect: updateRect,\n    ellipse: updateEllipse,\n    image: updateImage,\n    text: updateText,\n    path: updatePath,\n    line: updateLine\n  };\n\n  var createMarkupByType = function createMarkupByType(type, markup) {\n    return CREATE_TYPE_ROUTES[type](markup);\n  };\n\n  var updateMarkupByType = function updateMarkupByType(\n    element,\n    type,\n    markup,\n    size,\n    scale\n  ) {\n    if (type !== 'path') {\n      element.rect = getMarkupRect(markup, size, scale);\n    }\n    element.styles = getMarkupStyles(markup, size, scale);\n    UPDATE_TYPE_ROUTES[type](element, markup, size, scale);\n  };\n\n  var MARKUP_RECT = [\n    'x',\n    'y',\n    'left',\n    'top',\n    'right',\n    'bottom',\n    'width',\n    'height'\n  ];\n\n  var toOptionalFraction = function toOptionalFraction(value) {\n    return typeof value === 'string' && /%/.test(value)\n      ? parseFloat(value) / 100\n      : value;\n  };\n\n  // adds default markup properties, clones markup\n  var prepareMarkup = function prepareMarkup(markup) {\n    var _markup = _slicedToArray(markup, 2),\n      type = _markup[0],\n      props = _markup[1];\n\n    var rect = props.points\n      ? {}\n      : MARKUP_RECT.reduce(function(prev, curr) {\n          prev[curr] = toOptionalFraction(props[curr]);\n          return prev;\n        }, {});\n\n    return [\n      type,\n      Object.assign(\n        {\n          zIndex: 0\n        },\n        props,\n        rect\n      )\n    ];\n  };\n\n  var sortMarkupByZIndex = function sortMarkupByZIndex(a, b) {\n    if (a[1].zIndex > b[1].zIndex) {\n      return 1;\n    }\n    if (a[1].zIndex < b[1].zIndex) {\n      return -1;\n    }\n    return 0;\n  };\n\n  var createMarkupView = function createMarkupView(_) {\n    return _.utils.createView({\n      name: 'image-preview-markup',\n      tag: 'svg',\n      ignoreRect: true,\n      mixins: {\n        apis: ['width', 'height', 'crop', 'markup', 'resize', 'dirty']\n      },\n\n      write: function write(_ref) {\n        var root = _ref.root,\n          props = _ref.props;\n\n        if (!props.dirty) return;\n        var crop = props.crop,\n          resize = props.resize,\n          markup = props.markup;\n\n        var viewWidth = props.width;\n        var viewHeight = props.height;\n\n        var cropWidth = crop.width;\n        var cropHeight = crop.height;\n\n        if (resize) {\n          var _size = resize.size;\n\n          var outputWidth = _size && _size.width;\n          var outputHeight = _size && _size.height;\n          var outputFit = resize.mode;\n          var outputUpscale = resize.upscale;\n\n          if (outputWidth && !outputHeight) outputHeight = outputWidth;\n          if (outputHeight && !outputWidth) outputWidth = outputHeight;\n\n          var shouldUpscale =\n            cropWidth < outputWidth && cropHeight < outputHeight;\n\n          if (!shouldUpscale || (shouldUpscale && outputUpscale)) {\n            var scalarWidth = outputWidth / cropWidth;\n            var scalarHeight = outputHeight / cropHeight;\n\n            if (outputFit === 'force') {\n              cropWidth = outputWidth;\n              cropHeight = outputHeight;\n            } else {\n              var scalar;\n              if (outputFit === 'cover') {\n                scalar = Math.max(scalarWidth, scalarHeight);\n              } else if (outputFit === 'contain') {\n                scalar = Math.min(scalarWidth, scalarHeight);\n              }\n              cropWidth = cropWidth * scalar;\n              cropHeight = cropHeight * scalar;\n            }\n          }\n        }\n\n        var size = {\n          width: viewWidth,\n          height: viewHeight\n        };\n\n        root.element.setAttribute('width', size.width);\n        root.element.setAttribute('height', size.height);\n\n        var scale = Math.min(viewWidth / cropWidth, viewHeight / cropHeight);\n\n        // clear\n        root.element.innerHTML = '';\n\n        // get filter\n        var markupFilter = root.query('GET_IMAGE_PREVIEW_MARKUP_FILTER');\n\n        // draw new\n        markup\n          .filter(markupFilter)\n          .map(prepareMarkup)\n          .sort(sortMarkupByZIndex)\n          .forEach(function(markup) {\n            var _markup = _slicedToArray(markup, 2),\n              type = _markup[0],\n              settings = _markup[1];\n\n            // create\n            var element = createMarkupByType(type, settings);\n\n            // update\n            updateMarkupByType(element, type, settings, size, scale);\n\n            // add\n            root.element.appendChild(element);\n          });\n      }\n    });\n  };\n\n  var createVector$1 = function createVector(x, y) {\n    return { x: x, y: y };\n  };\n\n  var vectorDot = function vectorDot(a, b) {\n    return a.x * b.x + a.y * b.y;\n  };\n\n  var vectorSubtract = function vectorSubtract(a, b) {\n    return createVector$1(a.x - b.x, a.y - b.y);\n  };\n\n  var vectorDistanceSquared = function vectorDistanceSquared(a, b) {\n    return vectorDot(vectorSubtract(a, b), vectorSubtract(a, b));\n  };\n\n  var vectorDistance = function vectorDistance(a, b) {\n    return Math.sqrt(vectorDistanceSquared(a, b));\n  };\n\n  var getOffsetPointOnEdge = function getOffsetPointOnEdge(length, rotation) {\n    var a = length;\n\n    var A = 1.5707963267948966;\n    var B = rotation;\n    var C = 1.5707963267948966 - rotation;\n\n    var sinA = Math.sin(A);\n    var sinB = Math.sin(B);\n    var sinC = Math.sin(C);\n    var cosC = Math.cos(C);\n    var ratio = a / sinA;\n    var b = ratio * sinB;\n    var c = ratio * sinC;\n\n    return createVector$1(cosC * b, cosC * c);\n  };\n\n  var getRotatedRectSize = function getRotatedRectSize(rect, rotation) {\n    var w = rect.width;\n    var h = rect.height;\n\n    var hor = getOffsetPointOnEdge(w, rotation);\n    var ver = getOffsetPointOnEdge(h, rotation);\n\n    var tl = createVector$1(rect.x + Math.abs(hor.x), rect.y - Math.abs(hor.y));\n\n    var tr = createVector$1(\n      rect.x + rect.width + Math.abs(ver.y),\n      rect.y + Math.abs(ver.x)\n    );\n\n    var bl = createVector$1(\n      rect.x - Math.abs(ver.y),\n      rect.y + rect.height - Math.abs(ver.x)\n    );\n\n    return {\n      width: vectorDistance(tl, tr),\n      height: vectorDistance(tl, bl)\n    };\n  };\n\n  var calculateCanvasSize = function calculateCanvasSize(\n    image,\n    canvasAspectRatio\n  ) {\n    var zoom =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n    var imageAspectRatio = image.height / image.width;\n\n    // determine actual pixels on x and y axis\n    var canvasWidth = 1;\n    var canvasHeight = canvasAspectRatio;\n    var imgWidth = 1;\n    var imgHeight = imageAspectRatio;\n    if (imgHeight > canvasHeight) {\n      imgHeight = canvasHeight;\n      imgWidth = imgHeight / imageAspectRatio;\n    }\n\n    var scalar = Math.max(canvasWidth / imgWidth, canvasHeight / imgHeight);\n    var width = image.width / (zoom * scalar * imgWidth);\n    var height = width * canvasAspectRatio;\n\n    return {\n      width: width,\n      height: height\n    };\n  };\n\n  var getImageRectZoomFactor = function getImageRectZoomFactor(\n    imageRect,\n    cropRect,\n    rotation,\n    center\n  ) {\n    // calculate available space round image center position\n    var cx = center.x > 0.5 ? 1 - center.x : center.x;\n    var cy = center.y > 0.5 ? 1 - center.y : center.y;\n    var imageWidth = cx * 2 * imageRect.width;\n    var imageHeight = cy * 2 * imageRect.height;\n\n    // calculate rotated crop rectangle size\n    var rotatedCropSize = getRotatedRectSize(cropRect, rotation);\n\n    // calculate scalar required to fit image\n    return Math.max(\n      rotatedCropSize.width / imageWidth,\n      rotatedCropSize.height / imageHeight\n    );\n  };\n\n  var getCenteredCropRect = function getCenteredCropRect(\n    container,\n    aspectRatio\n  ) {\n    var width = container.width;\n    var height = width * aspectRatio;\n    if (height > container.height) {\n      height = container.height;\n      width = height / aspectRatio;\n    }\n    var x = (container.width - width) * 0.5;\n    var y = (container.height - height) * 0.5;\n\n    return {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    };\n  };\n\n  var getCurrentCropSize = function getCurrentCropSize(imageSize) {\n    var crop =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var zoom = crop.zoom,\n      rotation = crop.rotation,\n      center = crop.center,\n      aspectRatio = crop.aspectRatio;\n\n    if (!aspectRatio) aspectRatio = imageSize.height / imageSize.width;\n\n    var canvasSize = calculateCanvasSize(imageSize, aspectRatio, zoom);\n\n    var canvasCenter = {\n      x: canvasSize.width * 0.5,\n      y: canvasSize.height * 0.5\n    };\n\n    var stage = {\n      x: 0,\n      y: 0,\n      width: canvasSize.width,\n      height: canvasSize.height,\n      center: canvasCenter\n    };\n\n    var shouldLimit = typeof crop.scaleToFit === 'undefined' || crop.scaleToFit;\n\n    var stageZoomFactor = getImageRectZoomFactor(\n      imageSize,\n      getCenteredCropRect(stage, aspectRatio),\n      rotation,\n      shouldLimit ? center : { x: 0.5, y: 0.5 }\n    );\n\n    var scale = zoom * stageZoomFactor;\n\n    // start drawing\n    return {\n      widthFloat: canvasSize.width / scale,\n      heightFloat: canvasSize.height / scale,\n      width: Math.round(canvasSize.width / scale),\n      height: Math.round(canvasSize.height / scale)\n    };\n  };\n\n  var IMAGE_SCALE_SPRING_PROPS = {\n    type: 'spring',\n    stiffness: 0.5,\n    damping: 0.45,\n    mass: 10\n  };\n\n  // does horizontal and vertical flipping\n  var createBitmapView = function createBitmapView(_) {\n    return _.utils.createView({\n      name: 'image-bitmap',\n      ignoreRect: true,\n      mixins: { styles: ['scaleX', 'scaleY'] },\n      create: function create(_ref) {\n        var root = _ref.root,\n          props = _ref.props;\n        root.appendChild(props.image);\n      }\n    });\n  };\n\n  // shifts and rotates image\n  var createImageCanvasWrapper = function createImageCanvasWrapper(_) {\n    return _.utils.createView({\n      name: 'image-canvas-wrapper',\n      tag: 'div',\n      ignoreRect: true,\n      mixins: {\n        apis: ['crop', 'width', 'height'],\n\n        styles: [\n          'originX',\n          'originY',\n          'translateX',\n          'translateY',\n          'scaleX',\n          'scaleY',\n          'rotateZ'\n        ],\n\n        animations: {\n          originX: IMAGE_SCALE_SPRING_PROPS,\n          originY: IMAGE_SCALE_SPRING_PROPS,\n          scaleX: IMAGE_SCALE_SPRING_PROPS,\n          scaleY: IMAGE_SCALE_SPRING_PROPS,\n          translateX: IMAGE_SCALE_SPRING_PROPS,\n          translateY: IMAGE_SCALE_SPRING_PROPS,\n          rotateZ: IMAGE_SCALE_SPRING_PROPS\n        }\n      },\n\n      create: function create(_ref2) {\n        var root = _ref2.root,\n          props = _ref2.props;\n        props.width = props.image.width;\n        props.height = props.image.height;\n        root.ref.bitmap = root.appendChildView(\n          root.createChildView(createBitmapView(_), { image: props.image })\n        );\n      },\n      write: function write(_ref3) {\n        var root = _ref3.root,\n          props = _ref3.props;\n        var flip = props.crop.flip;\n        var bitmap = root.ref.bitmap;\n        bitmap.scaleX = flip.horizontal ? -1 : 1;\n        bitmap.scaleY = flip.vertical ? -1 : 1;\n      }\n    });\n  };\n\n  // clips canvas to correct aspect ratio\n  var createClipView = function createClipView(_) {\n    return _.utils.createView({\n      name: 'image-clip',\n      tag: 'div',\n      ignoreRect: true,\n      mixins: {\n        apis: [\n          'crop',\n          'markup',\n          'resize',\n          'width',\n          'height',\n          'dirty',\n          'background'\n        ],\n\n        styles: ['width', 'height', 'opacity'],\n        animations: {\n          opacity: { type: 'tween', duration: 250 }\n        }\n      },\n\n      didWriteView: function didWriteView(_ref4) {\n        var root = _ref4.root,\n          props = _ref4.props;\n        if (!props.background) return;\n        root.element.style.backgroundColor = props.background;\n      },\n      create: function create(_ref5) {\n        var root = _ref5.root,\n          props = _ref5.props;\n\n        root.ref.image = root.appendChildView(\n          root.createChildView(\n            createImageCanvasWrapper(_),\n            Object.assign({}, props)\n          )\n        );\n\n        root.ref.createMarkup = function() {\n          if (root.ref.markup) return;\n          root.ref.markup = root.appendChildView(\n            root.createChildView(createMarkupView(_), Object.assign({}, props))\n          );\n        };\n\n        root.ref.destroyMarkup = function() {\n          if (!root.ref.markup) return;\n          root.removeChildView(root.ref.markup);\n          root.ref.markup = null;\n        };\n\n        // set up transparency grid\n        var transparencyIndicator = root.query(\n          'GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR'\n        );\n        if (transparencyIndicator === null) return;\n\n        // grid pattern\n        if (transparencyIndicator === 'grid') {\n          root.element.dataset.transparencyIndicator = transparencyIndicator;\n        }\n        // basic color\n        else {\n          root.element.dataset.transparencyIndicator = 'color';\n        }\n      },\n      write: function write(_ref6) {\n        var root = _ref6.root,\n          props = _ref6.props,\n          shouldOptimize = _ref6.shouldOptimize;\n        var crop = props.crop,\n          markup = props.markup,\n          resize = props.resize,\n          dirty = props.dirty,\n          width = props.width,\n          height = props.height;\n\n        root.ref.image.crop = crop;\n\n        var stage = {\n          x: 0,\n          y: 0,\n          width: width,\n          height: height,\n          center: {\n            x: width * 0.5,\n            y: height * 0.5\n          }\n        };\n\n        var image = {\n          width: root.ref.image.width,\n          height: root.ref.image.height\n        };\n\n        var origin = {\n          x: crop.center.x * image.width,\n          y: crop.center.y * image.height\n        };\n\n        var translation = {\n          x: stage.center.x - image.width * crop.center.x,\n          y: stage.center.y - image.height * crop.center.y\n        };\n\n        var rotation = Math.PI * 2 + (crop.rotation % (Math.PI * 2));\n\n        var cropAspectRatio = crop.aspectRatio || image.height / image.width;\n\n        var shouldLimit =\n          typeof crop.scaleToFit === 'undefined' || crop.scaleToFit;\n\n        var stageZoomFactor = getImageRectZoomFactor(\n          image,\n          getCenteredCropRect(stage, cropAspectRatio),\n\n          rotation,\n          shouldLimit ? crop.center : { x: 0.5, y: 0.5 }\n        );\n\n        var scale = crop.zoom * stageZoomFactor;\n\n        // update markup view\n        if (markup && markup.length) {\n          root.ref.createMarkup();\n          root.ref.markup.width = width;\n          root.ref.markup.height = height;\n          root.ref.markup.resize = resize;\n          root.ref.markup.dirty = dirty;\n          root.ref.markup.markup = markup;\n          root.ref.markup.crop = getCurrentCropSize(image, crop);\n        } else if (root.ref.markup) {\n          root.ref.destroyMarkup();\n        }\n\n        // update image view\n        var imageView = root.ref.image;\n\n        // don't update clip layout\n        if (shouldOptimize) {\n          imageView.originX = null;\n          imageView.originY = null;\n          imageView.translateX = null;\n          imageView.translateY = null;\n          imageView.rotateZ = null;\n          imageView.scaleX = null;\n          imageView.scaleY = null;\n          return;\n        }\n\n        imageView.originX = origin.x;\n        imageView.originY = origin.y;\n        imageView.translateX = translation.x;\n        imageView.translateY = translation.y;\n        imageView.rotateZ = rotation;\n        imageView.scaleX = scale;\n        imageView.scaleY = scale;\n      }\n    });\n  };\n\n  var createImageView = function createImageView(_) {\n    return _.utils.createView({\n      name: 'image-preview',\n      tag: 'div',\n      ignoreRect: true,\n      mixins: {\n        apis: ['image', 'crop', 'markup', 'resize', 'dirty', 'background'],\n\n        styles: ['translateY', 'scaleX', 'scaleY', 'opacity'],\n\n        animations: {\n          scaleX: IMAGE_SCALE_SPRING_PROPS,\n          scaleY: IMAGE_SCALE_SPRING_PROPS,\n          translateY: IMAGE_SCALE_SPRING_PROPS,\n          opacity: { type: 'tween', duration: 400 }\n        }\n      },\n\n      create: function create(_ref7) {\n        var root = _ref7.root,\n          props = _ref7.props;\n        root.ref.clip = root.appendChildView(\n          root.createChildView(createClipView(_), {\n            id: props.id,\n            image: props.image,\n            crop: props.crop,\n            markup: props.markup,\n            resize: props.resize,\n            dirty: props.dirty,\n            background: props.background\n          })\n        );\n      },\n      write: function write(_ref8) {\n        var root = _ref8.root,\n          props = _ref8.props,\n          shouldOptimize = _ref8.shouldOptimize;\n        var clip = root.ref.clip;\n        var image = props.image,\n          crop = props.crop,\n          markup = props.markup,\n          resize = props.resize,\n          dirty = props.dirty;\n\n        clip.crop = crop;\n        clip.markup = markup;\n        clip.resize = resize;\n        clip.dirty = dirty;\n\n        // don't update clip layout\n        clip.opacity = shouldOptimize ? 0 : 1;\n\n        // don't re-render if optimizing or hidden (width will be zero resulting in weird animations)\n        if (shouldOptimize || root.rect.element.hidden) return;\n\n        // calculate scaled preview image size\n        var imageAspectRatio = image.height / image.width;\n        var aspectRatio = crop.aspectRatio || imageAspectRatio;\n\n        // calculate container size\n        var containerWidth = root.rect.inner.width;\n        var containerHeight = root.rect.inner.height;\n\n        var fixedPreviewHeight = root.query('GET_IMAGE_PREVIEW_HEIGHT');\n        var minPreviewHeight = root.query('GET_IMAGE_PREVIEW_MIN_HEIGHT');\n        var maxPreviewHeight = root.query('GET_IMAGE_PREVIEW_MAX_HEIGHT');\n\n        var panelAspectRatio = root.query('GET_PANEL_ASPECT_RATIO');\n        var allowMultiple = root.query('GET_ALLOW_MULTIPLE');\n\n        if (panelAspectRatio && !allowMultiple) {\n          fixedPreviewHeight = containerWidth * panelAspectRatio;\n          aspectRatio = panelAspectRatio;\n        }\n\n        // determine clip width and height\n        var clipHeight =\n          fixedPreviewHeight !== null\n            ? fixedPreviewHeight\n            : Math.max(\n                minPreviewHeight,\n                Math.min(containerWidth * aspectRatio, maxPreviewHeight)\n              );\n\n        var clipWidth = clipHeight / aspectRatio;\n        if (clipWidth > containerWidth) {\n          clipWidth = containerWidth;\n          clipHeight = clipWidth * aspectRatio;\n        }\n\n        if (clipHeight > containerHeight) {\n          clipHeight = containerHeight;\n          clipWidth = containerHeight / aspectRatio;\n        }\n\n        clip.width = clipWidth;\n        clip.height = clipHeight;\n      }\n    });\n  };\n\n  var SVG_MASK =\n    '<svg width=\"500\" height=\"200\" viewBox=\"0 0 500 200\" preserveAspectRatio=\"none\">\\n    <defs>\\n        <radialGradient id=\"gradient-__UID__\" cx=\".5\" cy=\"1.25\" r=\"1.15\">\\n            <stop offset=\\'50%\\' stop-color=\\'#000000\\'/>\\n            <stop offset=\\'56%\\' stop-color=\\'#0a0a0a\\'/>\\n            <stop offset=\\'63%\\' stop-color=\\'#262626\\'/>\\n            <stop offset=\\'69%\\' stop-color=\\'#4f4f4f\\'/>\\n            <stop offset=\\'75%\\' stop-color=\\'#808080\\'/>\\n            <stop offset=\\'81%\\' stop-color=\\'#b1b1b1\\'/>\\n            <stop offset=\\'88%\\' stop-color=\\'#dadada\\'/>\\n            <stop offset=\\'94%\\' stop-color=\\'#f6f6f6\\'/>\\n            <stop offset=\\'100%\\' stop-color=\\'#ffffff\\'/>\\n        </radialGradient>\\n        <mask id=\"mask-__UID__\">\\n            <rect x=\"0\" y=\"0\" width=\"500\" height=\"200\" fill=\"url(#gradient-__UID__)\"></rect>\\n        </mask>\\n    </defs>\\n    <rect x=\"0\" width=\"500\" height=\"200\" fill=\"currentColor\" mask=\"url(#mask-__UID__)\"></rect>\\n</svg>';\n\n  var SVGMaskUniqueId = 0;\n\n  var createImageOverlayView = function createImageOverlayView(fpAPI) {\n    return fpAPI.utils.createView({\n      name: 'image-preview-overlay',\n      tag: 'div',\n      ignoreRect: true,\n      create: function create(_ref) {\n        var root = _ref.root,\n          props = _ref.props;\n        var mask = SVG_MASK;\n        if (document.querySelector('base')) {\n          var url = new URL(\n            window.location.href.replace(window.location.hash, '')\n          ).href;\n          mask = mask.replace(/url\\(\\#/g, 'url(' + url + '#');\n        }\n\n        SVGMaskUniqueId++;\n        root.element.classList.add(\n          'filepond--image-preview-overlay-'.concat(props.status)\n        );\n\n        root.element.innerHTML = mask.replace(/__UID__/g, SVGMaskUniqueId);\n      },\n      mixins: {\n        styles: ['opacity'],\n        animations: {\n          opacity: { type: 'spring', mass: 25 }\n        }\n      }\n    });\n  };\n\n  /**\n   * Bitmap Worker\n   */\n  var BitmapWorker = function BitmapWorker() {\n    self.onmessage = function(e) {\n      createImageBitmap(e.data.message.file).then(function(bitmap) {\n        self.postMessage({ id: e.data.id, message: bitmap }, [bitmap]);\n      });\n    };\n  };\n\n  /**\n   * ColorMatrix Worker\n   */\n  var ColorMatrixWorker = function ColorMatrixWorker() {\n    self.onmessage = function(e) {\n      var imageData = e.data.message.imageData;\n      var matrix = e.data.message.colorMatrix;\n\n      var data = imageData.data;\n      var l = data.length;\n\n      var m11 = matrix[0];\n      var m12 = matrix[1];\n      var m13 = matrix[2];\n      var m14 = matrix[3];\n      var m15 = matrix[4];\n\n      var m21 = matrix[5];\n      var m22 = matrix[6];\n      var m23 = matrix[7];\n      var m24 = matrix[8];\n      var m25 = matrix[9];\n\n      var m31 = matrix[10];\n      var m32 = matrix[11];\n      var m33 = matrix[12];\n      var m34 = matrix[13];\n      var m35 = matrix[14];\n\n      var m41 = matrix[15];\n      var m42 = matrix[16];\n      var m43 = matrix[17];\n      var m44 = matrix[18];\n      var m45 = matrix[19];\n\n      var index = 0,\n        r = 0.0,\n        g = 0.0,\n        b = 0.0,\n        a = 0.0;\n\n      for (; index < l; index += 4) {\n        r = data[index] / 255;\n        g = data[index + 1] / 255;\n        b = data[index + 2] / 255;\n        a = data[index + 3] / 255;\n        data[index] = Math.max(\n          0,\n          Math.min((r * m11 + g * m12 + b * m13 + a * m14 + m15) * 255, 255)\n        );\n        data[index + 1] = Math.max(\n          0,\n          Math.min((r * m21 + g * m22 + b * m23 + a * m24 + m25) * 255, 255)\n        );\n        data[index + 2] = Math.max(\n          0,\n          Math.min((r * m31 + g * m32 + b * m33 + a * m34 + m35) * 255, 255)\n        );\n        data[index + 3] = Math.max(\n          0,\n          Math.min((r * m41 + g * m42 + b * m43 + a * m44 + m45) * 255, 255)\n        );\n      }\n\n      self.postMessage({ id: e.data.id, message: imageData }, [\n        imageData.data.buffer\n      ]);\n    };\n  };\n\n  var getImageSize = function getImageSize(url, cb) {\n    var image = new Image();\n    image.onload = function() {\n      var width = image.naturalWidth;\n      var height = image.naturalHeight;\n      image = null;\n      cb(width, height);\n    };\n    image.src = url;\n  };\n\n  var transforms = {\n    1: function _() {\n      return [1, 0, 0, 1, 0, 0];\n    },\n    2: function _(width) {\n      return [-1, 0, 0, 1, width, 0];\n    },\n    3: function _(width, height) {\n      return [-1, 0, 0, -1, width, height];\n    },\n    4: function _(width, height) {\n      return [1, 0, 0, -1, 0, height];\n    },\n    5: function _() {\n      return [0, 1, 1, 0, 0, 0];\n    },\n    6: function _(width, height) {\n      return [0, 1, -1, 0, height, 0];\n    },\n    7: function _(width, height) {\n      return [0, -1, -1, 0, height, width];\n    },\n    8: function _(width) {\n      return [0, -1, 1, 0, 0, width];\n    }\n  };\n\n  var fixImageOrientation = function fixImageOrientation(\n    ctx,\n    width,\n    height,\n    orientation\n  ) {\n    // no orientation supplied\n    if (orientation === -1) {\n      return;\n    }\n\n    ctx.transform.apply(ctx, transforms[orientation](width, height));\n  };\n\n  // draws the preview image to canvas\n  var createPreviewImage = function createPreviewImage(\n    data,\n    width,\n    height,\n    orientation\n  ) {\n    // can't draw on half pixels\n    width = Math.round(width);\n    height = Math.round(height);\n\n    // draw image\n    var canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    var ctx = canvas.getContext('2d');\n\n    // if is rotated incorrectly swap width and height\n    if (orientation >= 5 && orientation <= 8) {\n      var _ref = [height, width];\n      width = _ref[0];\n      height = _ref[1];\n    }\n\n    // correct image orientation\n    fixImageOrientation(ctx, width, height, orientation);\n\n    // draw the image\n    ctx.drawImage(data, 0, 0, width, height);\n\n    return canvas;\n  };\n\n  var isBitmap = function isBitmap(file) {\n    return /^image/.test(file.type) && !/svg/.test(file.type);\n  };\n\n  var MAX_WIDTH = 10;\n  var MAX_HEIGHT = 10;\n\n  var calculateAverageColor = function calculateAverageColor(image) {\n    var scalar = Math.min(MAX_WIDTH / image.width, MAX_HEIGHT / image.height);\n\n    var canvas = document.createElement('canvas');\n    var ctx = canvas.getContext('2d');\n    var width = (canvas.width = Math.ceil(image.width * scalar));\n    var height = (canvas.height = Math.ceil(image.height * scalar));\n    ctx.drawImage(image, 0, 0, width, height);\n    var data = null;\n    try {\n      data = ctx.getImageData(0, 0, width, height).data;\n    } catch (e) {\n      return null;\n    }\n    var l = data.length;\n\n    var r = 0;\n    var g = 0;\n    var b = 0;\n    var i = 0;\n\n    for (; i < l; i += 4) {\n      r += data[i] * data[i];\n      g += data[i + 1] * data[i + 1];\n      b += data[i + 2] * data[i + 2];\n    }\n\n    r = averageColor(r, l);\n    g = averageColor(g, l);\n    b = averageColor(b, l);\n\n    return { r: r, g: g, b: b };\n  };\n\n  var averageColor = function averageColor(c, l) {\n    return Math.floor(Math.sqrt(c / (l / 4)));\n  };\n\n  var cloneCanvas = function cloneCanvas(origin, target) {\n    target = target || document.createElement('canvas');\n    target.width = origin.width;\n    target.height = origin.height;\n    var ctx = target.getContext('2d');\n    ctx.drawImage(origin, 0, 0);\n    return target;\n  };\n\n  var cloneImageData = function cloneImageData(imageData) {\n    var id;\n    try {\n      id = new ImageData(imageData.width, imageData.height);\n    } catch (e) {\n      var canvas = document.createElement('canvas');\n      var ctx = canvas.getContext('2d');\n      id = ctx.createImageData(imageData.width, imageData.height);\n    }\n    id.data.set(new Uint8ClampedArray(imageData.data));\n    return id;\n  };\n\n  var loadImage = function loadImage(url) {\n    return new Promise(function(resolve, reject) {\n      var img = new Image();\n      img.crossOrigin = 'Anonymous';\n      img.onload = function() {\n        resolve(img);\n      };\n      img.onerror = function(e) {\n        reject(e);\n      };\n      img.src = url;\n    });\n  };\n\n  var createImageWrapperView = function createImageWrapperView(_) {\n    // create overlay view\n    var OverlayView = createImageOverlayView(_);\n\n    var ImageView = createImageView(_);\n    var createWorker = _.utils.createWorker;\n\n    var applyFilter = function applyFilter(root, filter, target) {\n      return new Promise(function(resolve) {\n        // will store image data for future filter updates\n        if (!root.ref.imageData) {\n          root.ref.imageData = target\n            .getContext('2d')\n            .getImageData(0, 0, target.width, target.height);\n        }\n\n        // get image data reference\n        var imageData = cloneImageData(root.ref.imageData);\n\n        if (!filter || filter.length !== 20) {\n          target.getContext('2d').putImageData(imageData, 0, 0);\n          return resolve();\n        }\n\n        var worker = createWorker(ColorMatrixWorker);\n        worker.post(\n          {\n            imageData: imageData,\n            colorMatrix: filter\n          },\n\n          function(response) {\n            // apply filtered colors\n            target.getContext('2d').putImageData(response, 0, 0);\n\n            // stop worker\n            worker.terminate();\n\n            // done!\n            resolve();\n          },\n          [imageData.data.buffer]\n        );\n      });\n    };\n\n    var removeImageView = function removeImageView(root, imageView) {\n      root.removeChildView(imageView);\n      imageView.image.width = 1;\n      imageView.image.height = 1;\n      imageView._destroy();\n    };\n\n    // remove an image\n    var shiftImage = function shiftImage(_ref) {\n      var root = _ref.root;\n      var imageView = root.ref.images.shift();\n      imageView.opacity = 0;\n      imageView.translateY = -15;\n      root.ref.imageViewBin.push(imageView);\n      return imageView;\n    };\n\n    // add new image\n    var pushImage = function pushImage(_ref2) {\n      var root = _ref2.root,\n        props = _ref2.props,\n        image = _ref2.image;\n      var id = props.id;\n      var item = root.query('GET_ITEM', { id: id });\n      if (!item) return;\n\n      var crop = item.getMetadata('crop') || {\n        center: {\n          x: 0.5,\n          y: 0.5\n        },\n\n        flip: {\n          horizontal: false,\n          vertical: false\n        },\n\n        zoom: 1,\n        rotation: 0,\n        aspectRatio: null\n      };\n\n      var background = root.query(\n        'GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR'\n      );\n\n      var markup;\n      var resize;\n      var dirty = false;\n      if (root.query('GET_IMAGE_PREVIEW_MARKUP_SHOW')) {\n        markup = item.getMetadata('markup') || [];\n        resize = item.getMetadata('resize');\n        dirty = true;\n      }\n\n      // append image presenter\n      var imageView = root.appendChildView(\n        root.createChildView(ImageView, {\n          id: id,\n          image: image,\n          crop: crop,\n          resize: resize,\n          markup: markup,\n          dirty: dirty,\n          background: background,\n          opacity: 0,\n          scaleX: 1.15,\n          scaleY: 1.15,\n          translateY: 15\n        }),\n\n        root.childViews.length\n      );\n\n      root.ref.images.push(imageView);\n\n      // reveal the preview image\n      imageView.opacity = 1;\n      imageView.scaleX = 1;\n      imageView.scaleY = 1;\n      imageView.translateY = 0;\n\n      // the preview is now ready to be drawn\n      setTimeout(function() {\n        root.dispatch('DID_IMAGE_PREVIEW_SHOW', { id: id });\n      }, 250);\n    };\n\n    var updateImage = function updateImage(_ref3) {\n      var root = _ref3.root,\n        props = _ref3.props;\n      var item = root.query('GET_ITEM', { id: props.id });\n      if (!item) return;\n      var imageView = root.ref.images[root.ref.images.length - 1];\n      imageView.crop = item.getMetadata('crop');\n      imageView.background = root.query(\n        'GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR'\n      );\n\n      if (root.query('GET_IMAGE_PREVIEW_MARKUP_SHOW')) {\n        imageView.dirty = true;\n        imageView.resize = item.getMetadata('resize');\n        imageView.markup = item.getMetadata('markup');\n      }\n    };\n\n    // replace image preview\n    var didUpdateItemMetadata = function didUpdateItemMetadata(_ref4) {\n      var root = _ref4.root,\n        props = _ref4.props,\n        action = _ref4.action;\n      // only filter and crop trigger redraw\n      if (!/crop|filter|markup|resize/.test(action.change.key)) return;\n\n      // no images to update, exit\n      if (!root.ref.images.length) return;\n\n      // no item found, exit\n      var item = root.query('GET_ITEM', { id: props.id });\n      if (!item) return;\n\n      // for now, update existing image when filtering\n      if (/filter/.test(action.change.key)) {\n        var imageView = root.ref.images[root.ref.images.length - 1];\n        applyFilter(root, action.change.value, imageView.image);\n        return;\n      }\n\n      if (/crop|markup|resize/.test(action.change.key)) {\n        var crop = item.getMetadata('crop');\n        var image = root.ref.images[root.ref.images.length - 1];\n\n        // if aspect ratio has changed, we need to create a new image\n        if (\n          crop &&\n          crop.aspectRatio &&\n          image.crop &&\n          image.crop.aspectRatio &&\n          Math.abs(crop.aspectRatio - image.crop.aspectRatio) > 0.00001\n        ) {\n          var _imageView = shiftImage({ root: root });\n          pushImage({\n            root: root,\n            props: props,\n            image: cloneCanvas(_imageView.image)\n          });\n        }\n        // if not, we can update the current image\n        else {\n          updateImage({ root: root, props: props });\n        }\n      }\n    };\n\n    var canCreateImageBitmap = function canCreateImageBitmap(file) {\n      // Firefox versions before 58 will freeze when running createImageBitmap\n      // in a Web Worker so we detect those versions and return false for support\n      var userAgent = window.navigator.userAgent;\n      var isFirefox = userAgent.match(/Firefox\\/([0-9]+)\\./);\n      var firefoxVersion = isFirefox ? parseInt(isFirefox[1]) : null;\n      if (firefoxVersion !== null && firefoxVersion <= 58) return false;\n\n      return 'createImageBitmap' in window && isBitmap(file);\n    };\n\n    /**\n     * Write handler for when preview container has been created\n     */\n    var didCreatePreviewContainer = function didCreatePreviewContainer(_ref5) {\n      var root = _ref5.root,\n        props = _ref5.props;\n      var id = props.id;\n\n      // we need to get the file data to determine the eventual image size\n      var item = root.query('GET_ITEM', id);\n      if (!item) return;\n\n      // get url to file (we'll revoke it later on when done)\n      var fileURL = URL.createObjectURL(item.file);\n\n      // determine image size of this item\n      getImageSize(fileURL, function(width, height) {\n        // we can now scale the panel to the final size\n        root.dispatch('DID_IMAGE_PREVIEW_CALCULATE_SIZE', {\n          id: id,\n          width: width,\n          height: height\n        });\n      });\n    };\n\n    var drawPreview = function drawPreview(_ref6) {\n      var root = _ref6.root,\n        props = _ref6.props;\n      var id = props.id;\n\n      // we need to get the file data to determine the eventual image size\n      var item = root.query('GET_ITEM', id);\n      if (!item) return;\n\n      // get url to file (we'll revoke it later on when done)\n      var fileURL = URL.createObjectURL(item.file);\n\n      // fallback\n      var loadPreviewFallback = function loadPreviewFallback() {\n        // let's scale the image in the main thread :(\n        loadImage(fileURL).then(previewImageLoaded);\n      };\n\n      // image is now ready\n      var previewImageLoaded = function previewImageLoaded(imageData) {\n        // the file url is no longer needed\n        URL.revokeObjectURL(fileURL);\n\n        // draw the scaled down version here and use that as source so bitmapdata can be closed\n        // orientation info\n        var exif = item.getMetadata('exif') || {};\n        var orientation = exif.orientation || -1;\n\n        // get width and height from action, and swap if orientation is incorrect\n        var width = imageData.width,\n          height = imageData.height;\n\n        // if no width or height, just return early.\n        if (!width || !height) return;\n\n        if (orientation >= 5 && orientation <= 8) {\n          var _ref7 = [height, width];\n          width = _ref7[0];\n          height = _ref7[1];\n        }\n\n        // scale canvas based on pixel density\n        // we multiply by .75 as that creates smaller but still clear images on screens with high res displays\n        var pixelDensityFactor = Math.max(1, window.devicePixelRatio * 0.75);\n\n        // we want as much pixels to work with as possible,\n        // this multiplies the minimum image resolution,\n        // so when zooming in it doesn't get too blurry\n        var zoomFactor = root.query('GET_IMAGE_PREVIEW_ZOOM_FACTOR');\n\n        // imaeg scale factor\n        var scaleFactor = zoomFactor * pixelDensityFactor;\n\n        // calculate scaled preview image size\n        var previewImageRatio = height / width;\n\n        // calculate image preview height and width\n        var previewContainerWidth = root.rect.element.width;\n        var previewContainerHeight = root.rect.element.height;\n\n        var imageWidth = previewContainerWidth;\n        var imageHeight = imageWidth * previewImageRatio;\n\n        if (previewImageRatio > 1) {\n          imageWidth = Math.min(width, previewContainerWidth * scaleFactor);\n          imageHeight = imageWidth * previewImageRatio;\n        } else {\n          imageHeight = Math.min(height, previewContainerHeight * scaleFactor);\n          imageWidth = imageHeight / previewImageRatio;\n        }\n\n        // transfer to image tag so no canvas memory wasted on iOS\n        var previewImage = createPreviewImage(\n          imageData,\n          imageWidth,\n          imageHeight,\n          orientation\n        );\n\n        // done\n        var done = function done() {\n          // calculate average image color, disabled for now\n          var averageColor = root.query(\n            'GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR'\n          )\n            ? calculateAverageColor(data)\n            : null;\n          item.setMetadata('color', averageColor, true);\n\n          // data has been transferred to canvas ( if was ImageBitmap )\n          if ('close' in imageData) {\n            imageData.close();\n          }\n\n          // show the overlay\n          root.ref.overlayShadow.opacity = 1;\n\n          // create the first image\n          pushImage({ root: root, props: props, image: previewImage });\n        };\n\n        // apply filter\n        var filter = item.getMetadata('filter');\n        if (filter) {\n          applyFilter(root, filter, previewImage).then(done);\n        } else {\n          done();\n        }\n      };\n\n      // if we support scaling using createImageBitmap we use a worker\n      if (canCreateImageBitmap(item.file)) {\n        // let's scale the image in a worker\n        var worker = createWorker(BitmapWorker);\n\n        worker.post(\n          {\n            file: item.file\n          },\n\n          function(imageBitmap) {\n            // destroy worker\n            worker.terminate();\n\n            // no bitmap returned, must be something wrong,\n            // try the oldschool way\n            if (!imageBitmap) {\n              loadPreviewFallback();\n              return;\n            }\n\n            // yay we got our bitmap, let's continue showing the preview\n            previewImageLoaded(imageBitmap);\n          }\n        );\n      } else {\n        // create fallback preview\n        loadPreviewFallback();\n      }\n    };\n\n    /**\n     * Write handler for when the preview image is ready to be animated\n     */\n    var didDrawPreview = function didDrawPreview(_ref8) {\n      var root = _ref8.root;\n      // get last added image\n      var image = root.ref.images[root.ref.images.length - 1];\n      image.translateY = 0;\n      image.scaleX = 1.0;\n      image.scaleY = 1.0;\n      image.opacity = 1;\n    };\n\n    /**\n     * Write handler for when the preview has been loaded\n     */\n    var restoreOverlay = function restoreOverlay(_ref9) {\n      var root = _ref9.root;\n      root.ref.overlayShadow.opacity = 1;\n      root.ref.overlayError.opacity = 0;\n      root.ref.overlaySuccess.opacity = 0;\n    };\n\n    var didThrowError = function didThrowError(_ref10) {\n      var root = _ref10.root;\n      root.ref.overlayShadow.opacity = 0.25;\n      root.ref.overlayError.opacity = 1;\n    };\n\n    var didCompleteProcessing = function didCompleteProcessing(_ref11) {\n      var root = _ref11.root;\n      root.ref.overlayShadow.opacity = 0.25;\n      root.ref.overlaySuccess.opacity = 1;\n    };\n\n    /**\n     * Constructor\n     */\n    var create = function create(_ref12) {\n      var root = _ref12.root;\n      // image view\n      root.ref.images = [];\n\n      // the preview image data (we need this to filter the image)\n      root.ref.imageData = null;\n\n      // image bin\n      root.ref.imageViewBin = [];\n\n      // image overlays\n      root.ref.overlayShadow = root.appendChildView(\n        root.createChildView(OverlayView, {\n          opacity: 0,\n          status: 'idle'\n        })\n      );\n\n      root.ref.overlaySuccess = root.appendChildView(\n        root.createChildView(OverlayView, {\n          opacity: 0,\n          status: 'success'\n        })\n      );\n\n      root.ref.overlayError = root.appendChildView(\n        root.createChildView(OverlayView, {\n          opacity: 0,\n          status: 'failure'\n        })\n      );\n    };\n\n    return _.utils.createView({\n      name: 'image-preview-wrapper',\n      create: create,\n      styles: ['height'],\n      apis: ['height'],\n      destroy: function destroy(_ref13) {\n        var root = _ref13.root;\n        // we resize the image so memory on iOS 12 is released more quickly (it seems)\n        root.ref.images.forEach(function(imageView) {\n          imageView.image.width = 1;\n          imageView.image.height = 1;\n        });\n      },\n      didWriteView: function didWriteView(_ref14) {\n        var root = _ref14.root;\n        root.ref.images.forEach(function(imageView) {\n          imageView.dirty = false;\n        });\n      },\n      write: _.utils.createRoute(\n        {\n          // image preview stated\n          DID_IMAGE_PREVIEW_DRAW: didDrawPreview,\n          DID_IMAGE_PREVIEW_CONTAINER_CREATE: didCreatePreviewContainer,\n          DID_FINISH_CALCULATE_PREVIEWSIZE: drawPreview,\n          DID_UPDATE_ITEM_METADATA: didUpdateItemMetadata,\n\n          // file states\n          DID_THROW_ITEM_LOAD_ERROR: didThrowError,\n          DID_THROW_ITEM_PROCESSING_ERROR: didThrowError,\n          DID_THROW_ITEM_INVALID: didThrowError,\n          DID_COMPLETE_ITEM_PROCESSING: didCompleteProcessing,\n          DID_START_ITEM_PROCESSING: restoreOverlay,\n          DID_REVERT_ITEM_PROCESSING: restoreOverlay\n        },\n\n        function(_ref15) {\n          var root = _ref15.root;\n          // views on death row\n          var viewsToRemove = root.ref.imageViewBin.filter(function(imageView) {\n            return imageView.opacity === 0;\n          });\n\n          // views to retain\n          root.ref.imageViewBin = root.ref.imageViewBin.filter(function(\n            imageView\n          ) {\n            return imageView.opacity > 0;\n          });\n\n          // remove these views\n          viewsToRemove.forEach(function(imageView) {\n            return removeImageView(root, imageView);\n          });\n          viewsToRemove.length = 0;\n        }\n      )\n    });\n  };\n\n  /**\n   * Image Preview Plugin\n   */\n  var plugin = function plugin(fpAPI) {\n    var addFilter = fpAPI.addFilter,\n      utils = fpAPI.utils;\n    var Type = utils.Type,\n      createRoute = utils.createRoute,\n      isFile = utils.isFile;\n\n    // imagePreviewView\n    var imagePreviewView = createImageWrapperView(fpAPI);\n\n    // called for each view that is created right after the 'create' method\n    addFilter('CREATE_VIEW', function(viewAPI) {\n      // get reference to created view\n      var is = viewAPI.is,\n        view = viewAPI.view,\n        query = viewAPI.query;\n\n      // only hook up to item view and only if is enabled for this cropper\n      if (!is('file') || !query('GET_ALLOW_IMAGE_PREVIEW')) return;\n\n      // create the image preview plugin, but only do so if the item is an image\n      var didLoadItem = function didLoadItem(_ref) {\n        var root = _ref.root,\n          props = _ref.props;\n        var id = props.id;\n        var item = query('GET_ITEM', id);\n\n        // item could theoretically have been removed in the mean time\n        if (!item || !isFile(item.file) || item.archived) return;\n\n        // get the file object\n        var file = item.file;\n\n        // exit if this is not an image\n        if (!isPreviewableImage(file)) return;\n\n        // test if is filtered\n        if (!query('GET_IMAGE_PREVIEW_FILTER_ITEM')(item)) return;\n\n        // exit if image size is too high and no createImageBitmap support\n        // this would simply bring the browser to its knees and that is not what we want\n        var supportsCreateImageBitmap = 'createImageBitmap' in (window || {});\n        var maxPreviewFileSize = query('GET_IMAGE_PREVIEW_MAX_FILE_SIZE');\n        if (\n          !supportsCreateImageBitmap &&\n          maxPreviewFileSize &&\n          file.size > maxPreviewFileSize\n        )\n          return;\n\n        // set preview view\n        root.ref.imagePreview = view.appendChildView(\n          view.createChildView(imagePreviewView, { id: id })\n        );\n\n        // update height if is fixed\n        var fixedPreviewHeight = root.query('GET_IMAGE_PREVIEW_HEIGHT');\n        if (fixedPreviewHeight) {\n          root.dispatch('DID_UPDATE_PANEL_HEIGHT', {\n            id: item.id,\n            height: fixedPreviewHeight\n          });\n        }\n\n        // now ready\n        var queue =\n          !supportsCreateImageBitmap &&\n          file.size > query('GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE');\n        root.dispatch('DID_IMAGE_PREVIEW_CONTAINER_CREATE', { id: id }, queue);\n      };\n\n      var rescaleItem = function rescaleItem(root, props) {\n        if (!root.ref.imagePreview) return;\n        var id = props.id;\n\n        // get item\n        var item = root.query('GET_ITEM', { id: id });\n        if (!item) return;\n\n        // if is fixed height or panel has aspect ratio, exit here, height has already been defined\n        var panelAspectRatio = root.query('GET_PANEL_ASPECT_RATIO');\n        var itemPanelAspectRatio = root.query('GET_ITEM_PANEL_ASPECT_RATIO');\n        var fixedHeight = root.query('GET_IMAGE_PREVIEW_HEIGHT');\n        if (panelAspectRatio || itemPanelAspectRatio || fixedHeight) return;\n\n        // no data!\n        var _root$ref = root.ref,\n          imageWidth = _root$ref.imageWidth,\n          imageHeight = _root$ref.imageHeight;\n        if (!imageWidth || !imageHeight) return;\n\n        // get height min and max\n        var minPreviewHeight = root.query('GET_IMAGE_PREVIEW_MIN_HEIGHT');\n        var maxPreviewHeight = root.query('GET_IMAGE_PREVIEW_MAX_HEIGHT');\n\n        // orientation info\n        var exif = item.getMetadata('exif') || {};\n        var orientation = exif.orientation || -1;\n\n        // get width and height from action, and swap of orientation is incorrect\n        if (orientation >= 5 && orientation <= 8) {\n          var _ref2 = [imageHeight, imageWidth];\n          imageWidth = _ref2[0];\n          imageHeight = _ref2[1];\n        }\n\n        // scale up width and height when we're dealing with an SVG\n        if (!isBitmap(item.file) || root.query('GET_IMAGE_PREVIEW_UPSCALE')) {\n          var scalar = 2048 / imageWidth;\n          imageWidth *= scalar;\n          imageHeight *= scalar;\n        }\n\n        // image aspect ratio\n        var imageAspectRatio = imageHeight / imageWidth;\n\n        // we need the item to get to the crop size\n        var previewAspectRatio =\n          (item.getMetadata('crop') || {}).aspectRatio || imageAspectRatio;\n\n        // preview height range\n        var previewHeightMax = Math.max(\n          minPreviewHeight,\n          Math.min(imageHeight, maxPreviewHeight)\n        );\n\n        var itemWidth = root.rect.element.width;\n        var previewHeight = Math.min(\n          itemWidth * previewAspectRatio,\n          previewHeightMax\n        );\n\n        // request update to panel height\n        root.dispatch('DID_UPDATE_PANEL_HEIGHT', {\n          id: item.id,\n          height: previewHeight\n        });\n      };\n\n      var didResizeView = function didResizeView(_ref3) {\n        var root = _ref3.root;\n        // actions in next write operation\n        root.ref.shouldRescale = true;\n      };\n\n      var didUpdateItemMetadata = function didUpdateItemMetadata(_ref4) {\n        var root = _ref4.root,\n          action = _ref4.action;\n        if (action.change.key !== 'crop') return;\n\n        // actions in next write operation\n        root.ref.shouldRescale = true;\n      };\n\n      var didCalculatePreviewSize = function didCalculatePreviewSize(_ref5) {\n        var root = _ref5.root,\n          action = _ref5.action;\n        // remember dimensions\n        root.ref.imageWidth = action.width;\n        root.ref.imageHeight = action.height;\n\n        // actions in next write operation\n        root.ref.shouldRescale = true;\n        root.ref.shouldDrawPreview = true;\n\n        // as image load could take a while and fire when draw loop is resting we need to give it a kick\n        root.dispatch('KICK');\n      };\n\n      // start writing\n      view.registerWriter(\n        createRoute(\n          {\n            DID_RESIZE_ROOT: didResizeView,\n            DID_STOP_RESIZE: didResizeView,\n            DID_LOAD_ITEM: didLoadItem,\n            DID_IMAGE_PREVIEW_CALCULATE_SIZE: didCalculatePreviewSize,\n            DID_UPDATE_ITEM_METADATA: didUpdateItemMetadata\n          },\n\n          function(_ref6) {\n            var root = _ref6.root,\n              props = _ref6.props;\n            // no preview view attached\n            if (!root.ref.imagePreview) return;\n\n            // don't do anything while hidden\n            if (root.rect.element.hidden) return;\n\n            // resize the item panel\n            if (root.ref.shouldRescale) {\n              rescaleItem(root, props);\n              root.ref.shouldRescale = false;\n            }\n\n            if (root.ref.shouldDrawPreview) {\n              // queue till next frame so we're sure the height has been applied this forces the draw image call inside the wrapper view to use the correct height\n              requestAnimationFrame(function() {\n                // this requestAnimationFrame nesting is horrible but it fixes an issue with 100hz displays on Chrome\n                // https://github.com/pqina/filepond-plugin-image-preview/issues/57\n                requestAnimationFrame(function() {\n                  root.dispatch('DID_FINISH_CALCULATE_PREVIEWSIZE', {\n                    id: props.id\n                  });\n                });\n              });\n\n              root.ref.shouldDrawPreview = false;\n            }\n          }\n        )\n      );\n    });\n\n    // expose plugin\n    return {\n      options: {\n        // Enable or disable image preview\n        allowImagePreview: [true, Type.BOOLEAN],\n\n        // filters file items to determine which are shown as preview\n        imagePreviewFilterItem: [\n          function() {\n            return true;\n          },\n          Type.FUNCTION\n        ],\n\n        // Fixed preview height\n        imagePreviewHeight: [null, Type.INT],\n\n        // Min image height\n        imagePreviewMinHeight: [44, Type.INT],\n\n        // Max image height\n        imagePreviewMaxHeight: [256, Type.INT],\n\n        // Max size of preview file for when createImageBitmap is not supported\n        imagePreviewMaxFileSize: [null, Type.INT],\n\n        // The amount of extra pixels added to the image preview to allow comfortable zooming\n        imagePreviewZoomFactor: [2, Type.INT],\n\n        // Should we upscale small images to fit the max bounding box of the preview area\n        imagePreviewUpscale: [false, Type.BOOLEAN],\n\n        // Max size of preview file that we allow to try to instant preview if createImageBitmap is not supported, else image is queued for loading\n        imagePreviewMaxInstantPreviewFileSize: [1000000, Type.INT],\n\n        // Style of the transparancy indicator used behind images\n        imagePreviewTransparencyIndicator: [null, Type.STRING],\n\n        // Enables or disables reading average image color\n        imagePreviewCalculateAverageImageColor: [false, Type.BOOLEAN],\n\n        // Enables or disables the previewing of markup\n        imagePreviewMarkupShow: [true, Type.BOOLEAN],\n\n        // Allows filtering of markup to only show certain shapes\n        imagePreviewMarkupFilter: [\n          function() {\n            return true;\n          },\n          Type.FUNCTION\n        ]\n      }\n    };\n  };\n\n  // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n  var isBrowser =\n    typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  if (isBrowser) {\n    document.dispatchEvent(\n      new CustomEvent('FilePond:pluginloaded', { detail: plugin })\n    );\n  }\n\n  return plugin;\n});\n","/*!\n * FilePondPluginFileValidateType 1.2.9\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined'\n        ? (module.exports = factory())\n        : typeof define === 'function' && define.amd\n        ? define(factory)\n        : ((global = global || self), (global.FilePondPluginFileValidateType = factory()));\n})(this, function() {\n    'use strict';\n\n    var plugin = function plugin(_ref) {\n        var addFilter = _ref.addFilter,\n            utils = _ref.utils;\n        // get quick reference to Type utils\n        var Type = utils.Type,\n            isString = utils.isString,\n            replaceInString = utils.replaceInString,\n            guesstimateMimeType = utils.guesstimateMimeType,\n            getExtensionFromFilename = utils.getExtensionFromFilename,\n            getFilenameFromURL = utils.getFilenameFromURL;\n\n        var mimeTypeMatchesWildCard = function mimeTypeMatchesWildCard(mimeType, wildcard) {\n            var mimeTypeGroup = (/^[^/]+/.exec(mimeType) || []).pop(); // image/png -> image\n            var wildcardGroup = wildcard.slice(0, -2); // image/* -> image\n            return mimeTypeGroup === wildcardGroup;\n        };\n\n        var isValidMimeType = function isValidMimeType(acceptedTypes, userInputType) {\n            return acceptedTypes.some(function(acceptedType) {\n                // accepted is wildcard mime type\n                if (/\\*$/.test(acceptedType)) {\n                    return mimeTypeMatchesWildCard(userInputType, acceptedType);\n                }\n\n                // is normal mime type\n                return acceptedType === userInputType;\n            });\n        };\n\n        var getItemType = function getItemType(item) {\n            // if the item is a url we guess the mime type by the extension\n            var type = '';\n            if (isString(item)) {\n                var filename = getFilenameFromURL(item);\n                var extension = getExtensionFromFilename(filename);\n                if (extension) {\n                    type = guesstimateMimeType(extension);\n                }\n            } else {\n                type = item.type;\n            }\n\n            return type;\n        };\n\n        var validateFile = function validateFile(item, acceptedFileTypes, typeDetector) {\n            // no types defined, everything is allowed \\o/\n            if (acceptedFileTypes.length === 0) {\n                return true;\n            }\n\n            // gets the item type\n            var type = getItemType(item);\n\n            // no type detector, test now\n            if (!typeDetector) {\n                return isValidMimeType(acceptedFileTypes, type);\n            }\n\n            // use type detector\n            return new Promise(function(resolve, reject) {\n                typeDetector(item, type)\n                    .then(function(detectedType) {\n                        if (isValidMimeType(acceptedFileTypes, detectedType)) {\n                            resolve();\n                        } else {\n                            reject();\n                        }\n                    })\n                    .catch(reject);\n            });\n        };\n\n        var applyMimeTypeMap = function applyMimeTypeMap(map) {\n            return function(acceptedFileType) {\n                return map[acceptedFileType] === null\n                    ? false\n                    : map[acceptedFileType] || acceptedFileType;\n            };\n        };\n\n        // setup attribute mapping for accept\n        addFilter('SET_ATTRIBUTE_TO_OPTION_MAP', function(map) {\n            return Object.assign(map, {\n                accept: 'acceptedFileTypes',\n            });\n        });\n\n        // filtering if an item is allowed in hopper\n        addFilter('ALLOW_HOPPER_ITEM', function(file, _ref2) {\n            var query = _ref2.query;\n            // if we are not doing file type validation exit\n            if (!query('GET_ALLOW_FILE_TYPE_VALIDATION')) {\n                return true;\n            }\n\n            // we validate the file against the accepted file types\n            return validateFile(file, query('GET_ACCEPTED_FILE_TYPES'));\n        });\n\n        // called for each file that is loaded\n        // right before it is set to the item state\n        // should return a promise\n        addFilter('LOAD_FILE', function(file, _ref3) {\n            var query = _ref3.query;\n            return new Promise(function(resolve, reject) {\n                if (!query('GET_ALLOW_FILE_TYPE_VALIDATION')) {\n                    resolve(file);\n                    return;\n                }\n\n                var acceptedFileTypes = query('GET_ACCEPTED_FILE_TYPES');\n\n                // custom type detector method\n                var typeDetector = query('GET_FILE_VALIDATE_TYPE_DETECT_TYPE');\n\n                // if invalid, exit here\n                var validationResult = validateFile(file, acceptedFileTypes, typeDetector);\n\n                var handleRejection = function handleRejection() {\n                    var acceptedFileTypesMapped = acceptedFileTypes\n                        .map(\n                            applyMimeTypeMap(\n                                query('GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP')\n                            )\n                        )\n                        .filter(function(label) {\n                            return label !== false;\n                        });\n\n                    var acceptedFileTypesMappedUnique = acceptedFileTypesMapped.filter(function(\n                        item,\n                        index\n                    ) {\n                        return acceptedFileTypesMapped.indexOf(item) === index;\n                    });\n\n                    reject({\n                        status: {\n                            main: query('GET_LABEL_FILE_TYPE_NOT_ALLOWED'),\n                            sub: replaceInString(\n                                query('GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES'),\n                                {\n                                    allTypes: acceptedFileTypesMappedUnique.join(', '),\n                                    allButLastType: acceptedFileTypesMappedUnique\n                                        .slice(0, -1)\n                                        .join(', '),\n                                    lastType:\n                                        acceptedFileTypesMappedUnique[\n                                            acceptedFileTypesMappedUnique.length - 1\n                                        ],\n                                }\n                            ),\n                        },\n                    });\n                };\n\n                // has returned new filename immidiately\n                if (typeof validationResult === 'boolean') {\n                    if (!validationResult) {\n                        return handleRejection();\n                    }\n                    return resolve(file);\n                }\n\n                // is promise\n                validationResult\n                    .then(function() {\n                        resolve(file);\n                    })\n                    .catch(handleRejection);\n            });\n        });\n\n        // expose plugin\n        return {\n            // default options\n            options: {\n                // Enable or disable file type validation\n                allowFileTypeValidation: [true, Type.BOOLEAN],\n\n                // What file types to accept\n                acceptedFileTypes: [[], Type.ARRAY],\n                // - must be comma separated\n                // - mime types: image/png, image/jpeg, image/gif\n                // - extensions: .png, .jpg, .jpeg ( not enabled yet )\n                // - wildcards: image/*\n\n                // label to show when a type is not allowed\n                labelFileTypeNotAllowed: ['File is of invalid type', Type.STRING],\n\n                // nicer label\n                fileValidateTypeLabelExpectedTypes: [\n                    'Expects {allButLastType} or {lastType}',\n                    Type.STRING,\n                ],\n\n                // map mime types to extensions\n                fileValidateTypeLabelExpectedTypesMap: [{}, Type.OBJECT],\n\n                // Custom function to detect type of file\n                fileValidateTypeDetectType: [null, Type.FUNCTION],\n            },\n        };\n    };\n\n    // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n    var isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n    if (isBrowser) {\n        document.dispatchEvent(new CustomEvent('FilePond:pluginloaded', { detail: plugin }));\n    }\n\n    return plugin;\n});\n","/*!\n * FilePondPluginImageTransform 3.8.7\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined'\n        ? (module.exports = factory())\n        : typeof define === 'function' && define.amd\n        ? define(factory)\n        : ((global = global || self), (global.FilePondPluginImageTransform = factory()));\n})(this, function() {\n    'use strict';\n\n    // test if file is of type image\n    var isImage = function isImage(file) {\n        return /^image/.test(file.type);\n    };\n\n    var getFilenameWithoutExtension = function getFilenameWithoutExtension(name) {\n        return name.substr(0, name.lastIndexOf('.')) || name;\n    };\n\n    // only handles image/jpg, image/jpeg, image/png, and image/svg+xml for now\n    var ExtensionMap = {\n        jpeg: 'jpg',\n        'svg+xml': 'svg',\n    };\n\n    var renameFileToMatchMimeType = function renameFileToMatchMimeType(filename, mimeType) {\n        var name = getFilenameWithoutExtension(filename);\n        var type = mimeType.split('/')[1];\n        var extension = ExtensionMap[type] || type;\n        return ''.concat(name, '.').concat(extension);\n    };\n\n    // returns all the valid output formats we can encode towards\n    var getValidOutputMimeType = function getValidOutputMimeType(type) {\n        return /jpeg|png|svg\\+xml/.test(type) ? type : 'image/jpeg';\n    };\n\n    // test if file is of type image\n    var isImage$1 = function isImage(file) {\n        return /^image/.test(file.type);\n    };\n\n    var MATRICES = {\n        1: function _() {\n            return [1, 0, 0, 1, 0, 0];\n        },\n        2: function _(width) {\n            return [-1, 0, 0, 1, width, 0];\n        },\n        3: function _(width, height) {\n            return [-1, 0, 0, -1, width, height];\n        },\n        4: function _(width, height) {\n            return [1, 0, 0, -1, 0, height];\n        },\n        5: function _() {\n            return [0, 1, 1, 0, 0, 0];\n        },\n        6: function _(width, height) {\n            return [0, 1, -1, 0, height, 0];\n        },\n        7: function _(width, height) {\n            return [0, -1, -1, 0, height, width];\n        },\n        8: function _(width) {\n            return [0, -1, 1, 0, 0, width];\n        },\n    };\n\n    var getImageOrientationMatrix = function getImageOrientationMatrix(width, height, orientation) {\n        if (orientation === -1) {\n            orientation = 1;\n        }\n        return MATRICES[orientation](width, height);\n    };\n\n    var createVector = function createVector(x, y) {\n        return { x: x, y: y };\n    };\n\n    var vectorDot = function vectorDot(a, b) {\n        return a.x * b.x + a.y * b.y;\n    };\n\n    var vectorSubtract = function vectorSubtract(a, b) {\n        return createVector(a.x - b.x, a.y - b.y);\n    };\n\n    var vectorDistanceSquared = function vectorDistanceSquared(a, b) {\n        return vectorDot(vectorSubtract(a, b), vectorSubtract(a, b));\n    };\n\n    var vectorDistance = function vectorDistance(a, b) {\n        return Math.sqrt(vectorDistanceSquared(a, b));\n    };\n\n    var getOffsetPointOnEdge = function getOffsetPointOnEdge(length, rotation) {\n        var a = length;\n\n        var A = 1.5707963267948966;\n        var B = rotation;\n        var C = 1.5707963267948966 - rotation;\n\n        var sinA = Math.sin(A);\n        var sinB = Math.sin(B);\n        var sinC = Math.sin(C);\n        var cosC = Math.cos(C);\n        var ratio = a / sinA;\n        var b = ratio * sinB;\n        var c = ratio * sinC;\n\n        return createVector(cosC * b, cosC * c);\n    };\n\n    var getRotatedRectSize = function getRotatedRectSize(rect, rotation) {\n        var w = rect.width;\n        var h = rect.height;\n\n        var hor = getOffsetPointOnEdge(w, rotation);\n        var ver = getOffsetPointOnEdge(h, rotation);\n\n        var tl = createVector(rect.x + Math.abs(hor.x), rect.y - Math.abs(hor.y));\n\n        var tr = createVector(rect.x + rect.width + Math.abs(ver.y), rect.y + Math.abs(ver.x));\n\n        var bl = createVector(rect.x - Math.abs(ver.y), rect.y + rect.height - Math.abs(ver.x));\n\n        return {\n            width: vectorDistance(tl, tr),\n            height: vectorDistance(tl, bl),\n        };\n    };\n\n    var getImageRectZoomFactor = function getImageRectZoomFactor(imageRect, cropRect) {\n        var rotation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        var center =\n            arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : { x: 0.5, y: 0.5 };\n\n        // calculate available space round image center position\n        var cx = center.x > 0.5 ? 1 - center.x : center.x;\n        var cy = center.y > 0.5 ? 1 - center.y : center.y;\n        var imageWidth = cx * 2 * imageRect.width;\n        var imageHeight = cy * 2 * imageRect.height;\n\n        // calculate rotated crop rectangle size\n        var rotatedCropSize = getRotatedRectSize(cropRect, rotation);\n\n        return Math.max(rotatedCropSize.width / imageWidth, rotatedCropSize.height / imageHeight);\n    };\n\n    var getCenteredCropRect = function getCenteredCropRect(container, aspectRatio) {\n        var width = container.width;\n        var height = width * aspectRatio;\n        if (height > container.height) {\n            height = container.height;\n            width = height / aspectRatio;\n        }\n        var x = (container.width - width) * 0.5;\n        var y = (container.height - height) * 0.5;\n\n        return {\n            x: x,\n            y: y,\n            width: width,\n            height: height,\n        };\n    };\n\n    var calculateCanvasSize = function calculateCanvasSize(image, canvasAspectRatio) {\n        var zoom = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n        var imageAspectRatio = image.height / image.width;\n\n        // determine actual pixels on x and y axis\n        var canvasWidth = 1;\n        var canvasHeight = canvasAspectRatio;\n        var imgWidth = 1;\n        var imgHeight = imageAspectRatio;\n        if (imgHeight > canvasHeight) {\n            imgHeight = canvasHeight;\n            imgWidth = imgHeight / imageAspectRatio;\n        }\n\n        var scalar = Math.max(canvasWidth / imgWidth, canvasHeight / imgHeight);\n        var width = image.width / (zoom * scalar * imgWidth);\n        var height = width * canvasAspectRatio;\n\n        return {\n            width: width,\n            height: height,\n        };\n    };\n\n    var canvasRelease = function canvasRelease(canvas) {\n        canvas.width = 1;\n        canvas.height = 1;\n        var ctx = canvas.getContext('2d');\n        ctx.clearRect(0, 0, 1, 1);\n    };\n\n    var isFlipped = function isFlipped(flip) {\n        return flip && (flip.horizontal || flip.vertical);\n    };\n\n    var getBitmap = function getBitmap(image, orientation, flip) {\n        if (orientation <= 1 && !isFlipped(flip)) {\n            image.width = image.naturalWidth;\n            image.height = image.naturalHeight;\n            return image;\n        }\n\n        var canvas = document.createElement('canvas');\n        var width = image.naturalWidth;\n        var height = image.naturalHeight;\n\n        // if is rotated incorrectly swap width and height\n        var swapped = orientation >= 5 && orientation <= 8;\n        if (swapped) {\n            canvas.width = height;\n            canvas.height = width;\n        } else {\n            canvas.width = width;\n            canvas.height = height;\n        }\n\n        // draw the image but first fix orientation and set correct flip\n        var ctx = canvas.getContext('2d');\n\n        // get base transformation matrix\n        if (orientation) {\n            ctx.transform.apply(ctx, getImageOrientationMatrix(width, height, orientation));\n        }\n\n        if (isFlipped(flip)) {\n            // flip horizontal\n            // [-1, 0, 0, 1, width, 0]\n            var matrix = [1, 0, 0, 1, 0, 0];\n            if ((!swapped && flip.horizontal) || swapped & flip.vertical) {\n                matrix[0] = -1;\n                matrix[4] = width;\n            }\n\n            // flip vertical\n            // [1, 0, 0, -1, 0, height]\n            if ((!swapped && flip.vertical) || (swapped && flip.horizontal)) {\n                matrix[3] = -1;\n                matrix[5] = height;\n            }\n\n            ctx.transform.apply(ctx, matrix);\n        }\n\n        ctx.drawImage(image, 0, 0, width, height);\n\n        return canvas;\n    };\n\n    var imageToImageData = function imageToImageData(imageElement, orientation) {\n        var crop = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n        var canvasMemoryLimit = options.canvasMemoryLimit,\n            _options$background = options.background,\n            background = _options$background === void 0 ? null : _options$background;\n\n        var zoom = crop.zoom || 1;\n\n        // fixes possible image orientation problems by drawing the image on the correct canvas\n        var bitmap = getBitmap(imageElement, orientation, crop.flip);\n        var imageSize = {\n            width: bitmap.width,\n            height: bitmap.height,\n        };\n\n        var aspectRatio = crop.aspectRatio || imageSize.height / imageSize.width;\n\n        var canvasSize = calculateCanvasSize(imageSize, aspectRatio, zoom);\n\n        if (canvasMemoryLimit) {\n            var requiredMemory = canvasSize.width * canvasSize.height;\n            if (requiredMemory > canvasMemoryLimit) {\n                var scalar = Math.sqrt(canvasMemoryLimit) / Math.sqrt(requiredMemory);\n                imageSize.width = Math.floor(imageSize.width * scalar);\n                imageSize.height = Math.floor(imageSize.height * scalar);\n                canvasSize = calculateCanvasSize(imageSize, aspectRatio, zoom);\n            }\n        }\n\n        var canvas = document.createElement('canvas');\n\n        var canvasCenter = {\n            x: canvasSize.width * 0.5,\n            y: canvasSize.height * 0.5,\n        };\n\n        var stage = {\n            x: 0,\n            y: 0,\n            width: canvasSize.width,\n            height: canvasSize.height,\n            center: canvasCenter,\n        };\n\n        var shouldLimit = typeof crop.scaleToFit === 'undefined' || crop.scaleToFit;\n\n        var scale =\n            zoom *\n            getImageRectZoomFactor(\n                imageSize,\n                getCenteredCropRect(stage, aspectRatio),\n                crop.rotation,\n                shouldLimit ? crop.center : { x: 0.5, y: 0.5 }\n            );\n\n        // start drawing\n        canvas.width = Math.round(canvasSize.width / scale);\n        canvas.height = Math.round(canvasSize.height / scale);\n\n        canvasCenter.x /= scale;\n        canvasCenter.y /= scale;\n\n        var imageOffset = {\n            x: canvasCenter.x - imageSize.width * (crop.center ? crop.center.x : 0.5),\n            y: canvasCenter.y - imageSize.height * (crop.center ? crop.center.y : 0.5),\n        };\n\n        var ctx = canvas.getContext('2d');\n        if (background) {\n            ctx.fillStyle = background;\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\n        }\n\n        // move to draw offset\n        ctx.translate(canvasCenter.x, canvasCenter.y);\n        ctx.rotate(crop.rotation || 0);\n\n        // draw the image\n        ctx.drawImage(\n            bitmap,\n            imageOffset.x - canvasCenter.x,\n            imageOffset.y - canvasCenter.y,\n            imageSize.width,\n            imageSize.height\n        );\n\n        // get data from canvas\n        var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\n        // release canvas\n        canvasRelease(canvas);\n\n        // return data\n        return imageData;\n    };\n\n    /**\n     * Polyfill toBlob for Edge\n     */\n    var IS_BROWSER = (function() {\n        return typeof window !== 'undefined' && typeof window.document !== 'undefined';\n    })();\n    if (IS_BROWSER) {\n        if (!HTMLCanvasElement.prototype.toBlob) {\n            Object.defineProperty(HTMLCanvasElement.prototype, 'toBlob', {\n                value: function value(callback, type, quality) {\n                    var dataURL = this.toDataURL(type, quality).split(',')[1];\n                    setTimeout(function() {\n                        var binStr = atob(dataURL);\n                        var len = binStr.length;\n                        var arr = new Uint8Array(len);\n                        for (var i = 0; i < len; i++) {\n                            arr[i] = binStr.charCodeAt(i);\n                        }\n                        callback(new Blob([arr], { type: type || 'image/png' }));\n                    });\n                },\n            });\n        }\n    }\n\n    var canvasToBlob = function canvasToBlob(canvas, options) {\n        var beforeCreateBlob =\n            arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n        return new Promise(function(resolve) {\n            var promisedImage = beforeCreateBlob ? beforeCreateBlob(canvas) : canvas;\n            Promise.resolve(promisedImage).then(function(canvas) {\n                canvas.toBlob(resolve, options.type, options.quality);\n            });\n        });\n    };\n\n    var vectorMultiply = function vectorMultiply(v, amount) {\n        return createVector$1(v.x * amount, v.y * amount);\n    };\n\n    var vectorAdd = function vectorAdd(a, b) {\n        return createVector$1(a.x + b.x, a.y + b.y);\n    };\n\n    var vectorNormalize = function vectorNormalize(v) {\n        var l = Math.sqrt(v.x * v.x + v.y * v.y);\n        if (l === 0) {\n            return {\n                x: 0,\n                y: 0,\n            };\n        }\n        return createVector$1(v.x / l, v.y / l);\n    };\n\n    var vectorRotate = function vectorRotate(v, radians, origin) {\n        var cos = Math.cos(radians);\n        var sin = Math.sin(radians);\n        var t = createVector$1(v.x - origin.x, v.y - origin.y);\n        return createVector$1(origin.x + cos * t.x - sin * t.y, origin.y + sin * t.x + cos * t.y);\n    };\n\n    var createVector$1 = function createVector() {\n        var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n        var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        return { x: x, y: y };\n    };\n\n    var getMarkupValue = function getMarkupValue(value, size) {\n        var scalar = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n        var axis = arguments.length > 3 ? arguments[3] : undefined;\n        if (typeof value === 'string') {\n            return parseFloat(value) * scalar;\n        }\n        if (typeof value === 'number') {\n            return value * (axis ? size[axis] : Math.min(size.width, size.height));\n        }\n        return;\n    };\n\n    var getMarkupStyles = function getMarkupStyles(markup, size, scale) {\n        var lineStyle = markup.borderStyle || markup.lineStyle || 'solid';\n        var fill = markup.backgroundColor || markup.fontColor || 'transparent';\n        var stroke = markup.borderColor || markup.lineColor || 'transparent';\n        var strokeWidth = getMarkupValue(markup.borderWidth || markup.lineWidth, size, scale);\n        var lineCap = markup.lineCap || 'round';\n        var lineJoin = markup.lineJoin || 'round';\n        var dashes =\n            typeof lineStyle === 'string'\n                ? ''\n                : lineStyle\n                      .map(function(v) {\n                          return getMarkupValue(v, size, scale);\n                      })\n                      .join(',');\n        var opacity = markup.opacity || 1;\n        return {\n            'stroke-linecap': lineCap,\n            'stroke-linejoin': lineJoin,\n            'stroke-width': strokeWidth || 0,\n            'stroke-dasharray': dashes,\n            stroke: stroke,\n            fill: fill,\n            opacity: opacity,\n        };\n    };\n\n    var isDefined = function isDefined(value) {\n        return value != null;\n    };\n\n    var getMarkupRect = function getMarkupRect(rect, size) {\n        var scalar = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n        var left =\n            getMarkupValue(rect.x, size, scalar, 'width') ||\n            getMarkupValue(rect.left, size, scalar, 'width');\n        var top =\n            getMarkupValue(rect.y, size, scalar, 'height') ||\n            getMarkupValue(rect.top, size, scalar, 'height');\n        var width = getMarkupValue(rect.width, size, scalar, 'width');\n        var height = getMarkupValue(rect.height, size, scalar, 'height');\n        var right = getMarkupValue(rect.right, size, scalar, 'width');\n        var bottom = getMarkupValue(rect.bottom, size, scalar, 'height');\n\n        if (!isDefined(top)) {\n            if (isDefined(height) && isDefined(bottom)) {\n                top = size.height - height - bottom;\n            } else {\n                top = bottom;\n            }\n        }\n\n        if (!isDefined(left)) {\n            if (isDefined(width) && isDefined(right)) {\n                left = size.width - width - right;\n            } else {\n                left = right;\n            }\n        }\n\n        if (!isDefined(width)) {\n            if (isDefined(left) && isDefined(right)) {\n                width = size.width - left - right;\n            } else {\n                width = 0;\n            }\n        }\n\n        if (!isDefined(height)) {\n            if (isDefined(top) && isDefined(bottom)) {\n                height = size.height - top - bottom;\n            } else {\n                height = 0;\n            }\n        }\n\n        return {\n            x: left || 0,\n            y: top || 0,\n            width: width || 0,\n            height: height || 0,\n        };\n    };\n\n    var pointsToPathShape = function pointsToPathShape(points) {\n        return points\n            .map(function(point, index) {\n                return ''\n                    .concat(index === 0 ? 'M' : 'L', ' ')\n                    .concat(point.x, ' ')\n                    .concat(point.y);\n            })\n            .join(' ');\n    };\n\n    var setAttributes = function setAttributes(element, attr) {\n        return Object.keys(attr).forEach(function(key) {\n            return element.setAttribute(key, attr[key]);\n        });\n    };\n\n    var ns = 'http://www.w3.org/2000/svg';\n    var svg = function svg(tag, attr) {\n        var element = document.createElementNS(ns, tag);\n        if (attr) {\n            setAttributes(element, attr);\n        }\n        return element;\n    };\n\n    var updateRect = function updateRect(element) {\n        return setAttributes(element, Object.assign({}, element.rect, element.styles));\n    };\n\n    var updateEllipse = function updateEllipse(element) {\n        var cx = element.rect.x + element.rect.width * 0.5;\n        var cy = element.rect.y + element.rect.height * 0.5;\n        var rx = element.rect.width * 0.5;\n        var ry = element.rect.height * 0.5;\n        return setAttributes(\n            element,\n            Object.assign(\n                {\n                    cx: cx,\n                    cy: cy,\n                    rx: rx,\n                    ry: ry,\n                },\n                element.styles\n            )\n        );\n    };\n\n    var IMAGE_FIT_STYLE = {\n        contain: 'xMidYMid meet',\n        cover: 'xMidYMid slice',\n    };\n\n    var updateImage = function updateImage(element, markup) {\n        setAttributes(\n            element,\n            Object.assign({}, element.rect, element.styles, {\n                preserveAspectRatio: IMAGE_FIT_STYLE[markup.fit] || 'none',\n            })\n        );\n    };\n\n    var TEXT_ANCHOR = {\n        left: 'start',\n        center: 'middle',\n        right: 'end',\n    };\n\n    var updateText = function updateText(element, markup, size, scale) {\n        var fontSize = getMarkupValue(markup.fontSize, size, scale);\n        var fontFamily = markup.fontFamily || 'sans-serif';\n        var fontWeight = markup.fontWeight || 'normal';\n        var textAlign = TEXT_ANCHOR[markup.textAlign] || 'start';\n\n        setAttributes(\n            element,\n            Object.assign({}, element.rect, element.styles, {\n                'stroke-width': 0,\n                'font-weight': fontWeight,\n                'font-size': fontSize,\n                'font-family': fontFamily,\n                'text-anchor': textAlign,\n            })\n        );\n\n        // update text\n        if (element.text !== markup.text) {\n            element.text = markup.text;\n            element.textContent = markup.text.length ? markup.text : ' ';\n        }\n    };\n\n    var updateLine = function updateLine(element, markup, size, scale) {\n        setAttributes(\n            element,\n            Object.assign({}, element.rect, element.styles, {\n                fill: 'none',\n            })\n        );\n\n        var line = element.childNodes[0];\n        var begin = element.childNodes[1];\n        var end = element.childNodes[2];\n\n        var origin = element.rect;\n\n        var target = {\n            x: element.rect.x + element.rect.width,\n            y: element.rect.y + element.rect.height,\n        };\n\n        setAttributes(line, {\n            x1: origin.x,\n            y1: origin.y,\n            x2: target.x,\n            y2: target.y,\n        });\n\n        if (!markup.lineDecoration) return;\n\n        begin.style.display = 'none';\n        end.style.display = 'none';\n\n        var v = vectorNormalize({\n            x: target.x - origin.x,\n            y: target.y - origin.y,\n        });\n\n        var l = getMarkupValue(0.05, size, scale);\n\n        if (markup.lineDecoration.indexOf('arrow-begin') !== -1) {\n            var arrowBeginRotationPoint = vectorMultiply(v, l);\n            var arrowBeginCenter = vectorAdd(origin, arrowBeginRotationPoint);\n            var arrowBeginA = vectorRotate(origin, 2, arrowBeginCenter);\n            var arrowBeginB = vectorRotate(origin, -2, arrowBeginCenter);\n\n            setAttributes(begin, {\n                style: 'display:block;',\n                d: 'M'\n                    .concat(arrowBeginA.x, ',')\n                    .concat(arrowBeginA.y, ' L')\n                    .concat(origin.x, ',')\n                    .concat(origin.y, ' L')\n                    .concat(arrowBeginB.x, ',')\n                    .concat(arrowBeginB.y),\n            });\n        }\n\n        if (markup.lineDecoration.indexOf('arrow-end') !== -1) {\n            var arrowEndRotationPoint = vectorMultiply(v, -l);\n            var arrowEndCenter = vectorAdd(target, arrowEndRotationPoint);\n            var arrowEndA = vectorRotate(target, 2, arrowEndCenter);\n            var arrowEndB = vectorRotate(target, -2, arrowEndCenter);\n\n            setAttributes(end, {\n                style: 'display:block;',\n                d: 'M'\n                    .concat(arrowEndA.x, ',')\n                    .concat(arrowEndA.y, ' L')\n                    .concat(target.x, ',')\n                    .concat(target.y, ' L')\n                    .concat(arrowEndB.x, ',')\n                    .concat(arrowEndB.y),\n            });\n        }\n    };\n\n    var updatePath = function updatePath(element, markup, size, scale) {\n        setAttributes(\n            element,\n            Object.assign({}, element.styles, {\n                fill: 'none',\n                d: pointsToPathShape(\n                    markup.points.map(function(point) {\n                        return {\n                            x: getMarkupValue(point.x, size, scale, 'width'),\n                            y: getMarkupValue(point.y, size, scale, 'height'),\n                        };\n                    })\n                ),\n            })\n        );\n    };\n\n    var createShape = function createShape(node) {\n        return function(markup) {\n            return svg(node, { id: markup.id });\n        };\n    };\n\n    var createImage = function createImage(markup) {\n        var shape = svg('image', {\n            id: markup.id,\n            'stroke-linecap': 'round',\n            'stroke-linejoin': 'round',\n            opacity: '0',\n        });\n\n        shape.onload = function() {\n            shape.setAttribute('opacity', markup.opacity || 1);\n        };\n        shape.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', markup.src);\n        return shape;\n    };\n\n    var createLine = function createLine(markup) {\n        var shape = svg('g', {\n            id: markup.id,\n            'stroke-linecap': 'round',\n            'stroke-linejoin': 'round',\n        });\n\n        var line = svg('line');\n        shape.appendChild(line);\n\n        var begin = svg('path');\n        shape.appendChild(begin);\n\n        var end = svg('path');\n        shape.appendChild(end);\n\n        return shape;\n    };\n\n    var CREATE_TYPE_ROUTES = {\n        image: createImage,\n        rect: createShape('rect'),\n        ellipse: createShape('ellipse'),\n        text: createShape('text'),\n        path: createShape('path'),\n        line: createLine,\n    };\n\n    var UPDATE_TYPE_ROUTES = {\n        rect: updateRect,\n        ellipse: updateEllipse,\n        image: updateImage,\n        text: updateText,\n        path: updatePath,\n        line: updateLine,\n    };\n\n    var createMarkupByType = function createMarkupByType(type, markup) {\n        return CREATE_TYPE_ROUTES[type](markup);\n    };\n\n    var updateMarkupByType = function updateMarkupByType(element, type, markup, size, scale) {\n        if (type !== 'path') {\n            element.rect = getMarkupRect(markup, size, scale);\n        }\n        element.styles = getMarkupStyles(markup, size, scale);\n        UPDATE_TYPE_ROUTES[type](element, markup, size, scale);\n    };\n\n    var sortMarkupByZIndex = function sortMarkupByZIndex(a, b) {\n        if (a[1].zIndex > b[1].zIndex) {\n            return 1;\n        }\n        if (a[1].zIndex < b[1].zIndex) {\n            return -1;\n        }\n        return 0;\n    };\n\n    var cropSVG = function cropSVG(blob) {\n        var crop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var markup = arguments.length > 2 ? arguments[2] : undefined;\n        var options = arguments.length > 3 ? arguments[3] : undefined;\n        return new Promise(function(resolve) {\n            var _options$background = options.background,\n                background = _options$background === void 0 ? null : _options$background;\n\n            // load blob contents and wrap in crop svg\n            var fr = new FileReader();\n            fr.onloadend = function() {\n                // get svg text\n                var text = fr.result;\n\n                // create element with svg and get size\n                var original = document.createElement('div');\n                original.style.cssText =\n                    'position:absolute;pointer-events:none;width:0;height:0;visibility:hidden;';\n                original.innerHTML = text;\n                var originalNode = original.querySelector('svg');\n                document.body.appendChild(original);\n\n                // request bounding box dimensions\n                var bBox = originalNode.getBBox();\n                original.parentNode.removeChild(original);\n\n                // get title\n                var titleNode = original.querySelector('title');\n\n                // calculate new heights and widths\n                var viewBoxAttribute = originalNode.getAttribute('viewBox') || '';\n                var widthAttribute = originalNode.getAttribute('width') || '';\n                var heightAttribute = originalNode.getAttribute('height') || '';\n                var width = parseFloat(widthAttribute) || null;\n                var height = parseFloat(heightAttribute) || null;\n                var widthUnits = (widthAttribute.match(/[a-z]+/) || [])[0] || '';\n                var heightUnits = (heightAttribute.match(/[a-z]+/) || [])[0] || '';\n\n                // create new size\n                var viewBoxList = viewBoxAttribute.split(' ').map(parseFloat);\n                var viewBox = viewBoxList.length\n                    ? {\n                          x: viewBoxList[0],\n                          y: viewBoxList[1],\n                          width: viewBoxList[2],\n                          height: viewBoxList[3],\n                      }\n                    : bBox;\n\n                var imageWidth = width != null ? width : viewBox.width;\n                var imageHeight = height != null ? height : viewBox.height;\n\n                originalNode.style.overflow = 'visible';\n                originalNode.setAttribute('width', imageWidth);\n                originalNode.setAttribute('height', imageHeight);\n\n                // markup\n                var markupSVG = '';\n                if (markup && markup.length) {\n                    var size = {\n                        width: imageWidth,\n                        height: imageHeight,\n                    };\n\n                    markupSVG = markup.sort(sortMarkupByZIndex).reduce(function(prev, shape) {\n                        var el = createMarkupByType(shape[0], shape[1]);\n                        updateMarkupByType(el, shape[0], shape[1], size);\n                        el.removeAttribute('id');\n                        if (el.getAttribute('opacity') === 1) {\n                            el.removeAttribute('opacity');\n                        }\n                        return prev + '\\n' + el.outerHTML + '\\n';\n                    }, '');\n                    markupSVG = '\\n\\n<g>'.concat(markupSVG.replace(/&nbsp;/g, ' '), '</g>\\n\\n');\n                }\n\n                var aspectRatio = crop.aspectRatio || imageHeight / imageWidth;\n\n                var canvasWidth = imageWidth;\n                var canvasHeight = canvasWidth * aspectRatio;\n\n                var shouldLimit = typeof crop.scaleToFit === 'undefined' || crop.scaleToFit;\n\n                var cropCenterX = crop.center ? crop.center.x : 0.5;\n                var cropCenterY = crop.center ? crop.center.y : 0.5;\n\n                var canvasZoomFactor = getImageRectZoomFactor(\n                    {\n                        width: imageWidth,\n                        height: imageHeight,\n                    },\n\n                    getCenteredCropRect(\n                        {\n                            width: canvasWidth,\n                            height: canvasHeight,\n                        },\n\n                        aspectRatio\n                    ),\n\n                    crop.rotation,\n                    shouldLimit\n                        ? { x: cropCenterX, y: cropCenterY }\n                        : {\n                              x: 0.5,\n                              y: 0.5,\n                          }\n                );\n\n                var scale = crop.zoom * canvasZoomFactor;\n\n                var rotation = crop.rotation * (180 / Math.PI);\n\n                var canvasCenter = {\n                    x: canvasWidth * 0.5,\n                    y: canvasHeight * 0.5,\n                };\n\n                var imageOffset = {\n                    x: canvasCenter.x - imageWidth * cropCenterX,\n                    y: canvasCenter.y - imageHeight * cropCenterY,\n                };\n\n                var cropTransforms = [\n                    // rotate\n                    'rotate('\n                        .concat(rotation, ' ')\n                        .concat(canvasCenter.x, ' ')\n                        .concat(canvasCenter.y, ')'),\n\n                    // scale\n                    'translate('.concat(canvasCenter.x, ' ').concat(canvasCenter.y, ')'),\n                    'scale('.concat(scale, ')'),\n                    'translate('.concat(-canvasCenter.x, ' ').concat(-canvasCenter.y, ')'),\n\n                    // offset\n                    'translate('.concat(imageOffset.x, ' ').concat(imageOffset.y, ')'),\n                ];\n\n                var cropFlipHorizontal = crop.flip && crop.flip.horizontal;\n                var cropFlipVertical = crop.flip && crop.flip.vertical;\n\n                var flipTransforms = [\n                    'scale('\n                        .concat(cropFlipHorizontal ? -1 : 1, ' ')\n                        .concat(cropFlipVertical ? -1 : 1, ')'),\n                    'translate('\n                        .concat(cropFlipHorizontal ? -imageWidth : 0, ' ')\n                        .concat(cropFlipVertical ? -imageHeight : 0, ')'),\n                ];\n\n                // crop\n                var transformed = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n<svg width=\"'\n                    .concat(canvasWidth)\n                    .concat(widthUnits, '\" height=\"')\n                    .concat(canvasHeight)\n                    .concat(heightUnits, '\" \\nviewBox=\"0 0 ')\n                    .concat(canvasWidth, ' ')\n                    .concat(canvasHeight, '\" ')\n                    .concat(\n                        background ? 'style=\"background:' + background + '\" ' : '',\n                        '\\npreserveAspectRatio=\"xMinYMin\"\\nxmlns:xlink=\"http://www.w3.org/1999/xlink\"\\nxmlns=\"http://www.w3.org/2000/svg\">\\n<!-- Generated by PQINA - https://pqina.nl/ -->\\n<title>'\n                    )\n                    .concat(titleNode ? titleNode.textContent : '', '</title>\\n<g transform=\"')\n                    .concat(cropTransforms.join(' '), '\">\\n<g transform=\"')\n                    .concat(flipTransforms.join(' '), '\">\\n')\n                    .concat(originalNode.outerHTML)\n                    .concat(markupSVG, '\\n</g>\\n</g>\\n</svg>');\n\n                // create new svg file\n                resolve(transformed);\n            };\n\n            fr.readAsText(blob);\n        });\n    };\n\n    var objectToImageData = function objectToImageData(obj) {\n        var imageData;\n        try {\n            imageData = new ImageData(obj.width, obj.height);\n        } catch (e) {\n            // IE + Old EDGE (tested on 12)\n            var canvas = document.createElement('canvas');\n            imageData = canvas.getContext('2d').createImageData(obj.width, obj.height);\n        }\n        imageData.data.set(obj.data);\n        return imageData;\n    };\n\n    /* javascript-obfuscator:disable */\n    var TransformWorker = function TransformWorker() {\n        // maps transform types to transform functions\n        var TRANSFORMS = { resize: resize, filter: filter };\n\n        // applies all image transforms to the image data array\n        var applyTransforms = function applyTransforms(transforms, imageData) {\n            transforms.forEach(function(transform) {\n                imageData = TRANSFORMS[transform.type](imageData, transform.data);\n            });\n            return imageData;\n        };\n\n        // transform image hub\n        var transform = function transform(data, cb) {\n            var transforms = data.transforms;\n\n            // if has filter and has resize, move filter to resize operation\n            var filterTransform = null;\n            transforms.forEach(function(transform) {\n                if (transform.type === 'filter') {\n                    filterTransform = transform;\n                }\n            });\n            if (filterTransform) {\n                // find resize\n                var resizeTransform = null;\n                transforms.forEach(function(transform) {\n                    if (transform.type === 'resize') {\n                        resizeTransform = transform;\n                    }\n                });\n\n                if (resizeTransform) {\n                    // update resize operation\n                    resizeTransform.data.matrix = filterTransform.data;\n\n                    // remove filter\n                    transforms = transforms.filter(function(transform) {\n                        return transform.type !== 'filter';\n                    });\n                }\n            }\n\n            cb(applyTransforms(transforms, data.imageData));\n        };\n\n        // eslint-disable-next-line no-restricted-globals\n        self.onmessage = function(e) {\n            transform(e.data.message, function(response) {\n                // eslint-disable-next-line no-restricted-globals\n                self.postMessage({ id: e.data.id, message: response }, [response.data.buffer]);\n            });\n        };\n\n        var br = 1.0;\n        var bg = 1.0;\n        var bb = 1.0;\n        function applyFilterMatrix(index, data, m) {\n            var ir = data[index] / 255;\n            var ig = data[index + 1] / 255;\n            var ib = data[index + 2] / 255;\n            var ia = data[index + 3] / 255;\n\n            var mr = ir * m[0] + ig * m[1] + ib * m[2] + ia * m[3] + m[4];\n            var mg = ir * m[5] + ig * m[6] + ib * m[7] + ia * m[8] + m[9];\n            var mb = ir * m[10] + ig * m[11] + ib * m[12] + ia * m[13] + m[14];\n            var ma = ir * m[15] + ig * m[16] + ib * m[17] + ia * m[18] + m[19];\n\n            var or = Math.max(0, mr * ma) + br * (1.0 - ma);\n            var og = Math.max(0, mg * ma) + bg * (1.0 - ma);\n            var ob = Math.max(0, mb * ma) + bb * (1.0 - ma);\n\n            data[index] = Math.max(0.0, Math.min(1.0, or)) * 255;\n            data[index + 1] = Math.max(0.0, Math.min(1.0, og)) * 255;\n            data[index + 2] = Math.max(0.0, Math.min(1.0, ob)) * 255;\n        }\n\n        var identityMatrix = self.JSON.stringify([\n            1,\n            0,\n            0,\n            0,\n            0,\n            0,\n            1,\n            0,\n            0,\n            0,\n            0,\n            0,\n            1,\n            0,\n            0,\n            0,\n            0,\n            0,\n            1,\n            0,\n        ]);\n        function isIdentityMatrix(filter) {\n            return self.JSON.stringify(filter || []) === identityMatrix;\n        }\n\n        function filter(imageData, matrix) {\n            if (!matrix || isIdentityMatrix(matrix)) return imageData;\n\n            var data = imageData.data;\n            var l = data.length;\n\n            var m11 = matrix[0];\n            var m12 = matrix[1];\n            var m13 = matrix[2];\n            var m14 = matrix[3];\n            var m15 = matrix[4];\n\n            var m21 = matrix[5];\n            var m22 = matrix[6];\n            var m23 = matrix[7];\n            var m24 = matrix[8];\n            var m25 = matrix[9];\n\n            var m31 = matrix[10];\n            var m32 = matrix[11];\n            var m33 = matrix[12];\n            var m34 = matrix[13];\n            var m35 = matrix[14];\n\n            var m41 = matrix[15];\n            var m42 = matrix[16];\n            var m43 = matrix[17];\n            var m44 = matrix[18];\n            var m45 = matrix[19];\n\n            var index = 0,\n                r = 0.0,\n                g = 0.0,\n                b = 0.0,\n                a = 0.0,\n                mr = 0.0,\n                mg = 0.0,\n                mb = 0.0,\n                ma = 0.0,\n                or = 0.0,\n                og = 0.0,\n                ob = 0.0;\n\n            for (; index < l; index += 4) {\n                r = data[index] / 255;\n                g = data[index + 1] / 255;\n                b = data[index + 2] / 255;\n                a = data[index + 3] / 255;\n\n                mr = r * m11 + g * m12 + b * m13 + a * m14 + m15;\n                mg = r * m21 + g * m22 + b * m23 + a * m24 + m25;\n                mb = r * m31 + g * m32 + b * m33 + a * m34 + m35;\n                ma = r * m41 + g * m42 + b * m43 + a * m44 + m45;\n\n                or = Math.max(0, mr * ma) + br * (1.0 - ma);\n                og = Math.max(0, mg * ma) + bg * (1.0 - ma);\n                ob = Math.max(0, mb * ma) + bb * (1.0 - ma);\n\n                data[index] = Math.max(0.0, Math.min(1.0, or)) * 255;\n                data[index + 1] = Math.max(0.0, Math.min(1.0, og)) * 255;\n                data[index + 2] = Math.max(0.0, Math.min(1.0, ob)) * 255;\n                // don't update alpha value\n            }\n\n            return imageData;\n        }\n\n        function resize(imageData, data) {\n            var _data$mode = data.mode,\n                mode = _data$mode === void 0 ? 'contain' : _data$mode,\n                _data$upscale = data.upscale,\n                upscale = _data$upscale === void 0 ? false : _data$upscale,\n                width = data.width,\n                height = data.height,\n                matrix = data.matrix;\n\n            // test if is identity matrix\n            matrix = !matrix || isIdentityMatrix(matrix) ? null : matrix;\n\n            // need at least a width or a height\n            // also 0 is not a valid width or height\n            if (!width && !height) {\n                return filter(imageData, matrix);\n            }\n\n            // make sure all bounds are set\n            if (width === null) {\n                width = height;\n            } else if (height === null) {\n                height = width;\n            }\n\n            if (mode !== 'force') {\n                var scalarWidth = width / imageData.width;\n                var scalarHeight = height / imageData.height;\n                var scalar = 1;\n\n                if (mode === 'cover') {\n                    scalar = Math.max(scalarWidth, scalarHeight);\n                } else if (mode === 'contain') {\n                    scalar = Math.min(scalarWidth, scalarHeight);\n                }\n\n                // if image is too small, exit here with original image\n                if (scalar > 1 && upscale === false) {\n                    return filter(imageData, matrix);\n                }\n\n                width = imageData.width * scalar;\n                height = imageData.height * scalar;\n            }\n\n            var originWidth = imageData.width;\n            var originHeight = imageData.height;\n            var targetWidth = Math.round(width);\n            var targetHeight = Math.round(height);\n            var inputData = imageData.data;\n            var outputData = new Uint8ClampedArray(targetWidth * targetHeight * 4);\n            var ratioWidth = originWidth / targetWidth;\n            var ratioHeight = originHeight / targetHeight;\n            var ratioWidthHalf = Math.ceil(ratioWidth * 0.5);\n            var ratioHeightHalf = Math.ceil(ratioHeight * 0.5);\n\n            for (var j = 0; j < targetHeight; j++) {\n                for (var i = 0; i < targetWidth; i++) {\n                    var x2 = (i + j * targetWidth) * 4;\n                    var weight = 0;\n                    var weights = 0;\n                    var weightsAlpha = 0;\n                    var r = 0;\n                    var g = 0;\n                    var b = 0;\n                    var a = 0;\n                    var centerY = (j + 0.5) * ratioHeight;\n\n                    for (var yy = Math.floor(j * ratioHeight); yy < (j + 1) * ratioHeight; yy++) {\n                        var dy = Math.abs(centerY - (yy + 0.5)) / ratioHeightHalf;\n                        var centerX = (i + 0.5) * ratioWidth;\n                        var w0 = dy * dy;\n\n                        for (var xx = Math.floor(i * ratioWidth); xx < (i + 1) * ratioWidth; xx++) {\n                            var dx = Math.abs(centerX - (xx + 0.5)) / ratioWidthHalf;\n                            var w = Math.sqrt(w0 + dx * dx);\n\n                            if (w >= -1 && w <= 1) {\n                                weight = 2 * w * w * w - 3 * w * w + 1;\n\n                                if (weight > 0) {\n                                    dx = 4 * (xx + yy * originWidth);\n\n                                    var ref = inputData[dx + 3];\n                                    a += weight * ref;\n                                    weightsAlpha += weight;\n\n                                    if (ref < 255) {\n                                        weight = (weight * ref) / 250;\n                                    }\n\n                                    r += weight * inputData[dx];\n                                    g += weight * inputData[dx + 1];\n                                    b += weight * inputData[dx + 2];\n                                    weights += weight;\n                                }\n                            }\n                        }\n                    }\n\n                    outputData[x2] = r / weights;\n                    outputData[x2 + 1] = g / weights;\n                    outputData[x2 + 2] = b / weights;\n                    outputData[x2 + 3] = a / weightsAlpha;\n\n                    matrix && applyFilterMatrix(x2, outputData, matrix);\n                }\n            }\n\n            return {\n                data: outputData,\n                width: targetWidth,\n                height: targetHeight,\n            };\n        }\n    };\n    /* javascript-obfuscator:enable */\n\n    var correctOrientation = function correctOrientation(view, offset) {\n        // Missing 0x45786966 Marker? No Exif Header, stop here\n        if (view.getUint32(offset + 4, false) !== 0x45786966) return;\n\n        // next byte!\n        offset += 4;\n\n        // First 2bytes defines byte align of TIFF data.\n        // If it is 0x4949=\"I I\", it means \"Intel\" type byte align\n        var intelByteAligned = view.getUint16((offset += 6), false) === 0x4949;\n        offset += view.getUint32(offset + 4, intelByteAligned);\n\n        var tags = view.getUint16(offset, intelByteAligned);\n        offset += 2;\n\n        // find Orientation tag\n        for (var i = 0; i < tags; i++) {\n            if (view.getUint16(offset + i * 12, intelByteAligned) === 0x0112) {\n                view.setUint16(offset + i * 12 + 8, 1, intelByteAligned);\n                return true;\n            }\n        }\n        return false;\n    };\n\n    var readData = function readData(data) {\n        var view = new DataView(data);\n\n        // Every JPEG file starts from binary value '0xFFD8'\n        // If it's not present, exit here\n        if (view.getUint16(0) !== 0xffd8) return null;\n\n        var offset = 2; // Start at 2 as we skipped two bytes (FFD8)\n        var marker;\n        var markerLength;\n        var orientationCorrected = false;\n\n        while (offset < view.byteLength) {\n            marker = view.getUint16(offset, false);\n            markerLength = view.getUint16(offset + 2, false) + 2;\n\n            // Test if is APP and COM markers\n            var isData = (marker >= 0xffe0 && marker <= 0xffef) || marker === 0xfffe;\n            if (!isData) {\n                break;\n            }\n\n            if (!orientationCorrected) {\n                orientationCorrected = correctOrientation(view, offset, markerLength);\n            }\n\n            if (offset + markerLength > view.byteLength) {\n                break;\n            }\n\n            offset += markerLength;\n        }\n        return data.slice(0, offset);\n    };\n\n    var getImageHead = function getImageHead(file) {\n        return new Promise(function(resolve) {\n            var reader = new FileReader();\n            reader.onload = function() {\n                return resolve(readData(reader.result) || null);\n            };\n            reader.readAsArrayBuffer(file.slice(0, 256 * 1024));\n        });\n    };\n\n    var getBlobBuilder = function getBlobBuilder() {\n        return (window.BlobBuilder =\n            window.BlobBuilder ||\n            window.WebKitBlobBuilder ||\n            window.MozBlobBuilder ||\n            window.MSBlobBuilder);\n    };\n\n    var createBlob = function createBlob(arrayBuffer, mimeType) {\n        var BB = getBlobBuilder();\n\n        if (BB) {\n            var bb = new BB();\n            bb.append(arrayBuffer);\n            return bb.getBlob(mimeType);\n        }\n\n        return new Blob([arrayBuffer], {\n            type: mimeType,\n        });\n    };\n\n    var getUniqueId = function getUniqueId() {\n        return Math.random()\n            .toString(36)\n            .substr(2, 9);\n    };\n\n    var createWorker = function createWorker(fn) {\n        var workerBlob = new Blob(['(', fn.toString(), ')()'], { type: 'application/javascript' });\n        var workerURL = URL.createObjectURL(workerBlob);\n        var worker = new Worker(workerURL);\n\n        var trips = [];\n\n        return {\n            transfer: function transfer() {}, // (message, cb) => {}\n            post: function post(message, cb, transferList) {\n                var id = getUniqueId();\n                trips[id] = cb;\n\n                worker.onmessage = function(e) {\n                    var cb = trips[e.data.id];\n                    if (!cb) return;\n                    cb(e.data.message);\n                    delete trips[e.data.id];\n                };\n\n                worker.postMessage(\n                    {\n                        id: id,\n                        message: message,\n                    },\n\n                    transferList\n                );\n            },\n            terminate: function terminate() {\n                worker.terminate();\n                URL.revokeObjectURL(workerURL);\n            },\n        };\n    };\n\n    var loadImage = function loadImage(url) {\n        return new Promise(function(resolve, reject) {\n            var img = new Image();\n            img.onload = function() {\n                resolve(img);\n            };\n            img.onerror = function(e) {\n                reject(e);\n            };\n            img.src = url;\n        });\n    };\n\n    var chain = function chain(funcs) {\n        return funcs.reduce(function(promise, func) {\n            return promise.then(function(result) {\n                return func().then(Array.prototype.concat.bind(result));\n            });\n        }, Promise.resolve([]));\n    };\n\n    var canvasApplyMarkup = function canvasApplyMarkup(canvas, markup) {\n        return new Promise(function(resolve) {\n            var size = {\n                width: canvas.width,\n                height: canvas.height,\n            };\n\n            var ctx = canvas.getContext('2d');\n\n            var drawers = markup.sort(sortMarkupByZIndex).map(function(item) {\n                return function() {\n                    return new Promise(function(resolve) {\n                        var result = TYPE_DRAW_ROUTES[item[0]](ctx, size, item[1], resolve);\n                        if (result) resolve();\n                    });\n                };\n            });\n\n            chain(drawers).then(function() {\n                return resolve(canvas);\n            });\n        });\n    };\n\n    var applyMarkupStyles = function applyMarkupStyles(ctx, styles) {\n        ctx.beginPath();\n        ctx.lineCap = styles['stroke-linecap'];\n        ctx.lineJoin = styles['stroke-linejoin'];\n        ctx.lineWidth = styles['stroke-width'];\n        if (styles['stroke-dasharray'].length) {\n            ctx.setLineDash(styles['stroke-dasharray'].split(','));\n        }\n        ctx.fillStyle = styles['fill'];\n        ctx.strokeStyle = styles['stroke'];\n        ctx.globalAlpha = styles.opacity || 1;\n    };\n\n    var drawMarkupStyles = function drawMarkupStyles(ctx) {\n        ctx.fill();\n        ctx.stroke();\n        ctx.globalAlpha = 1;\n    };\n\n    var drawRect = function drawRect(ctx, size, markup) {\n        var rect = getMarkupRect(markup, size);\n        var styles = getMarkupStyles(markup, size);\n        applyMarkupStyles(ctx, styles);\n        ctx.rect(rect.x, rect.y, rect.width, rect.height);\n        drawMarkupStyles(ctx, styles);\n        return true;\n    };\n\n    var drawEllipse = function drawEllipse(ctx, size, markup) {\n        var rect = getMarkupRect(markup, size);\n        var styles = getMarkupStyles(markup, size);\n        applyMarkupStyles(ctx, styles);\n\n        var x = rect.x,\n            y = rect.y,\n            w = rect.width,\n            h = rect.height,\n            kappa = 0.5522848,\n            ox = (w / 2) * kappa,\n            oy = (h / 2) * kappa,\n            xe = x + w,\n            ye = y + h,\n            xm = x + w / 2,\n            ym = y + h / 2;\n\n        ctx.moveTo(x, ym);\n        ctx.bezierCurveTo(x, ym - oy, xm - ox, y, xm, y);\n        ctx.bezierCurveTo(xm + ox, y, xe, ym - oy, xe, ym);\n        ctx.bezierCurveTo(xe, ym + oy, xm + ox, ye, xm, ye);\n        ctx.bezierCurveTo(xm - ox, ye, x, ym + oy, x, ym);\n\n        drawMarkupStyles(ctx, styles);\n        return true;\n    };\n\n    var drawImage = function drawImage(ctx, size, markup, done) {\n        var rect = getMarkupRect(markup, size);\n        var styles = getMarkupStyles(markup, size);\n        applyMarkupStyles(ctx, styles);\n\n        var image = new Image();\n\n        // if is cross origin image add cross origin attribute\n        var isCrossOriginImage =\n            new URL(markup.src, window.location.href).origin !== window.location.origin;\n        if (isCrossOriginImage) image.crossOrigin = '';\n\n        image.onload = function() {\n            if (markup.fit === 'cover') {\n                var ar = rect.width / rect.height;\n                var width = ar > 1 ? image.width : image.height * ar;\n                var height = ar > 1 ? image.width / ar : image.height;\n                var x = image.width * 0.5 - width * 0.5;\n                var y = image.height * 0.5 - height * 0.5;\n                ctx.drawImage(image, x, y, width, height, rect.x, rect.y, rect.width, rect.height);\n            } else if (markup.fit === 'contain') {\n                var scalar = Math.min(rect.width / image.width, rect.height / image.height);\n                var _width = scalar * image.width;\n                var _height = scalar * image.height;\n                var _x = rect.x + rect.width * 0.5 - _width * 0.5;\n                var _y = rect.y + rect.height * 0.5 - _height * 0.5;\n                ctx.drawImage(image, 0, 0, image.width, image.height, _x, _y, _width, _height);\n            } else {\n                ctx.drawImage(\n                    image,\n                    0,\n                    0,\n                    image.width,\n                    image.height,\n                    rect.x,\n                    rect.y,\n                    rect.width,\n                    rect.height\n                );\n            }\n\n            drawMarkupStyles(ctx, styles);\n            done();\n        };\n        image.src = markup.src;\n    };\n\n    var drawText = function drawText(ctx, size, markup) {\n        var rect = getMarkupRect(markup, size);\n        var styles = getMarkupStyles(markup, size);\n        applyMarkupStyles(ctx, styles);\n\n        var fontSize = getMarkupValue(markup.fontSize, size);\n        var fontFamily = markup.fontFamily || 'sans-serif';\n        var fontWeight = markup.fontWeight || 'normal';\n        var textAlign = markup.textAlign || 'left';\n\n        ctx.font = ''\n            .concat(fontWeight, ' ')\n            .concat(fontSize, 'px ')\n            .concat(fontFamily);\n        ctx.textAlign = textAlign;\n        ctx.fillText(markup.text, rect.x, rect.y);\n\n        drawMarkupStyles(ctx, styles);\n        return true;\n    };\n\n    var drawPath = function drawPath(ctx, size, markup) {\n        var styles = getMarkupStyles(markup, size);\n        applyMarkupStyles(ctx, styles);\n        ctx.beginPath();\n\n        var points = markup.points.map(function(point) {\n            return {\n                x: getMarkupValue(point.x, size, 1, 'width'),\n                y: getMarkupValue(point.y, size, 1, 'height'),\n            };\n        });\n\n        ctx.moveTo(points[0].x, points[0].y);\n        var l = points.length;\n        for (var i = 1; i < l; i++) {\n            ctx.lineTo(points[i].x, points[i].y);\n        }\n\n        drawMarkupStyles(ctx, styles);\n        return true;\n    };\n\n    var drawLine = function drawLine(ctx, size, markup) {\n        var rect = getMarkupRect(markup, size);\n        var styles = getMarkupStyles(markup, size);\n        applyMarkupStyles(ctx, styles);\n\n        ctx.beginPath();\n\n        var origin = {\n            x: rect.x,\n            y: rect.y,\n        };\n\n        var target = {\n            x: rect.x + rect.width,\n            y: rect.y + rect.height,\n        };\n\n        ctx.moveTo(origin.x, origin.y);\n        ctx.lineTo(target.x, target.y);\n\n        var v = vectorNormalize({\n            x: target.x - origin.x,\n            y: target.y - origin.y,\n        });\n\n        var l = 0.04 * Math.min(size.width, size.height);\n\n        if (markup.lineDecoration.indexOf('arrow-begin') !== -1) {\n            var arrowBeginRotationPoint = vectorMultiply(v, l);\n            var arrowBeginCenter = vectorAdd(origin, arrowBeginRotationPoint);\n            var arrowBeginA = vectorRotate(origin, 2, arrowBeginCenter);\n            var arrowBeginB = vectorRotate(origin, -2, arrowBeginCenter);\n\n            ctx.moveTo(arrowBeginA.x, arrowBeginA.y);\n            ctx.lineTo(origin.x, origin.y);\n            ctx.lineTo(arrowBeginB.x, arrowBeginB.y);\n        }\n        if (markup.lineDecoration.indexOf('arrow-end') !== -1) {\n            var arrowEndRotationPoint = vectorMultiply(v, -l);\n            var arrowEndCenter = vectorAdd(target, arrowEndRotationPoint);\n            var arrowEndA = vectorRotate(target, 2, arrowEndCenter);\n            var arrowEndB = vectorRotate(target, -2, arrowEndCenter);\n\n            ctx.moveTo(arrowEndA.x, arrowEndA.y);\n            ctx.lineTo(target.x, target.y);\n            ctx.lineTo(arrowEndB.x, arrowEndB.y);\n        }\n\n        drawMarkupStyles(ctx, styles);\n        return true;\n    };\n\n    var TYPE_DRAW_ROUTES = {\n        rect: drawRect,\n        ellipse: drawEllipse,\n        image: drawImage,\n        text: drawText,\n        line: drawLine,\n        path: drawPath,\n    };\n\n    var imageDataToCanvas = function imageDataToCanvas(imageData) {\n        var image = document.createElement('canvas');\n        image.width = imageData.width;\n        image.height = imageData.height;\n        var ctx = image.getContext('2d');\n        ctx.putImageData(imageData, 0, 0);\n        return image;\n    };\n\n    var transformImage = function transformImage(file, instructions) {\n        var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        return new Promise(function(resolve, reject) {\n            // if the file is not an image we do not have any business transforming it\n            if (!file || !isImage$1(file))\n                return reject({ status: 'not an image file', file: file });\n\n            // get separate options for easier use\n            var stripImageHead = options.stripImageHead,\n                beforeCreateBlob = options.beforeCreateBlob,\n                afterCreateBlob = options.afterCreateBlob,\n                canvasMemoryLimit = options.canvasMemoryLimit;\n\n            // get crop\n            var crop = instructions.crop,\n                size = instructions.size,\n                filter = instructions.filter,\n                markup = instructions.markup,\n                output = instructions.output;\n\n            // get exif orientation\n            var orientation =\n                instructions.image && instructions.image.orientation\n                    ? Math.max(1, Math.min(8, instructions.image.orientation))\n                    : null;\n\n            // compression quality 0 => 100\n            var qualityAsPercentage = output && output.quality;\n            var quality = qualityAsPercentage === null ? null : qualityAsPercentage / 100;\n\n            // output format\n            var type = (output && output.type) || null;\n\n            // background color\n            var background = (output && output.background) || null;\n\n            // get transforms\n            var transforms = [];\n\n            // add resize transforms if set\n            if (size && (typeof size.width === 'number' || typeof size.height === 'number')) {\n                transforms.push({ type: 'resize', data: size });\n            }\n\n            // add filters\n            if (filter && filter.length === 20) {\n                transforms.push({ type: 'filter', data: filter });\n            }\n\n            // resolves with supplied blob\n            var resolveWithBlob = function resolveWithBlob(blob) {\n                var promisedBlob = afterCreateBlob ? afterCreateBlob(blob) : blob;\n                Promise.resolve(promisedBlob).then(resolve);\n            };\n\n            // done\n            var toBlob = function toBlob(imageData, options) {\n                var canvas = imageDataToCanvas(imageData);\n                var promisedCanvas = markup.length ? canvasApplyMarkup(canvas, markup) : canvas;\n                Promise.resolve(promisedCanvas).then(function(canvas) {\n                    canvasToBlob(canvas, options, beforeCreateBlob)\n                        .then(function(blob) {\n                            // force release of canvas memory\n                            canvasRelease(canvas);\n\n                            // remove image head (default)\n                            if (stripImageHead) return resolveWithBlob(blob);\n\n                            // try to copy image head from original file to generated blob\n                            getImageHead(file).then(function(imageHead) {\n                                // re-inject image head in case of JPEG, as the image head is removed by canvas export\n                                if (imageHead !== null) {\n                                    blob = new Blob([imageHead, blob.slice(20)], {\n                                        type: blob.type,\n                                    });\n                                }\n\n                                // done!\n                                resolveWithBlob(blob);\n                            });\n                        })\n                        .catch(reject);\n                });\n            };\n\n            // if this is an svg and we want it to stay an svg\n            if (/svg/.test(file.type) && type === null) {\n                return cropSVG(file, crop, markup, { background: background }).then(function(text) {\n                    resolve(createBlob(text, 'image/svg+xml'));\n                });\n            }\n\n            // get file url\n            var url = URL.createObjectURL(file);\n\n            // turn the file into an image\n            loadImage(url)\n                .then(function(image) {\n                    // url is no longer needed\n                    URL.revokeObjectURL(url);\n\n                    // draw to canvas and start transform chain\n                    var imageData = imageToImageData(image, orientation, crop, {\n                        canvasMemoryLimit: canvasMemoryLimit,\n                        background: background,\n                    });\n\n                    // determine the format of the blob that we will output\n                    var outputFormat = {\n                        quality: quality,\n                        type: type || file.type,\n                    };\n\n                    // no transforms necessary, we done!\n                    if (!transforms.length) {\n                        return toBlob(imageData, outputFormat);\n                    }\n\n                    // send to the transform worker to transform the blob on a separate thread\n                    var worker = createWorker(TransformWorker);\n                    worker.post(\n                        {\n                            transforms: transforms,\n                            imageData: imageData,\n                        },\n\n                        function(response) {\n                            // finish up\n                            toBlob(objectToImageData(response), outputFormat);\n\n                            // stop worker\n                            worker.terminate();\n                        },\n                        [imageData.data.buffer]\n                    );\n                })\n                .catch(reject);\n        });\n    };\n\n    function _typeof(obj) {\n        if (typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol') {\n            _typeof = function(obj) {\n                return typeof obj;\n            };\n        } else {\n            _typeof = function(obj) {\n                return obj &&\n                    typeof Symbol === 'function' &&\n                    obj.constructor === Symbol &&\n                    obj !== Symbol.prototype\n                    ? 'symbol'\n                    : typeof obj;\n            };\n        }\n\n        return _typeof(obj);\n    }\n\n    var REACT_ELEMENT_TYPE;\n\n    function _jsx(type, props, key, children) {\n        if (!REACT_ELEMENT_TYPE) {\n            REACT_ELEMENT_TYPE =\n                (typeof Symbol === 'function' && Symbol.for && Symbol.for('react.element')) ||\n                0xeac7;\n        }\n\n        var defaultProps = type && type.defaultProps;\n        var childrenLength = arguments.length - 3;\n\n        if (!props && childrenLength !== 0) {\n            props = {\n                children: void 0,\n            };\n        }\n\n        if (props && defaultProps) {\n            for (var propName in defaultProps) {\n                if (props[propName] === void 0) {\n                    props[propName] = defaultProps[propName];\n                }\n            }\n        } else if (!props) {\n            props = defaultProps || {};\n        }\n\n        if (childrenLength === 1) {\n            props.children = children;\n        } else if (childrenLength > 1) {\n            var childArray = new Array(childrenLength);\n\n            for (var i = 0; i < childrenLength; i++) {\n                childArray[i] = arguments[i + 3];\n            }\n\n            props.children = childArray;\n        }\n\n        return {\n            $$typeof: REACT_ELEMENT_TYPE,\n            type: type,\n            key: key === undefined ? null : '' + key,\n            ref: null,\n            props: props,\n            _owner: null,\n        };\n    }\n\n    function _asyncIterator(iterable) {\n        var method;\n\n        if (typeof Symbol === 'function') {\n            if (Symbol.asyncIterator) {\n                method = iterable[Symbol.asyncIterator];\n                if (method != null) return method.call(iterable);\n            }\n\n            if (Symbol.iterator) {\n                method = iterable[Symbol.iterator];\n                if (method != null) return method.call(iterable);\n            }\n        }\n\n        throw new TypeError('Object is not async iterable');\n    }\n\n    function _AwaitValue(value) {\n        this.wrapped = value;\n    }\n\n    function _AsyncGenerator(gen) {\n        var front, back;\n\n        function send(key, arg) {\n            return new Promise(function(resolve, reject) {\n                var request = {\n                    key: key,\n                    arg: arg,\n                    resolve: resolve,\n                    reject: reject,\n                    next: null,\n                };\n\n                if (back) {\n                    back = back.next = request;\n                } else {\n                    front = back = request;\n                    resume(key, arg);\n                }\n            });\n        }\n\n        function resume(key, arg) {\n            try {\n                var result = gen[key](arg);\n                var value = result.value;\n                var wrappedAwait = value instanceof _AwaitValue;\n                Promise.resolve(wrappedAwait ? value.wrapped : value).then(\n                    function(arg) {\n                        if (wrappedAwait) {\n                            resume('next', arg);\n                            return;\n                        }\n\n                        settle(result.done ? 'return' : 'normal', arg);\n                    },\n                    function(err) {\n                        resume('throw', err);\n                    }\n                );\n            } catch (err) {\n                settle('throw', err);\n            }\n        }\n\n        function settle(type, value) {\n            switch (type) {\n                case 'return':\n                    front.resolve({\n                        value: value,\n                        done: true,\n                    });\n                    break;\n\n                case 'throw':\n                    front.reject(value);\n                    break;\n\n                default:\n                    front.resolve({\n                        value: value,\n                        done: false,\n                    });\n                    break;\n            }\n\n            front = front.next;\n\n            if (front) {\n                resume(front.key, front.arg);\n            } else {\n                back = null;\n            }\n        }\n\n        this._invoke = send;\n\n        if (typeof gen.return !== 'function') {\n            this.return = undefined;\n        }\n    }\n\n    if (typeof Symbol === 'function' && Symbol.asyncIterator) {\n        _AsyncGenerator.prototype[Symbol.asyncIterator] = function() {\n            return this;\n        };\n    }\n\n    _AsyncGenerator.prototype.next = function(arg) {\n        return this._invoke('next', arg);\n    };\n\n    _AsyncGenerator.prototype.throw = function(arg) {\n        return this._invoke('throw', arg);\n    };\n\n    _AsyncGenerator.prototype.return = function(arg) {\n        return this._invoke('return', arg);\n    };\n\n    function _wrapAsyncGenerator(fn) {\n        return function() {\n            return new _AsyncGenerator(fn.apply(this, arguments));\n        };\n    }\n\n    function _awaitAsyncGenerator(value) {\n        return new _AwaitValue(value);\n    }\n\n    function _asyncGeneratorDelegate(inner, awaitWrap) {\n        var iter = {},\n            waiting = false;\n\n        function pump(key, value) {\n            waiting = true;\n            value = new Promise(function(resolve) {\n                resolve(inner[key](value));\n            });\n            return {\n                done: false,\n                value: awaitWrap(value),\n            };\n        }\n\n        if (typeof Symbol === 'function' && Symbol.iterator) {\n            iter[Symbol.iterator] = function() {\n                return this;\n            };\n        }\n\n        iter.next = function(value) {\n            if (waiting) {\n                waiting = false;\n                return value;\n            }\n\n            return pump('next', value);\n        };\n\n        if (typeof inner.throw === 'function') {\n            iter.throw = function(value) {\n                if (waiting) {\n                    waiting = false;\n                    throw value;\n                }\n\n                return pump('throw', value);\n            };\n        }\n\n        if (typeof inner.return === 'function') {\n            iter.return = function(value) {\n                return pump('return', value);\n            };\n        }\n\n        return iter;\n    }\n\n    function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n        try {\n            var info = gen[key](arg);\n            var value = info.value;\n        } catch (error) {\n            reject(error);\n            return;\n        }\n\n        if (info.done) {\n            resolve(value);\n        } else {\n            Promise.resolve(value).then(_next, _throw);\n        }\n    }\n\n    function _asyncToGenerator(fn) {\n        return function() {\n            var self = this,\n                args = arguments;\n            return new Promise(function(resolve, reject) {\n                var gen = fn.apply(self, args);\n\n                function _next(value) {\n                    asyncGeneratorStep(gen, resolve, reject, _next, _throw, 'next', value);\n                }\n\n                function _throw(err) {\n                    asyncGeneratorStep(gen, resolve, reject, _next, _throw, 'throw', err);\n                }\n\n                _next(undefined);\n            });\n        };\n    }\n\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError('Cannot call a class as a function');\n        }\n    }\n\n    function _defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];\n            descriptor.enumerable = descriptor.enumerable || false;\n            descriptor.configurable = true;\n            if ('value' in descriptor) descriptor.writable = true;\n            Object.defineProperty(target, descriptor.key, descriptor);\n        }\n    }\n\n    function _createClass(Constructor, protoProps, staticProps) {\n        if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n        if (staticProps) _defineProperties(Constructor, staticProps);\n        return Constructor;\n    }\n\n    function _defineEnumerableProperties(obj, descs) {\n        for (var key in descs) {\n            var desc = descs[key];\n            desc.configurable = desc.enumerable = true;\n            if ('value' in desc) desc.writable = true;\n            Object.defineProperty(obj, key, desc);\n        }\n\n        if (Object.getOwnPropertySymbols) {\n            var objectSymbols = Object.getOwnPropertySymbols(descs);\n\n            for (var i = 0; i < objectSymbols.length; i++) {\n                var sym = objectSymbols[i];\n                var desc = descs[sym];\n                desc.configurable = desc.enumerable = true;\n                if ('value' in desc) desc.writable = true;\n                Object.defineProperty(obj, sym, desc);\n            }\n        }\n\n        return obj;\n    }\n\n    function _defaults(obj, defaults) {\n        var keys = Object.getOwnPropertyNames(defaults);\n\n        for (var i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n            if (value && value.configurable && obj[key] === undefined) {\n                Object.defineProperty(obj, key, value);\n            }\n        }\n\n        return obj;\n    }\n\n    function _defineProperty(obj, key, value) {\n        if (key in obj) {\n            Object.defineProperty(obj, key, {\n                value: value,\n                enumerable: true,\n                configurable: true,\n                writable: true,\n            });\n        } else {\n            obj[key] = value;\n        }\n\n        return obj;\n    }\n\n    function _extends() {\n        _extends =\n            Object.assign ||\n            function(target) {\n                for (var i = 1; i < arguments.length; i++) {\n                    var source = arguments[i];\n\n                    for (var key in source) {\n                        if (Object.prototype.hasOwnProperty.call(source, key)) {\n                            target[key] = source[key];\n                        }\n                    }\n                }\n\n                return target;\n            };\n\n        return _extends.apply(this, arguments);\n    }\n\n    function _objectSpread(target) {\n        for (var i = 1; i < arguments.length; i++) {\n            var source = arguments[i] != null ? arguments[i] : {};\n            var ownKeys = Object.keys(source);\n\n            if (typeof Object.getOwnPropertySymbols === 'function') {\n                ownKeys = ownKeys.concat(\n                    Object.getOwnPropertySymbols(source).filter(function(sym) {\n                        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n                    })\n                );\n            }\n\n            ownKeys.forEach(function(key) {\n                _defineProperty(target, key, source[key]);\n            });\n        }\n\n        return target;\n    }\n\n    function _inherits(subClass, superClass) {\n        if (typeof superClass !== 'function' && superClass !== null) {\n            throw new TypeError('Super expression must either be null or a function');\n        }\n\n        subClass.prototype = Object.create(superClass && superClass.prototype, {\n            constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true,\n            },\n        });\n        if (superClass) _setPrototypeOf(subClass, superClass);\n    }\n\n    function _inheritsLoose(subClass, superClass) {\n        subClass.prototype = Object.create(superClass.prototype);\n        subClass.prototype.constructor = subClass;\n        subClass.__proto__ = superClass;\n    }\n\n    function _getPrototypeOf(o) {\n        _getPrototypeOf = Object.setPrototypeOf\n            ? Object.getPrototypeOf\n            : function _getPrototypeOf(o) {\n                  return o.__proto__ || Object.getPrototypeOf(o);\n              };\n        return _getPrototypeOf(o);\n    }\n\n    function _setPrototypeOf(o, p) {\n        _setPrototypeOf =\n            Object.setPrototypeOf ||\n            function _setPrototypeOf(o, p) {\n                o.__proto__ = p;\n                return o;\n            };\n\n        return _setPrototypeOf(o, p);\n    }\n\n    function isNativeReflectConstruct() {\n        if (typeof Reflect === 'undefined' || !Reflect.construct) return false;\n        if (Reflect.construct.sham) return false;\n        if (typeof Proxy === 'function') return true;\n\n        try {\n            Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\n            return true;\n        } catch (e) {\n            return false;\n        }\n    }\n\n    function _construct(Parent, args, Class) {\n        if (isNativeReflectConstruct()) {\n            _construct = Reflect.construct;\n        } else {\n            _construct = function _construct(Parent, args, Class) {\n                var a = [null];\n                a.push.apply(a, args);\n                var Constructor = Function.bind.apply(Parent, a);\n                var instance = new Constructor();\n                if (Class) _setPrototypeOf(instance, Class.prototype);\n                return instance;\n            };\n        }\n\n        return _construct.apply(null, arguments);\n    }\n\n    function _isNativeFunction(fn) {\n        return Function.toString.call(fn).indexOf('[native code]') !== -1;\n    }\n\n    function _wrapNativeSuper(Class) {\n        var _cache = typeof Map === 'function' ? new Map() : undefined;\n\n        _wrapNativeSuper = function _wrapNativeSuper(Class) {\n            if (Class === null || !_isNativeFunction(Class)) return Class;\n\n            if (typeof Class !== 'function') {\n                throw new TypeError('Super expression must either be null or a function');\n            }\n\n            if (typeof _cache !== 'undefined') {\n                if (_cache.has(Class)) return _cache.get(Class);\n\n                _cache.set(Class, Wrapper);\n            }\n\n            function Wrapper() {\n                return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n            }\n\n            Wrapper.prototype = Object.create(Class.prototype, {\n                constructor: {\n                    value: Wrapper,\n                    enumerable: false,\n                    writable: true,\n                    configurable: true,\n                },\n            });\n            return _setPrototypeOf(Wrapper, Class);\n        };\n\n        return _wrapNativeSuper(Class);\n    }\n\n    function _instanceof(left, right) {\n        if (right != null && typeof Symbol !== 'undefined' && right[Symbol.hasInstance]) {\n            return right[Symbol.hasInstance](left);\n        } else {\n            return left instanceof right;\n        }\n    }\n\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule\n            ? obj\n            : {\n                  default: obj,\n              };\n    }\n\n    function _interopRequireWildcard(obj) {\n        if (obj && obj.__esModule) {\n            return obj;\n        } else {\n            var newObj = {};\n\n            if (obj != null) {\n                for (var key in obj) {\n                    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                        var desc =\n                            Object.defineProperty && Object.getOwnPropertyDescriptor\n                                ? Object.getOwnPropertyDescriptor(obj, key)\n                                : {};\n\n                        if (desc.get || desc.set) {\n                            Object.defineProperty(newObj, key, desc);\n                        } else {\n                            newObj[key] = obj[key];\n                        }\n                    }\n                }\n            }\n\n            newObj.default = obj;\n            return newObj;\n        }\n    }\n\n    function _newArrowCheck(innerThis, boundThis) {\n        if (innerThis !== boundThis) {\n            throw new TypeError('Cannot instantiate an arrow function');\n        }\n    }\n\n    function _objectDestructuringEmpty(obj) {\n        if (obj == null) throw new TypeError('Cannot destructure undefined');\n    }\n\n    function _objectWithoutPropertiesLoose(source, excluded) {\n        if (source == null) return {};\n        var target = {};\n        var sourceKeys = Object.keys(source);\n        var key, i;\n\n        for (i = 0; i < sourceKeys.length; i++) {\n            key = sourceKeys[i];\n            if (excluded.indexOf(key) >= 0) continue;\n            target[key] = source[key];\n        }\n\n        return target;\n    }\n\n    function _objectWithoutProperties(source, excluded) {\n        if (source == null) return {};\n\n        var target = _objectWithoutPropertiesLoose(source, excluded);\n\n        var key, i;\n\n        if (Object.getOwnPropertySymbols) {\n            var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n            for (i = 0; i < sourceSymbolKeys.length; i++) {\n                key = sourceSymbolKeys[i];\n                if (excluded.indexOf(key) >= 0) continue;\n                if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n                target[key] = source[key];\n            }\n        }\n\n        return target;\n    }\n\n    function _assertThisInitialized(self) {\n        if (self === void 0) {\n            throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n        }\n\n        return self;\n    }\n\n    function _possibleConstructorReturn(self, call) {\n        if (call && (typeof call === 'object' || typeof call === 'function')) {\n            return call;\n        }\n\n        return _assertThisInitialized(self);\n    }\n\n    function _superPropBase(object, property) {\n        while (!Object.prototype.hasOwnProperty.call(object, property)) {\n            object = _getPrototypeOf(object);\n            if (object === null) break;\n        }\n\n        return object;\n    }\n\n    function _get(target, property, receiver) {\n        if (typeof Reflect !== 'undefined' && Reflect.get) {\n            _get = Reflect.get;\n        } else {\n            _get = function _get(target, property, receiver) {\n                var base = _superPropBase(target, property);\n\n                if (!base) return;\n                var desc = Object.getOwnPropertyDescriptor(base, property);\n\n                if (desc.get) {\n                    return desc.get.call(receiver);\n                }\n\n                return desc.value;\n            };\n        }\n\n        return _get(target, property, receiver || target);\n    }\n\n    function set(target, property, value, receiver) {\n        if (typeof Reflect !== 'undefined' && Reflect.set) {\n            set = Reflect.set;\n        } else {\n            set = function set(target, property, value, receiver) {\n                var base = _superPropBase(target, property);\n\n                var desc;\n\n                if (base) {\n                    desc = Object.getOwnPropertyDescriptor(base, property);\n\n                    if (desc.set) {\n                        desc.set.call(receiver, value);\n                        return true;\n                    } else if (!desc.writable) {\n                        return false;\n                    }\n                }\n\n                desc = Object.getOwnPropertyDescriptor(receiver, property);\n\n                if (desc) {\n                    if (!desc.writable) {\n                        return false;\n                    }\n\n                    desc.value = value;\n                    Object.defineProperty(receiver, property, desc);\n                } else {\n                    _defineProperty(receiver, property, value);\n                }\n\n                return true;\n            };\n        }\n\n        return set(target, property, value, receiver);\n    }\n\n    function _set(target, property, value, receiver, isStrict) {\n        var s = set(target, property, value, receiver || target);\n\n        if (!s && isStrict) {\n            throw new Error('failed to set property');\n        }\n\n        return value;\n    }\n\n    function _taggedTemplateLiteral(strings, raw) {\n        if (!raw) {\n            raw = strings.slice(0);\n        }\n\n        return Object.freeze(\n            Object.defineProperties(strings, {\n                raw: {\n                    value: Object.freeze(raw),\n                },\n            })\n        );\n    }\n\n    function _taggedTemplateLiteralLoose(strings, raw) {\n        if (!raw) {\n            raw = strings.slice(0);\n        }\n\n        strings.raw = raw;\n        return strings;\n    }\n\n    function _temporalRef(val, name) {\n        if (val === _temporalUndefined) {\n            throw new ReferenceError(name + ' is not defined - temporal dead zone');\n        } else {\n            return val;\n        }\n    }\n\n    function _readOnlyError(name) {\n        throw new Error('\"' + name + '\" is read-only');\n    }\n\n    function _classNameTDZError(name) {\n        throw new Error('Class \"' + name + '\" cannot be referenced in computed property keys.');\n    }\n\n    var _temporalUndefined = {};\n\n    function _slicedToArray(arr, i) {\n        return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n    }\n\n    function _slicedToArrayLoose(arr, i) {\n        return _arrayWithHoles(arr) || _iterableToArrayLimitLoose(arr, i) || _nonIterableRest();\n    }\n\n    function _toArray(arr) {\n        return _arrayWithHoles(arr) || _iterableToArray(arr) || _nonIterableRest();\n    }\n\n    function _toConsumableArray(arr) {\n        return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n    }\n\n    function _arrayWithoutHoles(arr) {\n        if (Array.isArray(arr)) {\n            for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n            return arr2;\n        }\n    }\n\n    function _arrayWithHoles(arr) {\n        if (Array.isArray(arr)) return arr;\n    }\n\n    function _iterableToArray(iter) {\n        if (\n            Symbol.iterator in Object(iter) ||\n            Object.prototype.toString.call(iter) === '[object Arguments]'\n        )\n            return Array.from(iter);\n    }\n\n    function _iterableToArrayLimit(arr, i) {\n        var _arr = [];\n        var _n = true;\n        var _d = false;\n        var _e = undefined;\n\n        try {\n            for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n                _arr.push(_s.value);\n\n                if (i && _arr.length === i) break;\n            }\n        } catch (err) {\n            _d = true;\n            _e = err;\n        } finally {\n            try {\n                if (!_n && _i['return'] != null) _i['return']();\n            } finally {\n                if (_d) throw _e;\n            }\n        }\n\n        return _arr;\n    }\n\n    function _iterableToArrayLimitLoose(arr, i) {\n        var _arr = [];\n\n        for (var _iterator = arr[Symbol.iterator](), _step; !(_step = _iterator.next()).done; ) {\n            _arr.push(_step.value);\n\n            if (i && _arr.length === i) break;\n        }\n\n        return _arr;\n    }\n\n    function _nonIterableSpread() {\n        throw new TypeError('Invalid attempt to spread non-iterable instance');\n    }\n\n    function _nonIterableRest() {\n        throw new TypeError('Invalid attempt to destructure non-iterable instance');\n    }\n\n    function _skipFirstGeneratorNext(fn) {\n        return function() {\n            var it = fn.apply(this, arguments);\n            it.next();\n            return it;\n        };\n    }\n\n    function _toPrimitive(input, hint) {\n        if (typeof input !== 'object' || input === null) return input;\n        var prim = input[Symbol.toPrimitive];\n\n        if (prim !== undefined) {\n            var res = prim.call(input, hint || 'default');\n            if (typeof res !== 'object') return res;\n            throw new TypeError('@@toPrimitive must return a primitive value.');\n        }\n\n        return (hint === 'string' ? String : Number)(input);\n    }\n\n    function _toPropertyKey(arg) {\n        var key = _toPrimitive(arg, 'string');\n\n        return typeof key === 'symbol' ? key : String(key);\n    }\n\n    function _initializerWarningHelper(descriptor, context) {\n        throw new Error(\n            'Decorating class property failed. Please ensure that ' +\n                'proposal-class-properties is enabled and set to use loose mode. ' +\n                'To use proposal-class-properties in spec mode with decorators, wait for ' +\n                'the next major version of decorators in stage 2.'\n        );\n    }\n\n    function _initializerDefineProperty(target, property, descriptor, context) {\n        if (!descriptor) return;\n        Object.defineProperty(target, property, {\n            enumerable: descriptor.enumerable,\n            configurable: descriptor.configurable,\n            writable: descriptor.writable,\n            value: descriptor.initializer ? descriptor.initializer.call(context) : void 0,\n        });\n    }\n\n    function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n        var desc = {};\n        Object.keys(descriptor).forEach(function(key) {\n            desc[key] = descriptor[key];\n        });\n        desc.enumerable = !!desc.enumerable;\n        desc.configurable = !!desc.configurable;\n\n        if ('value' in desc || desc.initializer) {\n            desc.writable = true;\n        }\n\n        desc = decorators\n            .slice()\n            .reverse()\n            .reduce(function(desc, decorator) {\n                return decorator(target, property, desc) || desc;\n            }, desc);\n\n        if (context && desc.initializer !== void 0) {\n            desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n            desc.initializer = undefined;\n        }\n\n        if (desc.initializer === void 0) {\n            Object.defineProperty(target, property, desc);\n            desc = null;\n        }\n\n        return desc;\n    }\n\n    var id = 0;\n\n    function _classPrivateFieldLooseKey(name) {\n        return '__private_' + id++ + '_' + name;\n    }\n\n    function _classPrivateFieldLooseBase(receiver, privateKey) {\n        if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) {\n            throw new TypeError('attempted to use private field on non-instance');\n        }\n\n        return receiver;\n    }\n\n    function _classPrivateFieldGet(receiver, privateMap) {\n        if (!privateMap.has(receiver)) {\n            throw new TypeError('attempted to get private field on non-instance');\n        }\n\n        var descriptor = privateMap.get(receiver);\n\n        if (descriptor.get) {\n            return descriptor.get.call(receiver);\n        }\n\n        return descriptor.value;\n    }\n\n    function _classPrivateFieldSet(receiver, privateMap, value) {\n        if (!privateMap.has(receiver)) {\n            throw new TypeError('attempted to set private field on non-instance');\n        }\n\n        var descriptor = privateMap.get(receiver);\n\n        if (descriptor.set) {\n            descriptor.set.call(receiver, value);\n        } else {\n            if (!descriptor.writable) {\n                throw new TypeError('attempted to set read only private field');\n            }\n\n            descriptor.value = value;\n        }\n\n        return value;\n    }\n\n    function _classStaticPrivateFieldSpecGet(receiver, classConstructor, descriptor) {\n        if (receiver !== classConstructor) {\n            throw new TypeError('Private static access of wrong provenance');\n        }\n\n        return descriptor.value;\n    }\n\n    function _classStaticPrivateFieldSpecSet(receiver, classConstructor, descriptor, value) {\n        if (receiver !== classConstructor) {\n            throw new TypeError('Private static access of wrong provenance');\n        }\n\n        if (!descriptor.writable) {\n            throw new TypeError('attempted to set read only private field');\n        }\n\n        descriptor.value = value;\n        return value;\n    }\n\n    function _classStaticPrivateMethodGet(receiver, classConstructor, method) {\n        if (receiver !== classConstructor) {\n            throw new TypeError('Private static access of wrong provenance');\n        }\n\n        return method;\n    }\n\n    function _classStaticPrivateMethodSet() {\n        throw new TypeError('attempted to set read only static private field');\n    }\n\n    function _decorate(decorators, factory, superClass, mixins) {\n        var api = _getDecoratorsApi();\n\n        if (mixins) {\n            for (var i = 0; i < mixins.length; i++) {\n                api = mixins[i](api);\n            }\n        }\n\n        var r = factory(function initialize(O) {\n            api.initializeInstanceElements(O, decorated.elements);\n        }, superClass);\n        var decorated = api.decorateClass(\n            _coalesceClassElements(r.d.map(_createElementDescriptor)),\n            decorators\n        );\n        api.initializeClassElements(r.F, decorated.elements);\n        return api.runClassFinishers(r.F, decorated.finishers);\n    }\n\n    function _getDecoratorsApi() {\n        _getDecoratorsApi = function() {\n            return api;\n        };\n\n        var api = {\n            elementsDefinitionOrder: [['method'], ['field']],\n            initializeInstanceElements: function(O, elements) {\n                ['method', 'field'].forEach(function(kind) {\n                    elements.forEach(function(element) {\n                        if (element.kind === kind && element.placement === 'own') {\n                            this.defineClassElement(O, element);\n                        }\n                    }, this);\n                }, this);\n            },\n            initializeClassElements: function(F, elements) {\n                var proto = F.prototype;\n                ['method', 'field'].forEach(function(kind) {\n                    elements.forEach(function(element) {\n                        var placement = element.placement;\n\n                        if (\n                            element.kind === kind &&\n                            (placement === 'static' || placement === 'prototype')\n                        ) {\n                            var receiver = placement === 'static' ? F : proto;\n                            this.defineClassElement(receiver, element);\n                        }\n                    }, this);\n                }, this);\n            },\n            defineClassElement: function(receiver, element) {\n                var descriptor = element.descriptor;\n\n                if (element.kind === 'field') {\n                    var initializer = element.initializer;\n                    descriptor = {\n                        enumerable: descriptor.enumerable,\n                        writable: descriptor.writable,\n                        configurable: descriptor.configurable,\n                        value: initializer === void 0 ? void 0 : initializer.call(receiver),\n                    };\n                }\n\n                Object.defineProperty(receiver, element.key, descriptor);\n            },\n            decorateClass: function(elements, decorators) {\n                var newElements = [];\n                var finishers = [];\n                var placements = {\n                    static: [],\n                    prototype: [],\n                    own: [],\n                };\n                elements.forEach(function(element) {\n                    this.addElementPlacement(element, placements);\n                }, this);\n                elements.forEach(function(element) {\n                    if (!_hasDecorators(element)) return newElements.push(element);\n                    var elementFinishersExtras = this.decorateElement(element, placements);\n                    newElements.push(elementFinishersExtras.element);\n                    newElements.push.apply(newElements, elementFinishersExtras.extras);\n                    finishers.push.apply(finishers, elementFinishersExtras.finishers);\n                }, this);\n\n                if (!decorators) {\n                    return {\n                        elements: newElements,\n                        finishers: finishers,\n                    };\n                }\n\n                var result = this.decorateConstructor(newElements, decorators);\n                finishers.push.apply(finishers, result.finishers);\n                result.finishers = finishers;\n                return result;\n            },\n            addElementPlacement: function(element, placements, silent) {\n                var keys = placements[element.placement];\n\n                if (!silent && keys.indexOf(element.key) !== -1) {\n                    throw new TypeError('Duplicated element (' + element.key + ')');\n                }\n\n                keys.push(element.key);\n            },\n            decorateElement: function(element, placements) {\n                var extras = [];\n                var finishers = [];\n\n                for (var decorators = element.decorators, i = decorators.length - 1; i >= 0; i--) {\n                    var keys = placements[element.placement];\n                    keys.splice(keys.indexOf(element.key), 1);\n                    var elementObject = this.fromElementDescriptor(element);\n                    var elementFinisherExtras = this.toElementFinisherExtras(\n                        (0, decorators[i])(elementObject) || elementObject\n                    );\n                    element = elementFinisherExtras.element;\n                    this.addElementPlacement(element, placements);\n\n                    if (elementFinisherExtras.finisher) {\n                        finishers.push(elementFinisherExtras.finisher);\n                    }\n\n                    var newExtras = elementFinisherExtras.extras;\n\n                    if (newExtras) {\n                        for (var j = 0; j < newExtras.length; j++) {\n                            this.addElementPlacement(newExtras[j], placements);\n                        }\n\n                        extras.push.apply(extras, newExtras);\n                    }\n                }\n\n                return {\n                    element: element,\n                    finishers: finishers,\n                    extras: extras,\n                };\n            },\n            decorateConstructor: function(elements, decorators) {\n                var finishers = [];\n\n                for (var i = decorators.length - 1; i >= 0; i--) {\n                    var obj = this.fromClassDescriptor(elements);\n                    var elementsAndFinisher = this.toClassDescriptor(\n                        (0, decorators[i])(obj) || obj\n                    );\n\n                    if (elementsAndFinisher.finisher !== undefined) {\n                        finishers.push(elementsAndFinisher.finisher);\n                    }\n\n                    if (elementsAndFinisher.elements !== undefined) {\n                        elements = elementsAndFinisher.elements;\n\n                        for (var j = 0; j < elements.length - 1; j++) {\n                            for (var k = j + 1; k < elements.length; k++) {\n                                if (\n                                    elements[j].key === elements[k].key &&\n                                    elements[j].placement === elements[k].placement\n                                ) {\n                                    throw new TypeError(\n                                        'Duplicated element (' + elements[j].key + ')'\n                                    );\n                                }\n                            }\n                        }\n                    }\n                }\n\n                return {\n                    elements: elements,\n                    finishers: finishers,\n                };\n            },\n            fromElementDescriptor: function(element) {\n                var obj = {\n                    kind: element.kind,\n                    key: element.key,\n                    placement: element.placement,\n                    descriptor: element.descriptor,\n                };\n                var desc = {\n                    value: 'Descriptor',\n                    configurable: true,\n                };\n                Object.defineProperty(obj, Symbol.toStringTag, desc);\n                if (element.kind === 'field') obj.initializer = element.initializer;\n                return obj;\n            },\n            toElementDescriptors: function(elementObjects) {\n                if (elementObjects === undefined) return;\n                return _toArray(elementObjects).map(function(elementObject) {\n                    var element = this.toElementDescriptor(elementObject);\n                    this.disallowProperty(elementObject, 'finisher', 'An element descriptor');\n                    this.disallowProperty(elementObject, 'extras', 'An element descriptor');\n                    return element;\n                }, this);\n            },\n            toElementDescriptor: function(elementObject) {\n                var kind = String(elementObject.kind);\n\n                if (kind !== 'method' && kind !== 'field') {\n                    throw new TypeError(\n                        'An element descriptor\\'s .kind property must be either \"method\" or' +\n                            ' \"field\", but a decorator created an element descriptor with' +\n                            ' .kind \"' +\n                            kind +\n                            '\"'\n                    );\n                }\n\n                var key = _toPropertyKey(elementObject.key);\n\n                var placement = String(elementObject.placement);\n\n                if (placement !== 'static' && placement !== 'prototype' && placement !== 'own') {\n                    throw new TypeError(\n                        'An element descriptor\\'s .placement property must be one of \"static\",' +\n                            ' \"prototype\" or \"own\", but a decorator created an element descriptor' +\n                            ' with .placement \"' +\n                            placement +\n                            '\"'\n                    );\n                }\n\n                var descriptor = elementObject.descriptor;\n                this.disallowProperty(elementObject, 'elements', 'An element descriptor');\n                var element = {\n                    kind: kind,\n                    key: key,\n                    placement: placement,\n                    descriptor: Object.assign({}, descriptor),\n                };\n\n                if (kind !== 'field') {\n                    this.disallowProperty(elementObject, 'initializer', 'A method descriptor');\n                } else {\n                    this.disallowProperty(\n                        descriptor,\n                        'get',\n                        'The property descriptor of a field descriptor'\n                    );\n                    this.disallowProperty(\n                        descriptor,\n                        'set',\n                        'The property descriptor of a field descriptor'\n                    );\n                    this.disallowProperty(\n                        descriptor,\n                        'value',\n                        'The property descriptor of a field descriptor'\n                    );\n                    element.initializer = elementObject.initializer;\n                }\n\n                return element;\n            },\n            toElementFinisherExtras: function(elementObject) {\n                var element = this.toElementDescriptor(elementObject);\n\n                var finisher = _optionalCallableProperty(elementObject, 'finisher');\n\n                var extras = this.toElementDescriptors(elementObject.extras);\n                return {\n                    element: element,\n                    finisher: finisher,\n                    extras: extras,\n                };\n            },\n            fromClassDescriptor: function(elements) {\n                var obj = {\n                    kind: 'class',\n                    elements: elements.map(this.fromElementDescriptor, this),\n                };\n                var desc = {\n                    value: 'Descriptor',\n                    configurable: true,\n                };\n                Object.defineProperty(obj, Symbol.toStringTag, desc);\n                return obj;\n            },\n            toClassDescriptor: function(obj) {\n                var kind = String(obj.kind);\n\n                if (kind !== 'class') {\n                    throw new TypeError(\n                        'A class descriptor\\'s .kind property must be \"class\", but a decorator' +\n                            ' created a class descriptor with .kind \"' +\n                            kind +\n                            '\"'\n                    );\n                }\n\n                this.disallowProperty(obj, 'key', 'A class descriptor');\n                this.disallowProperty(obj, 'placement', 'A class descriptor');\n                this.disallowProperty(obj, 'descriptor', 'A class descriptor');\n                this.disallowProperty(obj, 'initializer', 'A class descriptor');\n                this.disallowProperty(obj, 'extras', 'A class descriptor');\n\n                var finisher = _optionalCallableProperty(obj, 'finisher');\n\n                var elements = this.toElementDescriptors(obj.elements);\n                return {\n                    elements: elements,\n                    finisher: finisher,\n                };\n            },\n            runClassFinishers: function(constructor, finishers) {\n                for (var i = 0; i < finishers.length; i++) {\n                    var newConstructor = (0, finishers[i])(constructor);\n\n                    if (newConstructor !== undefined) {\n                        if (typeof newConstructor !== 'function') {\n                            throw new TypeError('Finishers must return a constructor.');\n                        }\n\n                        constructor = newConstructor;\n                    }\n                }\n\n                return constructor;\n            },\n            disallowProperty: function(obj, name, objectType) {\n                if (obj[name] !== undefined) {\n                    throw new TypeError(objectType + \" can't have a .\" + name + ' property.');\n                }\n            },\n        };\n        return api;\n    }\n\n    function _createElementDescriptor(def) {\n        var key = _toPropertyKey(def.key);\n\n        var descriptor;\n\n        if (def.kind === 'method') {\n            descriptor = {\n                value: def.value,\n                writable: true,\n                configurable: true,\n                enumerable: false,\n            };\n        } else if (def.kind === 'get') {\n            descriptor = {\n                get: def.value,\n                configurable: true,\n                enumerable: false,\n            };\n        } else if (def.kind === 'set') {\n            descriptor = {\n                set: def.value,\n                configurable: true,\n                enumerable: false,\n            };\n        } else if (def.kind === 'field') {\n            descriptor = {\n                configurable: true,\n                writable: true,\n                enumerable: true,\n            };\n        }\n\n        var element = {\n            kind: def.kind === 'field' ? 'field' : 'method',\n            key: key,\n            placement: def.static ? 'static' : def.kind === 'field' ? 'own' : 'prototype',\n            descriptor: descriptor,\n        };\n        if (def.decorators) element.decorators = def.decorators;\n        if (def.kind === 'field') element.initializer = def.value;\n        return element;\n    }\n\n    function _coalesceGetterSetter(element, other) {\n        if (element.descriptor.get !== undefined) {\n            other.descriptor.get = element.descriptor.get;\n        } else {\n            other.descriptor.set = element.descriptor.set;\n        }\n    }\n\n    function _coalesceClassElements(elements) {\n        var newElements = [];\n\n        var isSameElement = function(other) {\n            return (\n                other.kind === 'method' &&\n                other.key === element.key &&\n                other.placement === element.placement\n            );\n        };\n\n        for (var i = 0; i < elements.length; i++) {\n            var element = elements[i];\n            var other;\n\n            if (element.kind === 'method' && (other = newElements.find(isSameElement))) {\n                if (_isDataDescriptor(element.descriptor) || _isDataDescriptor(other.descriptor)) {\n                    if (_hasDecorators(element) || _hasDecorators(other)) {\n                        throw new ReferenceError(\n                            'Duplicated methods (' + element.key + \") can't be decorated.\"\n                        );\n                    }\n\n                    other.descriptor = element.descriptor;\n                } else {\n                    if (_hasDecorators(element)) {\n                        if (_hasDecorators(other)) {\n                            throw new ReferenceError(\n                                \"Decorators can't be placed on different accessors with for \" +\n                                    'the same property (' +\n                                    element.key +\n                                    ').'\n                            );\n                        }\n\n                        other.decorators = element.decorators;\n                    }\n\n                    _coalesceGetterSetter(element, other);\n                }\n            } else {\n                newElements.push(element);\n            }\n        }\n\n        return newElements;\n    }\n\n    function _hasDecorators(element) {\n        return element.decorators && element.decorators.length;\n    }\n\n    function _isDataDescriptor(desc) {\n        return desc !== undefined && !(desc.value === undefined && desc.writable === undefined);\n    }\n\n    function _optionalCallableProperty(obj, name) {\n        var value = obj[name];\n\n        if (value !== undefined && typeof value !== 'function') {\n            throw new TypeError(\"Expected '\" + name + \"' to be a function\");\n        }\n\n        return value;\n    }\n\n    function _classPrivateMethodGet(receiver, privateSet, fn) {\n        if (!privateSet.has(receiver)) {\n            throw new TypeError('attempted to get private field on non-instance');\n        }\n\n        return fn;\n    }\n\n    function _classPrivateMethodSet() {\n        throw new TypeError('attempted to reassign private method');\n    }\n\n    function _wrapRegExp(re, groups) {\n        _wrapRegExp = function(re, groups) {\n            return new BabelRegExp(re, groups);\n        };\n\n        var _RegExp = _wrapNativeSuper(RegExp);\n\n        var _super = RegExp.prototype;\n\n        var _groups = new WeakMap();\n\n        function BabelRegExp(re, groups) {\n            var _this = _RegExp.call(this, re);\n\n            _groups.set(_this, groups);\n\n            return _this;\n        }\n\n        _inherits(BabelRegExp, _RegExp);\n\n        BabelRegExp.prototype.exec = function(str) {\n            var result = _super.exec.call(this, str);\n\n            if (result) result.groups = buildGroups(result, this);\n            return result;\n        };\n\n        BabelRegExp.prototype[Symbol.replace] = function(str, substitution) {\n            if (typeof substitution === 'string') {\n                var groups = _groups.get(this);\n\n                return _super[Symbol.replace].call(\n                    this,\n                    str,\n                    substitution.replace(/\\$<([^>]+)>/g, function(_, name) {\n                        return '$' + groups[name];\n                    })\n                );\n            } else if (typeof substitution === 'function') {\n                var _this = this;\n\n                return _super[Symbol.replace].call(this, str, function() {\n                    var args = [];\n                    args.push.apply(args, arguments);\n\n                    if (typeof args[args.length - 1] !== 'object') {\n                        args.push(buildGroups(args, _this));\n                    }\n\n                    return substitution.apply(this, args);\n                });\n            } else {\n                return _super[Symbol.replace].call(this, str, substitution);\n            }\n        };\n\n        function buildGroups(result, re) {\n            var g = _groups.get(re);\n\n            return Object.keys(g).reduce(function(groups, name) {\n                groups[name] = result[g[name]];\n                return groups;\n            }, Object.create(null));\n        }\n\n        return _wrapRegExp.apply(this, arguments);\n    }\n\n    var MARKUP_RECT = ['x', 'y', 'left', 'top', 'right', 'bottom', 'width', 'height'];\n\n    var toOptionalFraction = function toOptionalFraction(value) {\n        return typeof value === 'string' && /%/.test(value) ? parseFloat(value) / 100 : value;\n    };\n\n    // adds default markup properties, clones markup\n    var prepareMarkup = function prepareMarkup(markup) {\n        var _markup = _slicedToArray(markup, 2),\n            type = _markup[0],\n            props = _markup[1];\n\n        var rect = props.points\n            ? {}\n            : MARKUP_RECT.reduce(function(prev, curr) {\n                  prev[curr] = toOptionalFraction(props[curr]);\n                  return prev;\n              }, {});\n\n        return [\n            type,\n            Object.assign(\n                {\n                    zIndex: 0,\n                },\n                props,\n                rect\n            ),\n        ];\n    };\n\n    var getImageSize = function getImageSize(file) {\n        return new Promise(function(resolve, reject) {\n            var imageElement = new Image();\n            imageElement.src = URL.createObjectURL(file);\n\n            // start testing size\n            var measure = function measure() {\n                var width = imageElement.naturalWidth;\n                var height = imageElement.naturalHeight;\n                var hasSize = width && height;\n                if (!hasSize) return;\n\n                URL.revokeObjectURL(imageElement.src);\n                clearInterval(intervalId);\n                resolve({ width: width, height: height });\n            };\n\n            imageElement.onerror = function(err) {\n                URL.revokeObjectURL(imageElement.src);\n                clearInterval(intervalId);\n                reject(err);\n            };\n\n            var intervalId = setInterval(measure, 1);\n\n            measure();\n        });\n    };\n\n    /**\n     * Polyfill Edge and IE when in Browser\n     */\n    if (typeof window !== 'undefined' && typeof window.document !== 'undefined') {\n        if (!HTMLCanvasElement.prototype.toBlob) {\n            Object.defineProperty(HTMLCanvasElement.prototype, 'toBlob', {\n                value: function value(cb, type, quality) {\n                    var canvas = this;\n                    setTimeout(function() {\n                        var dataURL = canvas.toDataURL(type, quality).split(',')[1];\n                        var binStr = atob(dataURL);\n                        var index = binStr.length;\n                        var data = new Uint8Array(index);\n                        while (index--) {\n                            data[index] = binStr.charCodeAt(index);\n                        }\n                        cb(new Blob([data], { type: type || 'image/png' }));\n                    });\n                },\n            });\n        }\n    }\n\n    var isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n    var isIOS = isBrowser && /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n\n    /**\n     * Image Transform Plugin\n     */\n    var plugin = function plugin(_ref) {\n        var addFilter = _ref.addFilter,\n            utils = _ref.utils;\n        var Type = utils.Type,\n            forin = utils.forin,\n            getFileFromBlob = utils.getFileFromBlob,\n            isFile = utils.isFile;\n\n        /**\n         * Helper functions\n         */\n\n        // valid transforms (in correct order)\n        var TRANSFORM_LIST = ['crop', 'resize', 'filter', 'markup', 'output'];\n\n        var createVariantCreator = function createVariantCreator(updateMetadata) {\n            return function(transform, file, metadata) {\n                return transform(file, updateMetadata ? updateMetadata(metadata) : metadata);\n            };\n        };\n\n        var isDefaultCrop = function isDefaultCrop(crop) {\n            return (\n                crop.aspectRatio === null &&\n                crop.rotation === 0 &&\n                crop.zoom === 1 &&\n                crop.center &&\n                crop.center.x === 0.5 &&\n                crop.center.y === 0.5 &&\n                crop.flip &&\n                crop.flip.horizontal === false &&\n                crop.flip.vertical === false\n            );\n        };\n\n        /**\n         * Filters\n         */\n        addFilter('SHOULD_PREPARE_OUTPUT', function(shouldPrepareOutput, _ref2) {\n            var query = _ref2.query;\n            return new Promise(function(resolve) {\n                // If is not async should prepare now\n                resolve(!query('IS_ASYNC'));\n            });\n        });\n\n        var shouldTransformFile = function shouldTransformFile(query, file, item) {\n            return new Promise(function(resolve) {\n                if (\n                    !query('GET_ALLOW_IMAGE_TRANSFORM') ||\n                    item.archived ||\n                    !isFile(file) ||\n                    !isImage(file)\n                ) {\n                    return resolve(false);\n                }\n\n                // if size can't be read this browser doesn't support image\n                getImageSize(file)\n                    .then(function() {\n                        var fn = query('GET_IMAGE_TRANSFORM_IMAGE_FILTER');\n                        if (fn) {\n                            var filterResult = fn(file);\n                            if (filterResult == null) {\n                                // undefined or null\n                                return handleRevert(true);\n                            }\n                            if (typeof filterResult === 'boolean') {\n                                return resolve(filterResult);\n                            }\n                            if (typeof filterResult.then === 'function') {\n                                return filterResult.then(resolve);\n                            }\n                        }\n\n                        resolve(true);\n                    })\n                    .catch(function(err) {\n                        resolve(false);\n                    });\n            });\n        };\n\n        addFilter('DID_CREATE_ITEM', function(item, _ref3) {\n            var query = _ref3.query,\n                dispatch = _ref3.dispatch;\n            if (!query('GET_ALLOW_IMAGE_TRANSFORM')) return;\n\n            item.extend('requestPrepare', function() {\n                return new Promise(function(resolve, reject) {\n                    dispatch(\n                        'REQUEST_PREPARE_OUTPUT',\n                        {\n                            query: item.id,\n                            item: item,\n                            success: resolve,\n                            failure: reject,\n                        },\n\n                        true\n                    );\n                });\n            });\n        });\n\n        // subscribe to file transformations\n        addFilter('PREPARE_OUTPUT', function(file, _ref4) {\n            var query = _ref4.query,\n                item = _ref4.item;\n            return new Promise(function(resolve) {\n                shouldTransformFile(query, file, item).then(function(shouldTransform) {\n                    // no need to transform, exit\n                    if (!shouldTransform) return resolve(file);\n\n                    // get variants\n                    var variants = [];\n\n                    // add original file\n                    if (query('GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_ORIGINAL')) {\n                        variants.push(function() {\n                            return new Promise(function(resolve) {\n                                resolve({\n                                    name: query('GET_IMAGE_TRANSFORM_VARIANTS_ORIGINAL_NAME'),\n                                    file: file,\n                                });\n                            });\n                        });\n                    }\n\n                    // add default output version if output default set to true or if no variants defined\n                    if (query('GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_DEFAULT')) {\n                        variants.push(function(transform, file, metadata) {\n                            return new Promise(function(resolve) {\n                                transform(file, metadata).then(function(file) {\n                                    return resolve({\n                                        name: query('GET_IMAGE_TRANSFORM_VARIANTS_DEFAULT_NAME'),\n\n                                        file: file,\n                                    });\n                                });\n                            });\n                        });\n                    }\n\n                    // get other variants\n                    var variantsDefinition = query('GET_IMAGE_TRANSFORM_VARIANTS') || {};\n                    forin(variantsDefinition, function(key, fn) {\n                        var createVariant = createVariantCreator(fn);\n                        variants.push(function(transform, file, metadata) {\n                            return new Promise(function(resolve) {\n                                createVariant(transform, file, metadata).then(function(file) {\n                                    return resolve({ name: key, file: file });\n                                });\n                            });\n                        });\n                    });\n\n                    // output format (quality 0 => 100)\n                    var qualityAsPercentage = query('GET_IMAGE_TRANSFORM_OUTPUT_QUALITY');\n                    var qualityMode = query('GET_IMAGE_TRANSFORM_OUTPUT_QUALITY_MODE');\n                    var quality = qualityAsPercentage === null ? null : qualityAsPercentage / 100;\n                    var type = query('GET_IMAGE_TRANSFORM_OUTPUT_MIME_TYPE');\n                    var clientTransforms =\n                        query('GET_IMAGE_TRANSFORM_CLIENT_TRANSFORMS') || TRANSFORM_LIST;\n\n                    // update transform metadata object\n                    item.setMetadata(\n                        'output',\n                        {\n                            type: type,\n                            quality: quality,\n                            client: clientTransforms,\n                        },\n\n                        true\n                    );\n\n                    // the function that is used to apply the file transformations\n                    var transform = function transform(file, metadata) {\n                        return new Promise(function(resolve, reject) {\n                            var filteredMetadata = Object.assign({}, metadata);\n\n                            Object.keys(filteredMetadata)\n                                .filter(function(instruction) {\n                                    return instruction !== 'exif';\n                                })\n                                .forEach(function(instruction) {\n                                    // if not in list, remove from object, the instruction will be handled by the server\n                                    if (clientTransforms.indexOf(instruction) === -1) {\n                                        delete filteredMetadata[instruction];\n                                    }\n                                });\n                            var resize = filteredMetadata.resize,\n                                exif = filteredMetadata.exif,\n                                output = filteredMetadata.output,\n                                crop = filteredMetadata.crop,\n                                filter = filteredMetadata.filter,\n                                markup = filteredMetadata.markup;\n\n                            var instructions = {\n                                image: {\n                                    orientation: exif ? exif.orientation : null,\n                                },\n\n                                output:\n                                    output &&\n                                    (output.type ||\n                                        typeof output.quality === 'number' ||\n                                        output.background)\n                                        ? {\n                                              type: output.type,\n                                              quality:\n                                                  typeof output.quality === 'number'\n                                                      ? output.quality * 100\n                                                      : null,\n                                              background:\n                                                  output.background ||\n                                                  query(\n                                                      'GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR'\n                                                  ) ||\n                                                  null,\n                                          }\n                                        : undefined,\n                                size:\n                                    resize && (resize.size.width || resize.size.height)\n                                        ? Object.assign(\n                                              {\n                                                  mode: resize.mode,\n                                                  upscale: resize.upscale,\n                                              },\n                                              resize.size\n                                          )\n                                        : undefined,\n                                crop:\n                                    crop && !isDefaultCrop(crop)\n                                        ? Object.assign(\n                                              {},\n\n                                              crop\n                                          )\n                                        : undefined,\n                                markup: markup && markup.length ? markup.map(prepareMarkup) : [],\n                                filter: filter,\n                            };\n\n                            if (instructions.output) {\n                                // determine if file type will change\n                                var willChangeType = output.type\n                                    ? // type set\n                                      output.type !== file.type\n                                    : // type not set\n                                      false;\n\n                                var canChangeQuality = /\\/jpe?g$/.test(file.type);\n                                var willChangeQuality =\n                                    output.quality !== null\n                                        ? // quality set\n                                          canChangeQuality && qualityMode === 'always'\n                                        : // quality not set\n                                          false;\n\n                                // determine if file data will be modified\n                                var willModifyImageData = !!(\n                                    instructions.size ||\n                                    instructions.crop ||\n                                    instructions.filter ||\n                                    willChangeType ||\n                                    willChangeQuality\n                                );\n\n                                // if we're not modifying the image data then we don't have to modify the output\n                                if (!willModifyImageData) return resolve(file);\n                            }\n\n                            var options = {\n                                beforeCreateBlob: query('GET_IMAGE_TRANSFORM_BEFORE_CREATE_BLOB'),\n                                afterCreateBlob: query('GET_IMAGE_TRANSFORM_AFTER_CREATE_BLOB'),\n                                canvasMemoryLimit: query('GET_IMAGE_TRANSFORM_CANVAS_MEMORY_LIMIT'),\n                                stripImageHead: query(\n                                    'GET_IMAGE_TRANSFORM_OUTPUT_STRIP_IMAGE_HEAD'\n                                ),\n                            };\n\n                            transformImage(file, instructions, options)\n                                .then(function(blob) {\n                                    // set file object\n                                    var out = getFileFromBlob(\n                                        blob,\n                                        // rename the original filename to match the mime type of the output image\n                                        renameFileToMatchMimeType(\n                                            file.name,\n                                            getValidOutputMimeType(blob.type)\n                                        )\n                                    );\n\n                                    resolve(out);\n                                })\n                                .catch(reject);\n                        });\n                    };\n\n                    // start creating variants\n                    var variantPromises = variants.map(function(create) {\n                        return create(transform, file, item.getMetadata());\n                    });\n\n                    // wait for results\n                    Promise.all(variantPromises).then(function(files) {\n                        // if single file object in array, return the single file object else, return array of\n                        resolve(\n                            files.length === 1 && files[0].name === null\n                                ? // return the File object\n                                  files[0].file\n                                : // return an array of files { name:'name', file:File }\n                                  files\n                        );\n                    });\n                });\n            });\n        });\n\n        // Expose plugin options\n        return {\n            options: {\n                allowImageTransform: [true, Type.BOOLEAN],\n\n                // filter images to transform\n                imageTransformImageFilter: [null, Type.FUNCTION],\n\n                // null, 'image/jpeg', 'image/png'\n                imageTransformOutputMimeType: [null, Type.STRING],\n\n                // null, 0 - 100\n                imageTransformOutputQuality: [null, Type.INT],\n\n                // set to false to copy image exif data to output\n                imageTransformOutputStripImageHead: [true, Type.BOOLEAN],\n\n                // only apply transforms in this list\n                imageTransformClientTransforms: [null, Type.ARRAY],\n\n                // only apply output quality when a transform is required\n                imageTransformOutputQualityMode: ['always', Type.STRING],\n                // 'always'\n                // 'optional'\n                // 'mismatch' (future feature, only applied if quality differs from input)\n\n                // get image transform variants\n                imageTransformVariants: [null, Type.OBJECT],\n\n                // should we post the default transformed file\n                imageTransformVariantsIncludeDefault: [true, Type.BOOLEAN],\n\n                // which name to prefix the default transformed file with\n                imageTransformVariantsDefaultName: [null, Type.STRING],\n\n                // should we post the original file\n                imageTransformVariantsIncludeOriginal: [false, Type.BOOLEAN],\n\n                // which name to prefix the original file with\n                imageTransformVariantsOriginalName: ['original_', Type.STRING],\n\n                // called before creating the blob, receives canvas, expects promise resolve with canvas\n                imageTransformBeforeCreateBlob: [null, Type.FUNCTION],\n\n                // expects promise resolved with blob\n                imageTransformAfterCreateBlob: [null, Type.FUNCTION],\n\n                // canvas memory limit\n                imageTransformCanvasMemoryLimit: [\n                    isBrowser && isIOS ? 4096 * 4096 : null,\n                    Type.INT,\n                ],\n\n                // background image of the output canvas\n                imageTransformCanvasBackgroundColor: [null, Type.STRING],\n            },\n        };\n    };\n\n    // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n    if (isBrowser) {\n        document.dispatchEvent(new CustomEvent('FilePond:pluginloaded', { detail: plugin }));\n    }\n\n    return plugin;\n});\n","/*!\n * FilePond 4.32.8\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined'\n        ? factory(exports)\n        : typeof define === 'function' && define.amd\n        ? define(['exports'], factory)\n        : ((global = global || self), factory((global.FilePond = {})));\n})(this, function(exports) {\n    'use strict';\n\n    var isNode = function isNode(value) {\n        return value instanceof HTMLElement;\n    };\n\n    var createStore = function createStore(initialState) {\n        var queries = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n        var actions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n        // internal state\n        var state = Object.assign({}, initialState);\n\n        // contains all actions for next frame, is clear when actions are requested\n        var actionQueue = [];\n        var dispatchQueue = [];\n\n        // returns a duplicate of the current state\n        var getState = function getState() {\n            return Object.assign({}, state);\n        };\n\n        // returns a duplicate of the actions array and clears the actions array\n        var processActionQueue = function processActionQueue() {\n            // create copy of actions queue\n            var queue = [].concat(actionQueue);\n\n            // clear actions queue (we don't want no double actions)\n            actionQueue.length = 0;\n\n            return queue;\n        };\n\n        // processes actions that might block the main UI thread\n        var processDispatchQueue = function processDispatchQueue() {\n            // create copy of actions queue\n            var queue = [].concat(dispatchQueue);\n\n            // clear actions queue (we don't want no double actions)\n            dispatchQueue.length = 0;\n\n            // now dispatch these actions\n            queue.forEach(function(_ref) {\n                var type = _ref.type,\n                    data = _ref.data;\n                dispatch(type, data);\n            });\n        };\n\n        // adds a new action, calls its handler and\n        var dispatch = function dispatch(type, data, isBlocking) {\n            // is blocking action (should never block if document is hidden)\n            if (isBlocking && !document.hidden) {\n                dispatchQueue.push({ type: type, data: data });\n                return;\n            }\n\n            // if this action has a handler, handle the action\n            if (actionHandlers[type]) {\n                actionHandlers[type](data);\n            }\n\n            // now add action\n            actionQueue.push({\n                type: type,\n                data: data,\n            });\n        };\n\n        var query = function query(str) {\n            var _queryHandles;\n            for (\n                var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1;\n                _key < _len;\n                _key++\n            ) {\n                args[_key - 1] = arguments[_key];\n            }\n            return queryHandles[str]\n                ? (_queryHandles = queryHandles)[str].apply(_queryHandles, args)\n                : null;\n        };\n\n        var api = {\n            getState: getState,\n            processActionQueue: processActionQueue,\n            processDispatchQueue: processDispatchQueue,\n            dispatch: dispatch,\n            query: query,\n        };\n\n        var queryHandles = {};\n        queries.forEach(function(query) {\n            queryHandles = Object.assign({}, query(state), {}, queryHandles);\n        });\n\n        var actionHandlers = {};\n        actions.forEach(function(action) {\n            actionHandlers = Object.assign({}, action(dispatch, query, state), {}, actionHandlers);\n        });\n\n        return api;\n    };\n\n    var defineProperty = function defineProperty(obj, property, definition) {\n        if (typeof definition === 'function') {\n            obj[property] = definition;\n            return;\n        }\n        Object.defineProperty(obj, property, Object.assign({}, definition));\n    };\n\n    var forin = function forin(obj, cb) {\n        for (var key in obj) {\n            if (!obj.hasOwnProperty(key)) {\n                continue;\n            }\n\n            cb(key, obj[key]);\n        }\n    };\n\n    var createObject = function createObject(definition) {\n        var obj = {};\n        forin(definition, function(property) {\n            defineProperty(obj, property, definition[property]);\n        });\n        return obj;\n    };\n\n    var attr = function attr(node, name) {\n        var value = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n        if (value === null) {\n            return node.getAttribute(name) || node.hasAttribute(name);\n        }\n        node.setAttribute(name, value);\n    };\n\n    var ns = 'http://www.w3.org/2000/svg';\n    var svgElements = ['svg', 'path']; // only svg elements used\n\n    var isSVGElement = function isSVGElement(tag) {\n        return svgElements.includes(tag);\n    };\n\n    var createElement = function createElement(tag, className) {\n        var attributes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        if (typeof className === 'object') {\n            attributes = className;\n            className = null;\n        }\n        var element = isSVGElement(tag)\n            ? document.createElementNS(ns, tag)\n            : document.createElement(tag);\n        if (className) {\n            if (isSVGElement(tag)) {\n                attr(element, 'class', className);\n            } else {\n                element.className = className;\n            }\n        }\n        forin(attributes, function(name, value) {\n            attr(element, name, value);\n        });\n        return element;\n    };\n\n    var appendChild = function appendChild(parent) {\n        return function(child, index) {\n            if (typeof index !== 'undefined' && parent.children[index]) {\n                parent.insertBefore(child, parent.children[index]);\n            } else {\n                parent.appendChild(child);\n            }\n        };\n    };\n\n    var appendChildView = function appendChildView(parent, childViews) {\n        return function(view, index) {\n            if (typeof index !== 'undefined') {\n                childViews.splice(index, 0, view);\n            } else {\n                childViews.push(view);\n            }\n\n            return view;\n        };\n    };\n\n    var removeChildView = function removeChildView(parent, childViews) {\n        return function(view) {\n            // remove from child views\n            childViews.splice(childViews.indexOf(view), 1);\n\n            // remove the element\n            if (view.element.parentNode) {\n                parent.removeChild(view.element);\n            }\n\n            return view;\n        };\n    };\n\n    var IS_BROWSER = (function() {\n        return typeof window !== 'undefined' && typeof window.document !== 'undefined';\n    })();\n    var isBrowser = function isBrowser() {\n        return IS_BROWSER;\n    };\n\n    var testElement = isBrowser() ? createElement('svg') : {};\n    var getChildCount =\n        'children' in testElement\n            ? function(el) {\n                  return el.children.length;\n              }\n            : function(el) {\n                  return el.childNodes.length;\n              };\n\n    var getViewRect = function getViewRect(elementRect, childViews, offset, scale) {\n        var left = offset[0] || elementRect.left;\n        var top = offset[1] || elementRect.top;\n        var right = left + elementRect.width;\n        var bottom = top + elementRect.height * (scale[1] || 1);\n\n        var rect = {\n            // the rectangle of the element itself\n            element: Object.assign({}, elementRect),\n\n            // the rectangle of the element expanded to contain its children, does not include any margins\n            inner: {\n                left: elementRect.left,\n                top: elementRect.top,\n                right: elementRect.right,\n                bottom: elementRect.bottom,\n            },\n\n            // the rectangle of the element expanded to contain its children including own margin and child margins\n            // margins will be added after we've recalculated the size\n            outer: {\n                left: left,\n                top: top,\n                right: right,\n                bottom: bottom,\n            },\n        };\n\n        // expand rect to fit all child rectangles\n        childViews\n            .filter(function(childView) {\n                return !childView.isRectIgnored();\n            })\n            .map(function(childView) {\n                return childView.rect;\n            })\n            .forEach(function(childViewRect) {\n                expandRect(rect.inner, Object.assign({}, childViewRect.inner));\n                expandRect(rect.outer, Object.assign({}, childViewRect.outer));\n            });\n\n        // calculate inner width and height\n        calculateRectSize(rect.inner);\n\n        // append additional margin (top and left margins are included in top and left automatically)\n        rect.outer.bottom += rect.element.marginBottom;\n        rect.outer.right += rect.element.marginRight;\n\n        // calculate outer width and height\n        calculateRectSize(rect.outer);\n\n        return rect;\n    };\n\n    var expandRect = function expandRect(parent, child) {\n        // adjust for parent offset\n        child.top += parent.top;\n        child.right += parent.left;\n        child.bottom += parent.top;\n        child.left += parent.left;\n\n        if (child.bottom > parent.bottom) {\n            parent.bottom = child.bottom;\n        }\n\n        if (child.right > parent.right) {\n            parent.right = child.right;\n        }\n    };\n\n    var calculateRectSize = function calculateRectSize(rect) {\n        rect.width = rect.right - rect.left;\n        rect.height = rect.bottom - rect.top;\n    };\n\n    var isNumber = function isNumber(value) {\n        return typeof value === 'number';\n    };\n\n    /**\n     * Determines if position is at destination\n     * @param position\n     * @param destination\n     * @param velocity\n     * @param errorMargin\n     * @returns {boolean}\n     */\n    var thereYet = function thereYet(position, destination, velocity) {\n        var errorMargin = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0.001;\n        return Math.abs(position - destination) < errorMargin && Math.abs(velocity) < errorMargin;\n    };\n\n    /**\n     * Spring animation\n     */\n    var spring =\n        // default options\n        function spring() // method definition\n        {\n            var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n                _ref$stiffness = _ref.stiffness,\n                stiffness = _ref$stiffness === void 0 ? 0.5 : _ref$stiffness,\n                _ref$damping = _ref.damping,\n                damping = _ref$damping === void 0 ? 0.75 : _ref$damping,\n                _ref$mass = _ref.mass,\n                mass = _ref$mass === void 0 ? 10 : _ref$mass;\n            var target = null;\n            var position = null;\n            var velocity = 0;\n            var resting = false;\n\n            // updates spring state\n            var interpolate = function interpolate(ts, skipToEndState) {\n                // in rest, don't animate\n                if (resting) return;\n\n                // need at least a target or position to do springy things\n                if (!(isNumber(target) && isNumber(position))) {\n                    resting = true;\n                    velocity = 0;\n                    return;\n                }\n\n                // calculate spring force\n                var f = -(position - target) * stiffness;\n\n                // update velocity by adding force based on mass\n                velocity += f / mass;\n\n                // update position by adding velocity\n                position += velocity;\n\n                // slow down based on amount of damping\n                velocity *= damping;\n\n                // we've arrived if we're near target and our velocity is near zero\n                if (thereYet(position, target, velocity) || skipToEndState) {\n                    position = target;\n                    velocity = 0;\n                    resting = true;\n\n                    // we done\n                    api.onupdate(position);\n                    api.oncomplete(position);\n                } else {\n                    // progress update\n                    api.onupdate(position);\n                }\n            };\n\n            /**\n             * Set new target value\n             * @param value\n             */\n            var setTarget = function setTarget(value) {\n                // if currently has no position, set target and position to this value\n                if (isNumber(value) && !isNumber(position)) {\n                    position = value;\n                }\n\n                // next target value will not be animated to\n                if (target === null) {\n                    target = value;\n                    position = value;\n                }\n\n                // let start moving to target\n                target = value;\n\n                // already at target\n                if (position === target || typeof target === 'undefined') {\n                    // now resting as target is current position, stop moving\n                    resting = true;\n                    velocity = 0;\n\n                    // done!\n                    api.onupdate(position);\n                    api.oncomplete(position);\n\n                    return;\n                }\n\n                resting = false;\n            };\n\n            // need 'api' to call onupdate callback\n            var api = createObject({\n                interpolate: interpolate,\n                target: {\n                    set: setTarget,\n                    get: function get() {\n                        return target;\n                    },\n                },\n\n                resting: {\n                    get: function get() {\n                        return resting;\n                    },\n                },\n\n                onupdate: function onupdate(value) {},\n                oncomplete: function oncomplete(value) {},\n            });\n\n            return api;\n        };\n\n    var easeLinear = function easeLinear(t) {\n        return t;\n    };\n    var easeInOutQuad = function easeInOutQuad(t) {\n        return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n    };\n\n    var tween =\n        // default values\n        function tween() // method definition\n        {\n            var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n                _ref$duration = _ref.duration,\n                duration = _ref$duration === void 0 ? 500 : _ref$duration,\n                _ref$easing = _ref.easing,\n                easing = _ref$easing === void 0 ? easeInOutQuad : _ref$easing,\n                _ref$delay = _ref.delay,\n                delay = _ref$delay === void 0 ? 0 : _ref$delay;\n            var start = null;\n            var t;\n            var p;\n            var resting = true;\n            var reverse = false;\n            var target = null;\n\n            var interpolate = function interpolate(ts, skipToEndState) {\n                if (resting || target === null) return;\n\n                if (start === null) {\n                    start = ts;\n                }\n\n                if (ts - start < delay) return;\n\n                t = ts - start - delay;\n\n                if (t >= duration || skipToEndState) {\n                    t = 1;\n                    p = reverse ? 0 : 1;\n                    api.onupdate(p * target);\n                    api.oncomplete(p * target);\n                    resting = true;\n                } else {\n                    p = t / duration;\n                    api.onupdate((t >= 0 ? easing(reverse ? 1 - p : p) : 0) * target);\n                }\n            };\n\n            // need 'api' to call onupdate callback\n            var api = createObject({\n                interpolate: interpolate,\n                target: {\n                    get: function get() {\n                        return reverse ? 0 : target;\n                    },\n                    set: function set(value) {\n                        // is initial value\n                        if (target === null) {\n                            target = value;\n                            api.onupdate(value);\n                            api.oncomplete(value);\n                            return;\n                        }\n\n                        // want to tween to a smaller value and have a current value\n                        if (value < target) {\n                            target = 1;\n                            reverse = true;\n                        } else {\n                            // not tweening to a smaller value\n                            reverse = false;\n                            target = value;\n                        }\n\n                        // let's go!\n                        resting = false;\n                        start = null;\n                    },\n                },\n\n                resting: {\n                    get: function get() {\n                        return resting;\n                    },\n                },\n\n                onupdate: function onupdate(value) {},\n                oncomplete: function oncomplete(value) {},\n            });\n\n            return api;\n        };\n\n    var animator = {\n        spring: spring,\n        tween: tween,\n    };\n\n    /*\n                       { type: 'spring', stiffness: .5, damping: .75, mass: 10 };\n                       { translation: { type: 'spring', ... }, ... }\n                       { translation: { x: { type: 'spring', ... } } }\n                      */\n    var createAnimator = function createAnimator(definition, category, property) {\n        // default is single definition\n        // we check if transform is set, if so, we check if property is set\n        var def =\n            definition[category] && typeof definition[category][property] === 'object'\n                ? definition[category][property]\n                : definition[category] || definition;\n\n        var type = typeof def === 'string' ? def : def.type;\n        var props = typeof def === 'object' ? Object.assign({}, def) : {};\n\n        return animator[type] ? animator[type](props) : null;\n    };\n\n    var addGetSet = function addGetSet(keys, obj, props) {\n        var overwrite = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n        obj = Array.isArray(obj) ? obj : [obj];\n        obj.forEach(function(o) {\n            keys.forEach(function(key) {\n                var name = key;\n                var getter = function getter() {\n                    return props[key];\n                };\n                var setter = function setter(value) {\n                    return (props[key] = value);\n                };\n\n                if (typeof key === 'object') {\n                    name = key.key;\n                    getter = key.getter || getter;\n                    setter = key.setter || setter;\n                }\n\n                if (o[name] && !overwrite) {\n                    return;\n                }\n\n                o[name] = {\n                    get: getter,\n                    set: setter,\n                };\n            });\n        });\n    };\n\n    // add to state,\n    // add getters and setters to internal and external api (if not set)\n    // setup animators\n\n    var animations = function animations(_ref) {\n        var mixinConfig = _ref.mixinConfig,\n            viewProps = _ref.viewProps,\n            viewInternalAPI = _ref.viewInternalAPI,\n            viewExternalAPI = _ref.viewExternalAPI;\n        // initial properties\n        var initialProps = Object.assign({}, viewProps);\n\n        // list of all active animations\n        var animations = [];\n\n        // setup animators\n        forin(mixinConfig, function(property, animation) {\n            var animator = createAnimator(animation);\n            if (!animator) {\n                return;\n            }\n\n            // when the animator updates, update the view state value\n            animator.onupdate = function(value) {\n                viewProps[property] = value;\n            };\n\n            // set animator target\n            animator.target = initialProps[property];\n\n            // when value is set, set the animator target value\n            var prop = {\n                key: property,\n                setter: function setter(value) {\n                    // if already at target, we done!\n                    if (animator.target === value) {\n                        return;\n                    }\n\n                    animator.target = value;\n                },\n                getter: function getter() {\n                    return viewProps[property];\n                },\n            };\n\n            // add getters and setters\n            addGetSet([prop], [viewInternalAPI, viewExternalAPI], viewProps, true);\n\n            // add it to the list for easy updating from the _write method\n            animations.push(animator);\n        });\n\n        // expose internal write api\n        return {\n            write: function write(ts) {\n                var skipToEndState = document.hidden;\n                var resting = true;\n                animations.forEach(function(animation) {\n                    if (!animation.resting) resting = false;\n                    animation.interpolate(ts, skipToEndState);\n                });\n                return resting;\n            },\n            destroy: function destroy() {},\n        };\n    };\n\n    var addEvent = function addEvent(element) {\n        return function(type, fn) {\n            element.addEventListener(type, fn);\n        };\n    };\n\n    var removeEvent = function removeEvent(element) {\n        return function(type, fn) {\n            element.removeEventListener(type, fn);\n        };\n    };\n\n    // mixin\n    var listeners = function listeners(_ref) {\n        var mixinConfig = _ref.mixinConfig,\n            viewProps = _ref.viewProps,\n            viewInternalAPI = _ref.viewInternalAPI,\n            viewExternalAPI = _ref.viewExternalAPI,\n            viewState = _ref.viewState,\n            view = _ref.view;\n        var events = [];\n\n        var add = addEvent(view.element);\n        var remove = removeEvent(view.element);\n\n        viewExternalAPI.on = function(type, fn) {\n            events.push({\n                type: type,\n                fn: fn,\n            });\n\n            add(type, fn);\n        };\n\n        viewExternalAPI.off = function(type, fn) {\n            events.splice(\n                events.findIndex(function(event) {\n                    return event.type === type && event.fn === fn;\n                }),\n                1\n            );\n\n            remove(type, fn);\n        };\n\n        return {\n            write: function write() {\n                // not busy\n                return true;\n            },\n            destroy: function destroy() {\n                events.forEach(function(event) {\n                    remove(event.type, event.fn);\n                });\n            },\n        };\n    };\n\n    // add to external api and link to props\n\n    var apis = function apis(_ref) {\n        var mixinConfig = _ref.mixinConfig,\n            viewProps = _ref.viewProps,\n            viewExternalAPI = _ref.viewExternalAPI;\n        addGetSet(mixinConfig, viewExternalAPI, viewProps);\n    };\n\n    var isDefined = function isDefined(value) {\n        return value != null;\n    };\n\n    // add to state,\n    // add getters and setters to internal and external api (if not set)\n    // set initial state based on props in viewProps\n    // apply as transforms each frame\n\n    var defaults = {\n        opacity: 1,\n        scaleX: 1,\n        scaleY: 1,\n        translateX: 0,\n        translateY: 0,\n        rotateX: 0,\n        rotateY: 0,\n        rotateZ: 0,\n        originX: 0,\n        originY: 0,\n    };\n\n    var styles = function styles(_ref) {\n        var mixinConfig = _ref.mixinConfig,\n            viewProps = _ref.viewProps,\n            viewInternalAPI = _ref.viewInternalAPI,\n            viewExternalAPI = _ref.viewExternalAPI,\n            view = _ref.view;\n        // initial props\n        var initialProps = Object.assign({}, viewProps);\n\n        // current props\n        var currentProps = {};\n\n        // we will add those properties to the external API and link them to the viewState\n        addGetSet(mixinConfig, [viewInternalAPI, viewExternalAPI], viewProps);\n\n        // override rect on internal and external rect getter so it takes in account transforms\n        var getOffset = function getOffset() {\n            return [viewProps['translateX'] || 0, viewProps['translateY'] || 0];\n        };\n\n        var getScale = function getScale() {\n            return [viewProps['scaleX'] || 0, viewProps['scaleY'] || 0];\n        };\n        var getRect = function getRect() {\n            return view.rect\n                ? getViewRect(view.rect, view.childViews, getOffset(), getScale())\n                : null;\n        };\n        viewInternalAPI.rect = { get: getRect };\n        viewExternalAPI.rect = { get: getRect };\n\n        // apply view props\n        mixinConfig.forEach(function(key) {\n            viewProps[key] =\n                typeof initialProps[key] === 'undefined' ? defaults[key] : initialProps[key];\n        });\n\n        // expose api\n        return {\n            write: function write() {\n                // see if props have changed\n                if (!propsHaveChanged(currentProps, viewProps)) {\n                    return;\n                }\n\n                // moves element to correct position on screen\n                applyStyles(view.element, viewProps);\n\n                // store new transforms\n                Object.assign(currentProps, Object.assign({}, viewProps));\n\n                // no longer busy\n                return true;\n            },\n            destroy: function destroy() {},\n        };\n    };\n\n    var propsHaveChanged = function propsHaveChanged(currentProps, newProps) {\n        // different amount of keys\n        if (Object.keys(currentProps).length !== Object.keys(newProps).length) {\n            return true;\n        }\n\n        // lets analyze the individual props\n        for (var prop in newProps) {\n            if (newProps[prop] !== currentProps[prop]) {\n                return true;\n            }\n        }\n\n        return false;\n    };\n\n    var applyStyles = function applyStyles(element, _ref2) {\n        var opacity = _ref2.opacity,\n            perspective = _ref2.perspective,\n            translateX = _ref2.translateX,\n            translateY = _ref2.translateY,\n            scaleX = _ref2.scaleX,\n            scaleY = _ref2.scaleY,\n            rotateX = _ref2.rotateX,\n            rotateY = _ref2.rotateY,\n            rotateZ = _ref2.rotateZ,\n            originX = _ref2.originX,\n            originY = _ref2.originY,\n            width = _ref2.width,\n            height = _ref2.height;\n\n        var transforms = '';\n        var styles = '';\n\n        // handle transform origin\n        if (isDefined(originX) || isDefined(originY)) {\n            styles += 'transform-origin: ' + (originX || 0) + 'px ' + (originY || 0) + 'px;';\n        }\n\n        // transform order is relevant\n        // 0. perspective\n        if (isDefined(perspective)) {\n            transforms += 'perspective(' + perspective + 'px) ';\n        }\n\n        // 1. translate\n        if (isDefined(translateX) || isDefined(translateY)) {\n            transforms +=\n                'translate3d(' + (translateX || 0) + 'px, ' + (translateY || 0) + 'px, 0) ';\n        }\n\n        // 2. scale\n        if (isDefined(scaleX) || isDefined(scaleY)) {\n            transforms +=\n                'scale3d(' +\n                (isDefined(scaleX) ? scaleX : 1) +\n                ', ' +\n                (isDefined(scaleY) ? scaleY : 1) +\n                ', 1) ';\n        }\n\n        // 3. rotate\n        if (isDefined(rotateZ)) {\n            transforms += 'rotateZ(' + rotateZ + 'rad) ';\n        }\n\n        if (isDefined(rotateX)) {\n            transforms += 'rotateX(' + rotateX + 'rad) ';\n        }\n\n        if (isDefined(rotateY)) {\n            transforms += 'rotateY(' + rotateY + 'rad) ';\n        }\n\n        // add transforms\n        if (transforms.length) {\n            styles += 'transform:' + transforms + ';';\n        }\n\n        // add opacity\n        if (isDefined(opacity)) {\n            styles += 'opacity:' + opacity + ';';\n\n            // if we reach zero, we make the element inaccessible\n            if (opacity === 0) {\n                styles += 'visibility:hidden;';\n            }\n\n            // if we're below 100% opacity this element can't be clicked\n            if (opacity < 1) {\n                styles += 'pointer-events:none;';\n            }\n        }\n\n        // add height\n        if (isDefined(height)) {\n            styles += 'height:' + height + 'px;';\n        }\n\n        // add width\n        if (isDefined(width)) {\n            styles += 'width:' + width + 'px;';\n        }\n\n        // apply styles\n        var elementCurrentStyle = element.elementCurrentStyle || '';\n\n        // if new styles does not match current styles, lets update!\n        if (styles.length !== elementCurrentStyle.length || styles !== elementCurrentStyle) {\n            element.style.cssText = styles;\n            // store current styles so we can compare them to new styles later on\n            // _not_ getting the style value is faster\n            element.elementCurrentStyle = styles;\n        }\n    };\n\n    var Mixins = {\n        styles: styles,\n        listeners: listeners,\n        animations: animations,\n        apis: apis,\n    };\n\n    var updateRect = function updateRect() {\n        var rect = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var element = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var style = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n        if (!element.layoutCalculated) {\n            rect.paddingTop = parseInt(style.paddingTop, 10) || 0;\n            rect.marginTop = parseInt(style.marginTop, 10) || 0;\n            rect.marginRight = parseInt(style.marginRight, 10) || 0;\n            rect.marginBottom = parseInt(style.marginBottom, 10) || 0;\n            rect.marginLeft = parseInt(style.marginLeft, 10) || 0;\n            element.layoutCalculated = true;\n        }\n\n        rect.left = element.offsetLeft || 0;\n        rect.top = element.offsetTop || 0;\n        rect.width = element.offsetWidth || 0;\n        rect.height = element.offsetHeight || 0;\n\n        rect.right = rect.left + rect.width;\n        rect.bottom = rect.top + rect.height;\n\n        rect.scrollTop = element.scrollTop;\n\n        rect.hidden = element.offsetParent === null;\n\n        return rect;\n    };\n\n    var createView =\n        // default view definition\n        function createView() {\n            var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n                _ref$tag = _ref.tag,\n                tag = _ref$tag === void 0 ? 'div' : _ref$tag,\n                _ref$name = _ref.name,\n                name = _ref$name === void 0 ? null : _ref$name,\n                _ref$attributes = _ref.attributes,\n                attributes = _ref$attributes === void 0 ? {} : _ref$attributes,\n                _ref$read = _ref.read,\n                read = _ref$read === void 0 ? function() {} : _ref$read,\n                _ref$write = _ref.write,\n                write = _ref$write === void 0 ? function() {} : _ref$write,\n                _ref$create = _ref.create,\n                create = _ref$create === void 0 ? function() {} : _ref$create,\n                _ref$destroy = _ref.destroy,\n                destroy = _ref$destroy === void 0 ? function() {} : _ref$destroy,\n                _ref$filterFrameActio = _ref.filterFrameActionsForChild,\n                filterFrameActionsForChild =\n                    _ref$filterFrameActio === void 0\n                        ? function(child, actions) {\n                              return actions;\n                          }\n                        : _ref$filterFrameActio,\n                _ref$didCreateView = _ref.didCreateView,\n                didCreateView = _ref$didCreateView === void 0 ? function() {} : _ref$didCreateView,\n                _ref$didWriteView = _ref.didWriteView,\n                didWriteView = _ref$didWriteView === void 0 ? function() {} : _ref$didWriteView,\n                _ref$ignoreRect = _ref.ignoreRect,\n                ignoreRect = _ref$ignoreRect === void 0 ? false : _ref$ignoreRect,\n                _ref$ignoreRectUpdate = _ref.ignoreRectUpdate,\n                ignoreRectUpdate = _ref$ignoreRectUpdate === void 0 ? false : _ref$ignoreRectUpdate,\n                _ref$mixins = _ref.mixins,\n                mixins = _ref$mixins === void 0 ? [] : _ref$mixins;\n            return function(\n                // each view requires reference to store\n                store\n            ) {\n                var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n                // root element should not be changed\n                var element = createElement(tag, 'filepond--' + name, attributes);\n\n                // style reference should also not be changed\n                var style = window.getComputedStyle(element, null);\n\n                // element rectangle\n                var rect = updateRect();\n                var frameRect = null;\n\n                // rest state\n                var isResting = false;\n\n                // pretty self explanatory\n                var childViews = [];\n\n                // loaded mixins\n                var activeMixins = [];\n\n                // references to created children\n                var ref = {};\n\n                // state used for each instance\n                var state = {};\n\n                // list of writers that will be called to update this view\n                var writers = [\n                    write, // default writer\n                ];\n\n                var readers = [\n                    read, // default reader\n                ];\n\n                var destroyers = [\n                    destroy, // default destroy\n                ];\n\n                // core view methods\n                var getElement = function getElement() {\n                    return element;\n                };\n                var getChildViews = function getChildViews() {\n                    return childViews.concat();\n                };\n                var getReference = function getReference() {\n                    return ref;\n                };\n                var createChildView = function createChildView(store) {\n                    return function(view, props) {\n                        return view(store, props);\n                    };\n                };\n                var getRect = function getRect() {\n                    if (frameRect) {\n                        return frameRect;\n                    }\n                    frameRect = getViewRect(rect, childViews, [0, 0], [1, 1]);\n                    return frameRect;\n                };\n                var getStyle = function getStyle() {\n                    return style;\n                };\n\n                /**\n                 * Read data from DOM\n                 * @private\n                 */\n                var _read = function _read() {\n                    frameRect = null;\n\n                    // read child views\n                    childViews.forEach(function(child) {\n                        return child._read();\n                    });\n\n                    var shouldUpdate = !(ignoreRectUpdate && rect.width && rect.height);\n                    if (shouldUpdate) {\n                        updateRect(rect, element, style);\n                    }\n\n                    // readers\n                    var api = { root: internalAPI, props: props, rect: rect };\n                    readers.forEach(function(reader) {\n                        return reader(api);\n                    });\n                };\n\n                /**\n                 * Write data to DOM\n                 * @private\n                 */\n                var _write = function _write(ts, frameActions, shouldOptimize) {\n                    // if no actions, we assume that the view is resting\n                    var resting = frameActions.length === 0;\n\n                    // writers\n                    writers.forEach(function(writer) {\n                        var writerResting = writer({\n                            props: props,\n                            root: internalAPI,\n                            actions: frameActions,\n                            timestamp: ts,\n                            shouldOptimize: shouldOptimize,\n                        });\n\n                        if (writerResting === false) {\n                            resting = false;\n                        }\n                    });\n\n                    // run mixins\n                    activeMixins.forEach(function(mixin) {\n                        // if one of the mixins is still busy after write operation, we are not resting\n                        var mixinResting = mixin.write(ts);\n                        if (mixinResting === false) {\n                            resting = false;\n                        }\n                    });\n\n                    // updates child views that are currently attached to the DOM\n                    childViews\n                        .filter(function(child) {\n                            return !!child.element.parentNode;\n                        })\n                        .forEach(function(child) {\n                            // if a child view is not resting, we are not resting\n                            var childResting = child._write(\n                                ts,\n                                filterFrameActionsForChild(child, frameActions),\n                                shouldOptimize\n                            );\n\n                            if (!childResting) {\n                                resting = false;\n                            }\n                        });\n\n                    // append new elements to DOM and update those\n                    childViews\n                        //.filter(child => !child.element.parentNode)\n                        .forEach(function(child, index) {\n                            // skip\n                            if (child.element.parentNode) {\n                                return;\n                            }\n\n                            // append to DOM\n                            internalAPI.appendChild(child.element, index);\n\n                            // call read (need to know the size of these elements)\n                            child._read();\n\n                            // re-call write\n                            child._write(\n                                ts,\n                                filterFrameActionsForChild(child, frameActions),\n                                shouldOptimize\n                            );\n\n                            // we just added somthing to the dom, no rest\n                            resting = false;\n                        });\n\n                    // update resting state\n                    isResting = resting;\n\n                    didWriteView({\n                        props: props,\n                        root: internalAPI,\n                        actions: frameActions,\n                        timestamp: ts,\n                    });\n\n                    // let parent know if we are resting\n                    return resting;\n                };\n\n                var _destroy = function _destroy() {\n                    activeMixins.forEach(function(mixin) {\n                        return mixin.destroy();\n                    });\n                    destroyers.forEach(function(destroyer) {\n                        destroyer({ root: internalAPI, props: props });\n                    });\n                    childViews.forEach(function(child) {\n                        return child._destroy();\n                    });\n                };\n\n                // sharedAPI\n                var sharedAPIDefinition = {\n                    element: {\n                        get: getElement,\n                    },\n\n                    style: {\n                        get: getStyle,\n                    },\n\n                    childViews: {\n                        get: getChildViews,\n                    },\n                };\n\n                // private API definition\n                var internalAPIDefinition = Object.assign({}, sharedAPIDefinition, {\n                    rect: {\n                        get: getRect,\n                    },\n\n                    // access to custom children references\n                    ref: {\n                        get: getReference,\n                    },\n\n                    // dom modifiers\n                    is: function is(needle) {\n                        return name === needle;\n                    },\n                    appendChild: appendChild(element),\n                    createChildView: createChildView(store),\n                    linkView: function linkView(view) {\n                        childViews.push(view);\n                        return view;\n                    },\n                    unlinkView: function unlinkView(view) {\n                        childViews.splice(childViews.indexOf(view), 1);\n                    },\n                    appendChildView: appendChildView(element, childViews),\n                    removeChildView: removeChildView(element, childViews),\n                    registerWriter: function registerWriter(writer) {\n                        return writers.push(writer);\n                    },\n                    registerReader: function registerReader(reader) {\n                        return readers.push(reader);\n                    },\n                    registerDestroyer: function registerDestroyer(destroyer) {\n                        return destroyers.push(destroyer);\n                    },\n                    invalidateLayout: function invalidateLayout() {\n                        return (element.layoutCalculated = false);\n                    },\n\n                    // access to data store\n                    dispatch: store.dispatch,\n                    query: store.query,\n                });\n\n                // public view API methods\n                var externalAPIDefinition = {\n                    element: {\n                        get: getElement,\n                    },\n\n                    childViews: {\n                        get: getChildViews,\n                    },\n\n                    rect: {\n                        get: getRect,\n                    },\n\n                    resting: {\n                        get: function get() {\n                            return isResting;\n                        },\n                    },\n\n                    isRectIgnored: function isRectIgnored() {\n                        return ignoreRect;\n                    },\n                    _read: _read,\n                    _write: _write,\n                    _destroy: _destroy,\n                };\n\n                // mixin API methods\n                var mixinAPIDefinition = Object.assign({}, sharedAPIDefinition, {\n                    rect: {\n                        get: function get() {\n                            return rect;\n                        },\n                    },\n                });\n\n                // add mixin functionality\n                Object.keys(mixins)\n                    .sort(function(a, b) {\n                        // move styles to the back of the mixin list (so adjustments of other mixins are applied to the props correctly)\n                        if (a === 'styles') {\n                            return 1;\n                        } else if (b === 'styles') {\n                            return -1;\n                        }\n                        return 0;\n                    })\n                    .forEach(function(key) {\n                        var mixinAPI = Mixins[key]({\n                            mixinConfig: mixins[key],\n                            viewProps: props,\n                            viewState: state,\n                            viewInternalAPI: internalAPIDefinition,\n                            viewExternalAPI: externalAPIDefinition,\n                            view: createObject(mixinAPIDefinition),\n                        });\n\n                        if (mixinAPI) {\n                            activeMixins.push(mixinAPI);\n                        }\n                    });\n\n                // construct private api\n                var internalAPI = createObject(internalAPIDefinition);\n\n                // create the view\n                create({\n                    root: internalAPI,\n                    props: props,\n                });\n\n                // append created child views to root node\n                var childCount = getChildCount(element); // need to know the current child count so appending happens in correct order\n                childViews.forEach(function(child, index) {\n                    internalAPI.appendChild(child.element, childCount + index);\n                });\n\n                // call did create\n                didCreateView(internalAPI);\n\n                // expose public api\n                return createObject(externalAPIDefinition);\n            };\n        };\n\n    var createPainter = function createPainter(read, write) {\n        var fps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 60;\n\n        var name = '__framePainter';\n\n        // set global painter\n        if (window[name]) {\n            window[name].readers.push(read);\n            window[name].writers.push(write);\n            return;\n        }\n\n        window[name] = {\n            readers: [read],\n            writers: [write],\n        };\n\n        var painter = window[name];\n\n        var interval = 1000 / fps;\n        var last = null;\n        var id = null;\n        var requestTick = null;\n        var cancelTick = null;\n\n        var setTimerType = function setTimerType() {\n            if (document.hidden) {\n                requestTick = function requestTick() {\n                    return window.setTimeout(function() {\n                        return tick(performance.now());\n                    }, interval);\n                };\n                cancelTick = function cancelTick() {\n                    return window.clearTimeout(id);\n                };\n            } else {\n                requestTick = function requestTick() {\n                    return window.requestAnimationFrame(tick);\n                };\n                cancelTick = function cancelTick() {\n                    return window.cancelAnimationFrame(id);\n                };\n            }\n        };\n\n        document.addEventListener('visibilitychange', function() {\n            if (cancelTick) cancelTick();\n            setTimerType();\n            tick(performance.now());\n        });\n\n        var tick = function tick(ts) {\n            // queue next tick\n            id = requestTick(tick);\n\n            // limit fps\n            if (!last) {\n                last = ts;\n            }\n\n            var delta = ts - last;\n\n            if (delta <= interval) {\n                // skip frame\n                return;\n            }\n\n            // align next frame\n            last = ts - (delta % interval);\n\n            // update view\n            painter.readers.forEach(function(read) {\n                return read();\n            });\n            painter.writers.forEach(function(write) {\n                return write(ts);\n            });\n        };\n\n        setTimerType();\n        tick(performance.now());\n\n        return {\n            pause: function pause() {\n                cancelTick(id);\n            },\n        };\n    };\n\n    var createRoute = function createRoute(routes, fn) {\n        return function(_ref) {\n            var root = _ref.root,\n                props = _ref.props,\n                _ref$actions = _ref.actions,\n                actions = _ref$actions === void 0 ? [] : _ref$actions,\n                timestamp = _ref.timestamp,\n                shouldOptimize = _ref.shouldOptimize;\n            actions\n                .filter(function(action) {\n                    return routes[action.type];\n                })\n                .forEach(function(action) {\n                    return routes[action.type]({\n                        root: root,\n                        props: props,\n                        action: action.data,\n                        timestamp: timestamp,\n                        shouldOptimize: shouldOptimize,\n                    });\n                });\n\n            if (fn) {\n                fn({\n                    root: root,\n                    props: props,\n                    actions: actions,\n                    timestamp: timestamp,\n                    shouldOptimize: shouldOptimize,\n                });\n            }\n        };\n    };\n\n    var insertBefore = function insertBefore(newNode, referenceNode) {\n        return referenceNode.parentNode.insertBefore(newNode, referenceNode);\n    };\n\n    var insertAfter = function insertAfter(newNode, referenceNode) {\n        return referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n    };\n\n    var isArray = function isArray(value) {\n        return Array.isArray(value);\n    };\n\n    var isEmpty = function isEmpty(value) {\n        return value == null;\n    };\n\n    var trim = function trim(str) {\n        return str.trim();\n    };\n\n    var toString = function toString(value) {\n        return '' + value;\n    };\n\n    var toArray = function toArray(value) {\n        var splitter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ',';\n        if (isEmpty(value)) {\n            return [];\n        }\n        if (isArray(value)) {\n            return value;\n        }\n        return toString(value)\n            .split(splitter)\n            .map(trim)\n            .filter(function(str) {\n                return str.length;\n            });\n    };\n\n    var isBoolean = function isBoolean(value) {\n        return typeof value === 'boolean';\n    };\n\n    var toBoolean = function toBoolean(value) {\n        return isBoolean(value) ? value : value === 'true';\n    };\n\n    var isString = function isString(value) {\n        return typeof value === 'string';\n    };\n\n    var toNumber = function toNumber(value) {\n        return isNumber(value)\n            ? value\n            : isString(value)\n            ? toString(value).replace(/[a-z]+/gi, '')\n            : 0;\n    };\n\n    var toInt = function toInt(value) {\n        return parseInt(toNumber(value), 10);\n    };\n\n    var toFloat = function toFloat(value) {\n        return parseFloat(toNumber(value));\n    };\n\n    var isInt = function isInt(value) {\n        return isNumber(value) && isFinite(value) && Math.floor(value) === value;\n    };\n\n    var toBytes = function toBytes(value) {\n        var base = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1000;\n        // is in bytes\n        if (isInt(value)) {\n            return value;\n        }\n\n        // is natural file size\n        var naturalFileSize = toString(value).trim();\n\n        // if is value in megabytes\n        if (/MB$/i.test(naturalFileSize)) {\n            naturalFileSize = naturalFileSize.replace(/MB$i/, '').trim();\n            return toInt(naturalFileSize) * base * base;\n        }\n\n        // if is value in kilobytes\n        if (/KB/i.test(naturalFileSize)) {\n            naturalFileSize = naturalFileSize.replace(/KB$i/, '').trim();\n            return toInt(naturalFileSize) * base;\n        }\n\n        return toInt(naturalFileSize);\n    };\n\n    var isFunction = function isFunction(value) {\n        return typeof value === 'function';\n    };\n\n    var toFunctionReference = function toFunctionReference(string) {\n        var ref = self;\n        var levels = string.split('.');\n        var level = null;\n        while ((level = levels.shift())) {\n            ref = ref[level];\n            if (!ref) {\n                return null;\n            }\n        }\n        return ref;\n    };\n\n    var methods = {\n        process: 'POST',\n        patch: 'PATCH',\n        revert: 'DELETE',\n        fetch: 'GET',\n        restore: 'GET',\n        load: 'GET',\n    };\n\n    var createServerAPI = function createServerAPI(outline) {\n        var api = {};\n\n        api.url = isString(outline) ? outline : outline.url || '';\n        api.timeout = outline.timeout ? parseInt(outline.timeout, 10) : 0;\n        api.headers = outline.headers ? outline.headers : {};\n\n        forin(methods, function(key) {\n            api[key] = createAction(key, outline[key], methods[key], api.timeout, api.headers);\n        });\n\n        // remove process if no url or process on outline\n        api.process = outline.process || isString(outline) || outline.url ? api.process : null;\n\n        // special treatment for remove\n        api.remove = outline.remove || null;\n\n        // remove generic headers from api object\n        delete api.headers;\n\n        return api;\n    };\n\n    var createAction = function createAction(name, outline, method, timeout, headers) {\n        // is explicitely set to null so disable\n        if (outline === null) {\n            return null;\n        }\n\n        // if is custom function, done! Dev handles everything.\n        if (typeof outline === 'function') {\n            return outline;\n        }\n\n        // build action object\n        var action = {\n            url: method === 'GET' || method === 'PATCH' ? '?' + name + '=' : '',\n            method: method,\n            headers: headers,\n            withCredentials: false,\n            timeout: timeout,\n            onload: null,\n            ondata: null,\n            onerror: null,\n        };\n\n        // is a single url\n        if (isString(outline)) {\n            action.url = outline;\n            return action;\n        }\n\n        // overwrite\n        Object.assign(action, outline);\n\n        // see if should reformat headers;\n        if (isString(action.headers)) {\n            var parts = action.headers.split(/:(.+)/);\n            action.headers = {\n                header: parts[0],\n                value: parts[1],\n            };\n        }\n\n        // if is bool withCredentials\n        action.withCredentials = toBoolean(action.withCredentials);\n\n        return action;\n    };\n\n    var toServerAPI = function toServerAPI(value) {\n        return createServerAPI(value);\n    };\n\n    var isNull = function isNull(value) {\n        return value === null;\n    };\n\n    var isObject = function isObject(value) {\n        return typeof value === 'object' && value !== null;\n    };\n\n    var isAPI = function isAPI(value) {\n        return (\n            isObject(value) &&\n            isString(value.url) &&\n            isObject(value.process) &&\n            isObject(value.revert) &&\n            isObject(value.restore) &&\n            isObject(value.fetch)\n        );\n    };\n\n    var getType = function getType(value) {\n        if (isArray(value)) {\n            return 'array';\n        }\n\n        if (isNull(value)) {\n            return 'null';\n        }\n\n        if (isInt(value)) {\n            return 'int';\n        }\n\n        if (/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(value)) {\n            return 'bytes';\n        }\n\n        if (isAPI(value)) {\n            return 'api';\n        }\n\n        return typeof value;\n    };\n\n    var replaceSingleQuotes = function replaceSingleQuotes(str) {\n        return str\n            .replace(/{\\s*'/g, '{\"')\n            .replace(/'\\s*}/g, '\"}')\n            .replace(/'\\s*:/g, '\":')\n            .replace(/:\\s*'/g, ':\"')\n            .replace(/,\\s*'/g, ',\"')\n            .replace(/'\\s*,/g, '\",');\n    };\n\n    var conversionTable = {\n        array: toArray,\n        boolean: toBoolean,\n        int: function int(value) {\n            return getType(value) === 'bytes' ? toBytes(value) : toInt(value);\n        },\n        number: toFloat,\n        float: toFloat,\n        bytes: toBytes,\n        string: function string(value) {\n            return isFunction(value) ? value : toString(value);\n        },\n        function: function _function(value) {\n            return toFunctionReference(value);\n        },\n        serverapi: toServerAPI,\n        object: function object(value) {\n            try {\n                return JSON.parse(replaceSingleQuotes(value));\n            } catch (e) {\n                return null;\n            }\n        },\n    };\n\n    var convertTo = function convertTo(value, type) {\n        return conversionTable[type](value);\n    };\n\n    var getValueByType = function getValueByType(newValue, defaultValue, valueType) {\n        // can always assign default value\n        if (newValue === defaultValue) {\n            return newValue;\n        }\n\n        // get the type of the new value\n        var newValueType = getType(newValue);\n\n        // is valid type?\n        if (newValueType !== valueType) {\n            // is string input, let's attempt to convert\n            var convertedValue = convertTo(newValue, valueType);\n\n            // what is the type now\n            newValueType = getType(convertedValue);\n\n            // no valid conversions found\n            if (convertedValue === null) {\n                throw 'Trying to assign value with incorrect type to \"' +\n                    option +\n                    '\", allowed type: \"' +\n                    valueType +\n                    '\"';\n            } else {\n                newValue = convertedValue;\n            }\n        }\n\n        // assign new value\n        return newValue;\n    };\n\n    var createOption = function createOption(defaultValue, valueType) {\n        var currentValue = defaultValue;\n        return {\n            enumerable: true,\n            get: function get() {\n                return currentValue;\n            },\n            set: function set(newValue) {\n                currentValue = getValueByType(newValue, defaultValue, valueType);\n            },\n        };\n    };\n\n    var createOptions = function createOptions(options) {\n        var obj = {};\n        forin(options, function(prop) {\n            var optionDefinition = options[prop];\n            obj[prop] = createOption(optionDefinition[0], optionDefinition[1]);\n        });\n        return createObject(obj);\n    };\n\n    var createInitialState = function createInitialState(options) {\n        return {\n            // model\n            items: [],\n\n            // timeout used for calling update items\n            listUpdateTimeout: null,\n\n            // timeout used for stacking metadata updates\n            itemUpdateTimeout: null,\n\n            // queue of items waiting to be processed\n            processingQueue: [],\n\n            // options\n            options: createOptions(options),\n        };\n    };\n\n    var fromCamels = function fromCamels(string) {\n        var separator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '-';\n        return string\n            .split(/(?=[A-Z])/)\n            .map(function(part) {\n                return part.toLowerCase();\n            })\n            .join(separator);\n    };\n\n    var createOptionAPI = function createOptionAPI(store, options) {\n        var obj = {};\n        forin(options, function(key) {\n            obj[key] = {\n                get: function get() {\n                    return store.getState().options[key];\n                },\n                set: function set(value) {\n                    store.dispatch('SET_' + fromCamels(key, '_').toUpperCase(), {\n                        value: value,\n                    });\n                },\n            };\n        });\n        return obj;\n    };\n\n    var createOptionActions = function createOptionActions(options) {\n        return function(dispatch, query, state) {\n            var obj = {};\n            forin(options, function(key) {\n                var name = fromCamels(key, '_').toUpperCase();\n\n                obj['SET_' + name] = function(action) {\n                    try {\n                        state.options[key] = action.value;\n                    } catch (e) {} // nope, failed\n\n                    // we successfully set the value of this option\n                    dispatch('DID_SET_' + name, { value: state.options[key] });\n                };\n            });\n            return obj;\n        };\n    };\n\n    var createOptionQueries = function createOptionQueries(options) {\n        return function(state) {\n            var obj = {};\n            forin(options, function(key) {\n                obj['GET_' + fromCamels(key, '_').toUpperCase()] = function(action) {\n                    return state.options[key];\n                };\n            });\n            return obj;\n        };\n    };\n\n    var InteractionMethod = {\n        API: 1,\n        DROP: 2,\n        BROWSE: 3,\n        PASTE: 4,\n        NONE: 5,\n    };\n\n    var getUniqueId = function getUniqueId() {\n        return Math.random()\n            .toString(36)\n            .substring(2, 11);\n    };\n\n    function _typeof(obj) {\n        if (typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol') {\n            _typeof = function(obj) {\n                return typeof obj;\n            };\n        } else {\n            _typeof = function(obj) {\n                return obj &&\n                    typeof Symbol === 'function' &&\n                    obj.constructor === Symbol &&\n                    obj !== Symbol.prototype\n                    ? 'symbol'\n                    : typeof obj;\n            };\n        }\n\n        return _typeof(obj);\n    }\n\n    var REACT_ELEMENT_TYPE;\n\n    function _jsx(type, props, key, children) {\n        if (!REACT_ELEMENT_TYPE) {\n            REACT_ELEMENT_TYPE =\n                (typeof Symbol === 'function' && Symbol['for'] && Symbol['for']('react.element')) ||\n                0xeac7;\n        }\n\n        var defaultProps = type && type.defaultProps;\n        var childrenLength = arguments.length - 3;\n\n        if (!props && childrenLength !== 0) {\n            props = {\n                children: void 0,\n            };\n        }\n\n        if (props && defaultProps) {\n            for (var propName in defaultProps) {\n                if (props[propName] === void 0) {\n                    props[propName] = defaultProps[propName];\n                }\n            }\n        } else if (!props) {\n            props = defaultProps || {};\n        }\n\n        if (childrenLength === 1) {\n            props.children = children;\n        } else if (childrenLength > 1) {\n            var childArray = new Array(childrenLength);\n\n            for (var i = 0; i < childrenLength; i++) {\n                childArray[i] = arguments[i + 3];\n            }\n\n            props.children = childArray;\n        }\n\n        return {\n            $$typeof: REACT_ELEMENT_TYPE,\n            type: type,\n            key: key === undefined ? null : '' + key,\n            ref: null,\n            props: props,\n            _owner: null,\n        };\n    }\n\n    function _asyncIterator(iterable) {\n        var method;\n\n        if (typeof Symbol !== 'undefined') {\n            if (Symbol.asyncIterator) {\n                method = iterable[Symbol.asyncIterator];\n                if (method != null) return method.call(iterable);\n            }\n\n            if (Symbol.iterator) {\n                method = iterable[Symbol.iterator];\n                if (method != null) return method.call(iterable);\n            }\n        }\n\n        throw new TypeError('Object is not async iterable');\n    }\n\n    function _AwaitValue(value) {\n        this.wrapped = value;\n    }\n\n    function _AsyncGenerator(gen) {\n        var front, back;\n\n        function send(key, arg) {\n            return new Promise(function(resolve, reject) {\n                var request = {\n                    key: key,\n                    arg: arg,\n                    resolve: resolve,\n                    reject: reject,\n                    next: null,\n                };\n\n                if (back) {\n                    back = back.next = request;\n                } else {\n                    front = back = request;\n                    resume(key, arg);\n                }\n            });\n        }\n\n        function resume(key, arg) {\n            try {\n                var result = gen[key](arg);\n                var value = result.value;\n                var wrappedAwait = value instanceof _AwaitValue;\n                Promise.resolve(wrappedAwait ? value.wrapped : value).then(\n                    function(arg) {\n                        if (wrappedAwait) {\n                            resume('next', arg);\n                            return;\n                        }\n\n                        settle(result.done ? 'return' : 'normal', arg);\n                    },\n                    function(err) {\n                        resume('throw', err);\n                    }\n                );\n            } catch (err) {\n                settle('throw', err);\n            }\n        }\n\n        function settle(type, value) {\n            switch (type) {\n                case 'return':\n                    front.resolve({\n                        value: value,\n                        done: true,\n                    });\n                    break;\n\n                case 'throw':\n                    front.reject(value);\n                    break;\n\n                default:\n                    front.resolve({\n                        value: value,\n                        done: false,\n                    });\n                    break;\n            }\n\n            front = front.next;\n\n            if (front) {\n                resume(front.key, front.arg);\n            } else {\n                back = null;\n            }\n        }\n\n        this._invoke = send;\n\n        if (typeof gen.return !== 'function') {\n            this.return = undefined;\n        }\n    }\n\n    if (typeof Symbol === 'function' && Symbol.asyncIterator) {\n        _AsyncGenerator.prototype[Symbol.asyncIterator] = function() {\n            return this;\n        };\n    }\n\n    _AsyncGenerator.prototype.next = function(arg) {\n        return this._invoke('next', arg);\n    };\n\n    _AsyncGenerator.prototype.throw = function(arg) {\n        return this._invoke('throw', arg);\n    };\n\n    _AsyncGenerator.prototype.return = function(arg) {\n        return this._invoke('return', arg);\n    };\n\n    function _wrapAsyncGenerator(fn) {\n        return function() {\n            return new _AsyncGenerator(fn.apply(this, arguments));\n        };\n    }\n\n    function _awaitAsyncGenerator(value) {\n        return new _AwaitValue(value);\n    }\n\n    function _asyncGeneratorDelegate(inner, awaitWrap) {\n        var iter = {},\n            waiting = false;\n\n        function pump(key, value) {\n            waiting = true;\n            value = new Promise(function(resolve) {\n                resolve(inner[key](value));\n            });\n            return {\n                done: false,\n                value: awaitWrap(value),\n            };\n        }\n\n        if (typeof Symbol === 'function' && Symbol.iterator) {\n            iter[Symbol.iterator] = function() {\n                return this;\n            };\n        }\n\n        iter.next = function(value) {\n            if (waiting) {\n                waiting = false;\n                return value;\n            }\n\n            return pump('next', value);\n        };\n\n        if (typeof inner.throw === 'function') {\n            iter.throw = function(value) {\n                if (waiting) {\n                    waiting = false;\n                    throw value;\n                }\n\n                return pump('throw', value);\n            };\n        }\n\n        if (typeof inner.return === 'function') {\n            iter.return = function(value) {\n                return pump('return', value);\n            };\n        }\n\n        return iter;\n    }\n\n    function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n        try {\n            var info = gen[key](arg);\n            var value = info.value;\n        } catch (error) {\n            reject(error);\n            return;\n        }\n\n        if (info.done) {\n            resolve(value);\n        } else {\n            Promise.resolve(value).then(_next, _throw);\n        }\n    }\n\n    function _asyncToGenerator(fn) {\n        return function() {\n            var self = this,\n                args = arguments;\n            return new Promise(function(resolve, reject) {\n                var gen = fn.apply(self, args);\n\n                function _next(value) {\n                    asyncGeneratorStep(gen, resolve, reject, _next, _throw, 'next', value);\n                }\n\n                function _throw(err) {\n                    asyncGeneratorStep(gen, resolve, reject, _next, _throw, 'throw', err);\n                }\n\n                _next(undefined);\n            });\n        };\n    }\n\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError('Cannot call a class as a function');\n        }\n    }\n\n    function _defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];\n            descriptor.enumerable = descriptor.enumerable || false;\n            descriptor.configurable = true;\n            if ('value' in descriptor) descriptor.writable = true;\n            Object.defineProperty(target, descriptor.key, descriptor);\n        }\n    }\n\n    function _createClass(Constructor, protoProps, staticProps) {\n        if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n        if (staticProps) _defineProperties(Constructor, staticProps);\n        return Constructor;\n    }\n\n    function _defineEnumerableProperties(obj, descs) {\n        for (var key in descs) {\n            var desc = descs[key];\n            desc.configurable = desc.enumerable = true;\n            if ('value' in desc) desc.writable = true;\n            Object.defineProperty(obj, key, desc);\n        }\n\n        if (Object.getOwnPropertySymbols) {\n            var objectSymbols = Object.getOwnPropertySymbols(descs);\n\n            for (var i = 0; i < objectSymbols.length; i++) {\n                var sym = objectSymbols[i];\n                var desc = descs[sym];\n                desc.configurable = desc.enumerable = true;\n                if ('value' in desc) desc.writable = true;\n                Object.defineProperty(obj, sym, desc);\n            }\n        }\n\n        return obj;\n    }\n\n    function _defaults(obj, defaults) {\n        var keys = Object.getOwnPropertyNames(defaults);\n\n        for (var i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n            if (value && value.configurable && obj[key] === undefined) {\n                Object.defineProperty(obj, key, value);\n            }\n        }\n\n        return obj;\n    }\n\n    function _defineProperty(obj, key, value) {\n        if (key in obj) {\n            Object.defineProperty(obj, key, {\n                value: value,\n                enumerable: true,\n                configurable: true,\n                writable: true,\n            });\n        } else {\n            obj[key] = value;\n        }\n\n        return obj;\n    }\n\n    function _extends() {\n        _extends =\n            Object.assign ||\n            function(target) {\n                for (var i = 1; i < arguments.length; i++) {\n                    var source = arguments[i];\n\n                    for (var key in source) {\n                        if (Object.prototype.hasOwnProperty.call(source, key)) {\n                            target[key] = source[key];\n                        }\n                    }\n                }\n\n                return target;\n            };\n\n        return _extends.apply(this, arguments);\n    }\n\n    function _objectSpread(target) {\n        for (var i = 1; i < arguments.length; i++) {\n            var source = arguments[i] != null ? arguments[i] : {};\n            var ownKeys = Object.keys(source);\n\n            if (typeof Object.getOwnPropertySymbols === 'function') {\n                ownKeys = ownKeys.concat(\n                    Object.getOwnPropertySymbols(source).filter(function(sym) {\n                        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n                    })\n                );\n            }\n\n            ownKeys.forEach(function(key) {\n                _defineProperty(target, key, source[key]);\n            });\n        }\n\n        return target;\n    }\n\n    function ownKeys(object, enumerableOnly) {\n        var keys = Object.keys(object);\n\n        if (Object.getOwnPropertySymbols) {\n            var symbols = Object.getOwnPropertySymbols(object);\n            if (enumerableOnly)\n                symbols = symbols.filter(function(sym) {\n                    return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n                });\n            keys.push.apply(keys, symbols);\n        }\n\n        return keys;\n    }\n\n    function _objectSpread2(target) {\n        for (var i = 1; i < arguments.length; i++) {\n            var source = arguments[i] != null ? arguments[i] : {};\n\n            if (i % 2) {\n                ownKeys(source, true).forEach(function(key) {\n                    _defineProperty(target, key, source[key]);\n                });\n            } else if (Object.getOwnPropertyDescriptors) {\n                Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n            } else {\n                ownKeys(source).forEach(function(key) {\n                    Object.defineProperty(\n                        target,\n                        key,\n                        Object.getOwnPropertyDescriptor(source, key)\n                    );\n                });\n            }\n        }\n\n        return target;\n    }\n\n    function _inherits(subClass, superClass) {\n        if (typeof superClass !== 'function' && superClass !== null) {\n            throw new TypeError('Super expression must either be null or a function');\n        }\n\n        subClass.prototype = Object.create(superClass && superClass.prototype, {\n            constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true,\n            },\n        });\n        if (superClass) _setPrototypeOf(subClass, superClass);\n    }\n\n    function _inheritsLoose(subClass, superClass) {\n        subClass.prototype = Object.create(superClass.prototype);\n        subClass.prototype.constructor = subClass;\n        subClass.__proto__ = superClass;\n    }\n\n    function _getPrototypeOf(o) {\n        _getPrototypeOf = Object.setPrototypeOf\n            ? Object.getPrototypeOf\n            : function _getPrototypeOf(o) {\n                  return o.__proto__ || Object.getPrototypeOf(o);\n              };\n        return _getPrototypeOf(o);\n    }\n\n    function _setPrototypeOf(o, p) {\n        _setPrototypeOf =\n            Object.setPrototypeOf ||\n            function _setPrototypeOf(o, p) {\n                o.__proto__ = p;\n                return o;\n            };\n\n        return _setPrototypeOf(o, p);\n    }\n\n    function isNativeReflectConstruct() {\n        if (typeof Reflect === 'undefined' || !Reflect.construct) return false;\n        if (Reflect.construct.sham) return false;\n        if (typeof Proxy === 'function') return true;\n\n        try {\n            Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\n            return true;\n        } catch (e) {\n            return false;\n        }\n    }\n\n    function _construct(Parent, args, Class) {\n        if (isNativeReflectConstruct()) {\n            _construct = Reflect.construct;\n        } else {\n            _construct = function _construct(Parent, args, Class) {\n                var a = [null];\n                a.push.apply(a, args);\n                var Constructor = Function.bind.apply(Parent, a);\n                var instance = new Constructor();\n                if (Class) _setPrototypeOf(instance, Class.prototype);\n                return instance;\n            };\n        }\n\n        return _construct.apply(null, arguments);\n    }\n\n    function _isNativeFunction(fn) {\n        return Function.toString.call(fn).indexOf('[native code]') !== -1;\n    }\n\n    function _wrapNativeSuper(Class) {\n        var _cache = typeof Map === 'function' ? new Map() : undefined;\n\n        _wrapNativeSuper = function _wrapNativeSuper(Class) {\n            if (Class === null || !_isNativeFunction(Class)) return Class;\n\n            if (typeof Class !== 'function') {\n                throw new TypeError('Super expression must either be null or a function');\n            }\n\n            if (typeof _cache !== 'undefined') {\n                if (_cache.has(Class)) return _cache.get(Class);\n\n                _cache.set(Class, Wrapper);\n            }\n\n            function Wrapper() {\n                return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n            }\n\n            Wrapper.prototype = Object.create(Class.prototype, {\n                constructor: {\n                    value: Wrapper,\n                    enumerable: false,\n                    writable: true,\n                    configurable: true,\n                },\n            });\n            return _setPrototypeOf(Wrapper, Class);\n        };\n\n        return _wrapNativeSuper(Class);\n    }\n\n    function _instanceof(left, right) {\n        if (right != null && typeof Symbol !== 'undefined' && right[Symbol.hasInstance]) {\n            return !!right[Symbol.hasInstance](left);\n        } else {\n            return left instanceof right;\n        }\n    }\n\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule\n            ? obj\n            : {\n                  default: obj,\n              };\n    }\n\n    function _interopRequireWildcard(obj) {\n        if (obj && obj.__esModule) {\n            return obj;\n        } else {\n            var newObj = {};\n\n            if (obj != null) {\n                for (var key in obj) {\n                    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                        var desc =\n                            Object.defineProperty && Object.getOwnPropertyDescriptor\n                                ? Object.getOwnPropertyDescriptor(obj, key)\n                                : {};\n\n                        if (desc.get || desc.set) {\n                            Object.defineProperty(newObj, key, desc);\n                        } else {\n                            newObj[key] = obj[key];\n                        }\n                    }\n                }\n            }\n\n            newObj.default = obj;\n            return newObj;\n        }\n    }\n\n    function _newArrowCheck(innerThis, boundThis) {\n        if (innerThis !== boundThis) {\n            throw new TypeError('Cannot instantiate an arrow function');\n        }\n    }\n\n    function _objectDestructuringEmpty(obj) {\n        if (obj == null) throw new TypeError('Cannot destructure undefined');\n    }\n\n    function _objectWithoutPropertiesLoose(source, excluded) {\n        if (source == null) return {};\n        var target = {};\n        var sourceKeys = Object.keys(source);\n        var key, i;\n\n        for (i = 0; i < sourceKeys.length; i++) {\n            key = sourceKeys[i];\n            if (excluded.indexOf(key) >= 0) continue;\n            target[key] = source[key];\n        }\n\n        return target;\n    }\n\n    function _objectWithoutProperties(source, excluded) {\n        if (source == null) return {};\n\n        var target = _objectWithoutPropertiesLoose(source, excluded);\n\n        var key, i;\n\n        if (Object.getOwnPropertySymbols) {\n            var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n            for (i = 0; i < sourceSymbolKeys.length; i++) {\n                key = sourceSymbolKeys[i];\n                if (excluded.indexOf(key) >= 0) continue;\n                if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n                target[key] = source[key];\n            }\n        }\n\n        return target;\n    }\n\n    function _assertThisInitialized(self) {\n        if (self === void 0) {\n            throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n        }\n\n        return self;\n    }\n\n    function _possibleConstructorReturn(self, call) {\n        if (call && (typeof call === 'object' || typeof call === 'function')) {\n            return call;\n        }\n\n        return _assertThisInitialized(self);\n    }\n\n    function _superPropBase(object, property) {\n        while (!Object.prototype.hasOwnProperty.call(object, property)) {\n            object = _getPrototypeOf(object);\n            if (object === null) break;\n        }\n\n        return object;\n    }\n\n    function _get(target, property, receiver) {\n        if (typeof Reflect !== 'undefined' && Reflect.get) {\n            _get = Reflect.get;\n        } else {\n            _get = function _get(target, property, receiver) {\n                var base = _superPropBase(target, property);\n\n                if (!base) return;\n                var desc = Object.getOwnPropertyDescriptor(base, property);\n\n                if (desc.get) {\n                    return desc.get.call(receiver);\n                }\n\n                return desc.value;\n            };\n        }\n\n        return _get(target, property, receiver || target);\n    }\n\n    function set(target, property, value, receiver) {\n        if (typeof Reflect !== 'undefined' && Reflect.set) {\n            set = Reflect.set;\n        } else {\n            set = function set(target, property, value, receiver) {\n                var base = _superPropBase(target, property);\n\n                var desc;\n\n                if (base) {\n                    desc = Object.getOwnPropertyDescriptor(base, property);\n\n                    if (desc.set) {\n                        desc.set.call(receiver, value);\n                        return true;\n                    } else if (!desc.writable) {\n                        return false;\n                    }\n                }\n\n                desc = Object.getOwnPropertyDescriptor(receiver, property);\n\n                if (desc) {\n                    if (!desc.writable) {\n                        return false;\n                    }\n\n                    desc.value = value;\n                    Object.defineProperty(receiver, property, desc);\n                } else {\n                    _defineProperty(receiver, property, value);\n                }\n\n                return true;\n            };\n        }\n\n        return set(target, property, value, receiver);\n    }\n\n    function _set(target, property, value, receiver, isStrict) {\n        var s = set(target, property, value, receiver || target);\n\n        if (!s && isStrict) {\n            throw new Error('failed to set property');\n        }\n\n        return value;\n    }\n\n    function _taggedTemplateLiteral(strings, raw) {\n        if (!raw) {\n            raw = strings.slice(0);\n        }\n\n        return Object.freeze(\n            Object.defineProperties(strings, {\n                raw: {\n                    value: Object.freeze(raw),\n                },\n            })\n        );\n    }\n\n    function _taggedTemplateLiteralLoose(strings, raw) {\n        if (!raw) {\n            raw = strings.slice(0);\n        }\n\n        strings.raw = raw;\n        return strings;\n    }\n\n    function _temporalRef(val, name) {\n        if (val === _temporalUndefined) {\n            throw new ReferenceError(name + ' is not defined - temporal dead zone');\n        } else {\n            return val;\n        }\n    }\n\n    function _readOnlyError(name) {\n        throw new Error('\"' + name + '\" is read-only');\n    }\n\n    function _classNameTDZError(name) {\n        throw new Error('Class \"' + name + '\" cannot be referenced in computed property keys.');\n    }\n\n    var _temporalUndefined = {};\n\n    function _slicedToArray(arr, i) {\n        return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n    }\n\n    function _slicedToArrayLoose(arr, i) {\n        return _arrayWithHoles(arr) || _iterableToArrayLimitLoose(arr, i) || _nonIterableRest();\n    }\n\n    function _toArray(arr) {\n        return _arrayWithHoles(arr) || _iterableToArray(arr) || _nonIterableRest();\n    }\n\n    function _toConsumableArray(arr) {\n        return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n    }\n\n    function _arrayWithoutHoles(arr) {\n        if (Array.isArray(arr)) {\n            for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n            return arr2;\n        }\n    }\n\n    function _arrayWithHoles(arr) {\n        if (Array.isArray(arr)) return arr;\n    }\n\n    function _iterableToArray(iter) {\n        if (\n            Symbol.iterator in Object(iter) ||\n            Object.prototype.toString.call(iter) === '[object Arguments]'\n        )\n            return Array.from(iter);\n    }\n\n    function _iterableToArrayLimit(arr, i) {\n        var _arr = [];\n        var _n = true;\n        var _d = false;\n        var _e = undefined;\n\n        try {\n            for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n                _arr.push(_s.value);\n\n                if (i && _arr.length === i) break;\n            }\n        } catch (err) {\n            _d = true;\n            _e = err;\n        } finally {\n            try {\n                if (!_n && _i['return'] != null) _i['return']();\n            } finally {\n                if (_d) throw _e;\n            }\n        }\n\n        return _arr;\n    }\n\n    function _iterableToArrayLimitLoose(arr, i) {\n        var _arr = [];\n\n        for (var _iterator = arr[Symbol.iterator](), _step; !(_step = _iterator.next()).done; ) {\n            _arr.push(_step.value);\n\n            if (i && _arr.length === i) break;\n        }\n\n        return _arr;\n    }\n\n    function _nonIterableSpread() {\n        throw new TypeError('Invalid attempt to spread non-iterable instance');\n    }\n\n    function _nonIterableRest() {\n        throw new TypeError('Invalid attempt to destructure non-iterable instance');\n    }\n\n    function _skipFirstGeneratorNext(fn) {\n        return function() {\n            var it = fn.apply(this, arguments);\n            it.next();\n            return it;\n        };\n    }\n\n    function _toPrimitive(input, hint) {\n        if (typeof input !== 'object' || input === null) return input;\n        var prim = input[Symbol.toPrimitive];\n\n        if (prim !== undefined) {\n            var res = prim.call(input, hint || 'default');\n            if (typeof res !== 'object') return res;\n            throw new TypeError('@@toPrimitive must return a primitive value.');\n        }\n\n        return (hint === 'string' ? String : Number)(input);\n    }\n\n    function _toPropertyKey(arg) {\n        var key = _toPrimitive(arg, 'string');\n\n        return typeof key === 'symbol' ? key : String(key);\n    }\n\n    function _initializerWarningHelper(descriptor, context) {\n        throw new Error(\n            'Decorating class property failed. Please ensure that ' +\n                'proposal-class-properties is enabled and set to use loose mode. ' +\n                'To use proposal-class-properties in spec mode with decorators, wait for ' +\n                'the next major version of decorators in stage 2.'\n        );\n    }\n\n    function _initializerDefineProperty(target, property, descriptor, context) {\n        if (!descriptor) return;\n        Object.defineProperty(target, property, {\n            enumerable: descriptor.enumerable,\n            configurable: descriptor.configurable,\n            writable: descriptor.writable,\n            value: descriptor.initializer ? descriptor.initializer.call(context) : void 0,\n        });\n    }\n\n    function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n        var desc = {};\n        Object.keys(descriptor).forEach(function(key) {\n            desc[key] = descriptor[key];\n        });\n        desc.enumerable = !!desc.enumerable;\n        desc.configurable = !!desc.configurable;\n\n        if ('value' in desc || desc.initializer) {\n            desc.writable = true;\n        }\n\n        desc = decorators\n            .slice()\n            .reverse()\n            .reduce(function(desc, decorator) {\n                return decorator(target, property, desc) || desc;\n            }, desc);\n\n        if (context && desc.initializer !== void 0) {\n            desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n            desc.initializer = undefined;\n        }\n\n        if (desc.initializer === void 0) {\n            Object.defineProperty(target, property, desc);\n            desc = null;\n        }\n\n        return desc;\n    }\n\n    var id = 0;\n\n    function _classPrivateFieldLooseKey(name) {\n        return '__private_' + id++ + '_' + name;\n    }\n\n    function _classPrivateFieldLooseBase(receiver, privateKey) {\n        if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) {\n            throw new TypeError('attempted to use private field on non-instance');\n        }\n\n        return receiver;\n    }\n\n    function _classPrivateFieldGet(receiver, privateMap) {\n        var descriptor = privateMap.get(receiver);\n\n        if (!descriptor) {\n            throw new TypeError('attempted to get private field on non-instance');\n        }\n\n        if (descriptor.get) {\n            return descriptor.get.call(receiver);\n        }\n\n        return descriptor.value;\n    }\n\n    function _classPrivateFieldSet(receiver, privateMap, value) {\n        var descriptor = privateMap.get(receiver);\n\n        if (!descriptor) {\n            throw new TypeError('attempted to set private field on non-instance');\n        }\n\n        if (descriptor.set) {\n            descriptor.set.call(receiver, value);\n        } else {\n            if (!descriptor.writable) {\n                throw new TypeError('attempted to set read only private field');\n            }\n\n            descriptor.value = value;\n        }\n\n        return value;\n    }\n\n    function _classPrivateFieldDestructureSet(receiver, privateMap) {\n        if (!privateMap.has(receiver)) {\n            throw new TypeError('attempted to set private field on non-instance');\n        }\n\n        var descriptor = privateMap.get(receiver);\n\n        if (descriptor.set) {\n            if (!('__destrObj' in descriptor)) {\n                descriptor.__destrObj = {\n                    set value(v) {\n                        descriptor.set.call(receiver, v);\n                    },\n                };\n            }\n\n            return descriptor.__destrObj;\n        } else {\n            if (!descriptor.writable) {\n                throw new TypeError('attempted to set read only private field');\n            }\n\n            return descriptor;\n        }\n    }\n\n    function _classStaticPrivateFieldSpecGet(receiver, classConstructor, descriptor) {\n        if (receiver !== classConstructor) {\n            throw new TypeError('Private static access of wrong provenance');\n        }\n\n        return descriptor.value;\n    }\n\n    function _classStaticPrivateFieldSpecSet(receiver, classConstructor, descriptor, value) {\n        if (receiver !== classConstructor) {\n            throw new TypeError('Private static access of wrong provenance');\n        }\n\n        if (!descriptor.writable) {\n            throw new TypeError('attempted to set read only private field');\n        }\n\n        descriptor.value = value;\n        return value;\n    }\n\n    function _classStaticPrivateMethodGet(receiver, classConstructor, method) {\n        if (receiver !== classConstructor) {\n            throw new TypeError('Private static access of wrong provenance');\n        }\n\n        return method;\n    }\n\n    function _classStaticPrivateMethodSet() {\n        throw new TypeError('attempted to set read only static private field');\n    }\n\n    function _decorate(decorators, factory, superClass, mixins) {\n        var api = _getDecoratorsApi();\n\n        if (mixins) {\n            for (var i = 0; i < mixins.length; i++) {\n                api = mixins[i](api);\n            }\n        }\n\n        var r = factory(function initialize(O) {\n            api.initializeInstanceElements(O, decorated.elements);\n        }, superClass);\n        var decorated = api.decorateClass(\n            _coalesceClassElements(r.d.map(_createElementDescriptor)),\n            decorators\n        );\n        api.initializeClassElements(r.F, decorated.elements);\n        return api.runClassFinishers(r.F, decorated.finishers);\n    }\n\n    function _getDecoratorsApi() {\n        _getDecoratorsApi = function() {\n            return api;\n        };\n\n        var api = {\n            elementsDefinitionOrder: [['method'], ['field']],\n            initializeInstanceElements: function(O, elements) {\n                ['method', 'field'].forEach(function(kind) {\n                    elements.forEach(function(element) {\n                        if (element.kind === kind && element.placement === 'own') {\n                            this.defineClassElement(O, element);\n                        }\n                    }, this);\n                }, this);\n            },\n            initializeClassElements: function(F, elements) {\n                var proto = F.prototype;\n                ['method', 'field'].forEach(function(kind) {\n                    elements.forEach(function(element) {\n                        var placement = element.placement;\n\n                        if (\n                            element.kind === kind &&\n                            (placement === 'static' || placement === 'prototype')\n                        ) {\n                            var receiver = placement === 'static' ? F : proto;\n                            this.defineClassElement(receiver, element);\n                        }\n                    }, this);\n                }, this);\n            },\n            defineClassElement: function(receiver, element) {\n                var descriptor = element.descriptor;\n\n                if (element.kind === 'field') {\n                    var initializer = element.initializer;\n                    descriptor = {\n                        enumerable: descriptor.enumerable,\n                        writable: descriptor.writable,\n                        configurable: descriptor.configurable,\n                        value: initializer === void 0 ? void 0 : initializer.call(receiver),\n                    };\n                }\n\n                Object.defineProperty(receiver, element.key, descriptor);\n            },\n            decorateClass: function(elements, decorators) {\n                var newElements = [];\n                var finishers = [];\n                var placements = {\n                    static: [],\n                    prototype: [],\n                    own: [],\n                };\n                elements.forEach(function(element) {\n                    this.addElementPlacement(element, placements);\n                }, this);\n                elements.forEach(function(element) {\n                    if (!_hasDecorators(element)) return newElements.push(element);\n                    var elementFinishersExtras = this.decorateElement(element, placements);\n                    newElements.push(elementFinishersExtras.element);\n                    newElements.push.apply(newElements, elementFinishersExtras.extras);\n                    finishers.push.apply(finishers, elementFinishersExtras.finishers);\n                }, this);\n\n                if (!decorators) {\n                    return {\n                        elements: newElements,\n                        finishers: finishers,\n                    };\n                }\n\n                var result = this.decorateConstructor(newElements, decorators);\n                finishers.push.apply(finishers, result.finishers);\n                result.finishers = finishers;\n                return result;\n            },\n            addElementPlacement: function(element, placements, silent) {\n                var keys = placements[element.placement];\n\n                if (!silent && keys.indexOf(element.key) !== -1) {\n                    throw new TypeError('Duplicated element (' + element.key + ')');\n                }\n\n                keys.push(element.key);\n            },\n            decorateElement: function(element, placements) {\n                var extras = [];\n                var finishers = [];\n\n                for (var decorators = element.decorators, i = decorators.length - 1; i >= 0; i--) {\n                    var keys = placements[element.placement];\n                    keys.splice(keys.indexOf(element.key), 1);\n                    var elementObject = this.fromElementDescriptor(element);\n                    var elementFinisherExtras = this.toElementFinisherExtras(\n                        (0, decorators[i])(elementObject) || elementObject\n                    );\n                    element = elementFinisherExtras.element;\n                    this.addElementPlacement(element, placements);\n\n                    if (elementFinisherExtras.finisher) {\n                        finishers.push(elementFinisherExtras.finisher);\n                    }\n\n                    var newExtras = elementFinisherExtras.extras;\n\n                    if (newExtras) {\n                        for (var j = 0; j < newExtras.length; j++) {\n                            this.addElementPlacement(newExtras[j], placements);\n                        }\n\n                        extras.push.apply(extras, newExtras);\n                    }\n                }\n\n                return {\n                    element: element,\n                    finishers: finishers,\n                    extras: extras,\n                };\n            },\n            decorateConstructor: function(elements, decorators) {\n                var finishers = [];\n\n                for (var i = decorators.length - 1; i >= 0; i--) {\n                    var obj = this.fromClassDescriptor(elements);\n                    var elementsAndFinisher = this.toClassDescriptor(\n                        (0, decorators[i])(obj) || obj\n                    );\n\n                    if (elementsAndFinisher.finisher !== undefined) {\n                        finishers.push(elementsAndFinisher.finisher);\n                    }\n\n                    if (elementsAndFinisher.elements !== undefined) {\n                        elements = elementsAndFinisher.elements;\n\n                        for (var j = 0; j < elements.length - 1; j++) {\n                            for (var k = j + 1; k < elements.length; k++) {\n                                if (\n                                    elements[j].key === elements[k].key &&\n                                    elements[j].placement === elements[k].placement\n                                ) {\n                                    throw new TypeError(\n                                        'Duplicated element (' + elements[j].key + ')'\n                                    );\n                                }\n                            }\n                        }\n                    }\n                }\n\n                return {\n                    elements: elements,\n                    finishers: finishers,\n                };\n            },\n            fromElementDescriptor: function(element) {\n                var obj = {\n                    kind: element.kind,\n                    key: element.key,\n                    placement: element.placement,\n                    descriptor: element.descriptor,\n                };\n                var desc = {\n                    value: 'Descriptor',\n                    configurable: true,\n                };\n                Object.defineProperty(obj, Symbol.toStringTag, desc);\n                if (element.kind === 'field') obj.initializer = element.initializer;\n                return obj;\n            },\n            toElementDescriptors: function(elementObjects) {\n                if (elementObjects === undefined) return;\n                return _toArray(elementObjects).map(function(elementObject) {\n                    var element = this.toElementDescriptor(elementObject);\n                    this.disallowProperty(elementObject, 'finisher', 'An element descriptor');\n                    this.disallowProperty(elementObject, 'extras', 'An element descriptor');\n                    return element;\n                }, this);\n            },\n            toElementDescriptor: function(elementObject) {\n                var kind = String(elementObject.kind);\n\n                if (kind !== 'method' && kind !== 'field') {\n                    throw new TypeError(\n                        'An element descriptor\\'s .kind property must be either \"method\" or' +\n                            ' \"field\", but a decorator created an element descriptor with' +\n                            ' .kind \"' +\n                            kind +\n                            '\"'\n                    );\n                }\n\n                var key = _toPropertyKey(elementObject.key);\n\n                var placement = String(elementObject.placement);\n\n                if (placement !== 'static' && placement !== 'prototype' && placement !== 'own') {\n                    throw new TypeError(\n                        'An element descriptor\\'s .placement property must be one of \"static\",' +\n                            ' \"prototype\" or \"own\", but a decorator created an element descriptor' +\n                            ' with .placement \"' +\n                            placement +\n                            '\"'\n                    );\n                }\n\n                var descriptor = elementObject.descriptor;\n                this.disallowProperty(elementObject, 'elements', 'An element descriptor');\n                var element = {\n                    kind: kind,\n                    key: key,\n                    placement: placement,\n                    descriptor: Object.assign({}, descriptor),\n                };\n\n                if (kind !== 'field') {\n                    this.disallowProperty(elementObject, 'initializer', 'A method descriptor');\n                } else {\n                    this.disallowProperty(\n                        descriptor,\n                        'get',\n                        'The property descriptor of a field descriptor'\n                    );\n                    this.disallowProperty(\n                        descriptor,\n                        'set',\n                        'The property descriptor of a field descriptor'\n                    );\n                    this.disallowProperty(\n                        descriptor,\n                        'value',\n                        'The property descriptor of a field descriptor'\n                    );\n                    element.initializer = elementObject.initializer;\n                }\n\n                return element;\n            },\n            toElementFinisherExtras: function(elementObject) {\n                var element = this.toElementDescriptor(elementObject);\n\n                var finisher = _optionalCallableProperty(elementObject, 'finisher');\n\n                var extras = this.toElementDescriptors(elementObject.extras);\n                return {\n                    element: element,\n                    finisher: finisher,\n                    extras: extras,\n                };\n            },\n            fromClassDescriptor: function(elements) {\n                var obj = {\n                    kind: 'class',\n                    elements: elements.map(this.fromElementDescriptor, this),\n                };\n                var desc = {\n                    value: 'Descriptor',\n                    configurable: true,\n                };\n                Object.defineProperty(obj, Symbol.toStringTag, desc);\n                return obj;\n            },\n            toClassDescriptor: function(obj) {\n                var kind = String(obj.kind);\n\n                if (kind !== 'class') {\n                    throw new TypeError(\n                        'A class descriptor\\'s .kind property must be \"class\", but a decorator' +\n                            ' created a class descriptor with .kind \"' +\n                            kind +\n                            '\"'\n                    );\n                }\n\n                this.disallowProperty(obj, 'key', 'A class descriptor');\n                this.disallowProperty(obj, 'placement', 'A class descriptor');\n                this.disallowProperty(obj, 'descriptor', 'A class descriptor');\n                this.disallowProperty(obj, 'initializer', 'A class descriptor');\n                this.disallowProperty(obj, 'extras', 'A class descriptor');\n\n                var finisher = _optionalCallableProperty(obj, 'finisher');\n\n                var elements = this.toElementDescriptors(obj.elements);\n                return {\n                    elements: elements,\n                    finisher: finisher,\n                };\n            },\n            runClassFinishers: function(constructor, finishers) {\n                for (var i = 0; i < finishers.length; i++) {\n                    var newConstructor = (0, finishers[i])(constructor);\n\n                    if (newConstructor !== undefined) {\n                        if (typeof newConstructor !== 'function') {\n                            throw new TypeError('Finishers must return a constructor.');\n                        }\n\n                        constructor = newConstructor;\n                    }\n                }\n\n                return constructor;\n            },\n            disallowProperty: function(obj, name, objectType) {\n                if (obj[name] !== undefined) {\n                    throw new TypeError(objectType + \" can't have a .\" + name + ' property.');\n                }\n            },\n        };\n        return api;\n    }\n\n    function _createElementDescriptor(def) {\n        var key = _toPropertyKey(def.key);\n\n        var descriptor;\n\n        if (def.kind === 'method') {\n            descriptor = {\n                value: def.value,\n                writable: true,\n                configurable: true,\n                enumerable: false,\n            };\n        } else if (def.kind === 'get') {\n            descriptor = {\n                get: def.value,\n                configurable: true,\n                enumerable: false,\n            };\n        } else if (def.kind === 'set') {\n            descriptor = {\n                set: def.value,\n                configurable: true,\n                enumerable: false,\n            };\n        } else if (def.kind === 'field') {\n            descriptor = {\n                configurable: true,\n                writable: true,\n                enumerable: true,\n            };\n        }\n\n        var element = {\n            kind: def.kind === 'field' ? 'field' : 'method',\n            key: key,\n            placement: def.static ? 'static' : def.kind === 'field' ? 'own' : 'prototype',\n            descriptor: descriptor,\n        };\n        if (def.decorators) element.decorators = def.decorators;\n        if (def.kind === 'field') element.initializer = def.value;\n        return element;\n    }\n\n    function _coalesceGetterSetter(element, other) {\n        if (element.descriptor.get !== undefined) {\n            other.descriptor.get = element.descriptor.get;\n        } else {\n            other.descriptor.set = element.descriptor.set;\n        }\n    }\n\n    function _coalesceClassElements(elements) {\n        var newElements = [];\n\n        var isSameElement = function(other) {\n            return (\n                other.kind === 'method' &&\n                other.key === element.key &&\n                other.placement === element.placement\n            );\n        };\n\n        for (var i = 0; i < elements.length; i++) {\n            var element = elements[i];\n            var other;\n\n            if (element.kind === 'method' && (other = newElements.find(isSameElement))) {\n                if (_isDataDescriptor(element.descriptor) || _isDataDescriptor(other.descriptor)) {\n                    if (_hasDecorators(element) || _hasDecorators(other)) {\n                        throw new ReferenceError(\n                            'Duplicated methods (' + element.key + \") can't be decorated.\"\n                        );\n                    }\n\n                    other.descriptor = element.descriptor;\n                } else {\n                    if (_hasDecorators(element)) {\n                        if (_hasDecorators(other)) {\n                            throw new ReferenceError(\n                                \"Decorators can't be placed on different accessors with for \" +\n                                    'the same property (' +\n                                    element.key +\n                                    ').'\n                            );\n                        }\n\n                        other.decorators = element.decorators;\n                    }\n\n                    _coalesceGetterSetter(element, other);\n                }\n            } else {\n                newElements.push(element);\n            }\n        }\n\n        return newElements;\n    }\n\n    function _hasDecorators(element) {\n        return element.decorators && element.decorators.length;\n    }\n\n    function _isDataDescriptor(desc) {\n        return desc !== undefined && !(desc.value === undefined && desc.writable === undefined);\n    }\n\n    function _optionalCallableProperty(obj, name) {\n        var value = obj[name];\n\n        if (value !== undefined && typeof value !== 'function') {\n            throw new TypeError(\"Expected '\" + name + \"' to be a function\");\n        }\n\n        return value;\n    }\n\n    function _classPrivateMethodGet(receiver, privateSet, fn) {\n        if (!privateSet.has(receiver)) {\n            throw new TypeError('attempted to get private field on non-instance');\n        }\n\n        return fn;\n    }\n\n    function _classPrivateMethodSet() {\n        throw new TypeError('attempted to reassign private method');\n    }\n\n    function _wrapRegExp(re, groups) {\n        _wrapRegExp = function(re, groups) {\n            return new BabelRegExp(re, groups);\n        };\n\n        var _RegExp = _wrapNativeSuper(RegExp);\n\n        var _super = RegExp.prototype;\n\n        var _groups = new WeakMap();\n\n        function BabelRegExp(re, groups) {\n            var _this = _RegExp.call(this, re);\n\n            _groups.set(_this, groups);\n\n            return _this;\n        }\n\n        _inherits(BabelRegExp, _RegExp);\n\n        BabelRegExp.prototype.exec = function(str) {\n            var result = _super.exec.call(this, str);\n\n            if (result) result.groups = buildGroups(result, this);\n            return result;\n        };\n\n        BabelRegExp.prototype[Symbol.replace] = function(str, substitution) {\n            if (typeof substitution === 'string') {\n                var groups = _groups.get(this);\n\n                return _super[Symbol.replace].call(\n                    this,\n                    str,\n                    substitution.replace(/\\$<([^>]+)>/g, function(_, name) {\n                        return '$' + groups[name];\n                    })\n                );\n            } else if (typeof substitution === 'function') {\n                var _this = this;\n\n                return _super[Symbol.replace].call(this, str, function() {\n                    var args = [];\n                    args.push.apply(args, arguments);\n\n                    if (typeof args[args.length - 1] !== 'object') {\n                        args.push(buildGroups(args, _this));\n                    }\n\n                    return substitution.apply(this, args);\n                });\n            } else {\n                return _super[Symbol.replace].call(this, str, substitution);\n            }\n        };\n\n        function buildGroups(result, re) {\n            var g = _groups.get(re);\n\n            return Object.keys(g).reduce(function(groups, name) {\n                groups[name] = result[g[name]];\n                return groups;\n            }, Object.create(null));\n        }\n\n        return _wrapRegExp.apply(this, arguments);\n    }\n\n    var arrayRemove = function arrayRemove(arr, index) {\n        return arr.splice(index, 1);\n    };\n\n    var run = function run(cb, sync) {\n        if (sync) {\n            cb();\n        } else if (document.hidden) {\n            Promise.resolve(1).then(cb);\n        } else {\n            setTimeout(cb, 0);\n        }\n    };\n\n    var on = function on() {\n        var listeners = [];\n        var off = function off(event, cb) {\n            arrayRemove(\n                listeners,\n                listeners.findIndex(function(listener) {\n                    return listener.event === event && (listener.cb === cb || !cb);\n                })\n            );\n        };\n        var _fire = function fire(event, args, sync) {\n            listeners\n                .filter(function(listener) {\n                    return listener.event === event;\n                })\n                .map(function(listener) {\n                    return listener.cb;\n                })\n                .forEach(function(cb) {\n                    return run(function() {\n                        return cb.apply(void 0, _toConsumableArray(args));\n                    }, sync);\n                });\n        };\n        return {\n            fireSync: function fireSync(event) {\n                for (\n                    var _len = arguments.length,\n                        args = new Array(_len > 1 ? _len - 1 : 0),\n                        _key = 1;\n                    _key < _len;\n                    _key++\n                ) {\n                    args[_key - 1] = arguments[_key];\n                }\n                _fire(event, args, true);\n            },\n            fire: function fire(event) {\n                for (\n                    var _len2 = arguments.length,\n                        args = new Array(_len2 > 1 ? _len2 - 1 : 0),\n                        _key2 = 1;\n                    _key2 < _len2;\n                    _key2++\n                ) {\n                    args[_key2 - 1] = arguments[_key2];\n                }\n                _fire(event, args, false);\n            },\n            on: function on(event, cb) {\n                listeners.push({ event: event, cb: cb });\n            },\n            onOnce: function onOnce(event, _cb) {\n                listeners.push({\n                    event: event,\n                    cb: function cb() {\n                        off(event, _cb);\n                        _cb.apply(void 0, arguments);\n                    },\n                });\n            },\n            off: off,\n        };\n    };\n\n    var copyObjectPropertiesToObject = function copyObjectPropertiesToObject(\n        src,\n        target,\n        excluded\n    ) {\n        Object.getOwnPropertyNames(src)\n            .filter(function(property) {\n                return !excluded.includes(property);\n            })\n            .forEach(function(key) {\n                return Object.defineProperty(\n                    target,\n                    key,\n                    Object.getOwnPropertyDescriptor(src, key)\n                );\n            });\n    };\n\n    var PRIVATE = [\n        'fire',\n        'process',\n        'revert',\n        'load',\n        'on',\n        'off',\n        'onOnce',\n        'retryLoad',\n        'extend',\n        'archive',\n        'archived',\n        'release',\n        'released',\n        'requestProcessing',\n        'freeze',\n    ];\n\n    var createItemAPI = function createItemAPI(item) {\n        var api = {};\n        copyObjectPropertiesToObject(item, api, PRIVATE);\n        return api;\n    };\n\n    var removeReleasedItems = function removeReleasedItems(items) {\n        items.forEach(function(item, index) {\n            if (item.released) {\n                arrayRemove(items, index);\n            }\n        });\n    };\n\n    var ItemStatus = {\n        INIT: 1,\n        IDLE: 2,\n        PROCESSING_QUEUED: 9,\n        PROCESSING: 3,\n        PROCESSING_COMPLETE: 5,\n        PROCESSING_ERROR: 6,\n        PROCESSING_REVERT_ERROR: 10,\n        LOADING: 7,\n        LOAD_ERROR: 8,\n    };\n\n    var FileOrigin = {\n        INPUT: 1,\n        LIMBO: 2,\n        LOCAL: 3,\n    };\n\n    var getNonNumeric = function getNonNumeric(str) {\n        return /[^0-9]+/.exec(str);\n    };\n\n    var getDecimalSeparator = function getDecimalSeparator() {\n        return getNonNumeric((1.1).toLocaleString())[0];\n    };\n\n    var getThousandsSeparator = function getThousandsSeparator() {\n        // Added for browsers that do not return the thousands separator (happend on native browser Android 4.4.4)\n        // We check against the normal toString output and if they're the same return a comma when decimal separator is a dot\n        var decimalSeparator = getDecimalSeparator();\n        var thousandsStringWithSeparator = (1000.0).toLocaleString();\n        var thousandsStringWithoutSeparator = (1000.0).toString();\n        if (thousandsStringWithSeparator !== thousandsStringWithoutSeparator) {\n            return getNonNumeric(thousandsStringWithSeparator)[0];\n        }\n        return decimalSeparator === '.' ? ',' : '.';\n    };\n\n    var Type = {\n        BOOLEAN: 'boolean',\n        INT: 'int',\n        NUMBER: 'number',\n        STRING: 'string',\n        ARRAY: 'array',\n        OBJECT: 'object',\n        FUNCTION: 'function',\n        ACTION: 'action',\n        SERVER_API: 'serverapi',\n        REGEX: 'regex',\n    };\n\n    // all registered filters\n    var filters = [];\n\n    // loops over matching filters and passes options to each filter, returning the mapped results\n    var applyFilterChain = function applyFilterChain(key, value, utils) {\n        return new Promise(function(resolve, reject) {\n            // find matching filters for this key\n            var matchingFilters = filters\n                .filter(function(f) {\n                    return f.key === key;\n                })\n                .map(function(f) {\n                    return f.cb;\n                });\n\n            // resolve now\n            if (matchingFilters.length === 0) {\n                resolve(value);\n                return;\n            }\n\n            // first filter to kick things of\n            var initialFilter = matchingFilters.shift();\n\n            // chain filters\n            matchingFilters\n                .reduce(\n                    // loop over promises passing value to next promise\n                    function(current, next) {\n                        return current.then(function(value) {\n                            return next(value, utils);\n                        });\n                    },\n\n                    // call initial filter, will return a promise\n                    initialFilter(value, utils)\n\n                    // all executed\n                )\n                .then(function(value) {\n                    return resolve(value);\n                })\n                .catch(function(error) {\n                    return reject(error);\n                });\n        });\n    };\n\n    var applyFilters = function applyFilters(key, value, utils) {\n        return filters\n            .filter(function(f) {\n                return f.key === key;\n            })\n            .map(function(f) {\n                return f.cb(value, utils);\n            });\n    };\n\n    // adds a new filter to the list\n    var addFilter = function addFilter(key, cb) {\n        return filters.push({ key: key, cb: cb });\n    };\n\n    var extendDefaultOptions = function extendDefaultOptions(additionalOptions) {\n        return Object.assign(defaultOptions, additionalOptions);\n    };\n\n    var getOptions = function getOptions() {\n        return Object.assign({}, defaultOptions);\n    };\n\n    var setOptions = function setOptions(opts) {\n        forin(opts, function(key, value) {\n            // key does not exist, so this option cannot be set\n            if (!defaultOptions[key]) {\n                return;\n            }\n            defaultOptions[key][0] = getValueByType(\n                value,\n                defaultOptions[key][0],\n                defaultOptions[key][1]\n            );\n        });\n    };\n\n    // default options on app\n    var defaultOptions = {\n        // the id to add to the root element\n        id: [null, Type.STRING],\n\n        // input field name to use\n        name: ['filepond', Type.STRING],\n\n        // disable the field\n        disabled: [false, Type.BOOLEAN],\n\n        // classname to put on wrapper\n        className: [null, Type.STRING],\n\n        // is the field required\n        required: [false, Type.BOOLEAN],\n\n        // Allow media capture when value is set\n        captureMethod: [null, Type.STRING],\n        // - \"camera\", \"microphone\" or \"camcorder\",\n        // - Does not work with multiple on apple devices\n        // - If set, acceptedFileTypes must be made to match with media wildcard \"image/*\", \"audio/*\" or \"video/*\"\n\n        // sync `acceptedFileTypes` property with `accept` attribute\n        allowSyncAcceptAttribute: [true, Type.BOOLEAN],\n\n        // Feature toggles\n        allowDrop: [true, Type.BOOLEAN], // Allow dropping of files\n        allowBrowse: [true, Type.BOOLEAN], // Allow browsing the file system\n        allowPaste: [true, Type.BOOLEAN], // Allow pasting files\n        allowMultiple: [false, Type.BOOLEAN], // Allow multiple files (disabled by default, as multiple attribute is also required on input to allow multiple)\n        allowReplace: [true, Type.BOOLEAN], // Allow dropping a file on other file to replace it (only works when multiple is set to false)\n        allowRevert: [true, Type.BOOLEAN], // Allows user to revert file upload\n        allowRemove: [true, Type.BOOLEAN], // Allow user to remove a file\n        allowProcess: [true, Type.BOOLEAN], // Allows user to process a file, when set to false, this removes the file upload button\n        allowReorder: [false, Type.BOOLEAN], // Allow reordering of files\n        allowDirectoriesOnly: [false, Type.BOOLEAN], // Allow only selecting directories with browse (no support for filtering dnd at this point)\n\n        // Try store file if `server` not set\n        storeAsFile: [false, Type.BOOLEAN],\n\n        // Revert mode\n        forceRevert: [false, Type.BOOLEAN], // Set to 'force' to require the file to be reverted before removal\n\n        // Input requirements\n        maxFiles: [null, Type.INT], // Max number of files\n        checkValidity: [false, Type.BOOLEAN], // Enables custom validity messages\n\n        // Where to put file\n        itemInsertLocationFreedom: [true, Type.BOOLEAN], // Set to false to always add items to begin or end of list\n        itemInsertLocation: ['before', Type.STRING], // Default index in list to add items that have been dropped at the top of the list\n        itemInsertInterval: [75, Type.INT],\n\n        // Drag 'n Drop related\n        dropOnPage: [false, Type.BOOLEAN], // Allow dropping of files anywhere on page (prevents browser from opening file if dropped outside of Up)\n        dropOnElement: [true, Type.BOOLEAN], // Drop needs to happen on element (set to false to also load drops outside of Up)\n        dropValidation: [false, Type.BOOLEAN], // Enable or disable validating files on drop\n        ignoredFiles: [['.ds_store', 'thumbs.db', 'desktop.ini'], Type.ARRAY],\n\n        // Upload related\n        instantUpload: [true, Type.BOOLEAN], // Should upload files immediately on drop\n        maxParallelUploads: [2, Type.INT], // Maximum files to upload in parallel\n        allowMinimumUploadDuration: [true, Type.BOOLEAN], // if true uploads take at least 750 ms, this ensures the user sees the upload progress giving trust the upload actually happened\n\n        // Chunks\n        chunkUploads: [false, Type.BOOLEAN], // Enable chunked uploads\n        chunkForce: [false, Type.BOOLEAN], // Force use of chunk uploads even for files smaller than chunk size\n        chunkSize: [5000000, Type.INT], // Size of chunks (5MB default)\n        chunkRetryDelays: [[500, 1000, 3000], Type.ARRAY], // Amount of times to retry upload of a chunk when it fails\n\n        // The server api end points to use for uploading (see docs)\n        server: [null, Type.SERVER_API],\n\n        // File size calculations, can set to 1024, this is only used for display, properties use file size base 1000\n        fileSizeBase: [1000, Type.INT],\n\n        // Labels and status messages\n        labelFileSizeBytes: ['bytes', Type.STRING],\n        labelFileSizeKilobytes: ['KB', Type.STRING],\n        labelFileSizeMegabytes: ['MB', Type.STRING],\n        labelFileSizeGigabytes: ['GB', Type.STRING],\n\n        labelDecimalSeparator: [getDecimalSeparator(), Type.STRING], // Default is locale separator\n        labelThousandsSeparator: [getThousandsSeparator(), Type.STRING], // Default is locale separator\n\n        labelIdle: [\n            'Drag & Drop your files or <span class=\"filepond--label-action\">Browse</span>',\n            Type.STRING,\n        ],\n\n        labelInvalidField: ['Field contains invalid files', Type.STRING],\n        labelFileWaitingForSize: ['Waiting for size', Type.STRING],\n        labelFileSizeNotAvailable: ['Size not available', Type.STRING],\n        labelFileCountSingular: ['file in list', Type.STRING],\n        labelFileCountPlural: ['files in list', Type.STRING],\n        labelFileLoading: ['Loading', Type.STRING],\n        labelFileAdded: ['Added', Type.STRING], // assistive only\n        labelFileLoadError: ['Error during load', Type.STRING],\n        labelFileRemoved: ['Removed', Type.STRING], // assistive only\n        labelFileRemoveError: ['Error during remove', Type.STRING],\n        labelFileProcessing: ['Uploading', Type.STRING],\n        labelFileProcessingComplete: ['Upload complete', Type.STRING],\n        labelFileProcessingAborted: ['Upload cancelled', Type.STRING],\n        labelFileProcessingError: ['Error during upload', Type.STRING],\n        labelFileProcessingRevertError: ['Error during revert', Type.STRING],\n\n        labelTapToCancel: ['tap to cancel', Type.STRING],\n        labelTapToRetry: ['tap to retry', Type.STRING],\n        labelTapToUndo: ['tap to undo', Type.STRING],\n\n        labelButtonRemoveItem: ['Remove', Type.STRING],\n        labelButtonAbortItemLoad: ['Abort', Type.STRING],\n        labelButtonRetryItemLoad: ['Retry', Type.STRING],\n        labelButtonAbortItemProcessing: ['Cancel', Type.STRING],\n        labelButtonUndoItemProcessing: ['Undo', Type.STRING],\n        labelButtonRetryItemProcessing: ['Retry', Type.STRING],\n        labelButtonProcessItem: ['Upload', Type.STRING],\n\n        // make sure width and height plus viewpox are even numbers so icons are nicely centered\n        iconRemove: [\n            '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n            Type.STRING,\n        ],\n\n        iconProcess: [\n            '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z\" fill=\"currentColor\" fill-rule=\"evenodd\"/></svg>',\n            Type.STRING,\n        ],\n\n        iconRetry: [\n            '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n            Type.STRING,\n        ],\n\n        iconUndo: [\n            '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n            Type.STRING,\n        ],\n\n        iconDone: [\n            '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n            Type.STRING,\n        ],\n\n        // event handlers\n        oninit: [null, Type.FUNCTION],\n        onwarning: [null, Type.FUNCTION],\n        onerror: [null, Type.FUNCTION],\n        onactivatefile: [null, Type.FUNCTION],\n        oninitfile: [null, Type.FUNCTION],\n        onaddfilestart: [null, Type.FUNCTION],\n        onaddfileprogress: [null, Type.FUNCTION],\n        onaddfile: [null, Type.FUNCTION],\n        onprocessfilestart: [null, Type.FUNCTION],\n        onprocessfileprogress: [null, Type.FUNCTION],\n        onprocessfileabort: [null, Type.FUNCTION],\n        onprocessfilerevert: [null, Type.FUNCTION],\n        onprocessfile: [null, Type.FUNCTION],\n        onprocessfiles: [null, Type.FUNCTION],\n        onremovefile: [null, Type.FUNCTION],\n        onpreparefile: [null, Type.FUNCTION],\n        onupdatefiles: [null, Type.FUNCTION],\n        onreorderfiles: [null, Type.FUNCTION],\n\n        // hooks\n        beforeDropFile: [null, Type.FUNCTION],\n        beforeAddFile: [null, Type.FUNCTION],\n        beforeRemoveFile: [null, Type.FUNCTION],\n        beforePrepareFile: [null, Type.FUNCTION],\n\n        // styles\n        stylePanelLayout: [null, Type.STRING], // null 'integrated', 'compact', 'circle'\n        stylePanelAspectRatio: [null, Type.STRING], // null or '3:2' or 1\n        styleItemPanelAspectRatio: [null, Type.STRING],\n        styleButtonRemoveItemPosition: ['left', Type.STRING],\n        styleButtonProcessItemPosition: ['right', Type.STRING],\n        styleLoadIndicatorPosition: ['right', Type.STRING],\n        styleProgressIndicatorPosition: ['right', Type.STRING],\n        styleButtonRemoveItemAlign: [false, Type.BOOLEAN],\n\n        // custom initial files array\n        files: [[], Type.ARRAY],\n\n        // show support by displaying credits\n        credits: [['https://pqina.nl/', 'Powered by PQINA'], Type.ARRAY],\n    };\n\n    var getItemByQuery = function getItemByQuery(items, query) {\n        // just return first index\n        if (isEmpty(query)) {\n            return items[0] || null;\n        }\n\n        // query is index\n        if (isInt(query)) {\n            return items[query] || null;\n        }\n\n        // if query is item, get the id\n        if (typeof query === 'object') {\n            query = query.id;\n        }\n\n        // assume query is a string and return item by id\n        return (\n            items.find(function(item) {\n                return item.id === query;\n            }) || null\n        );\n    };\n\n    var getNumericAspectRatioFromString = function getNumericAspectRatioFromString(aspectRatio) {\n        if (isEmpty(aspectRatio)) {\n            return aspectRatio;\n        }\n        if (/:/.test(aspectRatio)) {\n            var parts = aspectRatio.split(':');\n            return parts[1] / parts[0];\n        }\n        return parseFloat(aspectRatio);\n    };\n\n    var getActiveItems = function getActiveItems(items) {\n        return items.filter(function(item) {\n            return !item.archived;\n        });\n    };\n\n    var Status = {\n        EMPTY: 0,\n        IDLE: 1, // waiting\n        ERROR: 2, // a file is in error state\n        BUSY: 3, // busy processing or loading\n        READY: 4, // all files uploaded\n    };\n\n    var res = null;\n    var canUpdateFileInput = function canUpdateFileInput() {\n        if (res === null) {\n            try {\n                var dataTransfer = new DataTransfer();\n                dataTransfer.items.add(new File(['hello world'], 'This_Works.txt'));\n                var el = document.createElement('input');\n                el.setAttribute('type', 'file');\n                el.files = dataTransfer.files;\n                res = el.files.length === 1;\n            } catch (err) {\n                res = false;\n            }\n        }\n        return res;\n    };\n\n    var ITEM_ERROR = [\n        ItemStatus.LOAD_ERROR,\n        ItemStatus.PROCESSING_ERROR,\n        ItemStatus.PROCESSING_REVERT_ERROR,\n    ];\n\n    var ITEM_BUSY = [\n        ItemStatus.LOADING,\n        ItemStatus.PROCESSING,\n        ItemStatus.PROCESSING_QUEUED,\n        ItemStatus.INIT,\n    ];\n\n    var ITEM_READY = [ItemStatus.PROCESSING_COMPLETE];\n\n    var isItemInErrorState = function isItemInErrorState(item) {\n        return ITEM_ERROR.includes(item.status);\n    };\n    var isItemInBusyState = function isItemInBusyState(item) {\n        return ITEM_BUSY.includes(item.status);\n    };\n    var isItemInReadyState = function isItemInReadyState(item) {\n        return ITEM_READY.includes(item.status);\n    };\n\n    var isAsync = function isAsync(state) {\n        return (\n            isObject(state.options.server) &&\n            (isObject(state.options.server.process) || isFunction(state.options.server.process))\n        );\n    };\n\n    var queries = function queries(state) {\n        return {\n            GET_STATUS: function GET_STATUS() {\n                var items = getActiveItems(state.items);\n                var EMPTY = Status.EMPTY,\n                    ERROR = Status.ERROR,\n                    BUSY = Status.BUSY,\n                    IDLE = Status.IDLE,\n                    READY = Status.READY;\n\n                if (items.length === 0) return EMPTY;\n\n                if (items.some(isItemInErrorState)) return ERROR;\n\n                if (items.some(isItemInBusyState)) return BUSY;\n\n                if (items.some(isItemInReadyState)) return READY;\n\n                return IDLE;\n            },\n\n            GET_ITEM: function GET_ITEM(query) {\n                return getItemByQuery(state.items, query);\n            },\n\n            GET_ACTIVE_ITEM: function GET_ACTIVE_ITEM(query) {\n                return getItemByQuery(getActiveItems(state.items), query);\n            },\n\n            GET_ACTIVE_ITEMS: function GET_ACTIVE_ITEMS() {\n                return getActiveItems(state.items);\n            },\n\n            GET_ITEMS: function GET_ITEMS() {\n                return state.items;\n            },\n\n            GET_ITEM_NAME: function GET_ITEM_NAME(query) {\n                var item = getItemByQuery(state.items, query);\n                return item ? item.filename : null;\n            },\n\n            GET_ITEM_SIZE: function GET_ITEM_SIZE(query) {\n                var item = getItemByQuery(state.items, query);\n                return item ? item.fileSize : null;\n            },\n\n            GET_STYLES: function GET_STYLES() {\n                return Object.keys(state.options)\n                    .filter(function(key) {\n                        return /^style/.test(key);\n                    })\n                    .map(function(option) {\n                        return {\n                            name: option,\n                            value: state.options[option],\n                        };\n                    });\n            },\n\n            GET_PANEL_ASPECT_RATIO: function GET_PANEL_ASPECT_RATIO() {\n                var isShapeCircle = /circle/.test(state.options.stylePanelLayout);\n                var aspectRatio = isShapeCircle\n                    ? 1\n                    : getNumericAspectRatioFromString(state.options.stylePanelAspectRatio);\n                return aspectRatio;\n            },\n\n            GET_ITEM_PANEL_ASPECT_RATIO: function GET_ITEM_PANEL_ASPECT_RATIO() {\n                return state.options.styleItemPanelAspectRatio;\n            },\n\n            GET_ITEMS_BY_STATUS: function GET_ITEMS_BY_STATUS(status) {\n                return getActiveItems(state.items).filter(function(item) {\n                    return item.status === status;\n                });\n            },\n\n            GET_TOTAL_ITEMS: function GET_TOTAL_ITEMS() {\n                return getActiveItems(state.items).length;\n            },\n\n            SHOULD_UPDATE_FILE_INPUT: function SHOULD_UPDATE_FILE_INPUT() {\n                return state.options.storeAsFile && canUpdateFileInput() && !isAsync(state);\n            },\n\n            IS_ASYNC: function IS_ASYNC() {\n                return isAsync(state);\n            },\n\n            GET_FILE_SIZE_LABELS: function GET_FILE_SIZE_LABELS(query) {\n                return {\n                    labelBytes: query('GET_LABEL_FILE_SIZE_BYTES') || undefined,\n                    labelKilobytes: query('GET_LABEL_FILE_SIZE_KILOBYTES') || undefined,\n                    labelMegabytes: query('GET_LABEL_FILE_SIZE_MEGABYTES') || undefined,\n                    labelGigabytes: query('GET_LABEL_FILE_SIZE_GIGABYTES') || undefined,\n                };\n            },\n        };\n    };\n\n    var hasRoomForItem = function hasRoomForItem(state) {\n        var count = getActiveItems(state.items).length;\n\n        // if cannot have multiple items, to add one item it should currently not contain items\n        if (!state.options.allowMultiple) {\n            return count === 0;\n        }\n\n        // if allows multiple items, we check if a max item count has been set, if not, there's no limit\n        var maxFileCount = state.options.maxFiles;\n        if (maxFileCount === null) {\n            return true;\n        }\n\n        // we check if the current count is smaller than the max count, if so, another file can still be added\n        if (count < maxFileCount) {\n            return true;\n        }\n\n        // no more room for another file\n        return false;\n    };\n\n    var limit = function limit(value, min, max) {\n        return Math.max(Math.min(max, value), min);\n    };\n\n    var arrayInsert = function arrayInsert(arr, index, item) {\n        return arr.splice(index, 0, item);\n    };\n\n    var insertItem = function insertItem(items, item, index) {\n        if (isEmpty(item)) {\n            return null;\n        }\n\n        // if index is undefined, append\n        if (typeof index === 'undefined') {\n            items.push(item);\n            return item;\n        }\n\n        // limit the index to the size of the items array\n        index = limit(index, 0, items.length);\n\n        // add item to array\n        arrayInsert(items, index, item);\n\n        // expose\n        return item;\n    };\n\n    var isBase64DataURI = function isBase64DataURI(str) {\n        return /^\\s*data:([a-z]+\\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s]*)\\s*$/i.test(\n            str\n        );\n    };\n\n    var getFilenameFromURL = function getFilenameFromURL(url) {\n        return ('' + url)\n            .split('/')\n            .pop()\n            .split('?')\n            .shift();\n    };\n\n    var getExtensionFromFilename = function getExtensionFromFilename(name) {\n        return name.split('.').pop();\n    };\n\n    var guesstimateExtension = function guesstimateExtension(type) {\n        // if no extension supplied, exit here\n        if (typeof type !== 'string') {\n            return '';\n        }\n\n        // get subtype\n        var subtype = type.split('/').pop();\n\n        // is svg subtype\n        if (/svg/.test(subtype)) {\n            return 'svg';\n        }\n\n        if (/zip|compressed/.test(subtype)) {\n            return 'zip';\n        }\n\n        if (/plain/.test(subtype)) {\n            return 'txt';\n        }\n\n        if (/msword/.test(subtype)) {\n            return 'doc';\n        }\n\n        // if is valid subtype\n        if (/[a-z]+/.test(subtype)) {\n            // always use jpg extension\n            if (subtype === 'jpeg') {\n                return 'jpg';\n            }\n\n            // return subtype\n            return subtype;\n        }\n\n        return '';\n    };\n\n    var leftPad = function leftPad(value) {\n        var padding = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n        return (padding + value).slice(-padding.length);\n    };\n\n    var getDateString = function getDateString() {\n        var date = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Date();\n        return (\n            date.getFullYear() +\n            '-' +\n            leftPad(date.getMonth() + 1, '00') +\n            '-' +\n            leftPad(date.getDate(), '00') +\n            '_' +\n            leftPad(date.getHours(), '00') +\n            '-' +\n            leftPad(date.getMinutes(), '00') +\n            '-' +\n            leftPad(date.getSeconds(), '00')\n        );\n    };\n\n    var getFileFromBlob = function getFileFromBlob(blob, filename) {\n        var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n        var extension = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n        var file =\n            typeof type === 'string'\n                ? blob.slice(0, blob.size, type)\n                : blob.slice(0, blob.size, blob.type);\n        file.lastModifiedDate = new Date();\n\n        // copy relative path\n        if (blob._relativePath) file._relativePath = blob._relativePath;\n\n        // if blob has name property, use as filename if no filename supplied\n        if (!isString(filename)) {\n            filename = getDateString();\n        }\n\n        // if filename supplied but no extension and filename has extension\n        if (filename && extension === null && getExtensionFromFilename(filename)) {\n            file.name = filename;\n        } else {\n            extension = extension || guesstimateExtension(file.type);\n            file.name = filename + (extension ? '.' + extension : '');\n        }\n\n        return file;\n    };\n\n    var getBlobBuilder = function getBlobBuilder() {\n        return (window.BlobBuilder =\n            window.BlobBuilder ||\n            window.WebKitBlobBuilder ||\n            window.MozBlobBuilder ||\n            window.MSBlobBuilder);\n    };\n\n    var createBlob = function createBlob(arrayBuffer, mimeType) {\n        var BB = getBlobBuilder();\n\n        if (BB) {\n            var bb = new BB();\n            bb.append(arrayBuffer);\n            return bb.getBlob(mimeType);\n        }\n\n        return new Blob([arrayBuffer], {\n            type: mimeType,\n        });\n    };\n\n    var getBlobFromByteStringWithMimeType = function getBlobFromByteStringWithMimeType(\n        byteString,\n        mimeType\n    ) {\n        var ab = new ArrayBuffer(byteString.length);\n        var ia = new Uint8Array(ab);\n\n        for (var i = 0; i < byteString.length; i++) {\n            ia[i] = byteString.charCodeAt(i);\n        }\n\n        return createBlob(ab, mimeType);\n    };\n\n    var getMimeTypeFromBase64DataURI = function getMimeTypeFromBase64DataURI(dataURI) {\n        return (/^data:(.+);/.exec(dataURI) || [])[1] || null;\n    };\n\n    var getBase64DataFromBase64DataURI = function getBase64DataFromBase64DataURI(dataURI) {\n        // get data part of string (remove data:image/jpeg...,)\n        var data = dataURI.split(',')[1];\n\n        // remove any whitespace as that causes InvalidCharacterError in IE\n        return data.replace(/\\s/g, '');\n    };\n\n    var getByteStringFromBase64DataURI = function getByteStringFromBase64DataURI(dataURI) {\n        return atob(getBase64DataFromBase64DataURI(dataURI));\n    };\n\n    var getBlobFromBase64DataURI = function getBlobFromBase64DataURI(dataURI) {\n        var mimeType = getMimeTypeFromBase64DataURI(dataURI);\n        var byteString = getByteStringFromBase64DataURI(dataURI);\n\n        return getBlobFromByteStringWithMimeType(byteString, mimeType);\n    };\n\n    var getFileFromBase64DataURI = function getFileFromBase64DataURI(dataURI, filename, extension) {\n        return getFileFromBlob(getBlobFromBase64DataURI(dataURI), filename, null, extension);\n    };\n\n    var getFileNameFromHeader = function getFileNameFromHeader(header) {\n        // test if is content disposition header, if not exit\n        if (!/^content-disposition:/i.test(header)) return null;\n\n        // get filename parts\n        var matches = header\n            .split(/filename=|filename\\*=.+''/)\n            .splice(1)\n            .map(function(name) {\n                return name.trim().replace(/^[\"']|[;\"']{0,2}$/g, '');\n            })\n            .filter(function(name) {\n                return name.length;\n            });\n\n        return matches.length ? decodeURI(matches[matches.length - 1]) : null;\n    };\n\n    var getFileSizeFromHeader = function getFileSizeFromHeader(header) {\n        if (/content-length:/i.test(header)) {\n            var size = header.match(/[0-9]+/)[0];\n            return size ? parseInt(size, 10) : null;\n        }\n        return null;\n    };\n\n    var getTranfserIdFromHeader = function getTranfserIdFromHeader(header) {\n        if (/x-content-transfer-id:/i.test(header)) {\n            var id = (header.split(':')[1] || '').trim();\n            return id || null;\n        }\n        return null;\n    };\n\n    var getFileInfoFromHeaders = function getFileInfoFromHeaders(headers) {\n        var info = {\n            source: null,\n            name: null,\n            size: null,\n        };\n\n        var rows = headers.split('\\n');\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n        try {\n            for (\n                var _iterator = rows[Symbol.iterator](), _step;\n                !(_iteratorNormalCompletion = (_step = _iterator.next()).done);\n                _iteratorNormalCompletion = true\n            ) {\n                var header = _step.value;\n\n                var name = getFileNameFromHeader(header);\n                if (name) {\n                    info.name = name;\n                    continue;\n                }\n\n                var size = getFileSizeFromHeader(header);\n                if (size) {\n                    info.size = size;\n                    continue;\n                }\n\n                var source = getTranfserIdFromHeader(header);\n                if (source) {\n                    info.source = source;\n                    continue;\n                }\n            }\n        } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion && _iterator.return != null) {\n                    _iterator.return();\n                }\n            } finally {\n                if (_didIteratorError) {\n                    throw _iteratorError;\n                }\n            }\n        }\n\n        return info;\n    };\n\n    var createFileLoader = function createFileLoader(fetchFn) {\n        var state = {\n            source: null,\n            complete: false,\n            progress: 0,\n            size: null,\n            timestamp: null,\n            duration: 0,\n            request: null,\n        };\n\n        var getProgress = function getProgress() {\n            return state.progress;\n        };\n        var abort = function abort() {\n            if (state.request && state.request.abort) {\n                state.request.abort();\n            }\n        };\n\n        // load source\n        var load = function load() {\n            // get quick reference\n            var source = state.source;\n\n            api.fire('init', source);\n\n            // Load Files\n            if (source instanceof File) {\n                api.fire('load', source);\n            } else if (source instanceof Blob) {\n                // Load blobs, set default name to current date\n                api.fire('load', getFileFromBlob(source, source.name));\n            } else if (isBase64DataURI(source)) {\n                // Load base 64, set default name to current date\n                api.fire('load', getFileFromBase64DataURI(source));\n            } else {\n                // Deal as if is external URL, let's load it!\n                loadURL(source);\n            }\n        };\n\n        // loads a url\n        var loadURL = function loadURL(url) {\n            // is remote url and no fetch method supplied\n            if (!fetchFn) {\n                api.fire('error', {\n                    type: 'error',\n                    body: \"Can't load URL\",\n                    code: 400,\n                });\n\n                return;\n            }\n\n            // set request start\n            state.timestamp = Date.now();\n\n            // load file\n            state.request = fetchFn(\n                url,\n                function(response) {\n                    // update duration\n                    state.duration = Date.now() - state.timestamp;\n\n                    // done!\n                    state.complete = true;\n\n                    // turn blob response into a file\n                    if (response instanceof Blob) {\n                        response = getFileFromBlob(\n                            response,\n                            response.name || getFilenameFromURL(url)\n                        );\n                    }\n\n                    api.fire(\n                        'load',\n                        // if has received blob, we go with blob, if no response, we return null\n                        response instanceof Blob ? response : response ? response.body : null\n                    );\n                },\n                function(error) {\n                    api.fire(\n                        'error',\n                        typeof error === 'string'\n                            ? {\n                                  type: 'error',\n                                  code: 0,\n                                  body: error,\n                              }\n                            : error\n                    );\n                },\n                function(computable, current, total) {\n                    // collected some meta data already\n                    if (total) {\n                        state.size = total;\n                    }\n\n                    // update duration\n                    state.duration = Date.now() - state.timestamp;\n\n                    // if we can't compute progress, we're not going to fire progress events\n                    if (!computable) {\n                        state.progress = null;\n                        return;\n                    }\n\n                    // update progress percentage\n                    state.progress = current / total;\n\n                    // expose\n                    api.fire('progress', state.progress);\n                },\n                function() {\n                    api.fire('abort');\n                },\n                function(response) {\n                    var fileinfo = getFileInfoFromHeaders(\n                        typeof response === 'string' ? response : response.headers\n                    );\n                    api.fire('meta', {\n                        size: state.size || fileinfo.size,\n                        filename: fileinfo.name,\n                        source: fileinfo.source,\n                    });\n                }\n            );\n        };\n\n        var api = Object.assign({}, on(), {\n            setSource: function setSource(source) {\n                return (state.source = source);\n            },\n            getProgress: getProgress, // file load progress\n            abort: abort, // abort file load\n            load: load, // start load\n        });\n\n        return api;\n    };\n\n    var isGet = function isGet(method) {\n        return /GET|HEAD/.test(method);\n    };\n\n    var sendRequest = function sendRequest(data, url, options) {\n        var api = {\n            onheaders: function onheaders() {},\n            onprogress: function onprogress() {},\n            onload: function onload() {},\n            ontimeout: function ontimeout() {},\n            onerror: function onerror() {},\n            onabort: function onabort() {},\n            abort: function abort() {\n                aborted = true;\n                xhr.abort();\n            },\n        };\n\n        // timeout identifier, only used when timeout is defined\n        var aborted = false;\n        var headersReceived = false;\n\n        // set default options\n        options = Object.assign(\n            {\n                method: 'POST',\n                headers: {},\n                withCredentials: false,\n            },\n            options\n        );\n\n        // encode url\n        url = encodeURI(url);\n\n        // if method is GET, add any received data to url\n\n        if (isGet(options.method) && data) {\n            url =\n                '' +\n                url +\n                encodeURIComponent(typeof data === 'string' ? data : JSON.stringify(data));\n        }\n\n        // create request\n        var xhr = new XMLHttpRequest();\n\n        // progress of load\n        var process = isGet(options.method) ? xhr : xhr.upload;\n        process.onprogress = function(e) {\n            // no progress event when aborted ( onprogress is called once after abort() )\n            if (aborted) {\n                return;\n            }\n\n            api.onprogress(e.lengthComputable, e.loaded, e.total);\n        };\n\n        // tries to get header info to the app as fast as possible\n        xhr.onreadystatechange = function() {\n            // not interesting in these states ('unsent' and 'openend' as they don't give us any additional info)\n            if (xhr.readyState < 2) {\n                return;\n            }\n\n            // no server response\n            if (xhr.readyState === 4 && xhr.status === 0) {\n                return;\n            }\n\n            if (headersReceived) {\n                return;\n            }\n\n            headersReceived = true;\n\n            // we've probably received some useful data in response headers\n            api.onheaders(xhr);\n        };\n\n        // load successful\n        xhr.onload = function() {\n            // is classified as valid response\n            if (xhr.status >= 200 && xhr.status < 300) {\n                api.onload(xhr);\n            } else {\n                api.onerror(xhr);\n            }\n        };\n\n        // error during load\n        xhr.onerror = function() {\n            return api.onerror(xhr);\n        };\n\n        // request aborted\n        xhr.onabort = function() {\n            aborted = true;\n            api.onabort();\n        };\n\n        // request timeout\n        xhr.ontimeout = function() {\n            return api.ontimeout(xhr);\n        };\n\n        // open up open up!\n        xhr.open(options.method, url, true);\n\n        // set timeout if defined (do it after open so IE11 plays ball)\n        if (isInt(options.timeout)) {\n            xhr.timeout = options.timeout;\n        }\n\n        // add headers\n        Object.keys(options.headers).forEach(function(key) {\n            var value = unescape(encodeURIComponent(options.headers[key]));\n            xhr.setRequestHeader(key, value);\n        });\n\n        // set type of response\n        if (options.responseType) {\n            xhr.responseType = options.responseType;\n        }\n\n        // set credentials\n        if (options.withCredentials) {\n            xhr.withCredentials = true;\n        }\n\n        // let's send our data\n        xhr.send(data);\n\n        return api;\n    };\n\n    var createResponse = function createResponse(type, code, body, headers) {\n        return {\n            type: type,\n            code: code,\n            body: body,\n            headers: headers,\n        };\n    };\n\n    var createTimeoutResponse = function createTimeoutResponse(cb) {\n        return function(xhr) {\n            cb(createResponse('error', 0, 'Timeout', xhr.getAllResponseHeaders()));\n        };\n    };\n\n    var hasQS = function hasQS(str) {\n        return /\\?/.test(str);\n    };\n    var buildURL = function buildURL() {\n        var url = '';\n        for (var _len = arguments.length, parts = new Array(_len), _key = 0; _key < _len; _key++) {\n            parts[_key] = arguments[_key];\n        }\n        parts.forEach(function(part) {\n            url += hasQS(url) && hasQS(part) ? part.replace(/\\?/, '&') : part;\n        });\n        return url;\n    };\n\n    var createFetchFunction = function createFetchFunction() {\n        var apiUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        var action = arguments.length > 1 ? arguments[1] : undefined;\n        // custom handler (should also handle file, load, error, progress and abort)\n        if (typeof action === 'function') {\n            return action;\n        }\n\n        // no action supplied\n        if (!action || !isString(action.url)) {\n            return null;\n        }\n\n        // set onload hanlder\n        var onload =\n            action.onload ||\n            function(res) {\n                return res;\n            };\n        var onerror =\n            action.onerror ||\n            function(res) {\n                return null;\n            };\n\n        // internal handler\n        return function(url, load, error, progress, abort, headers) {\n            // do local or remote request based on if the url is external\n            var request = sendRequest(\n                url,\n                buildURL(apiUrl, action.url),\n                Object.assign({}, action, {\n                    responseType: 'blob',\n                })\n            );\n\n            request.onload = function(xhr) {\n                // get headers\n                var headers = xhr.getAllResponseHeaders();\n\n                // get filename\n                var filename = getFileInfoFromHeaders(headers).name || getFilenameFromURL(url);\n\n                // create response\n                load(\n                    createResponse(\n                        'load',\n                        xhr.status,\n                        action.method === 'HEAD'\n                            ? null\n                            : getFileFromBlob(onload(xhr.response), filename),\n                        headers\n                    )\n                );\n            };\n\n            request.onerror = function(xhr) {\n                error(\n                    createResponse(\n                        'error',\n                        xhr.status,\n                        onerror(xhr.response) || xhr.statusText,\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.onheaders = function(xhr) {\n                headers(createResponse('headers', xhr.status, null, xhr.getAllResponseHeaders()));\n            };\n\n            request.ontimeout = createTimeoutResponse(error);\n            request.onprogress = progress;\n            request.onabort = abort;\n\n            // should return request\n            return request;\n        };\n    };\n\n    var ChunkStatus = {\n        QUEUED: 0,\n        COMPLETE: 1,\n        PROCESSING: 2,\n        ERROR: 3,\n        WAITING: 4,\n    };\n\n    /*\n                                                       function signature:\n                                                         (file, metadata, load, error, progress, abort, transfer, options) => {\n                                                           return {\n                                                           abort:() => {}\n                                                         }\n                                                       }\n                                                       */\n\n    // apiUrl, action, name, file, metadata, load, error, progress, abort, transfer, options\n    var processFileChunked = function processFileChunked(\n        apiUrl,\n        action,\n        name,\n        file,\n        metadata,\n        load,\n        error,\n        progress,\n        abort,\n        transfer,\n        options\n    ) {\n        // all chunks\n        var chunks = [];\n        var chunkTransferId = options.chunkTransferId,\n            chunkServer = options.chunkServer,\n            chunkSize = options.chunkSize,\n            chunkRetryDelays = options.chunkRetryDelays;\n\n        // default state\n        var state = {\n            serverId: chunkTransferId,\n            aborted: false,\n        };\n\n        // set onload handlers\n        var ondata =\n            action.ondata ||\n            function(fd) {\n                return fd;\n            };\n        var onload =\n            action.onload ||\n            function(xhr, method) {\n                return method === 'HEAD' ? xhr.getResponseHeader('Upload-Offset') : xhr.response;\n            };\n        var onerror =\n            action.onerror ||\n            function(res) {\n                return null;\n            };\n\n        // create server hook\n        var requestTransferId = function requestTransferId(cb) {\n            var formData = new FormData();\n\n            // add metadata under same name\n            if (isObject(metadata)) formData.append(name, JSON.stringify(metadata));\n\n            var headers =\n                typeof action.headers === 'function'\n                    ? action.headers(file, metadata)\n                    : Object.assign(\n                          {},\n\n                          action.headers,\n                          {\n                              'Upload-Length': file.size,\n                          }\n                      );\n\n            var requestParams = Object.assign({}, action, {\n                headers: headers,\n            });\n\n            // send request object\n            var request = sendRequest(\n                ondata(formData),\n                buildURL(apiUrl, action.url),\n                requestParams\n            );\n\n            request.onload = function(xhr) {\n                return cb(onload(xhr, requestParams.method));\n            };\n\n            request.onerror = function(xhr) {\n                return error(\n                    createResponse(\n                        'error',\n                        xhr.status,\n                        onerror(xhr.response) || xhr.statusText,\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.ontimeout = createTimeoutResponse(error);\n        };\n\n        var requestTransferOffset = function requestTransferOffset(cb) {\n            var requestUrl = buildURL(apiUrl, chunkServer.url, state.serverId);\n\n            var headers =\n                typeof action.headers === 'function'\n                    ? action.headers(state.serverId)\n                    : Object.assign(\n                          {},\n\n                          action.headers\n                      );\n\n            var requestParams = {\n                headers: headers,\n                method: 'HEAD',\n            };\n\n            var request = sendRequest(null, requestUrl, requestParams);\n\n            request.onload = function(xhr) {\n                return cb(onload(xhr, requestParams.method));\n            };\n\n            request.onerror = function(xhr) {\n                return error(\n                    createResponse(\n                        'error',\n                        xhr.status,\n                        onerror(xhr.response) || xhr.statusText,\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.ontimeout = createTimeoutResponse(error);\n        };\n\n        // create chunks\n        var lastChunkIndex = Math.floor(file.size / chunkSize);\n        for (var i = 0; i <= lastChunkIndex; i++) {\n            var offset = i * chunkSize;\n            var data = file.slice(offset, offset + chunkSize, 'application/offset+octet-stream');\n            chunks[i] = {\n                index: i,\n                size: data.size,\n                offset: offset,\n                data: data,\n                file: file,\n                progress: 0,\n                retries: _toConsumableArray(chunkRetryDelays),\n                status: ChunkStatus.QUEUED,\n                error: null,\n                request: null,\n                timeout: null,\n            };\n        }\n\n        var completeProcessingChunks = function completeProcessingChunks() {\n            return load(state.serverId);\n        };\n\n        var canProcessChunk = function canProcessChunk(chunk) {\n            return chunk.status === ChunkStatus.QUEUED || chunk.status === ChunkStatus.ERROR;\n        };\n\n        var processChunk = function processChunk(chunk) {\n            // processing is paused, wait here\n            if (state.aborted) return;\n\n            // get next chunk to process\n            chunk = chunk || chunks.find(canProcessChunk);\n\n            // no more chunks to process\n            if (!chunk) {\n                // all done?\n                if (\n                    chunks.every(function(chunk) {\n                        return chunk.status === ChunkStatus.COMPLETE;\n                    })\n                ) {\n                    completeProcessingChunks();\n                }\n\n                // no chunk to handle\n                return;\n            }\n\n            // now processing this chunk\n            chunk.status = ChunkStatus.PROCESSING;\n            chunk.progress = null;\n\n            // allow parsing of formdata\n            var ondata =\n                chunkServer.ondata ||\n                function(fd) {\n                    return fd;\n                };\n            var onerror =\n                chunkServer.onerror ||\n                function(res) {\n                    return null;\n                };\n            var onload = chunkServer.onload || function() {};\n\n            // send request object\n            var requestUrl = buildURL(apiUrl, chunkServer.url, state.serverId);\n\n            var headers =\n                typeof chunkServer.headers === 'function'\n                    ? chunkServer.headers(chunk)\n                    : Object.assign(\n                          {},\n\n                          chunkServer.headers,\n                          {\n                              'Content-Type': 'application/offset+octet-stream',\n                              'Upload-Offset': chunk.offset,\n                              'Upload-Length': file.size,\n                              'Upload-Name': file.name,\n                          }\n                      );\n\n            var request = (chunk.request = sendRequest(\n                ondata(chunk.data),\n                requestUrl,\n                Object.assign({}, chunkServer, {\n                    headers: headers,\n                })\n            ));\n\n            request.onload = function(xhr) {\n                // allow hooking into request result\n                onload(xhr, chunk.index, chunks.length);\n\n                // done!\n                chunk.status = ChunkStatus.COMPLETE;\n\n                // remove request reference\n                chunk.request = null;\n\n                // start processing more chunks\n                processChunks();\n            };\n\n            request.onprogress = function(lengthComputable, loaded, total) {\n                chunk.progress = lengthComputable ? loaded : null;\n                updateTotalProgress();\n            };\n\n            request.onerror = function(xhr) {\n                chunk.status = ChunkStatus.ERROR;\n                chunk.request = null;\n                chunk.error = onerror(xhr.response) || xhr.statusText;\n                if (!retryProcessChunk(chunk)) {\n                    error(\n                        createResponse(\n                            'error',\n                            xhr.status,\n                            onerror(xhr.response) || xhr.statusText,\n                            xhr.getAllResponseHeaders()\n                        )\n                    );\n                }\n            };\n\n            request.ontimeout = function(xhr) {\n                chunk.status = ChunkStatus.ERROR;\n                chunk.request = null;\n                if (!retryProcessChunk(chunk)) {\n                    createTimeoutResponse(error)(xhr);\n                }\n            };\n\n            request.onabort = function() {\n                chunk.status = ChunkStatus.QUEUED;\n                chunk.request = null;\n                abort();\n            };\n        };\n\n        var retryProcessChunk = function retryProcessChunk(chunk) {\n            // no more retries left\n            if (chunk.retries.length === 0) return false;\n\n            // new retry\n            chunk.status = ChunkStatus.WAITING;\n            clearTimeout(chunk.timeout);\n            chunk.timeout = setTimeout(function() {\n                processChunk(chunk);\n            }, chunk.retries.shift());\n\n            // we're going to retry\n            return true;\n        };\n\n        var updateTotalProgress = function updateTotalProgress() {\n            // calculate total progress fraction\n            var totalBytesTransfered = chunks.reduce(function(p, chunk) {\n                if (p === null || chunk.progress === null) return null;\n                return p + chunk.progress;\n            }, 0);\n\n            // can't compute progress\n            if (totalBytesTransfered === null) return progress(false, 0, 0);\n\n            // calculate progress values\n            var totalSize = chunks.reduce(function(total, chunk) {\n                return total + chunk.size;\n            }, 0);\n\n            // can update progress indicator\n            progress(true, totalBytesTransfered, totalSize);\n        };\n\n        // process new chunks\n        var processChunks = function processChunks() {\n            var totalProcessing = chunks.filter(function(chunk) {\n                return chunk.status === ChunkStatus.PROCESSING;\n            }).length;\n            if (totalProcessing >= 1) return;\n            processChunk();\n        };\n\n        var abortChunks = function abortChunks() {\n            chunks.forEach(function(chunk) {\n                clearTimeout(chunk.timeout);\n                if (chunk.request) {\n                    chunk.request.abort();\n                }\n            });\n        };\n\n        // let's go!\n        if (!state.serverId) {\n            requestTransferId(function(serverId) {\n                // stop here if aborted, might have happened in between request and callback\n                if (state.aborted) return;\n\n                // pass back to item so we can use it if something goes wrong\n                transfer(serverId);\n\n                // store internally\n                state.serverId = serverId;\n                processChunks();\n            });\n        } else {\n            requestTransferOffset(function(offset) {\n                // stop here if aborted, might have happened in between request and callback\n                if (state.aborted) return;\n\n                // mark chunks with lower offset as complete\n                chunks\n                    .filter(function(chunk) {\n                        return chunk.offset < offset;\n                    })\n                    .forEach(function(chunk) {\n                        chunk.status = ChunkStatus.COMPLETE;\n                        chunk.progress = chunk.size;\n                    });\n\n                // continue processing\n                processChunks();\n            });\n        }\n\n        return {\n            abort: function abort() {\n                state.aborted = true;\n                abortChunks();\n            },\n        };\n    };\n\n    /*\n                                                               function signature:\n                                                                 (file, metadata, load, error, progress, abort) => {\n                                                                   return {\n                                                                   abort:() => {}\n                                                                 }\n                                                               }\n                                                               */\n    var createFileProcessorFunction = function createFileProcessorFunction(\n        apiUrl,\n        action,\n        name,\n        options\n    ) {\n        return function(file, metadata, load, error, progress, abort, transfer) {\n            // no file received\n            if (!file) return;\n\n            // if was passed a file, and we can chunk it, exit here\n            var canChunkUpload = options.chunkUploads;\n            var shouldChunkUpload = canChunkUpload && file.size > options.chunkSize;\n            var willChunkUpload = canChunkUpload && (shouldChunkUpload || options.chunkForce);\n            if (file instanceof Blob && willChunkUpload)\n                return processFileChunked(\n                    apiUrl,\n                    action,\n                    name,\n                    file,\n                    metadata,\n                    load,\n                    error,\n                    progress,\n                    abort,\n                    transfer,\n                    options\n                );\n\n            // set handlers\n            var ondata =\n                action.ondata ||\n                function(fd) {\n                    return fd;\n                };\n            var onload =\n                action.onload ||\n                function(res) {\n                    return res;\n                };\n            var onerror =\n                action.onerror ||\n                function(res) {\n                    return null;\n                };\n\n            var headers =\n                typeof action.headers === 'function'\n                    ? action.headers(file, metadata) || {}\n                    : Object.assign(\n                          {},\n\n                          action.headers\n                      );\n\n            var requestParams = Object.assign({}, action, {\n                headers: headers,\n            });\n\n            // create formdata object\n            var formData = new FormData();\n\n            // add metadata under same name\n            if (isObject(metadata)) {\n                formData.append(name, JSON.stringify(metadata));\n            }\n\n            // Turn into an array of objects so no matter what the input, we can handle it the same way\n            (file instanceof Blob ? [{ name: null, file: file }] : file).forEach(function(item) {\n                formData.append(\n                    name,\n                    item.file,\n                    item.name === null ? item.file.name : '' + item.name + item.file.name\n                );\n            });\n\n            // send request object\n            var request = sendRequest(\n                ondata(formData),\n                buildURL(apiUrl, action.url),\n                requestParams\n            );\n            request.onload = function(xhr) {\n                load(\n                    createResponse(\n                        'load',\n                        xhr.status,\n                        onload(xhr.response),\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.onerror = function(xhr) {\n                error(\n                    createResponse(\n                        'error',\n                        xhr.status,\n                        onerror(xhr.response) || xhr.statusText,\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.ontimeout = createTimeoutResponse(error);\n            request.onprogress = progress;\n            request.onabort = abort;\n\n            // should return request\n            return request;\n        };\n    };\n\n    var createProcessorFunction = function createProcessorFunction() {\n        var apiUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        var action = arguments.length > 1 ? arguments[1] : undefined;\n        var name = arguments.length > 2 ? arguments[2] : undefined;\n        var options = arguments.length > 3 ? arguments[3] : undefined;\n\n        // custom handler (should also handle file, load, error, progress and abort)\n        if (typeof action === 'function')\n            return function() {\n                for (\n                    var _len = arguments.length, params = new Array(_len), _key = 0;\n                    _key < _len;\n                    _key++\n                ) {\n                    params[_key] = arguments[_key];\n                }\n                return action.apply(void 0, [name].concat(params, [options]));\n            };\n\n        // no action supplied\n        if (!action || !isString(action.url)) return null;\n\n        // internal handler\n        return createFileProcessorFunction(apiUrl, action, name, options);\n    };\n\n    /*\n                                                      function signature:\n                                                      (uniqueFileId, load, error) => { }\n                                                      */\n    var createRevertFunction = function createRevertFunction() {\n        var apiUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        var action = arguments.length > 1 ? arguments[1] : undefined;\n        // is custom implementation\n        if (typeof action === 'function') {\n            return action;\n        }\n\n        // no action supplied, return stub function, interface will work, but file won't be removed\n        if (!action || !isString(action.url)) {\n            return function(uniqueFileId, load) {\n                return load();\n            };\n        }\n\n        // set onload hanlder\n        var onload =\n            action.onload ||\n            function(res) {\n                return res;\n            };\n        var onerror =\n            action.onerror ||\n            function(res) {\n                return null;\n            };\n\n        // internal implementation\n        return function(uniqueFileId, load, error) {\n            var request = sendRequest(\n                uniqueFileId,\n                apiUrl + action.url,\n                action // contains method, headers and withCredentials properties\n            );\n            request.onload = function(xhr) {\n                load(\n                    createResponse(\n                        'load',\n                        xhr.status,\n                        onload(xhr.response),\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.onerror = function(xhr) {\n                error(\n                    createResponse(\n                        'error',\n                        xhr.status,\n                        onerror(xhr.response) || xhr.statusText,\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.ontimeout = createTimeoutResponse(error);\n\n            return request;\n        };\n    };\n\n    var getRandomNumber = function getRandomNumber() {\n        var min = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n        var max = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n        return min + Math.random() * (max - min);\n    };\n\n    var createPerceivedPerformanceUpdater = function createPerceivedPerformanceUpdater(cb) {\n        var duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1000;\n        var offset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        var tickMin = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 25;\n        var tickMax = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 250;\n        var timeout = null;\n        var start = Date.now();\n\n        var tick = function tick() {\n            var runtime = Date.now() - start;\n            var delay = getRandomNumber(tickMin, tickMax);\n\n            if (runtime + delay > duration) {\n                delay = runtime + delay - duration;\n            }\n\n            var progress = runtime / duration;\n            if (progress >= 1 || document.hidden) {\n                cb(1);\n                return;\n            }\n\n            cb(progress);\n\n            timeout = setTimeout(tick, delay);\n        };\n\n        if (duration > 0) tick();\n\n        return {\n            clear: function clear() {\n                clearTimeout(timeout);\n            },\n        };\n    };\n\n    var createFileProcessor = function createFileProcessor(processFn, options) {\n        var state = {\n            complete: false,\n            perceivedProgress: 0,\n            perceivedPerformanceUpdater: null,\n            progress: null,\n            timestamp: null,\n            perceivedDuration: 0,\n            duration: 0,\n            request: null,\n            response: null,\n        };\n        var allowMinimumUploadDuration = options.allowMinimumUploadDuration;\n\n        var process = function process(file, metadata) {\n            var progressFn = function progressFn() {\n                // we've not yet started the real download, stop here\n                // the request might not go through, for instance, there might be some server trouble\n                // if state.progress is null, the server does not allow computing progress and we show the spinner instead\n                if (state.duration === 0 || state.progress === null) return;\n\n                // as we're now processing, fire the progress event\n                api.fire('progress', api.getProgress());\n            };\n\n            var completeFn = function completeFn() {\n                state.complete = true;\n                api.fire('load-perceived', state.response.body);\n            };\n\n            // let's start processing\n            api.fire('start');\n\n            // set request start\n            state.timestamp = Date.now();\n\n            // create perceived performance progress indicator\n            state.perceivedPerformanceUpdater = createPerceivedPerformanceUpdater(\n                function(progress) {\n                    state.perceivedProgress = progress;\n                    state.perceivedDuration = Date.now() - state.timestamp;\n\n                    progressFn();\n\n                    // if fake progress is done, and a response has been received,\n                    // and we've not yet called the complete method\n                    if (state.response && state.perceivedProgress === 1 && !state.complete) {\n                        // we done!\n                        completeFn();\n                    }\n                },\n                // random delay as in a list of files you start noticing\n                // files uploading at the exact same speed\n                allowMinimumUploadDuration ? getRandomNumber(750, 1500) : 0\n            );\n\n            // remember request so we can abort it later\n            state.request = processFn(\n                // the file to process\n                file,\n\n                // the metadata to send along\n                metadata,\n\n                // callbacks (load, error, progress, abort, transfer)\n                // load expects the body to be a server id if\n                // you want to make use of revert\n                function(response) {\n                    // we put the response in state so we can access\n                    // it outside of this method\n                    state.response = isObject(response)\n                        ? response\n                        : {\n                              type: 'load',\n                              code: 200,\n                              body: '' + response,\n                              headers: {},\n                          };\n\n                    // update duration\n                    state.duration = Date.now() - state.timestamp;\n\n                    // force progress to 1 as we're now done\n                    state.progress = 1;\n\n                    // actual load is done let's share results\n                    api.fire('load', state.response.body);\n\n                    // we are really done\n                    // if perceived progress is 1 ( wait for perceived progress to complete )\n                    // or if server does not support progress ( null )\n                    if (\n                        !allowMinimumUploadDuration ||\n                        (allowMinimumUploadDuration && state.perceivedProgress === 1)\n                    ) {\n                        completeFn();\n                    }\n                },\n\n                // error is expected to be an object with type, code, body\n                function(error) {\n                    // cancel updater\n                    state.perceivedPerformanceUpdater.clear();\n\n                    // update others about this error\n                    api.fire(\n                        'error',\n                        isObject(error)\n                            ? error\n                            : {\n                                  type: 'error',\n                                  code: 0,\n                                  body: '' + error,\n                              }\n                    );\n                },\n\n                // actual processing progress\n                function(computable, current, total) {\n                    // update actual duration\n                    state.duration = Date.now() - state.timestamp;\n\n                    // update actual progress\n                    state.progress = computable ? current / total : null;\n\n                    progressFn();\n                },\n\n                // abort does not expect a value\n                function() {\n                    // stop updater\n                    state.perceivedPerformanceUpdater.clear();\n\n                    // fire the abort event so we can switch visuals\n                    api.fire('abort', state.response ? state.response.body : null);\n                },\n\n                // register the id for this transfer\n                function(transferId) {\n                    api.fire('transfer', transferId);\n                }\n            );\n        };\n\n        var abort = function abort() {\n            // no request running, can't abort\n            if (!state.request) return;\n\n            // stop updater\n            state.perceivedPerformanceUpdater.clear();\n\n            // abort actual request\n            if (state.request.abort) state.request.abort();\n\n            // if has response object, we've completed the request\n            state.complete = true;\n        };\n\n        var reset = function reset() {\n            abort();\n            state.complete = false;\n            state.perceivedProgress = 0;\n            state.progress = 0;\n            state.timestamp = null;\n            state.perceivedDuration = 0;\n            state.duration = 0;\n            state.request = null;\n            state.response = null;\n        };\n\n        var getProgress = allowMinimumUploadDuration\n            ? function() {\n                  return state.progress ? Math.min(state.progress, state.perceivedProgress) : null;\n              }\n            : function() {\n                  return state.progress || null;\n              };\n\n        var getDuration = allowMinimumUploadDuration\n            ? function() {\n                  return Math.min(state.duration, state.perceivedDuration);\n              }\n            : function() {\n                  return state.duration;\n              };\n\n        var api = Object.assign({}, on(), {\n            process: process, // start processing file\n            abort: abort, // abort active process request\n            getProgress: getProgress,\n            getDuration: getDuration,\n            reset: reset,\n        });\n\n        return api;\n    };\n\n    var getFilenameWithoutExtension = function getFilenameWithoutExtension(name) {\n        return name.substring(0, name.lastIndexOf('.')) || name;\n    };\n\n    var createFileStub = function createFileStub(source) {\n        var data = [source.name, source.size, source.type];\n\n        // is blob or base64, then we need to set the name\n        if (source instanceof Blob || isBase64DataURI(source)) {\n            data[0] = source.name || getDateString();\n        } else if (isBase64DataURI(source)) {\n            // if is base64 data uri we need to determine the average size and type\n            data[1] = source.length;\n            data[2] = getMimeTypeFromBase64DataURI(source);\n        } else if (isString(source)) {\n            // url\n            data[0] = getFilenameFromURL(source);\n            data[1] = 0;\n            data[2] = 'application/octet-stream';\n        }\n\n        return {\n            name: data[0],\n            size: data[1],\n            type: data[2],\n        };\n    };\n\n    var isFile = function isFile(value) {\n        return !!(value instanceof File || (value instanceof Blob && value.name));\n    };\n\n    var deepCloneObject = function deepCloneObject(src) {\n        if (!isObject(src)) return src;\n        var target = isArray(src) ? [] : {};\n        for (var key in src) {\n            if (!src.hasOwnProperty(key)) continue;\n            var v = src[key];\n            target[key] = v && isObject(v) ? deepCloneObject(v) : v;\n        }\n        return target;\n    };\n\n    var createItem = function createItem() {\n        var origin = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n        var serverFileReference =\n            arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        var file = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n        // unique id for this item, is used to identify the item across views\n        var id = getUniqueId();\n\n        /**\n         * Internal item state\n         */\n        var state = {\n            // is archived\n            archived: false,\n\n            // if is frozen, no longer fires events\n            frozen: false,\n\n            // removed from view\n            released: false,\n\n            // original source\n            source: null,\n\n            // file model reference\n            file: file,\n\n            // id of file on server\n            serverFileReference: serverFileReference,\n\n            // id of file transfer on server\n            transferId: null,\n\n            // is aborted\n            processingAborted: false,\n\n            // current item status\n            status: serverFileReference ? ItemStatus.PROCESSING_COMPLETE : ItemStatus.INIT,\n\n            // active processes\n            activeLoader: null,\n            activeProcessor: null,\n        };\n\n        // callback used when abort processing is called to link back to the resolve method\n        var abortProcessingRequestComplete = null;\n\n        /**\n         * Externally added item metadata\n         */\n        var metadata = {};\n\n        // item data\n        var setStatus = function setStatus(status) {\n            return (state.status = status);\n        };\n\n        // fire event unless the item has been archived\n        var fire = function fire(event) {\n            if (state.released || state.frozen) return;\n            for (\n                var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1;\n                _key < _len;\n                _key++\n            ) {\n                params[_key - 1] = arguments[_key];\n            }\n            api.fire.apply(api, [event].concat(params));\n        };\n\n        // file data\n        var getFileExtension = function getFileExtension() {\n            return getExtensionFromFilename(state.file.name);\n        };\n        var getFileType = function getFileType() {\n            return state.file.type;\n        };\n        var getFileSize = function getFileSize() {\n            return state.file.size;\n        };\n        var getFile = function getFile() {\n            return state.file;\n        };\n\n        //\n        // logic to load a file\n        //\n        var load = function load(source, loader, onload) {\n            // remember the original item source\n            state.source = source;\n\n            // source is known\n            api.fireSync('init');\n\n            // file stub is already there\n            if (state.file) {\n                api.fireSync('load-skip');\n                return;\n            }\n\n            // set a stub file object while loading the actual data\n            state.file = createFileStub(source);\n\n            // starts loading\n            loader.on('init', function() {\n                fire('load-init');\n            });\n\n            // we'eve received a size indication, let's update the stub\n            loader.on('meta', function(meta) {\n                // set size of file stub\n                state.file.size = meta.size;\n\n                // set name of file stub\n                state.file.filename = meta.filename;\n\n                // if has received source, we done\n                if (meta.source) {\n                    origin = FileOrigin.LIMBO;\n                    state.serverFileReference = meta.source;\n                    state.status = ItemStatus.PROCESSING_COMPLETE;\n                }\n\n                // size has been updated\n                fire('load-meta');\n            });\n\n            // the file is now loading we need to update the progress indicators\n            loader.on('progress', function(progress) {\n                setStatus(ItemStatus.LOADING);\n\n                fire('load-progress', progress);\n            });\n\n            // an error was thrown while loading the file, we need to switch to error state\n            loader.on('error', function(error) {\n                setStatus(ItemStatus.LOAD_ERROR);\n\n                fire('load-request-error', error);\n            });\n\n            // user or another process aborted the file load (cannot retry)\n            loader.on('abort', function() {\n                setStatus(ItemStatus.INIT);\n                fire('load-abort');\n            });\n\n            // done loading\n            loader.on('load', function(file) {\n                // as we've now loaded the file the loader is no longer required\n                state.activeLoader = null;\n\n                // called when file has loaded succesfully\n                var success = function success(result) {\n                    // set (possibly) transformed file\n                    state.file = isFile(result) ? result : state.file;\n\n                    // file received\n                    if (origin === FileOrigin.LIMBO && state.serverFileReference) {\n                        setStatus(ItemStatus.PROCESSING_COMPLETE);\n                    } else {\n                        setStatus(ItemStatus.IDLE);\n                    }\n\n                    fire('load');\n                };\n\n                var error = function error(result) {\n                    // set original file\n                    state.file = file;\n                    fire('load-meta');\n\n                    setStatus(ItemStatus.LOAD_ERROR);\n                    fire('load-file-error', result);\n                };\n\n                // if we already have a server file reference, we don't need to call the onload method\n                if (state.serverFileReference) {\n                    success(file);\n                    return;\n                }\n\n                // no server id, let's give this file the full treatment\n                onload(file, success, error);\n            });\n\n            // set loader source data\n            loader.setSource(source);\n\n            // set as active loader\n            state.activeLoader = loader;\n\n            // load the source data\n            loader.load();\n        };\n\n        var retryLoad = function retryLoad() {\n            if (!state.activeLoader) {\n                return;\n            }\n            state.activeLoader.load();\n        };\n\n        var abortLoad = function abortLoad() {\n            if (state.activeLoader) {\n                state.activeLoader.abort();\n                return;\n            }\n            setStatus(ItemStatus.INIT);\n            fire('load-abort');\n        };\n\n        //\n        // logic to process a file\n        //\n        var process = function process(processor, onprocess) {\n            // processing was aborted\n            if (state.processingAborted) {\n                state.processingAborted = false;\n                return;\n            }\n\n            // now processing\n            setStatus(ItemStatus.PROCESSING);\n\n            // reset abort callback\n            abortProcessingRequestComplete = null;\n\n            // if no file loaded we'll wait for the load event\n            if (!(state.file instanceof Blob)) {\n                api.on('load', function() {\n                    process(processor, onprocess);\n                });\n                return;\n            }\n\n            // setup processor\n            processor.on('load', function(serverFileReference) {\n                // need this id to be able to revert the upload\n                state.transferId = null;\n                state.serverFileReference = serverFileReference;\n            });\n\n            // register transfer id\n            processor.on('transfer', function(transferId) {\n                // need this id to be able to revert the upload\n                state.transferId = transferId;\n            });\n\n            processor.on('load-perceived', function(serverFileReference) {\n                // no longer required\n                state.activeProcessor = null;\n\n                // need this id to be able to rever the upload\n                state.transferId = null;\n                state.serverFileReference = serverFileReference;\n\n                setStatus(ItemStatus.PROCESSING_COMPLETE);\n                fire('process-complete', serverFileReference);\n            });\n\n            processor.on('start', function() {\n                fire('process-start');\n            });\n\n            processor.on('error', function(error) {\n                state.activeProcessor = null;\n                setStatus(ItemStatus.PROCESSING_ERROR);\n                fire('process-error', error);\n            });\n\n            processor.on('abort', function(serverFileReference) {\n                state.activeProcessor = null;\n\n                // if file was uploaded but processing was cancelled during perceived processor time store file reference\n                state.serverFileReference = serverFileReference;\n\n                setStatus(ItemStatus.IDLE);\n                fire('process-abort');\n\n                // has timeout so doesn't interfere with remove action\n                if (abortProcessingRequestComplete) {\n                    abortProcessingRequestComplete();\n                }\n            });\n\n            processor.on('progress', function(progress) {\n                fire('process-progress', progress);\n            });\n\n            // when successfully transformed\n            var success = function success(file) {\n                // if was archived in the mean time, don't process\n                if (state.archived) return;\n\n                // process file!\n                processor.process(file, Object.assign({}, metadata));\n            };\n\n            // something went wrong during transform phase\n            var error = console.error;\n\n            // start processing the file\n            onprocess(state.file, success, error);\n\n            // set as active processor\n            state.activeProcessor = processor;\n        };\n\n        var requestProcessing = function requestProcessing() {\n            state.processingAborted = false;\n            setStatus(ItemStatus.PROCESSING_QUEUED);\n        };\n\n        var abortProcessing = function abortProcessing() {\n            return new Promise(function(resolve) {\n                if (!state.activeProcessor) {\n                    state.processingAborted = true;\n\n                    setStatus(ItemStatus.IDLE);\n                    fire('process-abort');\n\n                    resolve();\n                    return;\n                }\n\n                abortProcessingRequestComplete = function abortProcessingRequestComplete() {\n                    resolve();\n                };\n\n                state.activeProcessor.abort();\n            });\n        };\n\n        //\n        // logic to revert a processed file\n        //\n        var revert = function revert(revertFileUpload, forceRevert) {\n            return new Promise(function(resolve, reject) {\n                // a completed upload will have a serverFileReference, a failed chunked upload where\n                // getting a serverId succeeded but >=0 chunks have been uploaded will have transferId set\n                var serverTransferId =\n                    state.serverFileReference !== null\n                        ? state.serverFileReference\n                        : state.transferId;\n\n                // cannot revert without a server id for this process\n                if (serverTransferId === null) {\n                    resolve();\n                    return;\n                }\n\n                // revert the upload (fire and forget)\n                revertFileUpload(\n                    serverTransferId,\n                    function() {\n                        // reset file server id and transfer id as now it's not available on the server\n                        state.serverFileReference = null;\n                        state.transferId = null;\n                        resolve();\n                    },\n                    function(error) {\n                        // don't set error state when reverting is optional, it will always resolve\n                        if (!forceRevert) {\n                            resolve();\n                            return;\n                        }\n\n                        // oh no errors\n                        setStatus(ItemStatus.PROCESSING_REVERT_ERROR);\n                        fire('process-revert-error');\n                        reject(error);\n                    }\n                );\n\n                // fire event\n                setStatus(ItemStatus.IDLE);\n                fire('process-revert');\n            });\n        };\n\n        // exposed methods\n        var _setMetadata = function setMetadata(key, value, silent) {\n            var keys = key.split('.');\n            var root = keys[0];\n            var last = keys.pop();\n            var data = metadata;\n            keys.forEach(function(key) {\n                return (data = data[key]);\n            });\n\n            // compare old value against new value, if they're the same, we're not updating\n            if (JSON.stringify(data[last]) === JSON.stringify(value)) return;\n\n            // update value\n            data[last] = value;\n\n            // fire update\n            fire('metadata-update', {\n                key: root,\n                value: metadata[root],\n                silent: silent,\n            });\n        };\n\n        var getMetadata = function getMetadata(key) {\n            return deepCloneObject(key ? metadata[key] : metadata);\n        };\n\n        var api = Object.assign(\n            {\n                id: {\n                    get: function get() {\n                        return id;\n                    },\n                },\n                origin: {\n                    get: function get() {\n                        return origin;\n                    },\n                    set: function set(value) {\n                        return (origin = value);\n                    },\n                },\n                serverId: {\n                    get: function get() {\n                        return state.serverFileReference;\n                    },\n                },\n                transferId: {\n                    get: function get() {\n                        return state.transferId;\n                    },\n                },\n                status: {\n                    get: function get() {\n                        return state.status;\n                    },\n                },\n                filename: {\n                    get: function get() {\n                        return state.file.name;\n                    },\n                },\n                filenameWithoutExtension: {\n                    get: function get() {\n                        return getFilenameWithoutExtension(state.file.name);\n                    },\n                },\n                fileExtension: { get: getFileExtension },\n                fileType: { get: getFileType },\n                fileSize: { get: getFileSize },\n                file: { get: getFile },\n                relativePath: {\n                    get: function get() {\n                        return state.file._relativePath;\n                    },\n                },\n\n                source: {\n                    get: function get() {\n                        return state.source;\n                    },\n                },\n\n                getMetadata: getMetadata,\n                setMetadata: function setMetadata(key, value, silent) {\n                    if (isObject(key)) {\n                        var data = key;\n                        Object.keys(data).forEach(function(key) {\n                            _setMetadata(key, data[key], value);\n                        });\n                        return key;\n                    }\n                    _setMetadata(key, value, silent);\n                    return value;\n                },\n\n                extend: function extend(name, handler) {\n                    return (itemAPI[name] = handler);\n                },\n\n                abortLoad: abortLoad,\n                retryLoad: retryLoad,\n                requestProcessing: requestProcessing,\n                abortProcessing: abortProcessing,\n\n                load: load,\n                process: process,\n                revert: revert,\n            },\n\n            on(),\n            {\n                freeze: function freeze() {\n                    return (state.frozen = true);\n                },\n\n                release: function release() {\n                    return (state.released = true);\n                },\n                released: {\n                    get: function get() {\n                        return state.released;\n                    },\n                },\n\n                archive: function archive() {\n                    return (state.archived = true);\n                },\n                archived: {\n                    get: function get() {\n                        return state.archived;\n                    },\n                },\n\n                // replace source and file object\n                setFile: function setFile(file) {\n                    return (state.file = file);\n                },\n            }\n        );\n\n        // create it here instead of returning it instantly so we can extend it later\n        var itemAPI = createObject(api);\n\n        return itemAPI;\n    };\n\n    var getItemIndexByQuery = function getItemIndexByQuery(items, query) {\n        // just return first index\n        if (isEmpty(query)) {\n            return 0;\n        }\n\n        // invalid queries\n        if (!isString(query)) {\n            return -1;\n        }\n\n        // return item by id (or -1 if not found)\n        return items.findIndex(function(item) {\n            return item.id === query;\n        });\n    };\n\n    var getItemById = function getItemById(items, itemId) {\n        var index = getItemIndexByQuery(items, itemId);\n        if (index < 0) {\n            return;\n        }\n        return items[index] || null;\n    };\n\n    var fetchBlob = function fetchBlob(url, load, error, progress, abort, headers) {\n        var request = sendRequest(null, url, {\n            method: 'GET',\n            responseType: 'blob',\n        });\n\n        request.onload = function(xhr) {\n            // get headers\n            var headers = xhr.getAllResponseHeaders();\n\n            // get filename\n            var filename = getFileInfoFromHeaders(headers).name || getFilenameFromURL(url);\n\n            // create response\n            load(\n                createResponse('load', xhr.status, getFileFromBlob(xhr.response, filename), headers)\n            );\n        };\n\n        request.onerror = function(xhr) {\n            error(createResponse('error', xhr.status, xhr.statusText, xhr.getAllResponseHeaders()));\n        };\n\n        request.onheaders = function(xhr) {\n            headers(createResponse('headers', xhr.status, null, xhr.getAllResponseHeaders()));\n        };\n\n        request.ontimeout = createTimeoutResponse(error);\n        request.onprogress = progress;\n        request.onabort = abort;\n\n        // should return request\n        return request;\n    };\n\n    var getDomainFromURL = function getDomainFromURL(url) {\n        if (url.indexOf('//') === 0) {\n            url = location.protocol + url;\n        }\n        return url\n            .toLowerCase()\n            .replace('blob:', '')\n            .replace(/([a-z])?:\\/\\//, '$1')\n            .split('/')[0];\n    };\n\n    var isExternalURL = function isExternalURL(url) {\n        return (\n            (url.indexOf(':') > -1 || url.indexOf('//') > -1) &&\n            getDomainFromURL(location.href) !== getDomainFromURL(url)\n        );\n    };\n\n    var dynamicLabel = function dynamicLabel(label) {\n        return function() {\n            return isFunction(label) ? label.apply(void 0, arguments) : label;\n        };\n    };\n\n    var isMockItem = function isMockItem(item) {\n        return !isFile(item.file);\n    };\n\n    var listUpdated = function listUpdated(dispatch, state) {\n        clearTimeout(state.listUpdateTimeout);\n        state.listUpdateTimeout = setTimeout(function() {\n            dispatch('DID_UPDATE_ITEMS', { items: getActiveItems(state.items) });\n        }, 0);\n    };\n\n    var optionalPromise = function optionalPromise(fn) {\n        for (\n            var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1;\n            _key < _len;\n            _key++\n        ) {\n            params[_key - 1] = arguments[_key];\n        }\n        return new Promise(function(resolve) {\n            if (!fn) {\n                return resolve(true);\n            }\n\n            var result = fn.apply(void 0, params);\n\n            if (result == null) {\n                return resolve(true);\n            }\n\n            if (typeof result === 'boolean') {\n                return resolve(result);\n            }\n\n            if (typeof result.then === 'function') {\n                result.then(resolve);\n            }\n        });\n    };\n\n    var sortItems = function sortItems(state, compare) {\n        state.items.sort(function(a, b) {\n            return compare(createItemAPI(a), createItemAPI(b));\n        });\n    };\n\n    // returns item based on state\n    var getItemByQueryFromState = function getItemByQueryFromState(state, itemHandler) {\n        return function() {\n            var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n            var query = _ref.query,\n                _ref$success = _ref.success,\n                success = _ref$success === void 0 ? function() {} : _ref$success,\n                _ref$failure = _ref.failure,\n                failure = _ref$failure === void 0 ? function() {} : _ref$failure,\n                options = _objectWithoutProperties(_ref, ['query', 'success', 'failure']);\n            var item = getItemByQuery(state.items, query);\n            if (!item) {\n                failure({\n                    error: createResponse('error', 0, 'Item not found'),\n                    file: null,\n                });\n\n                return;\n            }\n            itemHandler(item, success, failure, options || {});\n        };\n    };\n\n    var actions = function actions(dispatch, query, state) {\n        return {\n            /**\n             * Aborts all ongoing processes\n             */\n            ABORT_ALL: function ABORT_ALL() {\n                getActiveItems(state.items).forEach(function(item) {\n                    item.freeze();\n                    item.abortLoad();\n                    item.abortProcessing();\n                });\n            },\n\n            /**\n             * Sets initial files\n             */\n            DID_SET_FILES: function DID_SET_FILES(_ref2) {\n                var _ref2$value = _ref2.value,\n                    value = _ref2$value === void 0 ? [] : _ref2$value;\n                // map values to file objects\n                var files = value.map(function(file) {\n                    return {\n                        source: file.source ? file.source : file,\n                        options: file.options,\n                    };\n                });\n\n                // loop over files, if file is in list, leave it be, if not, remove\n                // test if items should be moved\n                var activeItems = getActiveItems(state.items);\n\n                activeItems.forEach(function(item) {\n                    // if item not is in new value, remove\n                    if (\n                        !files.find(function(file) {\n                            return file.source === item.source || file.source === item.file;\n                        })\n                    ) {\n                        dispatch('REMOVE_ITEM', { query: item, remove: false });\n                    }\n                });\n\n                // add new files\n                activeItems = getActiveItems(state.items);\n                files.forEach(function(file, index) {\n                    // if file is already in list\n                    if (\n                        activeItems.find(function(item) {\n                            return item.source === file.source || item.file === file.source;\n                        })\n                    )\n                        return;\n\n                    // not in list, add\n                    dispatch(\n                        'ADD_ITEM',\n                        Object.assign({}, file, {\n                            interactionMethod: InteractionMethod.NONE,\n                            index: index,\n                        })\n                    );\n                });\n            },\n\n            DID_UPDATE_ITEM_METADATA: function DID_UPDATE_ITEM_METADATA(_ref3) {\n                var id = _ref3.id,\n                    action = _ref3.action,\n                    change = _ref3.change;\n                // don't do anything\n                if (change.silent) return;\n\n                // if is called multiple times in close succession we combined all calls together to save resources\n                clearTimeout(state.itemUpdateTimeout);\n                state.itemUpdateTimeout = setTimeout(function() {\n                    var item = getItemById(state.items, id);\n\n                    // only revert and attempt to upload when we're uploading to a server\n                    if (!query('IS_ASYNC')) {\n                        // should we update the output data\n                        applyFilterChain('SHOULD_PREPARE_OUTPUT', false, {\n                            item: item,\n                            query: query,\n                            action: action,\n                            change: change,\n                        }).then(function(shouldPrepareOutput) {\n                            // plugins determined the output data should be prepared (or not), can be adjusted with beforePrepareOutput hook\n                            var beforePrepareFile = query('GET_BEFORE_PREPARE_FILE');\n                            if (beforePrepareFile)\n                                shouldPrepareOutput = beforePrepareFile(item, shouldPrepareOutput);\n\n                            if (!shouldPrepareOutput) return;\n\n                            dispatch(\n                                'REQUEST_PREPARE_OUTPUT',\n                                {\n                                    query: id,\n                                    item: item,\n                                    success: function success(file) {\n                                        dispatch('DID_PREPARE_OUTPUT', { id: id, file: file });\n                                    },\n                                },\n\n                                true\n                            );\n                        });\n\n                        return;\n                    }\n\n                    // if is local item we need to enable upload button so change can be propagated to server\n                    if (item.origin === FileOrigin.LOCAL) {\n                        dispatch('DID_LOAD_ITEM', {\n                            id: item.id,\n                            error: null,\n                            serverFileReference: item.source,\n                        });\n                    }\n\n                    // for async scenarios\n                    var upload = function upload() {\n                        // we push this forward a bit so the interface is updated correctly\n                        setTimeout(function() {\n                            dispatch('REQUEST_ITEM_PROCESSING', { query: id });\n                        }, 32);\n                    };\n\n                    var revert = function revert(doUpload) {\n                        item.revert(\n                            createRevertFunction(\n                                state.options.server.url,\n                                state.options.server.revert\n                            ),\n                            query('GET_FORCE_REVERT')\n                        )\n                            .then(doUpload ? upload : function() {})\n                            .catch(function() {});\n                    };\n\n                    var abort = function abort(doUpload) {\n                        item.abortProcessing().then(doUpload ? upload : function() {});\n                    };\n\n                    // if we should re-upload the file immediately\n                    if (item.status === ItemStatus.PROCESSING_COMPLETE) {\n                        return revert(state.options.instantUpload);\n                    }\n\n                    // if currently uploading, cancel upload\n                    if (item.status === ItemStatus.PROCESSING) {\n                        return abort(state.options.instantUpload);\n                    }\n\n                    if (state.options.instantUpload) {\n                        upload();\n                    }\n                }, 0);\n            },\n\n            MOVE_ITEM: function MOVE_ITEM(_ref4) {\n                var query = _ref4.query,\n                    index = _ref4.index;\n                var item = getItemByQuery(state.items, query);\n                if (!item) return;\n                var currentIndex = state.items.indexOf(item);\n                index = limit(index, 0, state.items.length - 1);\n                if (currentIndex === index) return;\n                state.items.splice(index, 0, state.items.splice(currentIndex, 1)[0]);\n            },\n\n            SORT: function SORT(_ref5) {\n                var compare = _ref5.compare;\n                sortItems(state, compare);\n                dispatch('DID_SORT_ITEMS', {\n                    items: query('GET_ACTIVE_ITEMS'),\n                });\n            },\n\n            ADD_ITEMS: function ADD_ITEMS(_ref6) {\n                var items = _ref6.items,\n                    index = _ref6.index,\n                    interactionMethod = _ref6.interactionMethod,\n                    _ref6$success = _ref6.success,\n                    success = _ref6$success === void 0 ? function() {} : _ref6$success,\n                    _ref6$failure = _ref6.failure,\n                    failure = _ref6$failure === void 0 ? function() {} : _ref6$failure;\n                var currentIndex = index;\n\n                if (index === -1 || typeof index === 'undefined') {\n                    var insertLocation = query('GET_ITEM_INSERT_LOCATION');\n                    var totalItems = query('GET_TOTAL_ITEMS');\n                    currentIndex = insertLocation === 'before' ? 0 : totalItems;\n                }\n\n                var ignoredFiles = query('GET_IGNORED_FILES');\n                var isValidFile = function isValidFile(source) {\n                    return isFile(source)\n                        ? !ignoredFiles.includes(source.name.toLowerCase())\n                        : !isEmpty(source);\n                };\n                var validItems = items.filter(isValidFile);\n\n                var promises = validItems.map(function(source) {\n                    return new Promise(function(resolve, reject) {\n                        dispatch('ADD_ITEM', {\n                            interactionMethod: interactionMethod,\n                            source: source.source || source,\n                            success: resolve,\n                            failure: reject,\n                            index: currentIndex++,\n                            options: source.options || {},\n                        });\n                    });\n                });\n\n                Promise.all(promises)\n                    .then(success)\n                    .catch(failure);\n            },\n\n            /**\n             * @param source\n             * @param index\n             * @param interactionMethod\n             */\n            ADD_ITEM: function ADD_ITEM(_ref7) {\n                var source = _ref7.source,\n                    _ref7$index = _ref7.index,\n                    index = _ref7$index === void 0 ? -1 : _ref7$index,\n                    interactionMethod = _ref7.interactionMethod,\n                    _ref7$success = _ref7.success,\n                    success = _ref7$success === void 0 ? function() {} : _ref7$success,\n                    _ref7$failure = _ref7.failure,\n                    failure = _ref7$failure === void 0 ? function() {} : _ref7$failure,\n                    _ref7$options = _ref7.options,\n                    options = _ref7$options === void 0 ? {} : _ref7$options;\n                // if no source supplied\n                if (isEmpty(source)) {\n                    failure({\n                        error: createResponse('error', 0, 'No source'),\n                        file: null,\n                    });\n\n                    return;\n                }\n\n                // filter out invalid file items, used to filter dropped directory contents\n                if (\n                    isFile(source) &&\n                    state.options.ignoredFiles.includes(source.name.toLowerCase())\n                ) {\n                    // fail silently\n                    return;\n                }\n\n                // test if there's still room in the list of files\n                if (!hasRoomForItem(state)) {\n                    // if multiple allowed, we can't replace\n                    // or if only a single item is allowed but we're not allowed to replace it we exit\n                    if (\n                        state.options.allowMultiple ||\n                        (!state.options.allowMultiple && !state.options.allowReplace)\n                    ) {\n                        var error = createResponse('warning', 0, 'Max files');\n\n                        dispatch('DID_THROW_MAX_FILES', {\n                            source: source,\n                            error: error,\n                        });\n\n                        failure({ error: error, file: null });\n\n                        return;\n                    }\n\n                    // let's replace the item\n                    // id of first item we're about to remove\n                    var _item = getActiveItems(state.items)[0];\n\n                    // if has been processed remove it from the server as well\n                    if (\n                        _item.status === ItemStatus.PROCESSING_COMPLETE ||\n                        _item.status === ItemStatus.PROCESSING_REVERT_ERROR\n                    ) {\n                        var forceRevert = query('GET_FORCE_REVERT');\n                        _item\n                            .revert(\n                                createRevertFunction(\n                                    state.options.server.url,\n                                    state.options.server.revert\n                                ),\n                                forceRevert\n                            )\n                            .then(function() {\n                                if (!forceRevert) return;\n\n                                // try to add now\n                                dispatch('ADD_ITEM', {\n                                    source: source,\n                                    index: index,\n                                    interactionMethod: interactionMethod,\n                                    success: success,\n                                    failure: failure,\n                                    options: options,\n                                });\n                            })\n                            .catch(function() {}); // no need to handle this catch state for now\n\n                        if (forceRevert) return;\n                    }\n\n                    // remove first item as it will be replaced by this item\n                    dispatch('REMOVE_ITEM', { query: _item.id });\n                }\n\n                // where did the file originate\n                var origin =\n                    options.type === 'local'\n                        ? FileOrigin.LOCAL\n                        : options.type === 'limbo'\n                        ? FileOrigin.LIMBO\n                        : FileOrigin.INPUT;\n\n                // create a new blank item\n                var item = createItem(\n                    // where did this file come from\n                    origin,\n\n                    // an input file never has a server file reference\n                    origin === FileOrigin.INPUT ? null : source,\n\n                    // file mock data, if defined\n                    options.file\n                );\n\n                // set initial meta data\n                Object.keys(options.metadata || {}).forEach(function(key) {\n                    item.setMetadata(key, options.metadata[key]);\n                });\n\n                // created the item, let plugins add methods\n                applyFilters('DID_CREATE_ITEM', item, { query: query, dispatch: dispatch });\n\n                // where to insert new items\n                var itemInsertLocation = query('GET_ITEM_INSERT_LOCATION');\n\n                // adjust index if is not allowed to pick location\n                if (!state.options.itemInsertLocationFreedom) {\n                    index = itemInsertLocation === 'before' ? -1 : state.items.length;\n                }\n\n                // add item to list\n                insertItem(state.items, item, index);\n\n                // sort items in list\n                if (isFunction(itemInsertLocation) && source) {\n                    sortItems(state, itemInsertLocation);\n                }\n\n                // get a quick reference to the item id\n                var id = item.id;\n\n                // observe item events\n                item.on('init', function() {\n                    dispatch('DID_INIT_ITEM', { id: id });\n                });\n\n                item.on('load-init', function() {\n                    dispatch('DID_START_ITEM_LOAD', { id: id });\n                });\n\n                item.on('load-meta', function() {\n                    dispatch('DID_UPDATE_ITEM_META', { id: id });\n                });\n\n                item.on('load-progress', function(progress) {\n                    dispatch('DID_UPDATE_ITEM_LOAD_PROGRESS', { id: id, progress: progress });\n                });\n\n                item.on('load-request-error', function(error) {\n                    var mainStatus = dynamicLabel(state.options.labelFileLoadError)(error);\n\n                    // is client error, no way to recover\n                    if (error.code >= 400 && error.code < 500) {\n                        dispatch('DID_THROW_ITEM_INVALID', {\n                            id: id,\n                            error: error,\n                            status: {\n                                main: mainStatus,\n                                sub: error.code + ' (' + error.body + ')',\n                            },\n                        });\n\n                        // reject the file so can be dealt with through API\n                        failure({ error: error, file: createItemAPI(item) });\n                        return;\n                    }\n\n                    // is possible server error, so might be possible to retry\n                    dispatch('DID_THROW_ITEM_LOAD_ERROR', {\n                        id: id,\n                        error: error,\n                        status: {\n                            main: mainStatus,\n                            sub: state.options.labelTapToRetry,\n                        },\n                    });\n                });\n\n                item.on('load-file-error', function(error) {\n                    dispatch('DID_THROW_ITEM_INVALID', {\n                        id: id,\n                        error: error.status,\n                        status: error.status,\n                    });\n\n                    failure({ error: error.status, file: createItemAPI(item) });\n                });\n\n                item.on('load-abort', function() {\n                    dispatch('REMOVE_ITEM', { query: id });\n                });\n\n                item.on('load-skip', function() {\n                    item.on('metadata-update', function(change) {\n                        if (!isFile(item.file)) return;\n                        dispatch('DID_UPDATE_ITEM_METADATA', { id: id, change: change });\n                    });\n\n                    dispatch('COMPLETE_LOAD_ITEM', {\n                        query: id,\n                        item: item,\n                        data: {\n                            source: source,\n                            success: success,\n                        },\n                    });\n                });\n\n                item.on('load', function() {\n                    var handleAdd = function handleAdd(shouldAdd) {\n                        // no should not add this file\n                        if (!shouldAdd) {\n                            dispatch('REMOVE_ITEM', {\n                                query: id,\n                            });\n\n                            return;\n                        }\n\n                        // now interested in metadata updates\n                        item.on('metadata-update', function(change) {\n                            dispatch('DID_UPDATE_ITEM_METADATA', { id: id, change: change });\n                        });\n\n                        // let plugins decide if the output data should be prepared at this point\n                        // means we'll do this and wait for idle state\n                        applyFilterChain('SHOULD_PREPARE_OUTPUT', false, {\n                            item: item,\n                            query: query,\n                        }).then(function(shouldPrepareOutput) {\n                            // plugins determined the output data should be prepared (or not), can be adjusted with beforePrepareOutput hook\n                            var beforePrepareFile = query('GET_BEFORE_PREPARE_FILE');\n                            if (beforePrepareFile)\n                                shouldPrepareOutput = beforePrepareFile(item, shouldPrepareOutput);\n\n                            var loadComplete = function loadComplete() {\n                                dispatch('COMPLETE_LOAD_ITEM', {\n                                    query: id,\n                                    item: item,\n                                    data: {\n                                        source: source,\n                                        success: success,\n                                    },\n                                });\n\n                                listUpdated(dispatch, state);\n                            };\n\n                            // exit\n                            if (shouldPrepareOutput) {\n                                // wait for idle state and then run PREPARE_OUTPUT\n                                dispatch(\n                                    'REQUEST_PREPARE_OUTPUT',\n                                    {\n                                        query: id,\n                                        item: item,\n                                        success: function success(file) {\n                                            dispatch('DID_PREPARE_OUTPUT', { id: id, file: file });\n                                            loadComplete();\n                                        },\n                                    },\n\n                                    true\n                                );\n\n                                return;\n                            }\n\n                            loadComplete();\n                        });\n                    };\n\n                    // item loaded, allow plugins to\n                    // - read data (quickly)\n                    // - add metadata\n                    applyFilterChain('DID_LOAD_ITEM', item, { query: query, dispatch: dispatch })\n                        .then(function() {\n                            optionalPromise(query('GET_BEFORE_ADD_FILE'), createItemAPI(item)).then(\n                                handleAdd\n                            );\n                        })\n                        .catch(function(e) {\n                            if (!e || !e.error || !e.status) return handleAdd(false);\n                            dispatch('DID_THROW_ITEM_INVALID', {\n                                id: id,\n                                error: e.error,\n                                status: e.status,\n                            });\n                        });\n                });\n\n                item.on('process-start', function() {\n                    dispatch('DID_START_ITEM_PROCESSING', { id: id });\n                });\n\n                item.on('process-progress', function(progress) {\n                    dispatch('DID_UPDATE_ITEM_PROCESS_PROGRESS', { id: id, progress: progress });\n                });\n\n                item.on('process-error', function(error) {\n                    dispatch('DID_THROW_ITEM_PROCESSING_ERROR', {\n                        id: id,\n                        error: error,\n                        status: {\n                            main: dynamicLabel(state.options.labelFileProcessingError)(error),\n                            sub: state.options.labelTapToRetry,\n                        },\n                    });\n                });\n\n                item.on('process-revert-error', function(error) {\n                    dispatch('DID_THROW_ITEM_PROCESSING_REVERT_ERROR', {\n                        id: id,\n                        error: error,\n                        status: {\n                            main: dynamicLabel(state.options.labelFileProcessingRevertError)(error),\n                            sub: state.options.labelTapToRetry,\n                        },\n                    });\n                });\n\n                item.on('process-complete', function(serverFileReference) {\n                    dispatch('DID_COMPLETE_ITEM_PROCESSING', {\n                        id: id,\n                        error: null,\n                        serverFileReference: serverFileReference,\n                    });\n\n                    dispatch('DID_DEFINE_VALUE', { id: id, value: serverFileReference });\n                });\n\n                item.on('process-abort', function() {\n                    dispatch('DID_ABORT_ITEM_PROCESSING', { id: id });\n                });\n\n                item.on('process-revert', function() {\n                    dispatch('DID_REVERT_ITEM_PROCESSING', { id: id });\n                    dispatch('DID_DEFINE_VALUE', { id: id, value: null });\n                });\n\n                // let view know the item has been inserted\n                dispatch('DID_ADD_ITEM', {\n                    id: id,\n                    index: index,\n                    interactionMethod: interactionMethod,\n                });\n\n                listUpdated(dispatch, state);\n\n                // start loading the source\n                var _ref8 = state.options.server || {},\n                    url = _ref8.url,\n                    load = _ref8.load,\n                    restore = _ref8.restore,\n                    fetch = _ref8.fetch;\n\n                item.load(\n                    source,\n\n                    // this creates a function that loads the file based on the type of file (string, base64, blob, file) and location of file (local, remote, limbo)\n                    createFileLoader(\n                        origin === FileOrigin.INPUT\n                            ? // input, if is remote, see if should use custom fetch, else use default fetchBlob\n                              isString(source) && isExternalURL(source)\n                                ? fetch\n                                    ? createFetchFunction(url, fetch)\n                                    : fetchBlob // remote url\n                                : fetchBlob // try to fetch url\n                            : // limbo or local\n                            origin === FileOrigin.LIMBO\n                            ? createFetchFunction(url, restore) // limbo\n                            : createFetchFunction(url, load) // local\n                    ),\n\n                    // called when the file is loaded so it can be piped through the filters\n                    function(file, success, error) {\n                        // let's process the file\n                        applyFilterChain('LOAD_FILE', file, { query: query })\n                            .then(success)\n                            .catch(error);\n                    }\n                );\n            },\n\n            REQUEST_PREPARE_OUTPUT: function REQUEST_PREPARE_OUTPUT(_ref9) {\n                var item = _ref9.item,\n                    success = _ref9.success,\n                    _ref9$failure = _ref9.failure,\n                    failure = _ref9$failure === void 0 ? function() {} : _ref9$failure;\n                // error response if item archived\n                var err = {\n                    error: createResponse('error', 0, 'Item not found'),\n                    file: null,\n                };\n\n                // don't handle archived items, an item could have been archived (load aborted) while waiting to be prepared\n                if (item.archived) return failure(err);\n\n                // allow plugins to alter the file data\n                applyFilterChain('PREPARE_OUTPUT', item.file, { query: query, item: item }).then(\n                    function(result) {\n                        applyFilterChain('COMPLETE_PREPARE_OUTPUT', result, {\n                            query: query,\n                            item: item,\n                        }).then(function(result) {\n                            // don't handle archived items, an item could have been archived (load aborted) while being prepared\n                            if (item.archived) return failure(err);\n\n                            // we done!\n                            success(result);\n                        });\n                    }\n                );\n            },\n\n            COMPLETE_LOAD_ITEM: function COMPLETE_LOAD_ITEM(_ref10) {\n                var item = _ref10.item,\n                    data = _ref10.data;\n                var success = data.success,\n                    source = data.source;\n\n                // sort items in list\n                var itemInsertLocation = query('GET_ITEM_INSERT_LOCATION');\n                if (isFunction(itemInsertLocation) && source) {\n                    sortItems(state, itemInsertLocation);\n                }\n\n                // let interface know the item has loaded\n                dispatch('DID_LOAD_ITEM', {\n                    id: item.id,\n                    error: null,\n                    serverFileReference: item.origin === FileOrigin.INPUT ? null : source,\n                });\n\n                // item has been successfully loaded and added to the\n                // list of items so can now be safely returned for use\n                success(createItemAPI(item));\n\n                // if this is a local server file we need to show a different state\n                if (item.origin === FileOrigin.LOCAL) {\n                    dispatch('DID_LOAD_LOCAL_ITEM', { id: item.id });\n                    return;\n                }\n\n                // if is a temp server file we prevent async upload call here (as the file is already on the server)\n                if (item.origin === FileOrigin.LIMBO) {\n                    dispatch('DID_COMPLETE_ITEM_PROCESSING', {\n                        id: item.id,\n                        error: null,\n                        serverFileReference: source,\n                    });\n\n                    dispatch('DID_DEFINE_VALUE', {\n                        id: item.id,\n                        value: item.serverId || source,\n                    });\n\n                    return;\n                }\n\n                // id we are allowed to upload the file immediately, lets do it\n                if (query('IS_ASYNC') && state.options.instantUpload) {\n                    dispatch('REQUEST_ITEM_PROCESSING', { query: item.id });\n                }\n            },\n\n            RETRY_ITEM_LOAD: getItemByQueryFromState(state, function(item) {\n                // try loading the source one more time\n                item.retryLoad();\n            }),\n\n            REQUEST_ITEM_PREPARE: getItemByQueryFromState(state, function(item, _success, failure) {\n                dispatch(\n                    'REQUEST_PREPARE_OUTPUT',\n                    {\n                        query: item.id,\n                        item: item,\n                        success: function success(file) {\n                            dispatch('DID_PREPARE_OUTPUT', { id: item.id, file: file });\n                            _success({\n                                file: item,\n                                output: file,\n                            });\n                        },\n                        failure: failure,\n                    },\n\n                    true\n                );\n            }),\n\n            REQUEST_ITEM_PROCESSING: getItemByQueryFromState(state, function(\n                item,\n                success,\n                failure\n            ) {\n                // cannot be queued (or is already queued)\n                var itemCanBeQueuedForProcessing =\n                    // waiting for something\n                    item.status === ItemStatus.IDLE ||\n                    // processing went wrong earlier\n                    item.status === ItemStatus.PROCESSING_ERROR;\n\n                // not ready to be processed\n                if (!itemCanBeQueuedForProcessing) {\n                    var processNow = function processNow() {\n                        return dispatch('REQUEST_ITEM_PROCESSING', {\n                            query: item,\n                            success: success,\n                            failure: failure,\n                        });\n                    };\n\n                    var process = function process() {\n                        return document.hidden ? processNow() : setTimeout(processNow, 32);\n                    };\n\n                    // if already done processing or tried to revert but didn't work, try again\n                    if (\n                        item.status === ItemStatus.PROCESSING_COMPLETE ||\n                        item.status === ItemStatus.PROCESSING_REVERT_ERROR\n                    ) {\n                        item.revert(\n                            createRevertFunction(\n                                state.options.server.url,\n                                state.options.server.revert\n                            ),\n                            query('GET_FORCE_REVERT')\n                        )\n                            .then(process)\n                            .catch(function() {}); // don't continue with processing if something went wrong\n                    } else if (item.status === ItemStatus.PROCESSING) {\n                        item.abortProcessing().then(process);\n                    }\n\n                    return;\n                }\n\n                // already queued for processing\n                if (item.status === ItemStatus.PROCESSING_QUEUED) return;\n\n                item.requestProcessing();\n\n                dispatch('DID_REQUEST_ITEM_PROCESSING', { id: item.id });\n\n                dispatch('PROCESS_ITEM', { query: item, success: success, failure: failure }, true);\n            }),\n\n            PROCESS_ITEM: getItemByQueryFromState(state, function(item, success, failure) {\n                var maxParallelUploads = query('GET_MAX_PARALLEL_UPLOADS');\n                var totalCurrentUploads = query('GET_ITEMS_BY_STATUS', ItemStatus.PROCESSING)\n                    .length;\n\n                // queue and wait till queue is freed up\n                if (totalCurrentUploads === maxParallelUploads) {\n                    // queue for later processing\n                    state.processingQueue.push({\n                        id: item.id,\n                        success: success,\n                        failure: failure,\n                    });\n\n                    // stop it!\n                    return;\n                }\n\n                // if was not queued or is already processing exit here\n                if (item.status === ItemStatus.PROCESSING) return;\n\n                var processNext = function processNext() {\n                    // process queueud items\n                    var queueEntry = state.processingQueue.shift();\n\n                    // no items left\n                    if (!queueEntry) return;\n\n                    // get item reference\n                    var id = queueEntry.id,\n                        success = queueEntry.success,\n                        failure = queueEntry.failure;\n                    var itemReference = getItemByQuery(state.items, id);\n\n                    // if item was archived while in queue, jump to next\n                    if (!itemReference || itemReference.archived) {\n                        processNext();\n                        return;\n                    }\n\n                    // process queued item\n                    dispatch(\n                        'PROCESS_ITEM',\n                        { query: id, success: success, failure: failure },\n                        true\n                    );\n                };\n\n                // we done function\n                item.onOnce('process-complete', function() {\n                    success(createItemAPI(item));\n                    processNext();\n\n                    // if origin is local, and we're instant uploading, trigger remove of original\n                    // as revert will remove file from list\n                    var server = state.options.server;\n                    var instantUpload = state.options.instantUpload;\n                    if (\n                        instantUpload &&\n                        item.origin === FileOrigin.LOCAL &&\n                        isFunction(server.remove)\n                    ) {\n                        var noop = function noop() {};\n                        item.origin = FileOrigin.LIMBO;\n                        state.options.server.remove(item.source, noop, noop);\n                    }\n\n                    // All items processed? No errors?\n                    var allItemsProcessed =\n                        query('GET_ITEMS_BY_STATUS', ItemStatus.PROCESSING_COMPLETE).length ===\n                        state.items.length;\n                    if (allItemsProcessed) {\n                        dispatch('DID_COMPLETE_ITEM_PROCESSING_ALL');\n                    }\n                });\n\n                // we error function\n                item.onOnce('process-error', function(error) {\n                    failure({ error: error, file: createItemAPI(item) });\n                    processNext();\n                });\n\n                // start file processing\n                var options = state.options;\n                item.process(\n                    createFileProcessor(\n                        createProcessorFunction(\n                            options.server.url,\n                            options.server.process,\n                            options.name,\n                            {\n                                chunkTransferId: item.transferId,\n                                chunkServer: options.server.patch,\n                                chunkUploads: options.chunkUploads,\n                                chunkForce: options.chunkForce,\n                                chunkSize: options.chunkSize,\n                                chunkRetryDelays: options.chunkRetryDelays,\n                            }\n                        ),\n\n                        {\n                            allowMinimumUploadDuration: query('GET_ALLOW_MINIMUM_UPLOAD_DURATION'),\n                        }\n                    ),\n\n                    // called when the file is about to be processed so it can be piped through the transform filters\n                    function(file, success, error) {\n                        // allow plugins to alter the file data\n                        applyFilterChain('PREPARE_OUTPUT', file, { query: query, item: item })\n                            .then(function(file) {\n                                dispatch('DID_PREPARE_OUTPUT', { id: item.id, file: file });\n\n                                success(file);\n                            })\n                            .catch(error);\n                    }\n                );\n            }),\n\n            RETRY_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n                dispatch('REQUEST_ITEM_PROCESSING', { query: item });\n            }),\n\n            REQUEST_REMOVE_ITEM: getItemByQueryFromState(state, function(item) {\n                optionalPromise(query('GET_BEFORE_REMOVE_FILE'), createItemAPI(item)).then(function(\n                    shouldRemove\n                ) {\n                    if (!shouldRemove) {\n                        return;\n                    }\n                    dispatch('REMOVE_ITEM', { query: item });\n                });\n            }),\n\n            RELEASE_ITEM: getItemByQueryFromState(state, function(item) {\n                item.release();\n            }),\n\n            REMOVE_ITEM: getItemByQueryFromState(state, function(item, success, failure, options) {\n                var removeFromView = function removeFromView() {\n                    // get id reference\n                    var id = item.id;\n\n                    // archive the item, this does not remove it from the list\n                    getItemById(state.items, id).archive();\n\n                    // tell the view the item has been removed\n                    dispatch('DID_REMOVE_ITEM', { error: null, id: id, item: item });\n\n                    // now the list has been modified\n                    listUpdated(dispatch, state);\n\n                    // correctly removed\n                    success(createItemAPI(item));\n                };\n\n                // if this is a local file and the `server.remove` function has been configured,\n                // send source there so dev can remove file from server\n                var server = state.options.server;\n                if (\n                    item.origin === FileOrigin.LOCAL &&\n                    server &&\n                    isFunction(server.remove) &&\n                    options.remove !== false\n                ) {\n                    dispatch('DID_START_ITEM_REMOVE', { id: item.id });\n\n                    server.remove(\n                        item.source,\n                        function() {\n                            return removeFromView();\n                        },\n                        function(status) {\n                            dispatch('DID_THROW_ITEM_REMOVE_ERROR', {\n                                id: item.id,\n                                error: createResponse('error', 0, status, null),\n                                status: {\n                                    main: dynamicLabel(state.options.labelFileRemoveError)(status),\n                                    sub: state.options.labelTapToRetry,\n                                },\n                            });\n                        }\n                    );\n                } else {\n                    // if is requesting revert and can revert need to call revert handler (not calling request_ because that would also trigger beforeRemoveHook)\n                    if (\n                        (options.revert &&\n                            item.origin !== FileOrigin.LOCAL &&\n                            item.serverId !== null) ||\n                        // if chunked uploads are enabled and we're uploading in chunks for this specific file\n                        // or if the file isn't big enough for chunked uploads but chunkForce is set then call\n                        // revert before removing from the view...\n                        (state.options.chunkUploads && item.file.size > state.options.chunkSize) ||\n                        (state.options.chunkUploads && state.options.chunkForce)\n                    ) {\n                        item.revert(\n                            createRevertFunction(\n                                state.options.server.url,\n                                state.options.server.revert\n                            ),\n                            query('GET_FORCE_REVERT')\n                        );\n                    }\n\n                    // can now safely remove from view\n                    removeFromView();\n                }\n            }),\n\n            ABORT_ITEM_LOAD: getItemByQueryFromState(state, function(item) {\n                item.abortLoad();\n            }),\n\n            ABORT_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n                // test if is already processed\n                if (item.serverId) {\n                    dispatch('REVERT_ITEM_PROCESSING', { id: item.id });\n                    return;\n                }\n\n                // abort\n                item.abortProcessing().then(function() {\n                    var shouldRemove = state.options.instantUpload;\n                    if (shouldRemove) {\n                        dispatch('REMOVE_ITEM', { query: item.id });\n                    }\n                });\n            }),\n\n            REQUEST_REVERT_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n                // not instant uploading, revert immediately\n                if (!state.options.instantUpload) {\n                    dispatch('REVERT_ITEM_PROCESSING', { query: item });\n                    return;\n                }\n\n                // if we're instant uploading the file will also be removed if we revert,\n                // so if a before remove file hook is defined we need to run it now\n                var handleRevert = function handleRevert(shouldRevert) {\n                    if (!shouldRevert) return;\n                    dispatch('REVERT_ITEM_PROCESSING', { query: item });\n                };\n\n                var fn = query('GET_BEFORE_REMOVE_FILE');\n                if (!fn) {\n                    return handleRevert(true);\n                }\n\n                var requestRemoveResult = fn(createItemAPI(item));\n                if (requestRemoveResult == null) {\n                    // undefined or null\n                    return handleRevert(true);\n                }\n\n                if (typeof requestRemoveResult === 'boolean') {\n                    return handleRevert(requestRemoveResult);\n                }\n\n                if (typeof requestRemoveResult.then === 'function') {\n                    requestRemoveResult.then(handleRevert);\n                }\n            }),\n\n            REVERT_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n                item.revert(\n                    createRevertFunction(state.options.server.url, state.options.server.revert),\n                    query('GET_FORCE_REVERT')\n                )\n                    .then(function() {\n                        var shouldRemove = state.options.instantUpload || isMockItem(item);\n                        if (shouldRemove) {\n                            dispatch('REMOVE_ITEM', { query: item.id });\n                        }\n                    })\n                    .catch(function() {});\n            }),\n\n            SET_OPTIONS: function SET_OPTIONS(_ref11) {\n                var options = _ref11.options;\n                // get all keys passed\n                var optionKeys = Object.keys(options);\n\n                // get prioritized keyed to include (remove once not in options object)\n                var prioritizedOptionKeys = PrioritizedOptions.filter(function(key) {\n                    return optionKeys.includes(key);\n                });\n\n                // order the keys, prioritized first, then rest\n                var orderedOptionKeys = [].concat(\n                    _toConsumableArray(prioritizedOptionKeys),\n                    _toConsumableArray(\n                        Object.keys(options).filter(function(key) {\n                            return !prioritizedOptionKeys.includes(key);\n                        })\n                    )\n                );\n\n                // dispatch set event for each option\n                orderedOptionKeys.forEach(function(key) {\n                    dispatch('SET_' + fromCamels(key, '_').toUpperCase(), {\n                        value: options[key],\n                    });\n                });\n            },\n        };\n    };\n\n    var PrioritizedOptions = ['server'];\n\n    var formatFilename = function formatFilename(name) {\n        return name;\n    };\n\n    var createElement$1 = function createElement(tagName) {\n        return document.createElement(tagName);\n    };\n\n    var text = function text(node, value) {\n        var textNode = node.childNodes[0];\n        if (!textNode) {\n            textNode = document.createTextNode(value);\n            node.appendChild(textNode);\n        } else if (value !== textNode.nodeValue) {\n            textNode.nodeValue = value;\n        }\n    };\n\n    var polarToCartesian = function polarToCartesian(centerX, centerY, radius, angleInDegrees) {\n        var angleInRadians = (((angleInDegrees % 360) - 90) * Math.PI) / 180.0;\n        return {\n            x: centerX + radius * Math.cos(angleInRadians),\n            y: centerY + radius * Math.sin(angleInRadians),\n        };\n    };\n\n    var describeArc = function describeArc(x, y, radius, startAngle, endAngle, arcSweep) {\n        var start = polarToCartesian(x, y, radius, endAngle);\n        var end = polarToCartesian(x, y, radius, startAngle);\n        return ['M', start.x, start.y, 'A', radius, radius, 0, arcSweep, 0, end.x, end.y].join(' ');\n    };\n\n    var percentageArc = function percentageArc(x, y, radius, from, to) {\n        var arcSweep = 1;\n        if (to > from && to - from <= 0.5) {\n            arcSweep = 0;\n        }\n        if (from > to && from - to >= 0.5) {\n            arcSweep = 0;\n        }\n        return describeArc(\n            x,\n            y,\n            radius,\n            Math.min(0.9999, from) * 360,\n            Math.min(0.9999, to) * 360,\n            arcSweep\n        );\n    };\n\n    var create = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        // start at 0\n        props.spin = false;\n        props.progress = 0;\n        props.opacity = 0;\n\n        // svg\n        var svg = createElement('svg');\n        root.ref.path = createElement('path', {\n            'stroke-width': 2,\n            'stroke-linecap': 'round',\n        });\n\n        svg.appendChild(root.ref.path);\n\n        root.ref.svg = svg;\n\n        root.appendChild(svg);\n    };\n\n    var write = function write(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props;\n        if (props.opacity === 0) {\n            return;\n        }\n\n        if (props.align) {\n            root.element.dataset.align = props.align;\n        }\n\n        // get width of stroke\n        var ringStrokeWidth = parseInt(attr(root.ref.path, 'stroke-width'), 10);\n\n        // calculate size of ring\n        var size = root.rect.element.width * 0.5;\n\n        // ring state\n        var ringFrom = 0;\n        var ringTo = 0;\n\n        // now in busy mode\n        if (props.spin) {\n            ringFrom = 0;\n            ringTo = 0.5;\n        } else {\n            ringFrom = 0;\n            ringTo = props.progress;\n        }\n\n        // get arc path\n        var coordinates = percentageArc(size, size, size - ringStrokeWidth, ringFrom, ringTo);\n\n        // update progress bar\n        attr(root.ref.path, 'd', coordinates);\n\n        // hide while contains 0 value\n        attr(root.ref.path, 'stroke-opacity', props.spin || props.progress > 0 ? 1 : 0);\n    };\n\n    var progressIndicator = createView({\n        tag: 'div',\n        name: 'progress-indicator',\n        ignoreRectUpdate: true,\n        ignoreRect: true,\n        create: create,\n        write: write,\n        mixins: {\n            apis: ['progress', 'spin', 'align'],\n            styles: ['opacity'],\n            animations: {\n                opacity: { type: 'tween', duration: 500 },\n                progress: {\n                    type: 'spring',\n                    stiffness: 0.95,\n                    damping: 0.65,\n                    mass: 10,\n                },\n            },\n        },\n    });\n\n    var create$1 = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        root.element.innerHTML = (props.icon || '') + ('<span>' + props.label + '</span>');\n\n        props.isDisabled = false;\n    };\n\n    var write$1 = function write(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props;\n        var isDisabled = props.isDisabled;\n        var shouldDisable = root.query('GET_DISABLED') || props.opacity === 0;\n\n        if (shouldDisable && !isDisabled) {\n            props.isDisabled = true;\n            attr(root.element, 'disabled', 'disabled');\n        } else if (!shouldDisable && isDisabled) {\n            props.isDisabled = false;\n            root.element.removeAttribute('disabled');\n        }\n    };\n\n    var fileActionButton = createView({\n        tag: 'button',\n        attributes: {\n            type: 'button',\n        },\n\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        name: 'file-action-button',\n        mixins: {\n            apis: ['label'],\n            styles: ['translateX', 'translateY', 'scaleX', 'scaleY', 'opacity'],\n            animations: {\n                scaleX: 'spring',\n                scaleY: 'spring',\n                translateX: 'spring',\n                translateY: 'spring',\n                opacity: { type: 'tween', duration: 250 },\n            },\n\n            listeners: true,\n        },\n\n        create: create$1,\n        write: write$1,\n    });\n\n    var toNaturalFileSize = function toNaturalFileSize(bytes) {\n        var decimalSeparator =\n            arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '.';\n        var base = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1000;\n        var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n        var _options$labelBytes = options.labelBytes,\n            labelBytes = _options$labelBytes === void 0 ? 'bytes' : _options$labelBytes,\n            _options$labelKilobyt = options.labelKilobytes,\n            labelKilobytes = _options$labelKilobyt === void 0 ? 'KB' : _options$labelKilobyt,\n            _options$labelMegabyt = options.labelMegabytes,\n            labelMegabytes = _options$labelMegabyt === void 0 ? 'MB' : _options$labelMegabyt,\n            _options$labelGigabyt = options.labelGigabytes,\n            labelGigabytes = _options$labelGigabyt === void 0 ? 'GB' : _options$labelGigabyt;\n\n        // no negative byte sizes\n        bytes = Math.round(Math.abs(bytes));\n\n        var KB = base;\n        var MB = base * base;\n        var GB = base * base * base;\n\n        // just bytes\n        if (bytes < KB) {\n            return bytes + ' ' + labelBytes;\n        }\n\n        // kilobytes\n        if (bytes < MB) {\n            return Math.floor(bytes / KB) + ' ' + labelKilobytes;\n        }\n\n        // megabytes\n        if (bytes < GB) {\n            return removeDecimalsWhenZero(bytes / MB, 1, decimalSeparator) + ' ' + labelMegabytes;\n        }\n\n        // gigabytes\n        return removeDecimalsWhenZero(bytes / GB, 2, decimalSeparator) + ' ' + labelGigabytes;\n    };\n\n    var removeDecimalsWhenZero = function removeDecimalsWhenZero(value, decimalCount, separator) {\n        return value\n            .toFixed(decimalCount)\n            .split('.')\n            .filter(function(part) {\n                return part !== '0';\n            })\n            .join(separator);\n    };\n\n    var create$2 = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        // filename\n        var fileName = createElement$1('span');\n        fileName.className = 'filepond--file-info-main';\n        // hide for screenreaders\n        // the file is contained in a fieldset with legend that contains the filename\n        // no need to read it twice\n        attr(fileName, 'aria-hidden', 'true');\n        root.appendChild(fileName);\n        root.ref.fileName = fileName;\n\n        // filesize\n        var fileSize = createElement$1('span');\n        fileSize.className = 'filepond--file-info-sub';\n        root.appendChild(fileSize);\n        root.ref.fileSize = fileSize;\n\n        // set initial values\n        text(fileSize, root.query('GET_LABEL_FILE_WAITING_FOR_SIZE'));\n        text(fileName, formatFilename(root.query('GET_ITEM_NAME', props.id)));\n    };\n\n    var updateFile = function updateFile(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props;\n        text(\n            root.ref.fileSize,\n            toNaturalFileSize(\n                root.query('GET_ITEM_SIZE', props.id),\n                '.',\n                root.query('GET_FILE_SIZE_BASE'),\n                root.query('GET_FILE_SIZE_LABELS', root.query)\n            )\n        );\n\n        text(root.ref.fileName, formatFilename(root.query('GET_ITEM_NAME', props.id)));\n    };\n\n    var updateFileSizeOnError = function updateFileSizeOnError(_ref3) {\n        var root = _ref3.root,\n            props = _ref3.props;\n        // if size is available don't fallback to unknown size message\n        if (isInt(root.query('GET_ITEM_SIZE', props.id))) {\n            updateFile({ root: root, props: props });\n            return;\n        }\n\n        text(root.ref.fileSize, root.query('GET_LABEL_FILE_SIZE_NOT_AVAILABLE'));\n    };\n\n    var fileInfo = createView({\n        name: 'file-info',\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        write: createRoute({\n            DID_LOAD_ITEM: updateFile,\n            DID_UPDATE_ITEM_META: updateFile,\n            DID_THROW_ITEM_LOAD_ERROR: updateFileSizeOnError,\n            DID_THROW_ITEM_INVALID: updateFileSizeOnError,\n        }),\n\n        didCreateView: function didCreateView(root) {\n            applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n        },\n        create: create$2,\n        mixins: {\n            styles: ['translateX', 'translateY'],\n            animations: {\n                translateX: 'spring',\n                translateY: 'spring',\n            },\n        },\n    });\n\n    var toPercentage = function toPercentage(value) {\n        return Math.round(value * 100);\n    };\n\n    var create$3 = function create(_ref) {\n        var root = _ref.root;\n\n        // main status\n        var main = createElement$1('span');\n        main.className = 'filepond--file-status-main';\n        root.appendChild(main);\n        root.ref.main = main;\n\n        // sub status\n        var sub = createElement$1('span');\n        sub.className = 'filepond--file-status-sub';\n        root.appendChild(sub);\n        root.ref.sub = sub;\n\n        didSetItemLoadProgress({ root: root, action: { progress: null } });\n    };\n\n    var didSetItemLoadProgress = function didSetItemLoadProgress(_ref2) {\n        var root = _ref2.root,\n            action = _ref2.action;\n        var title =\n            action.progress === null\n                ? root.query('GET_LABEL_FILE_LOADING')\n                : root.query('GET_LABEL_FILE_LOADING') + ' ' + toPercentage(action.progress) + '%';\n\n        text(root.ref.main, title);\n        text(root.ref.sub, root.query('GET_LABEL_TAP_TO_CANCEL'));\n    };\n\n    var didSetItemProcessProgress = function didSetItemProcessProgress(_ref3) {\n        var root = _ref3.root,\n            action = _ref3.action;\n        var title =\n            action.progress === null\n                ? root.query('GET_LABEL_FILE_PROCESSING')\n                : root.query('GET_LABEL_FILE_PROCESSING') +\n                  ' ' +\n                  toPercentage(action.progress) +\n                  '%';\n\n        text(root.ref.main, title);\n        text(root.ref.sub, root.query('GET_LABEL_TAP_TO_CANCEL'));\n    };\n\n    var didRequestItemProcessing = function didRequestItemProcessing(_ref4) {\n        var root = _ref4.root;\n        text(root.ref.main, root.query('GET_LABEL_FILE_PROCESSING'));\n        text(root.ref.sub, root.query('GET_LABEL_TAP_TO_CANCEL'));\n    };\n\n    var didAbortItemProcessing = function didAbortItemProcessing(_ref5) {\n        var root = _ref5.root;\n        text(root.ref.main, root.query('GET_LABEL_FILE_PROCESSING_ABORTED'));\n        text(root.ref.sub, root.query('GET_LABEL_TAP_TO_RETRY'));\n    };\n\n    var didCompleteItemProcessing = function didCompleteItemProcessing(_ref6) {\n        var root = _ref6.root;\n        text(root.ref.main, root.query('GET_LABEL_FILE_PROCESSING_COMPLETE'));\n        text(root.ref.sub, root.query('GET_LABEL_TAP_TO_UNDO'));\n    };\n\n    var clear = function clear(_ref7) {\n        var root = _ref7.root;\n        text(root.ref.main, '');\n        text(root.ref.sub, '');\n    };\n\n    var error = function error(_ref8) {\n        var root = _ref8.root,\n            action = _ref8.action;\n        text(root.ref.main, action.status.main);\n        text(root.ref.sub, action.status.sub);\n    };\n\n    var fileStatus = createView({\n        name: 'file-status',\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        write: createRoute({\n            DID_LOAD_ITEM: clear,\n            DID_REVERT_ITEM_PROCESSING: clear,\n            DID_REQUEST_ITEM_PROCESSING: didRequestItemProcessing,\n            DID_ABORT_ITEM_PROCESSING: didAbortItemProcessing,\n            DID_COMPLETE_ITEM_PROCESSING: didCompleteItemProcessing,\n            DID_UPDATE_ITEM_PROCESS_PROGRESS: didSetItemProcessProgress,\n            DID_UPDATE_ITEM_LOAD_PROGRESS: didSetItemLoadProgress,\n            DID_THROW_ITEM_LOAD_ERROR: error,\n            DID_THROW_ITEM_INVALID: error,\n            DID_THROW_ITEM_PROCESSING_ERROR: error,\n            DID_THROW_ITEM_PROCESSING_REVERT_ERROR: error,\n            DID_THROW_ITEM_REMOVE_ERROR: error,\n        }),\n\n        didCreateView: function didCreateView(root) {\n            applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n        },\n        create: create$3,\n        mixins: {\n            styles: ['translateX', 'translateY', 'opacity'],\n            animations: {\n                opacity: { type: 'tween', duration: 250 },\n                translateX: 'spring',\n                translateY: 'spring',\n            },\n        },\n    });\n\n    /**\n     * Button definitions for the file view\n     */\n\n    var Buttons = {\n        AbortItemLoad: {\n            label: 'GET_LABEL_BUTTON_ABORT_ITEM_LOAD',\n            action: 'ABORT_ITEM_LOAD',\n            className: 'filepond--action-abort-item-load',\n            align: 'LOAD_INDICATOR_POSITION', // right\n        },\n        RetryItemLoad: {\n            label: 'GET_LABEL_BUTTON_RETRY_ITEM_LOAD',\n            action: 'RETRY_ITEM_LOAD',\n            icon: 'GET_ICON_RETRY',\n            className: 'filepond--action-retry-item-load',\n            align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n        },\n        RemoveItem: {\n            label: 'GET_LABEL_BUTTON_REMOVE_ITEM',\n            action: 'REQUEST_REMOVE_ITEM',\n            icon: 'GET_ICON_REMOVE',\n            className: 'filepond--action-remove-item',\n            align: 'BUTTON_REMOVE_ITEM_POSITION', // left\n        },\n        ProcessItem: {\n            label: 'GET_LABEL_BUTTON_PROCESS_ITEM',\n            action: 'REQUEST_ITEM_PROCESSING',\n            icon: 'GET_ICON_PROCESS',\n            className: 'filepond--action-process-item',\n            align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n        },\n        AbortItemProcessing: {\n            label: 'GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING',\n            action: 'ABORT_ITEM_PROCESSING',\n            className: 'filepond--action-abort-item-processing',\n            align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n        },\n        RetryItemProcessing: {\n            label: 'GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING',\n            action: 'RETRY_ITEM_PROCESSING',\n            icon: 'GET_ICON_RETRY',\n            className: 'filepond--action-retry-item-processing',\n            align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n        },\n        RevertItemProcessing: {\n            label: 'GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING',\n            action: 'REQUEST_REVERT_ITEM_PROCESSING',\n            icon: 'GET_ICON_UNDO',\n            className: 'filepond--action-revert-item-processing',\n            align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n        },\n    };\n\n    // make a list of buttons, we can then remove buttons from this list if they're disabled\n    var ButtonKeys = [];\n    forin(Buttons, function(key) {\n        ButtonKeys.push(key);\n    });\n\n    var calculateFileInfoOffset = function calculateFileInfoOffset(root) {\n        if (getRemoveIndicatorAligment(root) === 'right') return 0;\n        var buttonRect = root.ref.buttonRemoveItem.rect.element;\n        return buttonRect.hidden ? null : buttonRect.width + buttonRect.left;\n    };\n\n    var calculateButtonWidth = function calculateButtonWidth(root) {\n        var buttonRect = root.ref.buttonAbortItemLoad.rect.element;\n        return buttonRect.width;\n    };\n\n    // Force on full pixels so text stays crips\n    var calculateFileVerticalCenterOffset = function calculateFileVerticalCenterOffset(root) {\n        return Math.floor(root.ref.buttonRemoveItem.rect.element.height / 4);\n    };\n    var calculateFileHorizontalCenterOffset = function calculateFileHorizontalCenterOffset(root) {\n        return Math.floor(root.ref.buttonRemoveItem.rect.element.left / 2);\n    };\n\n    var getLoadIndicatorAlignment = function getLoadIndicatorAlignment(root) {\n        return root.query('GET_STYLE_LOAD_INDICATOR_POSITION');\n    };\n    var getProcessIndicatorAlignment = function getProcessIndicatorAlignment(root) {\n        return root.query('GET_STYLE_PROGRESS_INDICATOR_POSITION');\n    };\n    var getRemoveIndicatorAligment = function getRemoveIndicatorAligment(root) {\n        return root.query('GET_STYLE_BUTTON_REMOVE_ITEM_POSITION');\n    };\n\n    var DefaultStyle = {\n        buttonAbortItemLoad: { opacity: 0 },\n        buttonRetryItemLoad: { opacity: 0 },\n        buttonRemoveItem: { opacity: 0 },\n        buttonProcessItem: { opacity: 0 },\n        buttonAbortItemProcessing: { opacity: 0 },\n        buttonRetryItemProcessing: { opacity: 0 },\n        buttonRevertItemProcessing: { opacity: 0 },\n        loadProgressIndicator: { opacity: 0, align: getLoadIndicatorAlignment },\n        processProgressIndicator: { opacity: 0, align: getProcessIndicatorAlignment },\n        processingCompleteIndicator: { opacity: 0, scaleX: 0.75, scaleY: 0.75 },\n        info: { translateX: 0, translateY: 0, opacity: 0 },\n        status: { translateX: 0, translateY: 0, opacity: 0 },\n    };\n\n    var IdleStyle = {\n        buttonRemoveItem: { opacity: 1 },\n        buttonProcessItem: { opacity: 1 },\n        info: { translateX: calculateFileInfoOffset },\n        status: { translateX: calculateFileInfoOffset },\n    };\n\n    var ProcessingStyle = {\n        buttonAbortItemProcessing: { opacity: 1 },\n        processProgressIndicator: { opacity: 1 },\n        status: { opacity: 1 },\n    };\n\n    var StyleMap = {\n        DID_THROW_ITEM_INVALID: {\n            buttonRemoveItem: { opacity: 1 },\n            info: { translateX: calculateFileInfoOffset },\n            status: { translateX: calculateFileInfoOffset, opacity: 1 },\n        },\n\n        DID_START_ITEM_LOAD: {\n            buttonAbortItemLoad: { opacity: 1 },\n            loadProgressIndicator: { opacity: 1 },\n            status: { opacity: 1 },\n        },\n\n        DID_THROW_ITEM_LOAD_ERROR: {\n            buttonRetryItemLoad: { opacity: 1 },\n            buttonRemoveItem: { opacity: 1 },\n            info: { translateX: calculateFileInfoOffset },\n            status: { opacity: 1 },\n        },\n\n        DID_START_ITEM_REMOVE: {\n            processProgressIndicator: { opacity: 1, align: getRemoveIndicatorAligment },\n            info: { translateX: calculateFileInfoOffset },\n            status: { opacity: 0 },\n        },\n\n        DID_THROW_ITEM_REMOVE_ERROR: {\n            processProgressIndicator: { opacity: 0, align: getRemoveIndicatorAligment },\n            buttonRemoveItem: { opacity: 1 },\n            info: { translateX: calculateFileInfoOffset },\n            status: { opacity: 1, translateX: calculateFileInfoOffset },\n        },\n\n        DID_LOAD_ITEM: IdleStyle,\n        DID_LOAD_LOCAL_ITEM: {\n            buttonRemoveItem: { opacity: 1 },\n            info: { translateX: calculateFileInfoOffset },\n            status: { translateX: calculateFileInfoOffset },\n        },\n\n        DID_START_ITEM_PROCESSING: ProcessingStyle,\n        DID_REQUEST_ITEM_PROCESSING: ProcessingStyle,\n        DID_UPDATE_ITEM_PROCESS_PROGRESS: ProcessingStyle,\n        DID_COMPLETE_ITEM_PROCESSING: {\n            buttonRevertItemProcessing: { opacity: 1 },\n            info: { opacity: 1 },\n            status: { opacity: 1 },\n        },\n\n        DID_THROW_ITEM_PROCESSING_ERROR: {\n            buttonRemoveItem: { opacity: 1 },\n            buttonRetryItemProcessing: { opacity: 1 },\n            status: { opacity: 1 },\n            info: { translateX: calculateFileInfoOffset },\n        },\n\n        DID_THROW_ITEM_PROCESSING_REVERT_ERROR: {\n            buttonRevertItemProcessing: { opacity: 1 },\n            status: { opacity: 1 },\n            info: { opacity: 1 },\n        },\n\n        DID_ABORT_ITEM_PROCESSING: {\n            buttonRemoveItem: { opacity: 1 },\n            buttonProcessItem: { opacity: 1 },\n            info: { translateX: calculateFileInfoOffset },\n            status: { opacity: 1 },\n        },\n\n        DID_REVERT_ITEM_PROCESSING: IdleStyle,\n    };\n\n    // complete indicator view\n    var processingCompleteIndicatorView = createView({\n        create: function create(_ref) {\n            var root = _ref.root;\n            root.element.innerHTML = root.query('GET_ICON_DONE');\n        },\n        name: 'processing-complete-indicator',\n        ignoreRect: true,\n        mixins: {\n            styles: ['scaleX', 'scaleY', 'opacity'],\n            animations: {\n                scaleX: 'spring',\n                scaleY: 'spring',\n                opacity: { type: 'tween', duration: 250 },\n            },\n        },\n    });\n\n    /**\n     * Creates the file view\n     */\n    var create$4 = function create(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props;\n        // copy Buttons object\n        var LocalButtons = Object.keys(Buttons).reduce(function(prev, curr) {\n            prev[curr] = Object.assign({}, Buttons[curr]);\n            return prev;\n        }, {});\n        var id = props.id;\n\n        // allow reverting upload\n        var allowRevert = root.query('GET_ALLOW_REVERT');\n\n        // allow remove file\n        var allowRemove = root.query('GET_ALLOW_REMOVE');\n\n        // allow processing upload\n        var allowProcess = root.query('GET_ALLOW_PROCESS');\n\n        // is instant uploading, need this to determine the icon of the undo button\n        var instantUpload = root.query('GET_INSTANT_UPLOAD');\n\n        // is async set up\n        var isAsync = root.query('IS_ASYNC');\n\n        // should align remove item buttons\n        var alignRemoveItemButton = root.query('GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN');\n\n        // enabled buttons array\n        var buttonFilter;\n        if (isAsync) {\n            if (allowProcess && !allowRevert) {\n                // only remove revert button\n                buttonFilter = function buttonFilter(key) {\n                    return !/RevertItemProcessing/.test(key);\n                };\n            } else if (!allowProcess && allowRevert) {\n                // only remove process button\n                buttonFilter = function buttonFilter(key) {\n                    return !/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(key);\n                };\n            } else if (!allowProcess && !allowRevert) {\n                // remove all process buttons\n                buttonFilter = function buttonFilter(key) {\n                    return !/Process/.test(key);\n                };\n            }\n        } else {\n            // no process controls available\n            buttonFilter = function buttonFilter(key) {\n                return !/Process/.test(key);\n            };\n        }\n\n        var enabledButtons = buttonFilter ? ButtonKeys.filter(buttonFilter) : ButtonKeys.concat();\n\n        // update icon and label for revert button when instant uploading\n        if (instantUpload && allowRevert) {\n            LocalButtons['RevertItemProcessing'].label = 'GET_LABEL_BUTTON_REMOVE_ITEM';\n            LocalButtons['RevertItemProcessing'].icon = 'GET_ICON_REMOVE';\n        }\n\n        // remove last button (revert) if not allowed\n        if (isAsync && !allowRevert) {\n            var map = StyleMap['DID_COMPLETE_ITEM_PROCESSING'];\n            map.info.translateX = calculateFileHorizontalCenterOffset;\n            map.info.translateY = calculateFileVerticalCenterOffset;\n            map.status.translateY = calculateFileVerticalCenterOffset;\n            map.processingCompleteIndicator = { opacity: 1, scaleX: 1, scaleY: 1 };\n        }\n\n        // should align center\n        if (isAsync && !allowProcess) {\n            [\n                'DID_START_ITEM_PROCESSING',\n                'DID_REQUEST_ITEM_PROCESSING',\n                'DID_UPDATE_ITEM_PROCESS_PROGRESS',\n                'DID_THROW_ITEM_PROCESSING_ERROR',\n            ].forEach(function(key) {\n                StyleMap[key].status.translateY = calculateFileVerticalCenterOffset;\n            });\n            StyleMap['DID_THROW_ITEM_PROCESSING_ERROR'].status.translateX = calculateButtonWidth;\n        }\n\n        // move remove button to right\n        if (alignRemoveItemButton && allowRevert) {\n            LocalButtons['RevertItemProcessing'].align = 'BUTTON_REMOVE_ITEM_POSITION';\n            var _map = StyleMap['DID_COMPLETE_ITEM_PROCESSING'];\n            _map.info.translateX = calculateFileInfoOffset;\n            _map.status.translateY = calculateFileVerticalCenterOffset;\n            _map.processingCompleteIndicator = { opacity: 1, scaleX: 1, scaleY: 1 };\n        }\n\n        // show/hide RemoveItem button\n        if (!allowRemove) {\n            LocalButtons['RemoveItem'].disabled = true;\n        }\n\n        // create the button views\n        forin(LocalButtons, function(key, definition) {\n            // create button\n            var buttonView = root.createChildView(fileActionButton, {\n                label: root.query(definition.label),\n                icon: root.query(definition.icon),\n                opacity: 0,\n            });\n\n            // should be appended?\n            if (enabledButtons.includes(key)) {\n                root.appendChildView(buttonView);\n            }\n\n            // toggle\n            if (definition.disabled) {\n                buttonView.element.setAttribute('disabled', 'disabled');\n                buttonView.element.setAttribute('hidden', 'hidden');\n            }\n\n            // add position attribute\n            buttonView.element.dataset.align = root.query('GET_STYLE_' + definition.align);\n\n            // add class\n            buttonView.element.classList.add(definition.className);\n\n            // handle interactions\n            buttonView.on('click', function(e) {\n                e.stopPropagation();\n                if (definition.disabled) return;\n                root.dispatch(definition.action, { query: id });\n            });\n\n            // set reference\n            root.ref['button' + key] = buttonView;\n        });\n\n        // checkmark\n        root.ref.processingCompleteIndicator = root.appendChildView(\n            root.createChildView(processingCompleteIndicatorView)\n        );\n\n        root.ref.processingCompleteIndicator.element.dataset.align = root.query(\n            'GET_STYLE_BUTTON_PROCESS_ITEM_POSITION'\n        );\n\n        // create file info view\n        root.ref.info = root.appendChildView(root.createChildView(fileInfo, { id: id }));\n\n        // create file status view\n        root.ref.status = root.appendChildView(root.createChildView(fileStatus, { id: id }));\n\n        // add progress indicators\n        var loadIndicatorView = root.appendChildView(\n            root.createChildView(progressIndicator, {\n                opacity: 0,\n                align: root.query('GET_STYLE_LOAD_INDICATOR_POSITION'),\n            })\n        );\n\n        loadIndicatorView.element.classList.add('filepond--load-indicator');\n        root.ref.loadProgressIndicator = loadIndicatorView;\n\n        var progressIndicatorView = root.appendChildView(\n            root.createChildView(progressIndicator, {\n                opacity: 0,\n                align: root.query('GET_STYLE_PROGRESS_INDICATOR_POSITION'),\n            })\n        );\n\n        progressIndicatorView.element.classList.add('filepond--process-indicator');\n        root.ref.processProgressIndicator = progressIndicatorView;\n\n        // current active styles\n        root.ref.activeStyles = [];\n    };\n\n    var write$2 = function write(_ref3) {\n        var root = _ref3.root,\n            actions = _ref3.actions,\n            props = _ref3.props;\n        // route actions\n        route({ root: root, actions: actions, props: props });\n\n        // select last state change action\n        var action = actions\n            .concat()\n            .filter(function(action) {\n                return /^DID_/.test(action.type);\n            })\n            .reverse()\n            .find(function(action) {\n                return StyleMap[action.type];\n            });\n\n        // a new action happened, let's get the matching styles\n        if (action) {\n            // define new active styles\n            root.ref.activeStyles = [];\n\n            var stylesToApply = StyleMap[action.type];\n            forin(DefaultStyle, function(name, defaultStyles) {\n                // get reference to control\n                var control = root.ref[name];\n\n                // loop over all styles for this control\n                forin(defaultStyles, function(key, defaultValue) {\n                    var value =\n                        stylesToApply[name] && typeof stylesToApply[name][key] !== 'undefined'\n                            ? stylesToApply[name][key]\n                            : defaultValue;\n                    root.ref.activeStyles.push({ control: control, key: key, value: value });\n                });\n            });\n        }\n\n        // apply active styles to element\n        root.ref.activeStyles.forEach(function(_ref4) {\n            var control = _ref4.control,\n                key = _ref4.key,\n                value = _ref4.value;\n            control[key] = typeof value === 'function' ? value(root) : value;\n        });\n    };\n\n    var route = createRoute({\n        DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING: function DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING(\n            _ref5\n        ) {\n            var root = _ref5.root,\n                action = _ref5.action;\n            root.ref.buttonAbortItemProcessing.label = action.value;\n        },\n        DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD: function DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD(_ref6) {\n            var root = _ref6.root,\n                action = _ref6.action;\n            root.ref.buttonAbortItemLoad.label = action.value;\n        },\n        DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL: function DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL(\n            _ref7\n        ) {\n            var root = _ref7.root,\n                action = _ref7.action;\n            root.ref.buttonAbortItemRemoval.label = action.value;\n        },\n        DID_REQUEST_ITEM_PROCESSING: function DID_REQUEST_ITEM_PROCESSING(_ref8) {\n            var root = _ref8.root;\n            root.ref.processProgressIndicator.spin = true;\n            root.ref.processProgressIndicator.progress = 0;\n        },\n        DID_START_ITEM_LOAD: function DID_START_ITEM_LOAD(_ref9) {\n            var root = _ref9.root;\n            root.ref.loadProgressIndicator.spin = true;\n            root.ref.loadProgressIndicator.progress = 0;\n        },\n        DID_START_ITEM_REMOVE: function DID_START_ITEM_REMOVE(_ref10) {\n            var root = _ref10.root;\n            root.ref.processProgressIndicator.spin = true;\n            root.ref.processProgressIndicator.progress = 0;\n        },\n        DID_UPDATE_ITEM_LOAD_PROGRESS: function DID_UPDATE_ITEM_LOAD_PROGRESS(_ref11) {\n            var root = _ref11.root,\n                action = _ref11.action;\n            root.ref.loadProgressIndicator.spin = false;\n            root.ref.loadProgressIndicator.progress = action.progress;\n        },\n        DID_UPDATE_ITEM_PROCESS_PROGRESS: function DID_UPDATE_ITEM_PROCESS_PROGRESS(_ref12) {\n            var root = _ref12.root,\n                action = _ref12.action;\n            root.ref.processProgressIndicator.spin = false;\n            root.ref.processProgressIndicator.progress = action.progress;\n        },\n    });\n\n    var file = createView({\n        create: create$4,\n        write: write$2,\n        didCreateView: function didCreateView(root) {\n            applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n        },\n        name: 'file',\n    });\n\n    /**\n     * Creates the file view\n     */\n    var create$5 = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n\n        // filename\n        root.ref.fileName = createElement$1('legend');\n        root.appendChild(root.ref.fileName);\n\n        // file appended\n        root.ref.file = root.appendChildView(root.createChildView(file, { id: props.id }));\n\n        // data has moved to data.js\n        root.ref.data = false;\n    };\n\n    /**\n     * Data storage\n     */\n    var didLoadItem = function didLoadItem(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props;\n        // updates the legend of the fieldset so screenreaders can better group buttons\n        text(root.ref.fileName, formatFilename(root.query('GET_ITEM_NAME', props.id)));\n    };\n\n    var fileWrapper = createView({\n        create: create$5,\n        ignoreRect: true,\n        write: createRoute({\n            DID_LOAD_ITEM: didLoadItem,\n        }),\n\n        didCreateView: function didCreateView(root) {\n            applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n        },\n        tag: 'fieldset',\n        name: 'file-wrapper',\n    });\n\n    var PANEL_SPRING_PROPS = { type: 'spring', damping: 0.6, mass: 7 };\n\n    var create$6 = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        [\n            {\n                name: 'top',\n            },\n\n            {\n                name: 'center',\n                props: {\n                    translateY: null,\n                    scaleY: null,\n                },\n\n                mixins: {\n                    animations: {\n                        scaleY: PANEL_SPRING_PROPS,\n                    },\n\n                    styles: ['translateY', 'scaleY'],\n                },\n            },\n\n            {\n                name: 'bottom',\n                props: {\n                    translateY: null,\n                },\n\n                mixins: {\n                    animations: {\n                        translateY: PANEL_SPRING_PROPS,\n                    },\n\n                    styles: ['translateY'],\n                },\n            },\n        ].forEach(function(section) {\n            createSection(root, section, props.name);\n        });\n\n        root.element.classList.add('filepond--' + props.name);\n\n        root.ref.scalable = null;\n    };\n\n    var createSection = function createSection(root, section, className) {\n        var viewConstructor = createView({\n            name: 'panel-' + section.name + ' filepond--' + className,\n            mixins: section.mixins,\n            ignoreRectUpdate: true,\n        });\n\n        var view = root.createChildView(viewConstructor, section.props);\n\n        root.ref[section.name] = root.appendChildView(view);\n    };\n\n    var write$3 = function write(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props;\n\n        // update scalable state\n        if (root.ref.scalable === null || props.scalable !== root.ref.scalable) {\n            root.ref.scalable = isBoolean(props.scalable) ? props.scalable : true;\n            root.element.dataset.scalable = root.ref.scalable;\n        }\n\n        // no height, can't set\n        if (!props.height) return;\n\n        // get child rects\n        var topRect = root.ref.top.rect.element;\n        var bottomRect = root.ref.bottom.rect.element;\n\n        // make sure height never is smaller than bottom and top seciton heights combined (will probably never happen, but who knows)\n        var height = Math.max(topRect.height + bottomRect.height, props.height);\n\n        // offset center part\n        root.ref.center.translateY = topRect.height;\n\n        // scale center part\n        // use math ceil to prevent transparent lines because of rounding errors\n        root.ref.center.scaleY = (height - topRect.height - bottomRect.height) / 100;\n\n        // offset bottom part\n        root.ref.bottom.translateY = height - bottomRect.height;\n    };\n\n    var panel = createView({\n        name: 'panel',\n        read: function read(_ref3) {\n            var root = _ref3.root,\n                props = _ref3.props;\n            return (props.heightCurrent = root.ref.bottom.translateY);\n        },\n        write: write$3,\n        create: create$6,\n        ignoreRect: true,\n        mixins: {\n            apis: ['height', 'heightCurrent', 'scalable'],\n        },\n    });\n\n    var createDragHelper = function createDragHelper(items) {\n        var itemIds = items.map(function(item) {\n            return item.id;\n        });\n        var prevIndex = undefined;\n        return {\n            setIndex: function setIndex(index) {\n                prevIndex = index;\n            },\n            getIndex: function getIndex() {\n                return prevIndex;\n            },\n            getItemIndex: function getItemIndex(item) {\n                return itemIds.indexOf(item.id);\n            },\n        };\n    };\n\n    var ITEM_TRANSLATE_SPRING = {\n        type: 'spring',\n        stiffness: 0.75,\n        damping: 0.45,\n        mass: 10,\n    };\n\n    var ITEM_SCALE_SPRING = 'spring';\n\n    var StateMap = {\n        DID_START_ITEM_LOAD: 'busy',\n        DID_UPDATE_ITEM_LOAD_PROGRESS: 'loading',\n        DID_THROW_ITEM_INVALID: 'load-invalid',\n        DID_THROW_ITEM_LOAD_ERROR: 'load-error',\n        DID_LOAD_ITEM: 'idle',\n        DID_THROW_ITEM_REMOVE_ERROR: 'remove-error',\n        DID_START_ITEM_REMOVE: 'busy',\n        DID_START_ITEM_PROCESSING: 'busy processing',\n        DID_REQUEST_ITEM_PROCESSING: 'busy processing',\n        DID_UPDATE_ITEM_PROCESS_PROGRESS: 'processing',\n        DID_COMPLETE_ITEM_PROCESSING: 'processing-complete',\n        DID_THROW_ITEM_PROCESSING_ERROR: 'processing-error',\n        DID_THROW_ITEM_PROCESSING_REVERT_ERROR: 'processing-revert-error',\n        DID_ABORT_ITEM_PROCESSING: 'cancelled',\n        DID_REVERT_ITEM_PROCESSING: 'idle',\n    };\n\n    /**\n     * Creates the file view\n     */\n    var create$7 = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        // select\n        root.ref.handleClick = function(e) {\n            return root.dispatch('DID_ACTIVATE_ITEM', { id: props.id });\n        };\n\n        // set id\n        root.element.id = 'filepond--item-' + props.id;\n        root.element.addEventListener('click', root.ref.handleClick);\n\n        // file view\n        root.ref.container = root.appendChildView(\n            root.createChildView(fileWrapper, { id: props.id })\n        );\n\n        // file panel\n        root.ref.panel = root.appendChildView(root.createChildView(panel, { name: 'item-panel' }));\n\n        // default start height\n        root.ref.panel.height = null;\n\n        // by default not marked for removal\n        props.markedForRemoval = false;\n\n        // if not allowed to reorder file items, exit here\n        if (!root.query('GET_ALLOW_REORDER')) return;\n\n        // set to idle so shows grab cursor\n        root.element.dataset.dragState = 'idle';\n\n        var grab = function grab(e) {\n            if (!e.isPrimary) return;\n\n            var removedActivateListener = false;\n\n            var origin = {\n                x: e.pageX,\n                y: e.pageY,\n            };\n\n            props.dragOrigin = {\n                x: root.translateX,\n                y: root.translateY,\n            };\n\n            props.dragCenter = {\n                x: e.offsetX,\n                y: e.offsetY,\n            };\n\n            var dragState = createDragHelper(root.query('GET_ACTIVE_ITEMS'));\n\n            root.dispatch('DID_GRAB_ITEM', { id: props.id, dragState: dragState });\n\n            var drag = function drag(e) {\n                if (!e.isPrimary) return;\n\n                e.stopPropagation();\n                e.preventDefault();\n\n                props.dragOffset = {\n                    x: e.pageX - origin.x,\n                    y: e.pageY - origin.y,\n                };\n\n                // if dragged stop listening to clicks, will re-add when done dragging\n                var dist =\n                    props.dragOffset.x * props.dragOffset.x +\n                    props.dragOffset.y * props.dragOffset.y;\n                if (dist > 16 && !removedActivateListener) {\n                    removedActivateListener = true;\n                    root.element.removeEventListener('click', root.ref.handleClick);\n                }\n\n                root.dispatch('DID_DRAG_ITEM', { id: props.id, dragState: dragState });\n            };\n\n            var drop = function drop(e) {\n                if (!e.isPrimary) return;\n\n                props.dragOffset = {\n                    x: e.pageX - origin.x,\n                    y: e.pageY - origin.y,\n                };\n\n                reset();\n            };\n\n            var cancel = function cancel() {\n                reset();\n            };\n\n            var reset = function reset() {\n                document.removeEventListener('pointercancel', cancel);\n                document.removeEventListener('pointermove', drag);\n                document.removeEventListener('pointerup', drop);\n\n                root.dispatch('DID_DROP_ITEM', { id: props.id, dragState: dragState });\n\n                // start listening to clicks again\n                if (removedActivateListener) {\n                    setTimeout(function() {\n                        return root.element.addEventListener('click', root.ref.handleClick);\n                    }, 0);\n                }\n            };\n\n            document.addEventListener('pointercancel', cancel);\n            document.addEventListener('pointermove', drag);\n            document.addEventListener('pointerup', drop);\n        };\n\n        root.element.addEventListener('pointerdown', grab);\n    };\n\n    var route$1 = createRoute({\n        DID_UPDATE_PANEL_HEIGHT: function DID_UPDATE_PANEL_HEIGHT(_ref2) {\n            var root = _ref2.root,\n                action = _ref2.action;\n            root.height = action.height;\n        },\n    });\n\n    var write$4 = createRoute(\n        {\n            DID_GRAB_ITEM: function DID_GRAB_ITEM(_ref3) {\n                var root = _ref3.root,\n                    props = _ref3.props;\n                props.dragOrigin = {\n                    x: root.translateX,\n                    y: root.translateY,\n                };\n            },\n            DID_DRAG_ITEM: function DID_DRAG_ITEM(_ref4) {\n                var root = _ref4.root;\n                root.element.dataset.dragState = 'drag';\n            },\n            DID_DROP_ITEM: function DID_DROP_ITEM(_ref5) {\n                var root = _ref5.root,\n                    props = _ref5.props;\n                props.dragOffset = null;\n                props.dragOrigin = null;\n                root.element.dataset.dragState = 'drop';\n            },\n        },\n\n        function(_ref6) {\n            var root = _ref6.root,\n                actions = _ref6.actions,\n                props = _ref6.props,\n                shouldOptimize = _ref6.shouldOptimize;\n            if (root.element.dataset.dragState === 'drop') {\n                if (root.scaleX <= 1) {\n                    root.element.dataset.dragState = 'idle';\n                }\n            }\n\n            // select last state change action\n            var action = actions\n                .concat()\n                .filter(function(action) {\n                    return /^DID_/.test(action.type);\n                })\n                .reverse()\n                .find(function(action) {\n                    return StateMap[action.type];\n                });\n\n            // no need to set same state twice\n            if (action && action.type !== props.currentState) {\n                // set current state\n                props.currentState = action.type;\n\n                // set state\n                root.element.dataset.filepondItemState = StateMap[props.currentState] || '';\n            }\n\n            // route actions\n            var aspectRatio =\n                root.query('GET_ITEM_PANEL_ASPECT_RATIO') || root.query('GET_PANEL_ASPECT_RATIO');\n            if (!aspectRatio) {\n                route$1({ root: root, actions: actions, props: props });\n                if (!root.height && root.ref.container.rect.element.height > 0) {\n                    root.height = root.ref.container.rect.element.height;\n                }\n            } else if (!shouldOptimize) {\n                root.height = root.rect.element.width * aspectRatio;\n            }\n\n            // sync panel height with item height\n            if (shouldOptimize) {\n                root.ref.panel.height = null;\n            }\n\n            root.ref.panel.height = root.height;\n        }\n    );\n\n    var item = createView({\n        create: create$7,\n        write: write$4,\n        destroy: function destroy(_ref7) {\n            var root = _ref7.root,\n                props = _ref7.props;\n            root.element.removeEventListener('click', root.ref.handleClick);\n            root.dispatch('RELEASE_ITEM', { query: props.id });\n        },\n        tag: 'li',\n        name: 'item',\n        mixins: {\n            apis: [\n                'id',\n                'interactionMethod',\n                'markedForRemoval',\n                'spawnDate',\n                'dragCenter',\n                'dragOrigin',\n                'dragOffset',\n            ],\n\n            styles: ['translateX', 'translateY', 'scaleX', 'scaleY', 'opacity', 'height'],\n            animations: {\n                scaleX: ITEM_SCALE_SPRING,\n                scaleY: ITEM_SCALE_SPRING,\n                translateX: ITEM_TRANSLATE_SPRING,\n                translateY: ITEM_TRANSLATE_SPRING,\n                opacity: { type: 'tween', duration: 150 },\n            },\n        },\n    });\n\n    var getItemsPerRow = function(horizontalSpace, itemWidth) {\n        // add one pixel leeway, when using percentages for item width total items can be 1.99 per row\n\n        return Math.max(1, Math.floor((horizontalSpace + 1) / itemWidth));\n    };\n\n    var getItemIndexByPosition = function getItemIndexByPosition(view, children, positionInView) {\n        if (!positionInView) return;\n\n        var horizontalSpace = view.rect.element.width;\n        // const children = view.childViews;\n        var l = children.length;\n        var last = null;\n\n        // -1, don't move items to accomodate (either add to top or bottom)\n        if (l === 0 || positionInView.top < children[0].rect.element.top) return -1;\n\n        // let's get the item width\n        var item = children[0];\n        var itemRect = item.rect.element;\n        var itemHorizontalMargin = itemRect.marginLeft + itemRect.marginRight;\n        var itemWidth = itemRect.width + itemHorizontalMargin;\n        var itemsPerRow = getItemsPerRow(horizontalSpace, itemWidth);\n\n        // stack\n        if (itemsPerRow === 1) {\n            for (var index = 0; index < l; index++) {\n                var child = children[index];\n                var childMid = child.rect.outer.top + child.rect.element.height * 0.5;\n                if (positionInView.top < childMid) {\n                    return index;\n                }\n            }\n            return l;\n        }\n\n        // grid\n        var itemVerticalMargin = itemRect.marginTop + itemRect.marginBottom;\n        var itemHeight = itemRect.height + itemVerticalMargin;\n        for (var _index = 0; _index < l; _index++) {\n            var indexX = _index % itemsPerRow;\n            var indexY = Math.floor(_index / itemsPerRow);\n\n            var offsetX = indexX * itemWidth;\n            var offsetY = indexY * itemHeight;\n\n            var itemTop = offsetY - itemRect.marginTop;\n            var itemRight = offsetX + itemWidth;\n            var itemBottom = offsetY + itemHeight + itemRect.marginBottom;\n\n            if (positionInView.top < itemBottom && positionInView.top > itemTop) {\n                if (positionInView.left < itemRight) {\n                    return _index;\n                } else if (_index !== l - 1) {\n                    last = _index;\n                } else {\n                    last = null;\n                }\n            }\n        }\n\n        if (last !== null) {\n            return last;\n        }\n\n        return l;\n    };\n\n    var dropAreaDimensions = {\n        height: 0,\n        width: 0,\n        get getHeight() {\n            return this.height;\n        },\n        set setHeight(val) {\n            if (this.height === 0 || val === 0) this.height = val;\n        },\n        get getWidth() {\n            return this.width;\n        },\n        set setWidth(val) {\n            if (this.width === 0 || val === 0) this.width = val;\n        },\n        setDimensions: function setDimensions(height, width) {\n            if (this.height === 0 || height === 0) this.height = height;\n            if (this.width === 0 || width === 0) this.width = width;\n        },\n    };\n\n    var create$8 = function create(_ref) {\n        var root = _ref.root;\n        // need to set role to list as otherwise it won't be read as a list by VoiceOver\n        attr(root.element, 'role', 'list');\n\n        root.ref.lastItemSpanwDate = Date.now();\n    };\n\n    /**\n     * Inserts a new item\n     * @param root\n     * @param action\n     */\n    var addItemView = function addItemView(_ref2) {\n        var root = _ref2.root,\n            action = _ref2.action;\n        var id = action.id,\n            index = action.index,\n            interactionMethod = action.interactionMethod;\n\n        root.ref.addIndex = index;\n\n        var now = Date.now();\n        var spawnDate = now;\n        var opacity = 1;\n\n        if (interactionMethod !== InteractionMethod.NONE) {\n            opacity = 0;\n            var cooldown = root.query('GET_ITEM_INSERT_INTERVAL');\n            var dist = now - root.ref.lastItemSpanwDate;\n            spawnDate = dist < cooldown ? now + (cooldown - dist) : now;\n        }\n\n        root.ref.lastItemSpanwDate = spawnDate;\n\n        root.appendChildView(\n            root.createChildView(\n                // view type\n                item,\n\n                // props\n                {\n                    spawnDate: spawnDate,\n                    id: id,\n                    opacity: opacity,\n                    interactionMethod: interactionMethod,\n                }\n            ),\n\n            index\n        );\n    };\n\n    var moveItem = function moveItem(item, x, y) {\n        var vx = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n        var vy = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n        // set to null to remove animation while dragging\n        if (item.dragOffset) {\n            item.translateX = null;\n            item.translateY = null;\n            item.translateX = item.dragOrigin.x + item.dragOffset.x;\n            item.translateY = item.dragOrigin.y + item.dragOffset.y;\n            item.scaleX = 1.025;\n            item.scaleY = 1.025;\n        } else {\n            item.translateX = x;\n            item.translateY = y;\n\n            if (Date.now() > item.spawnDate) {\n                // reveal element\n                if (item.opacity === 0) {\n                    introItemView(item, x, y, vx, vy);\n                }\n\n                // make sure is default scale every frame\n                item.scaleX = 1;\n                item.scaleY = 1;\n                item.opacity = 1;\n            }\n        }\n    };\n\n    var introItemView = function introItemView(item, x, y, vx, vy) {\n        if (item.interactionMethod === InteractionMethod.NONE) {\n            item.translateX = null;\n            item.translateX = x;\n            item.translateY = null;\n            item.translateY = y;\n        } else if (item.interactionMethod === InteractionMethod.DROP) {\n            item.translateX = null;\n            item.translateX = x - vx * 20;\n\n            item.translateY = null;\n            item.translateY = y - vy * 10;\n\n            item.scaleX = 0.8;\n            item.scaleY = 0.8;\n        } else if (item.interactionMethod === InteractionMethod.BROWSE) {\n            item.translateY = null;\n            item.translateY = y - 30;\n        } else if (item.interactionMethod === InteractionMethod.API) {\n            item.translateX = null;\n            item.translateX = x - 30;\n            item.translateY = null;\n        }\n    };\n\n    /**\n     * Removes an existing item\n     * @param root\n     * @param action\n     */\n    var removeItemView = function removeItemView(_ref3) {\n        var root = _ref3.root,\n            action = _ref3.action;\n        var id = action.id;\n\n        // get the view matching the given id\n        var view = root.childViews.find(function(child) {\n            return child.id === id;\n        });\n\n        // if no view found, exit\n        if (!view) {\n            return;\n        }\n\n        // animate view out of view\n        view.scaleX = 0.9;\n        view.scaleY = 0.9;\n        view.opacity = 0;\n\n        // mark for removal\n        view.markedForRemoval = true;\n    };\n\n    var getItemHeight = function getItemHeight(child) {\n        return (\n            child.rect.element.height +\n            child.rect.element.marginBottom * 0.5 +\n            child.rect.element.marginTop * 0.5\n        );\n    };\n    var getItemWidth = function getItemWidth(child) {\n        return (\n            child.rect.element.width +\n            child.rect.element.marginLeft * 0.5 +\n            child.rect.element.marginRight * 0.5\n        );\n    };\n\n    var dragItem = function dragItem(_ref4) {\n        var root = _ref4.root,\n            action = _ref4.action;\n        var id = action.id,\n            dragState = action.dragState;\n\n        // reference to item\n        var item = root.query('GET_ITEM', { id: id });\n\n        // get the view matching the given id\n        var view = root.childViews.find(function(child) {\n            return child.id === id;\n        });\n\n        var numItems = root.childViews.length;\n        var oldIndex = dragState.getItemIndex(item);\n\n        // if no view found, exit\n        if (!view) return;\n\n        var dragPosition = {\n            x: view.dragOrigin.x + view.dragOffset.x + view.dragCenter.x,\n            y: view.dragOrigin.y + view.dragOffset.y + view.dragCenter.y,\n        };\n\n        // get drag area dimensions\n        var dragHeight = getItemHeight(view);\n        var dragWidth = getItemWidth(view);\n\n        // get rows and columns (There will always be at least one row and one column if a file is present)\n        var cols = Math.floor(root.rect.outer.width / dragWidth);\n        if (cols > numItems) cols = numItems;\n\n        // rows are used to find when we have left the preview area bounding box\n        var rows = Math.floor(numItems / cols + 1);\n\n        dropAreaDimensions.setHeight = dragHeight * rows;\n        dropAreaDimensions.setWidth = dragWidth * cols;\n\n        // get new index of dragged item\n        var location = {\n            y: Math.floor(dragPosition.y / dragHeight),\n            x: Math.floor(dragPosition.x / dragWidth),\n            getGridIndex: function getGridIndex() {\n                if (\n                    dragPosition.y > dropAreaDimensions.getHeight ||\n                    dragPosition.y < 0 ||\n                    dragPosition.x > dropAreaDimensions.getWidth ||\n                    dragPosition.x < 0\n                )\n                    return oldIndex;\n                return this.y * cols + this.x;\n            },\n            getColIndex: function getColIndex() {\n                var items = root.query('GET_ACTIVE_ITEMS');\n                var visibleChildren = root.childViews.filter(function(child) {\n                    return child.rect.element.height;\n                });\n                var children = items.map(function(item) {\n                    return visibleChildren.find(function(childView) {\n                        return childView.id === item.id;\n                    });\n                });\n\n                var currentIndex = children.findIndex(function(child) {\n                    return child === view;\n                });\n                var dragHeight = getItemHeight(view);\n                var l = children.length;\n                var idx = l;\n                var childHeight = 0;\n                var childBottom = 0;\n                var childTop = 0;\n                for (var i = 0; i < l; i++) {\n                    childHeight = getItemHeight(children[i]);\n                    childTop = childBottom;\n                    childBottom = childTop + childHeight;\n                    if (dragPosition.y < childBottom) {\n                        if (currentIndex > i) {\n                            if (dragPosition.y < childTop + dragHeight) {\n                                idx = i;\n                                break;\n                            }\n                            continue;\n                        }\n                        idx = i;\n                        break;\n                    }\n                }\n                return idx;\n            },\n        };\n\n        // get new index\n        var index = cols > 1 ? location.getGridIndex() : location.getColIndex();\n        root.dispatch('MOVE_ITEM', { query: view, index: index });\n\n        // if the index of the item changed, dispatch reorder action\n        var currentIndex = dragState.getIndex();\n\n        if (currentIndex === undefined || currentIndex !== index) {\n            dragState.setIndex(index);\n\n            if (currentIndex === undefined) return;\n\n            root.dispatch('DID_REORDER_ITEMS', {\n                items: root.query('GET_ACTIVE_ITEMS'),\n                origin: oldIndex,\n                target: index,\n            });\n        }\n    };\n\n    /**\n     * Setup action routes\n     */\n    var route$2 = createRoute({\n        DID_ADD_ITEM: addItemView,\n        DID_REMOVE_ITEM: removeItemView,\n        DID_DRAG_ITEM: dragItem,\n    });\n\n    /**\n     * Write to view\n     * @param root\n     * @param actions\n     * @param props\n     */\n    var write$5 = function write(_ref5) {\n        var root = _ref5.root,\n            props = _ref5.props,\n            actions = _ref5.actions,\n            shouldOptimize = _ref5.shouldOptimize;\n        // route actions\n        route$2({ root: root, props: props, actions: actions });\n        var dragCoordinates = props.dragCoordinates;\n\n        // available space on horizontal axis\n        var horizontalSpace = root.rect.element.width;\n\n        // only draw children that have dimensions\n        var visibleChildren = root.childViews.filter(function(child) {\n            return child.rect.element.height;\n        });\n\n        // sort based on current active items\n        var children = root\n            .query('GET_ACTIVE_ITEMS')\n            .map(function(item) {\n                return visibleChildren.find(function(child) {\n                    return child.id === item.id;\n                });\n            })\n            .filter(function(item) {\n                return item;\n            });\n\n        // get index\n        var dragIndex = dragCoordinates\n            ? getItemIndexByPosition(root, children, dragCoordinates)\n            : null;\n\n        // add index is used to reserve the dropped/added item index till the actual item is rendered\n        var addIndex = root.ref.addIndex || null;\n\n        // add index no longer needed till possibly next draw\n        root.ref.addIndex = null;\n\n        var dragIndexOffset = 0;\n        var removeIndexOffset = 0;\n        var addIndexOffset = 0;\n\n        if (children.length === 0) return;\n\n        var childRect = children[0].rect.element;\n        var itemVerticalMargin = childRect.marginTop + childRect.marginBottom;\n        var itemHorizontalMargin = childRect.marginLeft + childRect.marginRight;\n        var itemWidth = childRect.width + itemHorizontalMargin;\n        var itemHeight = childRect.height + itemVerticalMargin;\n        var itemsPerRow = getItemsPerRow(horizontalSpace, itemWidth);\n\n        // stack\n        if (itemsPerRow === 1) {\n            var offsetY = 0;\n            var dragOffset = 0;\n\n            children.forEach(function(child, index) {\n                if (dragIndex) {\n                    var dist = index - dragIndex;\n                    if (dist === -2) {\n                        dragOffset = -itemVerticalMargin * 0.25;\n                    } else if (dist === -1) {\n                        dragOffset = -itemVerticalMargin * 0.75;\n                    } else if (dist === 0) {\n                        dragOffset = itemVerticalMargin * 0.75;\n                    } else if (dist === 1) {\n                        dragOffset = itemVerticalMargin * 0.25;\n                    } else {\n                        dragOffset = 0;\n                    }\n                }\n\n                if (shouldOptimize) {\n                    child.translateX = null;\n                    child.translateY = null;\n                }\n\n                if (!child.markedForRemoval) {\n                    moveItem(child, 0, offsetY + dragOffset);\n                }\n\n                var itemHeight = child.rect.element.height + itemVerticalMargin;\n\n                var visualHeight = itemHeight * (child.markedForRemoval ? child.opacity : 1);\n\n                offsetY += visualHeight;\n            });\n        }\n        // grid\n        else {\n            var prevX = 0;\n            var prevY = 0;\n\n            children.forEach(function(child, index) {\n                if (index === dragIndex) {\n                    dragIndexOffset = 1;\n                }\n\n                if (index === addIndex) {\n                    addIndexOffset += 1;\n                }\n\n                if (child.markedForRemoval && child.opacity < 0.5) {\n                    removeIndexOffset -= 1;\n                }\n\n                var visualIndex = index + addIndexOffset + dragIndexOffset + removeIndexOffset;\n\n                var indexX = visualIndex % itemsPerRow;\n                var indexY = Math.floor(visualIndex / itemsPerRow);\n\n                var offsetX = indexX * itemWidth;\n                var offsetY = indexY * itemHeight;\n\n                var vectorX = Math.sign(offsetX - prevX);\n                var vectorY = Math.sign(offsetY - prevY);\n\n                prevX = offsetX;\n                prevY = offsetY;\n\n                if (child.markedForRemoval) return;\n\n                if (shouldOptimize) {\n                    child.translateX = null;\n                    child.translateY = null;\n                }\n\n                moveItem(child, offsetX, offsetY, vectorX, vectorY);\n            });\n        }\n    };\n\n    /**\n     * Filters actions that are meant specifically for a certain child of the list\n     * @param child\n     * @param actions\n     */\n    var filterSetItemActions = function filterSetItemActions(child, actions) {\n        return actions.filter(function(action) {\n            // if action has an id, filter out actions that don't have this child id\n            if (action.data && action.data.id) {\n                return child.id === action.data.id;\n            }\n\n            // allow all other actions\n            return true;\n        });\n    };\n\n    var list = createView({\n        create: create$8,\n        write: write$5,\n        tag: 'ul',\n        name: 'list',\n        didWriteView: function didWriteView(_ref6) {\n            var root = _ref6.root;\n            root.childViews\n                .filter(function(view) {\n                    return view.markedForRemoval && view.opacity === 0 && view.resting;\n                })\n                .forEach(function(view) {\n                    view._destroy();\n                    root.removeChildView(view);\n                });\n        },\n        filterFrameActionsForChild: filterSetItemActions,\n        mixins: {\n            apis: ['dragCoordinates'],\n        },\n    });\n\n    var create$9 = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        root.ref.list = root.appendChildView(root.createChildView(list));\n        props.dragCoordinates = null;\n        props.overflowing = false;\n    };\n\n    var storeDragCoordinates = function storeDragCoordinates(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props,\n            action = _ref2.action;\n        if (!root.query('GET_ITEM_INSERT_LOCATION_FREEDOM')) return;\n        props.dragCoordinates = {\n            left: action.position.scopeLeft - root.ref.list.rect.element.left,\n            top:\n                action.position.scopeTop -\n                (root.rect.outer.top + root.rect.element.marginTop + root.rect.element.scrollTop),\n        };\n    };\n\n    var clearDragCoordinates = function clearDragCoordinates(_ref3) {\n        var props = _ref3.props;\n        props.dragCoordinates = null;\n    };\n\n    var route$3 = createRoute({\n        DID_DRAG: storeDragCoordinates,\n        DID_END_DRAG: clearDragCoordinates,\n    });\n\n    var write$6 = function write(_ref4) {\n        var root = _ref4.root,\n            props = _ref4.props,\n            actions = _ref4.actions;\n\n        // route actions\n        route$3({ root: root, props: props, actions: actions });\n\n        // current drag position\n        root.ref.list.dragCoordinates = props.dragCoordinates;\n\n        // if currently overflowing but no longer received overflow\n        if (props.overflowing && !props.overflow) {\n            props.overflowing = false;\n\n            // reset overflow state\n            root.element.dataset.state = '';\n            root.height = null;\n        }\n\n        // if is not overflowing currently but does receive overflow value\n        if (props.overflow) {\n            var newHeight = Math.round(props.overflow);\n            if (newHeight !== root.height) {\n                props.overflowing = true;\n                root.element.dataset.state = 'overflow';\n                root.height = newHeight;\n            }\n        }\n    };\n\n    var listScroller = createView({\n        create: create$9,\n        write: write$6,\n        name: 'list-scroller',\n        mixins: {\n            apis: ['overflow', 'dragCoordinates'],\n            styles: ['height', 'translateY'],\n            animations: {\n                translateY: 'spring',\n            },\n        },\n    });\n\n    var attrToggle = function attrToggle(element, name, state) {\n        var enabledValue = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n        if (state) {\n            attr(element, name, enabledValue);\n        } else {\n            element.removeAttribute(name);\n        }\n    };\n\n    var resetFileInput = function resetFileInput(input) {\n        // no value, no need to reset\n        if (!input || input.value === '') {\n            return;\n        }\n\n        try {\n            // for modern browsers\n            input.value = '';\n        } catch (err) {}\n\n        // for IE10\n        if (input.value) {\n            // quickly append input to temp form and reset form\n            var form = createElement$1('form');\n            var parentNode = input.parentNode;\n            var ref = input.nextSibling;\n            form.appendChild(input);\n            form.reset();\n\n            // re-inject input where it originally was\n            if (ref) {\n                parentNode.insertBefore(input, ref);\n            } else {\n                parentNode.appendChild(input);\n            }\n        }\n    };\n\n    var create$a = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        // set id so can be referenced from outside labels\n        root.element.id = 'filepond--browser-' + props.id;\n\n        // set name of element (is removed when a value is set)\n        attr(root.element, 'name', root.query('GET_NAME'));\n\n        // we have to link this element to the status element\n        attr(root.element, 'aria-controls', 'filepond--assistant-' + props.id);\n\n        // set label, we use labelled by as otherwise the screenreader does not read the \"browse\" text in the label (as it has tabindex: 0)\n        attr(root.element, 'aria-labelledby', 'filepond--drop-label-' + props.id);\n\n        // set configurable props\n        setAcceptedFileTypes({\n            root: root,\n            action: { value: root.query('GET_ACCEPTED_FILE_TYPES') },\n        });\n        toggleAllowMultiple({ root: root, action: { value: root.query('GET_ALLOW_MULTIPLE') } });\n        toggleDirectoryFilter({\n            root: root,\n            action: { value: root.query('GET_ALLOW_DIRECTORIES_ONLY') },\n        });\n        toggleDisabled({ root: root });\n        toggleRequired({ root: root, action: { value: root.query('GET_REQUIRED') } });\n        setCaptureMethod({ root: root, action: { value: root.query('GET_CAPTURE_METHOD') } });\n\n        // handle changes to the input field\n        root.ref.handleChange = function(e) {\n            if (!root.element.value) {\n                return;\n            }\n\n            // extract files and move value of webkitRelativePath path to _relativePath\n            var files = Array.from(root.element.files).map(function(file) {\n                file._relativePath = file.webkitRelativePath;\n                return file;\n            });\n\n            // we add a little delay so the OS file select window can move out of the way before we add our file\n            setTimeout(function() {\n                // load files\n                props.onload(files);\n\n                // reset input, it's just for exposing a method to drop files, should not retain any state\n                resetFileInput(root.element);\n            }, 250);\n        };\n\n        root.element.addEventListener('change', root.ref.handleChange);\n    };\n\n    var setAcceptedFileTypes = function setAcceptedFileTypes(_ref2) {\n        var root = _ref2.root,\n            action = _ref2.action;\n        if (!root.query('GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE')) return;\n        attrToggle(\n            root.element,\n            'accept',\n            !!action.value,\n            action.value ? action.value.join(',') : ''\n        );\n    };\n\n    var toggleAllowMultiple = function toggleAllowMultiple(_ref3) {\n        var root = _ref3.root,\n            action = _ref3.action;\n        attrToggle(root.element, 'multiple', action.value);\n    };\n\n    var toggleDirectoryFilter = function toggleDirectoryFilter(_ref4) {\n        var root = _ref4.root,\n            action = _ref4.action;\n        attrToggle(root.element, 'webkitdirectory', action.value);\n    };\n\n    var toggleDisabled = function toggleDisabled(_ref5) {\n        var root = _ref5.root;\n        var isDisabled = root.query('GET_DISABLED');\n        var doesAllowBrowse = root.query('GET_ALLOW_BROWSE');\n        var disableField = isDisabled || !doesAllowBrowse;\n        attrToggle(root.element, 'disabled', disableField);\n    };\n\n    var toggleRequired = function toggleRequired(_ref6) {\n        var root = _ref6.root,\n            action = _ref6.action;\n        // want to remove required, always possible\n        if (!action.value) {\n            attrToggle(root.element, 'required', false);\n        }\n        // if want to make required, only possible when zero items\n        else if (root.query('GET_TOTAL_ITEMS') === 0) {\n            attrToggle(root.element, 'required', true);\n        }\n    };\n\n    var setCaptureMethod = function setCaptureMethod(_ref7) {\n        var root = _ref7.root,\n            action = _ref7.action;\n        attrToggle(\n            root.element,\n            'capture',\n            !!action.value,\n            action.value === true ? '' : action.value\n        );\n    };\n\n    var updateRequiredStatus = function updateRequiredStatus(_ref8) {\n        var root = _ref8.root;\n        var element = root.element;\n        // always remove the required attribute when more than zero items\n        if (root.query('GET_TOTAL_ITEMS') > 0) {\n            attrToggle(element, 'required', false);\n            attrToggle(element, 'name', false);\n\n            // still has items\n            var activeItems = root.query('GET_ACTIVE_ITEMS');\n            var hasInvalidField = false;\n            for (var i = 0; i < activeItems.length; i++) {\n                if (activeItems[i].status === ItemStatus.LOAD_ERROR) {\n                    hasInvalidField = true;\n                }\n            }\n            // set validity status\n            root.element.setCustomValidity(\n                hasInvalidField ? root.query('GET_LABEL_INVALID_FIELD') : ''\n            );\n        } else {\n            // add name attribute\n            attrToggle(element, 'name', true, root.query('GET_NAME'));\n\n            // remove any validation messages\n            var shouldCheckValidity = root.query('GET_CHECK_VALIDITY');\n            if (shouldCheckValidity) {\n                element.setCustomValidity('');\n            }\n\n            // we only add required if the field has been deemed required\n            if (root.query('GET_REQUIRED')) {\n                attrToggle(element, 'required', true);\n            }\n        }\n    };\n\n    var updateFieldValidityStatus = function updateFieldValidityStatus(_ref9) {\n        var root = _ref9.root;\n        var shouldCheckValidity = root.query('GET_CHECK_VALIDITY');\n        if (!shouldCheckValidity) return;\n        root.element.setCustomValidity(root.query('GET_LABEL_INVALID_FIELD'));\n    };\n\n    var browser = createView({\n        tag: 'input',\n        name: 'browser',\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        attributes: {\n            type: 'file',\n        },\n\n        create: create$a,\n        destroy: function destroy(_ref10) {\n            var root = _ref10.root;\n            root.element.removeEventListener('change', root.ref.handleChange);\n        },\n        write: createRoute({\n            DID_LOAD_ITEM: updateRequiredStatus,\n            DID_REMOVE_ITEM: updateRequiredStatus,\n            DID_THROW_ITEM_INVALID: updateFieldValidityStatus,\n\n            DID_SET_DISABLED: toggleDisabled,\n            DID_SET_ALLOW_BROWSE: toggleDisabled,\n            DID_SET_ALLOW_DIRECTORIES_ONLY: toggleDirectoryFilter,\n            DID_SET_ALLOW_MULTIPLE: toggleAllowMultiple,\n            DID_SET_ACCEPTED_FILE_TYPES: setAcceptedFileTypes,\n            DID_SET_CAPTURE_METHOD: setCaptureMethod,\n            DID_SET_REQUIRED: toggleRequired,\n        }),\n    });\n\n    var Key = {\n        ENTER: 13,\n        SPACE: 32,\n    };\n\n    var create$b = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        // create the label and link it to the file browser\n        var label = createElement$1('label');\n        attr(label, 'for', 'filepond--browser-' + props.id);\n\n        // use for labeling file input (aria-labelledby on file input)\n        attr(label, 'id', 'filepond--drop-label-' + props.id);\n\n        // handle keys\n        root.ref.handleKeyDown = function(e) {\n            var isActivationKey = e.keyCode === Key.ENTER || e.keyCode === Key.SPACE;\n            if (!isActivationKey) return;\n            // stops from triggering the element a second time\n            e.preventDefault();\n\n            // click link (will then in turn activate file input)\n            root.ref.label.click();\n        };\n\n        root.ref.handleClick = function(e) {\n            var isLabelClick = e.target === label || label.contains(e.target);\n\n            // don't want to click twice\n            if (isLabelClick) return;\n\n            // click link (will then in turn activate file input)\n            root.ref.label.click();\n        };\n\n        // attach events\n        label.addEventListener('keydown', root.ref.handleKeyDown);\n        root.element.addEventListener('click', root.ref.handleClick);\n\n        // update\n        updateLabelValue(label, props.caption);\n\n        // add!\n        root.appendChild(label);\n        root.ref.label = label;\n    };\n\n    var updateLabelValue = function updateLabelValue(label, value) {\n        label.innerHTML = value;\n        var clickable = label.querySelector('.filepond--label-action');\n        if (clickable) {\n            attr(clickable, 'tabindex', '0');\n        }\n        return value;\n    };\n\n    var dropLabel = createView({\n        name: 'drop-label',\n        ignoreRect: true,\n        create: create$b,\n        destroy: function destroy(_ref2) {\n            var root = _ref2.root;\n            root.ref.label.addEventListener('keydown', root.ref.handleKeyDown);\n            root.element.removeEventListener('click', root.ref.handleClick);\n        },\n        write: createRoute({\n            DID_SET_LABEL_IDLE: function DID_SET_LABEL_IDLE(_ref3) {\n                var root = _ref3.root,\n                    action = _ref3.action;\n                updateLabelValue(root.ref.label, action.value);\n            },\n        }),\n\n        mixins: {\n            styles: ['opacity', 'translateX', 'translateY'],\n            animations: {\n                opacity: { type: 'tween', duration: 150 },\n                translateX: 'spring',\n                translateY: 'spring',\n            },\n        },\n    });\n\n    var blob = createView({\n        name: 'drip-blob',\n        ignoreRect: true,\n        mixins: {\n            styles: ['translateX', 'translateY', 'scaleX', 'scaleY', 'opacity'],\n            animations: {\n                scaleX: 'spring',\n                scaleY: 'spring',\n                translateX: 'spring',\n                translateY: 'spring',\n                opacity: { type: 'tween', duration: 250 },\n            },\n        },\n    });\n\n    var addBlob = function addBlob(_ref) {\n        var root = _ref.root;\n        var centerX = root.rect.element.width * 0.5;\n        var centerY = root.rect.element.height * 0.5;\n\n        root.ref.blob = root.appendChildView(\n            root.createChildView(blob, {\n                opacity: 0,\n                scaleX: 2.5,\n                scaleY: 2.5,\n                translateX: centerX,\n                translateY: centerY,\n            })\n        );\n    };\n\n    var moveBlob = function moveBlob(_ref2) {\n        var root = _ref2.root,\n            action = _ref2.action;\n        if (!root.ref.blob) {\n            addBlob({ root: root });\n            return;\n        }\n\n        root.ref.blob.translateX = action.position.scopeLeft;\n        root.ref.blob.translateY = action.position.scopeTop;\n        root.ref.blob.scaleX = 1;\n        root.ref.blob.scaleY = 1;\n        root.ref.blob.opacity = 1;\n    };\n\n    var hideBlob = function hideBlob(_ref3) {\n        var root = _ref3.root;\n        if (!root.ref.blob) {\n            return;\n        }\n        root.ref.blob.opacity = 0;\n    };\n\n    var explodeBlob = function explodeBlob(_ref4) {\n        var root = _ref4.root;\n        if (!root.ref.blob) {\n            return;\n        }\n        root.ref.blob.scaleX = 2.5;\n        root.ref.blob.scaleY = 2.5;\n        root.ref.blob.opacity = 0;\n    };\n\n    var write$7 = function write(_ref5) {\n        var root = _ref5.root,\n            props = _ref5.props,\n            actions = _ref5.actions;\n        route$4({ root: root, props: props, actions: actions });\n        var blob = root.ref.blob;\n\n        if (actions.length === 0 && blob && blob.opacity === 0) {\n            root.removeChildView(blob);\n            root.ref.blob = null;\n        }\n    };\n\n    var route$4 = createRoute({\n        DID_DRAG: moveBlob,\n        DID_DROP: explodeBlob,\n        DID_END_DRAG: hideBlob,\n    });\n\n    var drip = createView({\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        name: 'drip',\n        write: write$7,\n    });\n\n    var setInputFiles = function setInputFiles(element, files) {\n        try {\n            // Create a DataTransfer instance and add a newly created file\n            var dataTransfer = new DataTransfer();\n            files.forEach(function(file) {\n                if (file instanceof File) {\n                    dataTransfer.items.add(file);\n                } else {\n                    dataTransfer.items.add(\n                        new File([file], file.name, {\n                            type: file.type,\n                        })\n                    );\n                }\n            });\n\n            // Assign the DataTransfer files list to the file input\n            element.files = dataTransfer.files;\n        } catch (err) {\n            return false;\n        }\n        return true;\n    };\n\n    var create$c = function create(_ref) {\n        var root = _ref.root;\n        root.ref.fields = {};\n        var legend = document.createElement('legend');\n        legend.textContent = 'Files';\n        root.element.appendChild(legend);\n    };\n\n    var getField = function getField(root, id) {\n        return root.ref.fields[id];\n    };\n\n    var syncFieldPositionsWithItems = function syncFieldPositionsWithItems(root) {\n        root.query('GET_ACTIVE_ITEMS').forEach(function(item) {\n            if (!root.ref.fields[item.id]) return;\n            root.element.appendChild(root.ref.fields[item.id]);\n        });\n    };\n\n    var didReorderItems = function didReorderItems(_ref2) {\n        var root = _ref2.root;\n        return syncFieldPositionsWithItems(root);\n    };\n\n    var didAddItem = function didAddItem(_ref3) {\n        var root = _ref3.root,\n            action = _ref3.action;\n        var fileItem = root.query('GET_ITEM', action.id);\n        var isLocalFile = fileItem.origin === FileOrigin.LOCAL;\n        var shouldUseFileInput = !isLocalFile && root.query('SHOULD_UPDATE_FILE_INPUT');\n        var dataContainer = createElement$1('input');\n        dataContainer.type = shouldUseFileInput ? 'file' : 'hidden';\n        dataContainer.name = root.query('GET_NAME');\n        root.ref.fields[action.id] = dataContainer;\n        syncFieldPositionsWithItems(root);\n    };\n\n    var didLoadItem$1 = function didLoadItem(_ref4) {\n        var root = _ref4.root,\n            action = _ref4.action;\n        var field = getField(root, action.id);\n        if (!field) return;\n\n        // store server ref in hidden input\n        if (action.serverFileReference !== null) field.value = action.serverFileReference;\n\n        // store file item in file input\n        if (!root.query('SHOULD_UPDATE_FILE_INPUT')) return;\n\n        var fileItem = root.query('GET_ITEM', action.id);\n        setInputFiles(field, [fileItem.file]);\n    };\n\n    var didPrepareOutput = function didPrepareOutput(_ref5) {\n        var root = _ref5.root,\n            action = _ref5.action;\n        // this timeout pushes the handler after 'load'\n        if (!root.query('SHOULD_UPDATE_FILE_INPUT')) return;\n        setTimeout(function() {\n            var field = getField(root, action.id);\n            if (!field) return;\n            setInputFiles(field, [action.file]);\n        }, 0);\n    };\n\n    var didSetDisabled = function didSetDisabled(_ref6) {\n        var root = _ref6.root;\n        root.element.disabled = root.query('GET_DISABLED');\n    };\n\n    var didRemoveItem = function didRemoveItem(_ref7) {\n        var root = _ref7.root,\n            action = _ref7.action;\n        var field = getField(root, action.id);\n        if (!field) return;\n        if (field.parentNode) field.parentNode.removeChild(field);\n        delete root.ref.fields[action.id];\n    };\n\n    // only runs for server files. will refuse to update the value if the field\n    // is a file field\n    var didDefineValue = function didDefineValue(_ref8) {\n        var root = _ref8.root,\n            action = _ref8.action;\n        var field = getField(root, action.id);\n        if (!field) return;\n        if (action.value === null) {\n            // clear field value\n            field.removeAttribute('value');\n        } else {\n            // set field value\n            if (field.type != 'file') {\n                field.value = action.value;\n            }\n        }\n        syncFieldPositionsWithItems(root);\n    };\n\n    var write$8 = createRoute({\n        DID_SET_DISABLED: didSetDisabled,\n        DID_ADD_ITEM: didAddItem,\n        DID_LOAD_ITEM: didLoadItem$1,\n        DID_REMOVE_ITEM: didRemoveItem,\n        DID_DEFINE_VALUE: didDefineValue,\n        DID_PREPARE_OUTPUT: didPrepareOutput,\n        DID_REORDER_ITEMS: didReorderItems,\n        DID_SORT_ITEMS: didReorderItems,\n    });\n\n    var data = createView({\n        tag: 'fieldset',\n        name: 'data',\n        create: create$c,\n        write: write$8,\n        ignoreRect: true,\n    });\n\n    var getRootNode = function getRootNode(element) {\n        return 'getRootNode' in element ? element.getRootNode() : document;\n    };\n\n    var images = ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp', 'svg', 'tiff'];\n    var text$1 = ['css', 'csv', 'html', 'txt'];\n    var map = {\n        zip: 'zip|compressed',\n        epub: 'application/epub+zip',\n    };\n\n    var guesstimateMimeType = function guesstimateMimeType() {\n        var extension = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        extension = extension.toLowerCase();\n        if (images.includes(extension)) {\n            return (\n                'image/' +\n                (extension === 'jpg' ? 'jpeg' : extension === 'svg' ? 'svg+xml' : extension)\n            );\n        }\n        if (text$1.includes(extension)) {\n            return 'text/' + extension;\n        }\n\n        return map[extension] || '';\n    };\n\n    var requestDataTransferItems = function requestDataTransferItems(dataTransfer) {\n        return new Promise(function(resolve, reject) {\n            // try to get links from transfer, if found we'll exit immediately (unless a file is in the dataTransfer as well, this is because Firefox could represent the file as a URL and a file object at the same time)\n            var links = getLinks(dataTransfer);\n            if (links.length && !hasFiles(dataTransfer)) {\n                return resolve(links);\n            }\n            // try to get files from the transfer\n            getFiles(dataTransfer).then(resolve);\n        });\n    };\n\n    /**\n     * Test if datatransfer has files\n     */\n    var hasFiles = function hasFiles(dataTransfer) {\n        if (dataTransfer.files) return dataTransfer.files.length > 0;\n        return false;\n    };\n\n    /**\n     * Extracts files from a DataTransfer object\n     */\n    var getFiles = function getFiles(dataTransfer) {\n        return new Promise(function(resolve, reject) {\n            // get the transfer items as promises\n            var promisedFiles = (dataTransfer.items ? Array.from(dataTransfer.items) : [])\n                // only keep file system items (files and directories)\n                .filter(function(item) {\n                    return isFileSystemItem(item);\n                })\n\n                // map each item to promise\n                .map(function(item) {\n                    return getFilesFromItem(item);\n                });\n\n            // if is empty, see if we can extract some info from the files property as a fallback\n            if (!promisedFiles.length) {\n                // TODO: test for directories (should not be allowed)\n                // Use FileReader, problem is that the files property gets lost in the process\n                resolve(dataTransfer.files ? Array.from(dataTransfer.files) : []);\n                return;\n            }\n\n            // done!\n            Promise.all(promisedFiles)\n                .then(function(returnedFileGroups) {\n                    // flatten groups\n                    var files = [];\n                    returnedFileGroups.forEach(function(group) {\n                        files.push.apply(files, group);\n                    });\n\n                    // done (filter out empty files)!\n                    resolve(\n                        files\n                            .filter(function(file) {\n                                return file;\n                            })\n                            .map(function(file) {\n                                if (!file._relativePath)\n                                    file._relativePath = file.webkitRelativePath;\n                                return file;\n                            })\n                    );\n                })\n                .catch(console.error);\n        });\n    };\n\n    var isFileSystemItem = function isFileSystemItem(item) {\n        if (isEntry(item)) {\n            var entry = getAsEntry(item);\n            if (entry) {\n                return entry.isFile || entry.isDirectory;\n            }\n        }\n        return item.kind === 'file';\n    };\n\n    var getFilesFromItem = function getFilesFromItem(item) {\n        return new Promise(function(resolve, reject) {\n            if (isDirectoryEntry(item)) {\n                getFilesInDirectory(getAsEntry(item))\n                    .then(resolve)\n                    .catch(reject);\n                return;\n            }\n\n            resolve([item.getAsFile()]);\n        });\n    };\n\n    var getFilesInDirectory = function getFilesInDirectory(entry) {\n        return new Promise(function(resolve, reject) {\n            var files = [];\n\n            // the total entries to read\n            var dirCounter = 0;\n            var fileCounter = 0;\n\n            var resolveIfDone = function resolveIfDone() {\n                if (fileCounter === 0 && dirCounter === 0) {\n                    resolve(files);\n                }\n            };\n\n            // the recursive function\n            var readEntries = function readEntries(dirEntry) {\n                dirCounter++;\n\n                var directoryReader = dirEntry.createReader();\n\n                // directories are returned in batches, we need to process all batches before we're done\n                var readBatch = function readBatch() {\n                    directoryReader.readEntries(function(entries) {\n                        if (entries.length === 0) {\n                            dirCounter--;\n                            resolveIfDone();\n                            return;\n                        }\n\n                        entries.forEach(function(entry) {\n                            // recursively read more directories\n                            if (entry.isDirectory) {\n                                readEntries(entry);\n                            } else {\n                                // read as file\n                                fileCounter++;\n\n                                entry.file(function(file) {\n                                    var correctedFile = correctMissingFileType(file);\n                                    if (entry.fullPath)\n                                        correctedFile._relativePath = entry.fullPath;\n                                    files.push(correctedFile);\n                                    fileCounter--;\n                                    resolveIfDone();\n                                });\n                            }\n                        });\n\n                        // try to get next batch of files\n                        readBatch();\n                    }, reject);\n                };\n\n                // read first batch of files\n                readBatch();\n            };\n\n            // go!\n            readEntries(entry);\n        });\n    };\n\n    var correctMissingFileType = function correctMissingFileType(file) {\n        if (file.type.length) return file;\n        var date = file.lastModifiedDate;\n        var name = file.name;\n        var type = guesstimateMimeType(getExtensionFromFilename(file.name));\n        if (!type.length) return file;\n        file = file.slice(0, file.size, type);\n        file.name = name;\n        file.lastModifiedDate = date;\n        return file;\n    };\n\n    var isDirectoryEntry = function isDirectoryEntry(item) {\n        return isEntry(item) && (getAsEntry(item) || {}).isDirectory;\n    };\n\n    var isEntry = function isEntry(item) {\n        return 'webkitGetAsEntry' in item;\n    };\n\n    var getAsEntry = function getAsEntry(item) {\n        return item.webkitGetAsEntry();\n    };\n\n    /**\n     * Extracts links from a DataTransfer object\n     */\n    var getLinks = function getLinks(dataTransfer) {\n        var links = [];\n        try {\n            // look in meta data property\n            links = getLinksFromTransferMetaData(dataTransfer);\n            if (links.length) {\n                return links;\n            }\n            links = getLinksFromTransferURLData(dataTransfer);\n        } catch (e) {\n            // nope nope nope (probably IE trouble)\n        }\n        return links;\n    };\n\n    var getLinksFromTransferURLData = function getLinksFromTransferURLData(dataTransfer) {\n        var data = dataTransfer.getData('url');\n        if (typeof data === 'string' && data.length) {\n            return [data];\n        }\n        return [];\n    };\n\n    var getLinksFromTransferMetaData = function getLinksFromTransferMetaData(dataTransfer) {\n        var data = dataTransfer.getData('text/html');\n        if (typeof data === 'string' && data.length) {\n            var matches = data.match(/src\\s*=\\s*\"(.+?)\"/);\n            if (matches) {\n                return [matches[1]];\n            }\n        }\n        return [];\n    };\n\n    var dragNDropObservers = [];\n\n    var eventPosition = function eventPosition(e) {\n        return {\n            pageLeft: e.pageX,\n            pageTop: e.pageY,\n            scopeLeft: e.offsetX || e.layerX,\n            scopeTop: e.offsetY || e.layerY,\n        };\n    };\n\n    var createDragNDropClient = function createDragNDropClient(\n        element,\n        scopeToObserve,\n        filterElement\n    ) {\n        var observer = getDragNDropObserver(scopeToObserve);\n\n        var client = {\n            element: element,\n            filterElement: filterElement,\n            state: null,\n            ondrop: function ondrop() {},\n            onenter: function onenter() {},\n            ondrag: function ondrag() {},\n            onexit: function onexit() {},\n            onload: function onload() {},\n            allowdrop: function allowdrop() {},\n        };\n\n        client.destroy = observer.addListener(client);\n\n        return client;\n    };\n\n    var getDragNDropObserver = function getDragNDropObserver(element) {\n        // see if already exists, if so, return\n        var observer = dragNDropObservers.find(function(item) {\n            return item.element === element;\n        });\n        if (observer) {\n            return observer;\n        }\n\n        // create new observer, does not yet exist for this element\n        var newObserver = createDragNDropObserver(element);\n        dragNDropObservers.push(newObserver);\n        return newObserver;\n    };\n\n    var createDragNDropObserver = function createDragNDropObserver(element) {\n        var clients = [];\n\n        var routes = {\n            dragenter: dragenter,\n            dragover: dragover,\n            dragleave: dragleave,\n            drop: drop,\n        };\n\n        var handlers = {};\n\n        forin(routes, function(event, createHandler) {\n            handlers[event] = createHandler(element, clients);\n            element.addEventListener(event, handlers[event], false);\n        });\n\n        var observer = {\n            element: element,\n            addListener: function addListener(client) {\n                // add as client\n                clients.push(client);\n\n                // return removeListener function\n                return function() {\n                    // remove client\n                    clients.splice(clients.indexOf(client), 1);\n\n                    // if no more clients, clean up observer\n                    if (clients.length === 0) {\n                        dragNDropObservers.splice(dragNDropObservers.indexOf(observer), 1);\n\n                        forin(routes, function(event) {\n                            element.removeEventListener(event, handlers[event], false);\n                        });\n                    }\n                };\n            },\n        };\n\n        return observer;\n    };\n\n    var elementFromPoint = function elementFromPoint(root, point) {\n        if (!('elementFromPoint' in root)) {\n            root = document;\n        }\n        return root.elementFromPoint(point.x, point.y);\n    };\n\n    var isEventTarget = function isEventTarget(e, target) {\n        // get root\n        var root = getRootNode(target);\n\n        // get element at position\n        // if root is not actual shadow DOM and does not have elementFromPoint method, use the one on document\n        var elementAtPosition = elementFromPoint(root, {\n            x: e.pageX - window.pageXOffset,\n            y: e.pageY - window.pageYOffset,\n        });\n\n        // test if target is the element or if one of its children is\n        return elementAtPosition === target || target.contains(elementAtPosition);\n    };\n\n    var initialTarget = null;\n\n    var setDropEffect = function setDropEffect(dataTransfer, effect) {\n        // is in try catch as IE11 will throw error if not\n        try {\n            dataTransfer.dropEffect = effect;\n        } catch (e) {}\n    };\n\n    var dragenter = function dragenter(root, clients) {\n        return function(e) {\n            e.preventDefault();\n\n            initialTarget = e.target;\n\n            clients.forEach(function(client) {\n                var element = client.element,\n                    onenter = client.onenter;\n\n                if (isEventTarget(e, element)) {\n                    client.state = 'enter';\n\n                    // fire enter event\n                    onenter(eventPosition(e));\n                }\n            });\n        };\n    };\n\n    var dragover = function dragover(root, clients) {\n        return function(e) {\n            e.preventDefault();\n\n            var dataTransfer = e.dataTransfer;\n\n            requestDataTransferItems(dataTransfer).then(function(items) {\n                var overDropTarget = false;\n\n                clients.some(function(client) {\n                    var filterElement = client.filterElement,\n                        element = client.element,\n                        onenter = client.onenter,\n                        onexit = client.onexit,\n                        ondrag = client.ondrag,\n                        allowdrop = client.allowdrop;\n\n                    // by default we can drop\n                    setDropEffect(dataTransfer, 'copy');\n\n                    // allow transfer of these items\n                    var allowsTransfer = allowdrop(items);\n\n                    // only used when can be dropped on page\n                    if (!allowsTransfer) {\n                        setDropEffect(dataTransfer, 'none');\n                        return;\n                    }\n\n                    // targetting this client\n                    if (isEventTarget(e, element)) {\n                        overDropTarget = true;\n\n                        // had no previous state, means we are entering this client\n                        if (client.state === null) {\n                            client.state = 'enter';\n                            onenter(eventPosition(e));\n                            return;\n                        }\n\n                        // now over element (no matter if it allows the drop or not)\n                        client.state = 'over';\n\n                        // needs to allow transfer\n                        if (filterElement && !allowsTransfer) {\n                            setDropEffect(dataTransfer, 'none');\n                            return;\n                        }\n\n                        // dragging\n                        ondrag(eventPosition(e));\n                    } else {\n                        // should be over an element to drop\n                        if (filterElement && !overDropTarget) {\n                            setDropEffect(dataTransfer, 'none');\n                        }\n\n                        // might have just left this client?\n                        if (client.state) {\n                            client.state = null;\n                            onexit(eventPosition(e));\n                        }\n                    }\n                });\n            });\n        };\n    };\n\n    var drop = function drop(root, clients) {\n        return function(e) {\n            e.preventDefault();\n\n            var dataTransfer = e.dataTransfer;\n\n            requestDataTransferItems(dataTransfer).then(function(items) {\n                clients.forEach(function(client) {\n                    var filterElement = client.filterElement,\n                        element = client.element,\n                        ondrop = client.ondrop,\n                        onexit = client.onexit,\n                        allowdrop = client.allowdrop;\n\n                    client.state = null;\n\n                    // if we're filtering on element we need to be over the element to drop\n                    if (filterElement && !isEventTarget(e, element)) return;\n\n                    // no transfer for this client\n                    if (!allowdrop(items)) return onexit(eventPosition(e));\n\n                    // we can drop these items on this client\n                    ondrop(eventPosition(e), items);\n                });\n            });\n        };\n    };\n\n    var dragleave = function dragleave(root, clients) {\n        return function(e) {\n            if (initialTarget !== e.target) {\n                return;\n            }\n\n            clients.forEach(function(client) {\n                var onexit = client.onexit;\n\n                client.state = null;\n\n                onexit(eventPosition(e));\n            });\n        };\n    };\n\n    var createHopper = function createHopper(scope, validateItems, options) {\n        // is now hopper scope\n        scope.classList.add('filepond--hopper');\n\n        // shortcuts\n        var catchesDropsOnPage = options.catchesDropsOnPage,\n            requiresDropOnElement = options.requiresDropOnElement,\n            _options$filterItems = options.filterItems,\n            filterItems =\n                _options$filterItems === void 0\n                    ? function(items) {\n                          return items;\n                      }\n                    : _options$filterItems;\n\n        // create a dnd client\n        var client = createDragNDropClient(\n            scope,\n            catchesDropsOnPage ? document.documentElement : scope,\n            requiresDropOnElement\n        );\n\n        // current client state\n        var lastState = '';\n        var currentState = '';\n\n        // determines if a file may be dropped\n        client.allowdrop = function(items) {\n            // TODO: if we can, throw error to indicate the items cannot by dropped\n\n            return validateItems(filterItems(items));\n        };\n\n        client.ondrop = function(position, items) {\n            var filteredItems = filterItems(items);\n\n            if (!validateItems(filteredItems)) {\n                api.ondragend(position);\n                return;\n            }\n\n            currentState = 'drag-drop';\n\n            api.onload(filteredItems, position);\n        };\n\n        client.ondrag = function(position) {\n            api.ondrag(position);\n        };\n\n        client.onenter = function(position) {\n            currentState = 'drag-over';\n\n            api.ondragstart(position);\n        };\n\n        client.onexit = function(position) {\n            currentState = 'drag-exit';\n\n            api.ondragend(position);\n        };\n\n        var api = {\n            updateHopperState: function updateHopperState() {\n                if (lastState !== currentState) {\n                    scope.dataset.hopperState = currentState;\n                    lastState = currentState;\n                }\n            },\n            onload: function onload() {},\n            ondragstart: function ondragstart() {},\n            ondrag: function ondrag() {},\n            ondragend: function ondragend() {},\n            destroy: function destroy() {\n                // destroy client\n                client.destroy();\n            },\n        };\n\n        return api;\n    };\n\n    var listening = false;\n    var listeners$1 = [];\n\n    var handlePaste = function handlePaste(e) {\n        // if is pasting in input or textarea and the target is outside of a filepond scope, ignore\n        var activeEl = document.activeElement;\n        var isActiveElementEditable =\n            activeEl &&\n            (/textarea|input/i.test(activeEl.nodeName) ||\n                activeEl.getAttribute('contenteditable') === 'true' ||\n                activeEl.getAttribute('contenteditable') === '');\n\n        if (isActiveElementEditable) {\n            // test textarea or input is contained in filepond root\n            var inScope = false;\n            var element = activeEl;\n            while (element !== document.body) {\n                if (element.classList.contains('filepond--root')) {\n                    inScope = true;\n                    break;\n                }\n                element = element.parentNode;\n            }\n\n            if (!inScope) return;\n        }\n\n        requestDataTransferItems(e.clipboardData).then(function(files) {\n            // no files received\n            if (!files.length) {\n                return;\n            }\n\n            // notify listeners of received files\n            listeners$1.forEach(function(listener) {\n                return listener(files);\n            });\n        });\n    };\n\n    var listen = function listen(cb) {\n        // can't add twice\n        if (listeners$1.includes(cb)) {\n            return;\n        }\n\n        // add initial listener\n        listeners$1.push(cb);\n\n        // setup paste listener for entire page\n        if (listening) {\n            return;\n        }\n\n        listening = true;\n        document.addEventListener('paste', handlePaste);\n    };\n\n    var unlisten = function unlisten(listener) {\n        arrayRemove(listeners$1, listeners$1.indexOf(listener));\n\n        // clean up\n        if (listeners$1.length === 0) {\n            document.removeEventListener('paste', handlePaste);\n            listening = false;\n        }\n    };\n\n    var createPaster = function createPaster() {\n        var cb = function cb(files) {\n            api.onload(files);\n        };\n\n        var api = {\n            destroy: function destroy() {\n                unlisten(cb);\n            },\n            onload: function onload() {},\n        };\n\n        listen(cb);\n\n        return api;\n    };\n\n    /**\n     * Creates the file view\n     */\n    var create$d = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        root.element.id = 'filepond--assistant-' + props.id;\n        attr(root.element, 'role', 'alert');\n        attr(root.element, 'aria-live', 'polite');\n        attr(root.element, 'aria-relevant', 'additions');\n    };\n\n    var addFilesNotificationTimeout = null;\n    var notificationClearTimeout = null;\n\n    var filenames = [];\n\n    var assist = function assist(root, message) {\n        root.element.textContent = message;\n    };\n\n    var clear$1 = function clear(root) {\n        root.element.textContent = '';\n    };\n\n    var listModified = function listModified(root, filename, label) {\n        var total = root.query('GET_TOTAL_ITEMS');\n        assist(\n            root,\n            label +\n                ' ' +\n                filename +\n                ', ' +\n                total +\n                ' ' +\n                (total === 1\n                    ? root.query('GET_LABEL_FILE_COUNT_SINGULAR')\n                    : root.query('GET_LABEL_FILE_COUNT_PLURAL'))\n        );\n\n        // clear group after set amount of time so the status is not read twice\n        clearTimeout(notificationClearTimeout);\n        notificationClearTimeout = setTimeout(function() {\n            clear$1(root);\n        }, 1500);\n    };\n\n    var isUsingFilePond = function isUsingFilePond(root) {\n        return root.element.parentNode.contains(document.activeElement);\n    };\n\n    var itemAdded = function itemAdded(_ref2) {\n        var root = _ref2.root,\n            action = _ref2.action;\n        if (!isUsingFilePond(root)) {\n            return;\n        }\n\n        root.element.textContent = '';\n        var item = root.query('GET_ITEM', action.id);\n        filenames.push(item.filename);\n\n        clearTimeout(addFilesNotificationTimeout);\n        addFilesNotificationTimeout = setTimeout(function() {\n            listModified(root, filenames.join(', '), root.query('GET_LABEL_FILE_ADDED'));\n            filenames.length = 0;\n        }, 750);\n    };\n\n    var itemRemoved = function itemRemoved(_ref3) {\n        var root = _ref3.root,\n            action = _ref3.action;\n        if (!isUsingFilePond(root)) {\n            return;\n        }\n\n        var item = action.item;\n        listModified(root, item.filename, root.query('GET_LABEL_FILE_REMOVED'));\n    };\n\n    var itemProcessed = function itemProcessed(_ref4) {\n        var root = _ref4.root,\n            action = _ref4.action;\n        // will also notify the user when FilePond is not being used, as the user might be occupied with other activities while uploading a file\n\n        var item = root.query('GET_ITEM', action.id);\n        var filename = item.filename;\n        var label = root.query('GET_LABEL_FILE_PROCESSING_COMPLETE');\n\n        assist(root, filename + ' ' + label);\n    };\n\n    var itemProcessedUndo = function itemProcessedUndo(_ref5) {\n        var root = _ref5.root,\n            action = _ref5.action;\n        var item = root.query('GET_ITEM', action.id);\n        var filename = item.filename;\n        var label = root.query('GET_LABEL_FILE_PROCESSING_ABORTED');\n\n        assist(root, filename + ' ' + label);\n    };\n\n    var itemError = function itemError(_ref6) {\n        var root = _ref6.root,\n            action = _ref6.action;\n        var item = root.query('GET_ITEM', action.id);\n        var filename = item.filename;\n\n        // will also notify the user when FilePond is not being used, as the user might be occupied with other activities while uploading a file\n\n        assist(root, action.status.main + ' ' + filename + ' ' + action.status.sub);\n    };\n\n    var assistant = createView({\n        create: create$d,\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        write: createRoute({\n            DID_LOAD_ITEM: itemAdded,\n            DID_REMOVE_ITEM: itemRemoved,\n            DID_COMPLETE_ITEM_PROCESSING: itemProcessed,\n\n            DID_ABORT_ITEM_PROCESSING: itemProcessedUndo,\n            DID_REVERT_ITEM_PROCESSING: itemProcessedUndo,\n\n            DID_THROW_ITEM_REMOVE_ERROR: itemError,\n            DID_THROW_ITEM_LOAD_ERROR: itemError,\n            DID_THROW_ITEM_INVALID: itemError,\n            DID_THROW_ITEM_PROCESSING_ERROR: itemError,\n        }),\n\n        tag: 'span',\n        name: 'assistant',\n    });\n\n    var toCamels = function toCamels(string) {\n        var separator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '-';\n        return string.replace(new RegExp(separator + '.', 'g'), function(sub) {\n            return sub.charAt(1).toUpperCase();\n        });\n    };\n\n    var debounce = function debounce(func) {\n        var interval = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 16;\n        var immidiateOnly =\n            arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n        var last = Date.now();\n        var timeout = null;\n\n        return function() {\n            for (\n                var _len = arguments.length, args = new Array(_len), _key = 0;\n                _key < _len;\n                _key++\n            ) {\n                args[_key] = arguments[_key];\n            }\n            clearTimeout(timeout);\n\n            var dist = Date.now() - last;\n\n            var fn = function fn() {\n                last = Date.now();\n                func.apply(void 0, args);\n            };\n\n            if (dist < interval) {\n                // we need to delay by the difference between interval and dist\n                // for example: if distance is 10 ms and interval is 16 ms,\n                // we need to wait an additional 6ms before calling the function)\n                if (!immidiateOnly) {\n                    timeout = setTimeout(fn, interval - dist);\n                }\n            } else {\n                // go!\n                fn();\n            }\n        };\n    };\n\n    var MAX_FILES_LIMIT = 1000000;\n\n    var prevent = function prevent(e) {\n        return e.preventDefault();\n    };\n\n    var create$e = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        // Add id\n        var id = root.query('GET_ID');\n        if (id) {\n            root.element.id = id;\n        }\n\n        // Add className\n        var className = root.query('GET_CLASS_NAME');\n        if (className) {\n            className\n                .split(' ')\n                .filter(function(name) {\n                    return name.length;\n                })\n                .forEach(function(name) {\n                    root.element.classList.add(name);\n                });\n        }\n\n        // Field label\n        root.ref.label = root.appendChildView(\n            root.createChildView(\n                dropLabel,\n                Object.assign({}, props, {\n                    translateY: null,\n                    caption: root.query('GET_LABEL_IDLE'),\n                })\n            )\n        );\n\n        // List of items\n        root.ref.list = root.appendChildView(\n            root.createChildView(listScroller, { translateY: null })\n        );\n\n        // Background panel\n        root.ref.panel = root.appendChildView(root.createChildView(panel, { name: 'panel-root' }));\n\n        // Assistant notifies assistive tech when content changes\n        root.ref.assistant = root.appendChildView(\n            root.createChildView(assistant, Object.assign({}, props))\n        );\n\n        // Data\n        root.ref.data = root.appendChildView(root.createChildView(data, Object.assign({}, props)));\n\n        // Measure (tests if fixed height was set)\n        // DOCTYPE needs to be set for this to work\n        root.ref.measure = createElement$1('div');\n        root.ref.measure.style.height = '100%';\n        root.element.appendChild(root.ref.measure);\n\n        // information on the root height or fixed height status\n        root.ref.bounds = null;\n\n        // apply initial style properties\n        root.query('GET_STYLES')\n            .filter(function(style) {\n                return !isEmpty(style.value);\n            })\n            .map(function(_ref2) {\n                var name = _ref2.name,\n                    value = _ref2.value;\n                root.element.dataset[name] = value;\n            });\n\n        // determine if width changed\n        root.ref.widthPrevious = null;\n        root.ref.widthUpdated = debounce(function() {\n            root.ref.updateHistory = [];\n            root.dispatch('DID_RESIZE_ROOT');\n        }, 250);\n\n        // history of updates\n        root.ref.previousAspectRatio = null;\n        root.ref.updateHistory = [];\n\n        // prevent scrolling and zooming on iOS (only if supports pointer events, for then we can enable reorder)\n        var canHover = window.matchMedia('(pointer: fine) and (hover: hover)').matches;\n        var hasPointerEvents = 'PointerEvent' in window;\n        if (root.query('GET_ALLOW_REORDER') && hasPointerEvents && !canHover) {\n            root.element.addEventListener('touchmove', prevent, { passive: false });\n            root.element.addEventListener('gesturestart', prevent);\n        }\n\n        // add credits\n        var credits = root.query('GET_CREDITS');\n        var hasCredits = credits.length === 2;\n        if (hasCredits) {\n            var frag = document.createElement('a');\n            frag.className = 'filepond--credits';\n            frag.href = credits[0];\n            frag.tabIndex = -1;\n            frag.target = '_blank';\n            frag.rel = 'noopener noreferrer nofollow';\n            frag.textContent = credits[1];\n            root.element.appendChild(frag);\n            root.ref.credits = frag;\n        }\n    };\n\n    var write$9 = function write(_ref3) {\n        var root = _ref3.root,\n            props = _ref3.props,\n            actions = _ref3.actions;\n        // route actions\n        route$5({ root: root, props: props, actions: actions });\n\n        // apply style properties\n        actions\n            .filter(function(action) {\n                return /^DID_SET_STYLE_/.test(action.type);\n            })\n            .filter(function(action) {\n                return !isEmpty(action.data.value);\n            })\n            .map(function(_ref4) {\n                var type = _ref4.type,\n                    data = _ref4.data;\n                var name = toCamels(type.substring(8).toLowerCase(), '_');\n                root.element.dataset[name] = data.value;\n                root.invalidateLayout();\n            });\n\n        if (root.rect.element.hidden) return;\n\n        if (root.rect.element.width !== root.ref.widthPrevious) {\n            root.ref.widthPrevious = root.rect.element.width;\n            root.ref.widthUpdated();\n        }\n\n        // get box bounds, we do this only once\n        var bounds = root.ref.bounds;\n        if (!bounds) {\n            bounds = root.ref.bounds = calculateRootBoundingBoxHeight(root);\n\n            // destroy measure element\n            root.element.removeChild(root.ref.measure);\n            root.ref.measure = null;\n        }\n\n        // get quick references to various high level parts of the upload tool\n        var _root$ref = root.ref,\n            hopper = _root$ref.hopper,\n            label = _root$ref.label,\n            list = _root$ref.list,\n            panel = _root$ref.panel;\n\n        // sets correct state to hopper scope\n        if (hopper) {\n            hopper.updateHopperState();\n        }\n\n        // bool to indicate if we're full or not\n        var aspectRatio = root.query('GET_PANEL_ASPECT_RATIO');\n        var isMultiItem = root.query('GET_ALLOW_MULTIPLE');\n        var totalItems = root.query('GET_TOTAL_ITEMS');\n        var maxItems = isMultiItem ? root.query('GET_MAX_FILES') || MAX_FILES_LIMIT : 1;\n        var atMaxCapacity = totalItems === maxItems;\n\n        // action used to add item\n        var addAction = actions.find(function(action) {\n            return action.type === 'DID_ADD_ITEM';\n        });\n\n        // if reached max capacity and we've just reached it\n        if (atMaxCapacity && addAction) {\n            // get interaction type\n            var interactionMethod = addAction.data.interactionMethod;\n\n            // hide label\n            label.opacity = 0;\n\n            if (isMultiItem) {\n                label.translateY = -40;\n            } else {\n                if (interactionMethod === InteractionMethod.API) {\n                    label.translateX = 40;\n                } else if (interactionMethod === InteractionMethod.BROWSE) {\n                    label.translateY = 40;\n                } else {\n                    label.translateY = 30;\n                }\n            }\n        } else if (!atMaxCapacity) {\n            label.opacity = 1;\n            label.translateX = 0;\n            label.translateY = 0;\n        }\n\n        var listItemMargin = calculateListItemMargin(root);\n\n        var listHeight = calculateListHeight(root);\n\n        var labelHeight = label.rect.element.height;\n        var currentLabelHeight = !isMultiItem || atMaxCapacity ? 0 : labelHeight;\n\n        var listMarginTop = atMaxCapacity ? list.rect.element.marginTop : 0;\n        var listMarginBottom = totalItems === 0 ? 0 : list.rect.element.marginBottom;\n\n        var visualHeight =\n            currentLabelHeight + listMarginTop + listHeight.visual + listMarginBottom;\n        var boundsHeight =\n            currentLabelHeight + listMarginTop + listHeight.bounds + listMarginBottom;\n\n        // link list to label bottom position\n        list.translateY =\n            Math.max(0, currentLabelHeight - list.rect.element.marginTop) - listItemMargin.top;\n\n        if (aspectRatio) {\n            // fixed aspect ratio\n\n            // calculate height based on width\n            var width = root.rect.element.width;\n            var height = width * aspectRatio;\n\n            // clear history if aspect ratio has changed\n            if (aspectRatio !== root.ref.previousAspectRatio) {\n                root.ref.previousAspectRatio = aspectRatio;\n                root.ref.updateHistory = [];\n            }\n\n            // remember this width\n            var history = root.ref.updateHistory;\n            history.push(width);\n\n            var MAX_BOUNCES = 2;\n            if (history.length > MAX_BOUNCES * 2) {\n                var l = history.length;\n                var bottom = l - 10;\n                var bounces = 0;\n                for (var i = l; i >= bottom; i--) {\n                    if (history[i] === history[i - 2]) {\n                        bounces++;\n                    }\n\n                    if (bounces >= MAX_BOUNCES) {\n                        // dont adjust height\n                        return;\n                    }\n                }\n            }\n\n            // fix height of panel so it adheres to aspect ratio\n            panel.scalable = false;\n            panel.height = height;\n\n            // available height for list\n            var listAvailableHeight =\n                // the height of the panel minus the label height\n                height -\n                currentLabelHeight -\n                // the room we leave open between the end of the list and the panel bottom\n                (listMarginBottom - listItemMargin.bottom) -\n                // if we're full we need to leave some room between the top of the panel and the list\n                (atMaxCapacity ? listMarginTop : 0);\n\n            if (listHeight.visual > listAvailableHeight) {\n                list.overflow = listAvailableHeight;\n            } else {\n                list.overflow = null;\n            }\n\n            // set container bounds (so pushes siblings downwards)\n            root.height = height;\n        } else if (bounds.fixedHeight) {\n            // fixed height\n\n            // fix height of panel\n            panel.scalable = false;\n\n            // available height for list\n            var _listAvailableHeight =\n                // the height of the panel minus the label height\n                bounds.fixedHeight -\n                currentLabelHeight -\n                // the room we leave open between the end of the list and the panel bottom\n                (listMarginBottom - listItemMargin.bottom) -\n                // if we're full we need to leave some room between the top of the panel and the list\n                (atMaxCapacity ? listMarginTop : 0);\n\n            // set list height\n            if (listHeight.visual > _listAvailableHeight) {\n                list.overflow = _listAvailableHeight;\n            } else {\n                list.overflow = null;\n            }\n\n            // no need to set container bounds as these are handles by CSS fixed height\n        } else if (bounds.cappedHeight) {\n            // max-height\n\n            // not a fixed height panel\n            var isCappedHeight = visualHeight >= bounds.cappedHeight;\n            var panelHeight = Math.min(bounds.cappedHeight, visualHeight);\n            panel.scalable = true;\n            panel.height = isCappedHeight\n                ? panelHeight\n                : panelHeight - listItemMargin.top - listItemMargin.bottom;\n\n            // available height for list\n            var _listAvailableHeight2 =\n                // the height of the panel minus the label height\n                panelHeight -\n                currentLabelHeight -\n                // the room we leave open between the end of the list and the panel bottom\n                (listMarginBottom - listItemMargin.bottom) -\n                // if we're full we need to leave some room between the top of the panel and the list\n                (atMaxCapacity ? listMarginTop : 0);\n\n            // set list height (if is overflowing)\n            if (visualHeight > bounds.cappedHeight && listHeight.visual > _listAvailableHeight2) {\n                list.overflow = _listAvailableHeight2;\n            } else {\n                list.overflow = null;\n            }\n\n            // set container bounds (so pushes siblings downwards)\n            root.height = Math.min(\n                bounds.cappedHeight,\n                boundsHeight - listItemMargin.top - listItemMargin.bottom\n            );\n        } else {\n            // flexible height\n\n            // not a fixed height panel\n            var itemMargin = totalItems > 0 ? listItemMargin.top + listItemMargin.bottom : 0;\n            panel.scalable = true;\n            panel.height = Math.max(labelHeight, visualHeight - itemMargin);\n\n            // set container bounds (so pushes siblings downwards)\n            root.height = Math.max(labelHeight, boundsHeight - itemMargin);\n        }\n\n        // move credits to bottom\n        if (root.ref.credits && panel.heightCurrent)\n            root.ref.credits.style.transform = 'translateY(' + panel.heightCurrent + 'px)';\n    };\n\n    var calculateListItemMargin = function calculateListItemMargin(root) {\n        var item = root.ref.list.childViews[0].childViews[0];\n        return item\n            ? {\n                  top: item.rect.element.marginTop,\n                  bottom: item.rect.element.marginBottom,\n              }\n            : {\n                  top: 0,\n                  bottom: 0,\n              };\n    };\n\n    var calculateListHeight = function calculateListHeight(root) {\n        var visual = 0;\n        var bounds = 0;\n\n        // get file list reference\n        var scrollList = root.ref.list;\n        var itemList = scrollList.childViews[0];\n        var visibleChildren = itemList.childViews.filter(function(child) {\n            return child.rect.element.height;\n        });\n        var children = root\n            .query('GET_ACTIVE_ITEMS')\n            .map(function(item) {\n                return visibleChildren.find(function(child) {\n                    return child.id === item.id;\n                });\n            })\n            .filter(function(item) {\n                return item;\n            });\n\n        // no children, done!\n        if (children.length === 0) return { visual: visual, bounds: bounds };\n\n        var horizontalSpace = itemList.rect.element.width;\n        var dragIndex = getItemIndexByPosition(itemList, children, scrollList.dragCoordinates);\n\n        var childRect = children[0].rect.element;\n\n        var itemVerticalMargin = childRect.marginTop + childRect.marginBottom;\n        var itemHorizontalMargin = childRect.marginLeft + childRect.marginRight;\n\n        var itemWidth = childRect.width + itemHorizontalMargin;\n        var itemHeight = childRect.height + itemVerticalMargin;\n\n        var newItem = typeof dragIndex !== 'undefined' && dragIndex >= 0 ? 1 : 0;\n        var removedItem = children.find(function(child) {\n            return child.markedForRemoval && child.opacity < 0.45;\n        })\n            ? -1\n            : 0;\n        var verticalItemCount = children.length + newItem + removedItem;\n        var itemsPerRow = getItemsPerRow(horizontalSpace, itemWidth);\n\n        // stack\n        if (itemsPerRow === 1) {\n            children.forEach(function(item) {\n                var height = item.rect.element.height + itemVerticalMargin;\n                bounds += height;\n                visual += height * item.opacity;\n            });\n        }\n        // grid\n        else {\n            bounds = Math.ceil(verticalItemCount / itemsPerRow) * itemHeight;\n            visual = bounds;\n        }\n\n        return { visual: visual, bounds: bounds };\n    };\n\n    var calculateRootBoundingBoxHeight = function calculateRootBoundingBoxHeight(root) {\n        var height = root.ref.measureHeight || null;\n        var cappedHeight = parseInt(root.style.maxHeight, 10) || null;\n        var fixedHeight = height === 0 ? null : height;\n\n        return {\n            cappedHeight: cappedHeight,\n            fixedHeight: fixedHeight,\n        };\n    };\n\n    var exceedsMaxFiles = function exceedsMaxFiles(root, items) {\n        var allowReplace = root.query('GET_ALLOW_REPLACE');\n        var allowMultiple = root.query('GET_ALLOW_MULTIPLE');\n        var totalItems = root.query('GET_TOTAL_ITEMS');\n        var maxItems = root.query('GET_MAX_FILES');\n\n        // total amount of items being dragged\n        var totalBrowseItems = items.length;\n\n        // if does not allow multiple items and dragging more than one item\n        if (!allowMultiple && totalBrowseItems > 1) {\n            root.dispatch('DID_THROW_MAX_FILES', {\n                source: items,\n                error: createResponse('warning', 0, 'Max files'),\n            });\n\n            return true;\n        }\n\n        // limit max items to one if not allowed to drop multiple items\n        maxItems = allowMultiple ? maxItems : 1;\n\n        if (!allowMultiple && allowReplace) {\n            // There is only one item, so there is room to replace or add an item\n            return false;\n        }\n\n        // no more room?\n        var hasMaxItems = isInt(maxItems);\n        if (hasMaxItems && totalItems + totalBrowseItems > maxItems) {\n            root.dispatch('DID_THROW_MAX_FILES', {\n                source: items,\n                error: createResponse('warning', 0, 'Max files'),\n            });\n\n            return true;\n        }\n\n        return false;\n    };\n\n    var getDragIndex = function getDragIndex(list, children, position) {\n        var itemList = list.childViews[0];\n        return getItemIndexByPosition(itemList, children, {\n            left: position.scopeLeft - itemList.rect.element.left,\n            top:\n                position.scopeTop -\n                (list.rect.outer.top + list.rect.element.marginTop + list.rect.element.scrollTop),\n        });\n    };\n\n    /**\n     * Enable or disable file drop functionality\n     */\n    var toggleDrop = function toggleDrop(root) {\n        var isAllowed = root.query('GET_ALLOW_DROP');\n        var isDisabled = root.query('GET_DISABLED');\n        var enabled = isAllowed && !isDisabled;\n        if (enabled && !root.ref.hopper) {\n            var hopper = createHopper(\n                root.element,\n                function(items) {\n                    // allow quick validation of dropped items\n                    var beforeDropFile =\n                        root.query('GET_BEFORE_DROP_FILE') ||\n                        function() {\n                            return true;\n                        };\n\n                    // all items should be validated by all filters as valid\n                    var dropValidation = root.query('GET_DROP_VALIDATION');\n                    return dropValidation\n                        ? items.every(function(item) {\n                              return (\n                                  applyFilters('ALLOW_HOPPER_ITEM', item, {\n                                      query: root.query,\n                                  }).every(function(result) {\n                                      return result === true;\n                                  }) && beforeDropFile(item)\n                              );\n                          })\n                        : true;\n                },\n                {\n                    filterItems: function filterItems(items) {\n                        var ignoredFiles = root.query('GET_IGNORED_FILES');\n                        return items.filter(function(item) {\n                            if (isFile(item)) {\n                                return !ignoredFiles.includes(item.name.toLowerCase());\n                            }\n                            return true;\n                        });\n                    },\n                    catchesDropsOnPage: root.query('GET_DROP_ON_PAGE'),\n                    requiresDropOnElement: root.query('GET_DROP_ON_ELEMENT'),\n                }\n            );\n\n            hopper.onload = function(items, position) {\n                // get item children elements and sort based on list sort\n                var list = root.ref.list.childViews[0];\n                var visibleChildren = list.childViews.filter(function(child) {\n                    return child.rect.element.height;\n                });\n                var children = root\n                    .query('GET_ACTIVE_ITEMS')\n                    .map(function(item) {\n                        return visibleChildren.find(function(child) {\n                            return child.id === item.id;\n                        });\n                    })\n                    .filter(function(item) {\n                        return item;\n                    });\n\n                applyFilterChain('ADD_ITEMS', items, { dispatch: root.dispatch }).then(function(\n                    queue\n                ) {\n                    // these files don't fit so stop here\n                    if (exceedsMaxFiles(root, queue)) return false;\n\n                    // go\n                    root.dispatch('ADD_ITEMS', {\n                        items: queue,\n                        index: getDragIndex(root.ref.list, children, position),\n                        interactionMethod: InteractionMethod.DROP,\n                    });\n                });\n\n                root.dispatch('DID_DROP', { position: position });\n\n                root.dispatch('DID_END_DRAG', { position: position });\n            };\n\n            hopper.ondragstart = function(position) {\n                root.dispatch('DID_START_DRAG', { position: position });\n            };\n\n            hopper.ondrag = debounce(function(position) {\n                root.dispatch('DID_DRAG', { position: position });\n            });\n\n            hopper.ondragend = function(position) {\n                root.dispatch('DID_END_DRAG', { position: position });\n            };\n\n            root.ref.hopper = hopper;\n\n            root.ref.drip = root.appendChildView(root.createChildView(drip));\n        } else if (!enabled && root.ref.hopper) {\n            root.ref.hopper.destroy();\n            root.ref.hopper = null;\n            root.removeChildView(root.ref.drip);\n        }\n    };\n\n    /**\n     * Enable or disable browse functionality\n     */\n    var toggleBrowse = function toggleBrowse(root, props) {\n        var isAllowed = root.query('GET_ALLOW_BROWSE');\n        var isDisabled = root.query('GET_DISABLED');\n        var enabled = isAllowed && !isDisabled;\n        if (enabled && !root.ref.browser) {\n            root.ref.browser = root.appendChildView(\n                root.createChildView(\n                    browser,\n                    Object.assign({}, props, {\n                        onload: function onload(items) {\n                            applyFilterChain('ADD_ITEMS', items, {\n                                dispatch: root.dispatch,\n                            }).then(function(queue) {\n                                // these files don't fit so stop here\n                                if (exceedsMaxFiles(root, queue)) return false;\n\n                                // add items!\n                                root.dispatch('ADD_ITEMS', {\n                                    items: queue,\n                                    index: -1,\n                                    interactionMethod: InteractionMethod.BROWSE,\n                                });\n                            });\n                        },\n                    })\n                ),\n\n                0\n            );\n        } else if (!enabled && root.ref.browser) {\n            root.removeChildView(root.ref.browser);\n            root.ref.browser = null;\n        }\n    };\n\n    /**\n     * Enable or disable paste functionality\n     */\n    var togglePaste = function togglePaste(root) {\n        var isAllowed = root.query('GET_ALLOW_PASTE');\n        var isDisabled = root.query('GET_DISABLED');\n        var enabled = isAllowed && !isDisabled;\n        if (enabled && !root.ref.paster) {\n            root.ref.paster = createPaster();\n            root.ref.paster.onload = function(items) {\n                applyFilterChain('ADD_ITEMS', items, { dispatch: root.dispatch }).then(function(\n                    queue\n                ) {\n                    // these files don't fit so stop here\n                    if (exceedsMaxFiles(root, queue)) return false;\n\n                    // add items!\n                    root.dispatch('ADD_ITEMS', {\n                        items: queue,\n                        index: -1,\n                        interactionMethod: InteractionMethod.PASTE,\n                    });\n                });\n            };\n        } else if (!enabled && root.ref.paster) {\n            root.ref.paster.destroy();\n            root.ref.paster = null;\n        }\n    };\n\n    /**\n     * Route actions\n     */\n    var route$5 = createRoute({\n        DID_SET_ALLOW_BROWSE: function DID_SET_ALLOW_BROWSE(_ref5) {\n            var root = _ref5.root,\n                props = _ref5.props;\n            toggleBrowse(root, props);\n        },\n        DID_SET_ALLOW_DROP: function DID_SET_ALLOW_DROP(_ref6) {\n            var root = _ref6.root;\n            toggleDrop(root);\n        },\n        DID_SET_ALLOW_PASTE: function DID_SET_ALLOW_PASTE(_ref7) {\n            var root = _ref7.root;\n            togglePaste(root);\n        },\n        DID_SET_DISABLED: function DID_SET_DISABLED(_ref8) {\n            var root = _ref8.root,\n                props = _ref8.props;\n            toggleDrop(root);\n            togglePaste(root);\n            toggleBrowse(root, props);\n            var isDisabled = root.query('GET_DISABLED');\n            if (isDisabled) {\n                root.element.dataset.disabled = 'disabled';\n            } else {\n                // delete root.element.dataset.disabled; <= this does not work on iOS 10\n                root.element.removeAttribute('data-disabled');\n            }\n        },\n    });\n\n    var root = createView({\n        name: 'root',\n        read: function read(_ref9) {\n            var root = _ref9.root;\n            if (root.ref.measure) {\n                root.ref.measureHeight = root.ref.measure.offsetHeight;\n            }\n        },\n        create: create$e,\n        write: write$9,\n        destroy: function destroy(_ref10) {\n            var root = _ref10.root;\n            if (root.ref.paster) {\n                root.ref.paster.destroy();\n            }\n            if (root.ref.hopper) {\n                root.ref.hopper.destroy();\n            }\n            root.element.removeEventListener('touchmove', prevent);\n            root.element.removeEventListener('gesturestart', prevent);\n        },\n        mixins: {\n            styles: ['height'],\n        },\n    });\n\n    // creates the app\n    var createApp = function createApp() {\n        var initialOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        // let element\n        var originalElement = null;\n\n        // get default options\n        var defaultOptions = getOptions();\n\n        // create the data store, this will contain all our app info\n        var store = createStore(\n            // initial state (should be serializable)\n            createInitialState(defaultOptions),\n\n            // queries\n            [queries, createOptionQueries(defaultOptions)],\n\n            // action handlers\n            [actions, createOptionActions(defaultOptions)]\n        );\n\n        // set initial options\n        store.dispatch('SET_OPTIONS', { options: initialOptions });\n\n        // kick thread if visibility changes\n        var visibilityHandler = function visibilityHandler() {\n            if (document.hidden) return;\n            store.dispatch('KICK');\n        };\n        document.addEventListener('visibilitychange', visibilityHandler);\n\n        // re-render on window resize start and finish\n        var resizeDoneTimer = null;\n        var isResizing = false;\n        var isResizingHorizontally = false;\n        var initialWindowWidth = null;\n        var currentWindowWidth = null;\n        var resizeHandler = function resizeHandler() {\n            if (!isResizing) {\n                isResizing = true;\n            }\n            clearTimeout(resizeDoneTimer);\n            resizeDoneTimer = setTimeout(function() {\n                isResizing = false;\n                initialWindowWidth = null;\n                currentWindowWidth = null;\n                if (isResizingHorizontally) {\n                    isResizingHorizontally = false;\n                    store.dispatch('DID_STOP_RESIZE');\n                }\n            }, 500);\n        };\n        window.addEventListener('resize', resizeHandler);\n\n        // render initial view\n        var view = root(store, { id: getUniqueId() });\n\n        //\n        // PRIVATE API -------------------------------------------------------------------------------------\n        //\n        var isResting = false;\n        var isHidden = false;\n\n        var readWriteApi = {\n            // necessary for update loop\n\n            /**\n             * Reads from dom (never call manually)\n             * @private\n             */\n            _read: function _read() {\n                // test if we're resizing horizontally\n                // TODO: see if we can optimize this by measuring root rect\n                if (isResizing) {\n                    currentWindowWidth = window.innerWidth;\n                    if (!initialWindowWidth) {\n                        initialWindowWidth = currentWindowWidth;\n                    }\n\n                    if (!isResizingHorizontally && currentWindowWidth !== initialWindowWidth) {\n                        store.dispatch('DID_START_RESIZE');\n                        isResizingHorizontally = true;\n                    }\n                }\n\n                if (isHidden && isResting) {\n                    // test if is no longer hidden\n                    isResting = view.element.offsetParent === null;\n                }\n\n                // if resting, no need to read as numbers will still all be correct\n                if (isResting) return;\n\n                // read view data\n                view._read();\n\n                // if is hidden we need to know so we exit rest mode when revealed\n                isHidden = view.rect.element.hidden;\n            },\n\n            /**\n             * Writes to dom (never call manually)\n             * @private\n             */\n            _write: function _write(ts) {\n                // get all actions from store\n                var actions = store\n                    .processActionQueue()\n\n                    // filter out set actions (these will automatically trigger DID_SET)\n                    .filter(function(action) {\n                        return !/^SET_/.test(action.type);\n                    });\n\n                // if was idling and no actions stop here\n                if (isResting && !actions.length) return;\n\n                // some actions might trigger events\n                routeActionsToEvents(actions);\n\n                // update the view\n                isResting = view._write(ts, actions, isResizingHorizontally);\n\n                // will clean up all archived items\n                removeReleasedItems(store.query('GET_ITEMS'));\n\n                // now idling\n                if (isResting) {\n                    store.processDispatchQueue();\n                }\n            },\n        };\n\n        //\n        // EXPOSE EVENTS -------------------------------------------------------------------------------------\n        //\n        var createEvent = function createEvent(name) {\n            return function(data) {\n                // create default event\n                var event = {\n                    type: name,\n                };\n\n                // no data to add\n                if (!data) {\n                    return event;\n                }\n\n                // copy relevant props\n                if (data.hasOwnProperty('error')) {\n                    event.error = data.error ? Object.assign({}, data.error) : null;\n                }\n\n                if (data.status) {\n                    event.status = Object.assign({}, data.status);\n                }\n\n                if (data.file) {\n                    event.output = data.file;\n                }\n\n                // only source is available, else add item if possible\n                if (data.source) {\n                    event.file = data.source;\n                } else if (data.item || data.id) {\n                    var item = data.item ? data.item : store.query('GET_ITEM', data.id);\n                    event.file = item ? createItemAPI(item) : null;\n                }\n\n                // map all items in a possible items array\n                if (data.items) {\n                    event.items = data.items.map(createItemAPI);\n                }\n\n                // if this is a progress event add the progress amount\n                if (/progress/.test(name)) {\n                    event.progress = data.progress;\n                }\n\n                // copy relevant props\n                if (data.hasOwnProperty('origin') && data.hasOwnProperty('target')) {\n                    event.origin = data.origin;\n                    event.target = data.target;\n                }\n\n                return event;\n            };\n        };\n\n        var eventRoutes = {\n            DID_DESTROY: createEvent('destroy'),\n\n            DID_INIT: createEvent('init'),\n\n            DID_THROW_MAX_FILES: createEvent('warning'),\n\n            DID_INIT_ITEM: createEvent('initfile'),\n            DID_START_ITEM_LOAD: createEvent('addfilestart'),\n            DID_UPDATE_ITEM_LOAD_PROGRESS: createEvent('addfileprogress'),\n            DID_LOAD_ITEM: createEvent('addfile'),\n\n            DID_THROW_ITEM_INVALID: [createEvent('error'), createEvent('addfile')],\n\n            DID_THROW_ITEM_LOAD_ERROR: [createEvent('error'), createEvent('addfile')],\n\n            DID_THROW_ITEM_REMOVE_ERROR: [createEvent('error'), createEvent('removefile')],\n\n            DID_PREPARE_OUTPUT: createEvent('preparefile'),\n\n            DID_START_ITEM_PROCESSING: createEvent('processfilestart'),\n            DID_UPDATE_ITEM_PROCESS_PROGRESS: createEvent('processfileprogress'),\n            DID_ABORT_ITEM_PROCESSING: createEvent('processfileabort'),\n            DID_COMPLETE_ITEM_PROCESSING: createEvent('processfile'),\n            DID_COMPLETE_ITEM_PROCESSING_ALL: createEvent('processfiles'),\n            DID_REVERT_ITEM_PROCESSING: createEvent('processfilerevert'),\n\n            DID_THROW_ITEM_PROCESSING_ERROR: [createEvent('error'), createEvent('processfile')],\n\n            DID_REMOVE_ITEM: createEvent('removefile'),\n\n            DID_UPDATE_ITEMS: createEvent('updatefiles'),\n\n            DID_ACTIVATE_ITEM: createEvent('activatefile'),\n\n            DID_REORDER_ITEMS: createEvent('reorderfiles'),\n        };\n\n        var exposeEvent = function exposeEvent(event) {\n            // create event object to be dispatched\n            var detail = Object.assign({ pond: exports }, event);\n            delete detail.type;\n            view.element.dispatchEvent(\n                new CustomEvent('FilePond:' + event.type, {\n                    // event info\n                    detail: detail,\n\n                    // event behaviour\n                    bubbles: true,\n                    cancelable: true,\n                    composed: true, // triggers listeners outside of shadow root\n                })\n            );\n\n            // event object to params used for `on()` event handlers and callbacks `oninit()`\n            var params = [];\n\n            // if is possible error event, make it the first param\n            if (event.hasOwnProperty('error')) {\n                params.push(event.error);\n            }\n\n            // file is always section\n            if (event.hasOwnProperty('file')) {\n                params.push(event.file);\n            }\n\n            // append other props\n            var filtered = ['type', 'error', 'file'];\n            Object.keys(event)\n                .filter(function(key) {\n                    return !filtered.includes(key);\n                })\n                .forEach(function(key) {\n                    return params.push(event[key]);\n                });\n\n            // on(type, () => { })\n            exports.fire.apply(exports, [event.type].concat(params));\n\n            // oninit = () => {}\n            var handler = store.query('GET_ON' + event.type.toUpperCase());\n            if (handler) {\n                handler.apply(void 0, params);\n            }\n        };\n\n        var routeActionsToEvents = function routeActionsToEvents(actions) {\n            if (!actions.length) return;\n            actions\n                .filter(function(action) {\n                    return eventRoutes[action.type];\n                })\n                .forEach(function(action) {\n                    var routes = eventRoutes[action.type];\n                    (Array.isArray(routes) ? routes : [routes]).forEach(function(route) {\n                        // this isn't fantastic, but because of the stacking of settimeouts plugins can handle the did_load before the did_init\n                        if (action.type === 'DID_INIT_ITEM') {\n                            exposeEvent(route(action.data));\n                        } else {\n                            setTimeout(function() {\n                                exposeEvent(route(action.data));\n                            }, 0);\n                        }\n                    });\n                });\n        };\n\n        //\n        // PUBLIC API -------------------------------------------------------------------------------------\n        //\n        var setOptions = function setOptions(options) {\n            return store.dispatch('SET_OPTIONS', { options: options });\n        };\n\n        var getFile = function getFile(query) {\n            return store.query('GET_ACTIVE_ITEM', query);\n        };\n\n        var prepareFile = function prepareFile(query) {\n            return new Promise(function(resolve, reject) {\n                store.dispatch('REQUEST_ITEM_PREPARE', {\n                    query: query,\n                    success: function success(item) {\n                        resolve(item);\n                    },\n                    failure: function failure(error) {\n                        reject(error);\n                    },\n                });\n            });\n        };\n\n        var addFile = function addFile(source) {\n            var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n            return new Promise(function(resolve, reject) {\n                addFiles([{ source: source, options: options }], { index: options.index })\n                    .then(function(items) {\n                        return resolve(items && items[0]);\n                    })\n                    .catch(reject);\n            });\n        };\n\n        var isFilePondFile = function isFilePondFile(obj) {\n            return obj.file && obj.id;\n        };\n\n        var removeFile = function removeFile(query, options) {\n            // if only passed options\n            if (typeof query === 'object' && !isFilePondFile(query) && !options) {\n                options = query;\n                query = undefined;\n            }\n\n            // request item removal\n            store.dispatch('REMOVE_ITEM', Object.assign({}, options, { query: query }));\n\n            // see if item has been removed\n            return store.query('GET_ACTIVE_ITEM', query) === null;\n        };\n\n        var addFiles = function addFiles() {\n            for (\n                var _len = arguments.length, args = new Array(_len), _key = 0;\n                _key < _len;\n                _key++\n            ) {\n                args[_key] = arguments[_key];\n            }\n            return new Promise(function(resolve, reject) {\n                var sources = [];\n                var options = {};\n\n                // user passed a sources array\n                if (isArray(args[0])) {\n                    sources.push.apply(sources, args[0]);\n                    Object.assign(options, args[1] || {});\n                } else {\n                    // user passed sources as arguments, last one might be options object\n                    var lastArgument = args[args.length - 1];\n                    if (typeof lastArgument === 'object' && !(lastArgument instanceof Blob)) {\n                        Object.assign(options, args.pop());\n                    }\n\n                    // add rest to sources\n                    sources.push.apply(sources, args);\n                }\n\n                store.dispatch('ADD_ITEMS', {\n                    items: sources,\n                    index: options.index,\n                    interactionMethod: InteractionMethod.API,\n                    success: resolve,\n                    failure: reject,\n                });\n            });\n        };\n\n        var getFiles = function getFiles() {\n            return store.query('GET_ACTIVE_ITEMS');\n        };\n\n        var processFile = function processFile(query) {\n            return new Promise(function(resolve, reject) {\n                store.dispatch('REQUEST_ITEM_PROCESSING', {\n                    query: query,\n                    success: function success(item) {\n                        resolve(item);\n                    },\n                    failure: function failure(error) {\n                        reject(error);\n                    },\n                });\n            });\n        };\n\n        var prepareFiles = function prepareFiles() {\n            for (\n                var _len2 = arguments.length, args = new Array(_len2), _key2 = 0;\n                _key2 < _len2;\n                _key2++\n            ) {\n                args[_key2] = arguments[_key2];\n            }\n            var queries = Array.isArray(args[0]) ? args[0] : args;\n            var items = queries.length ? queries : getFiles();\n            return Promise.all(items.map(prepareFile));\n        };\n\n        var processFiles = function processFiles() {\n            for (\n                var _len3 = arguments.length, args = new Array(_len3), _key3 = 0;\n                _key3 < _len3;\n                _key3++\n            ) {\n                args[_key3] = arguments[_key3];\n            }\n            var queries = Array.isArray(args[0]) ? args[0] : args;\n            if (!queries.length) {\n                var files = getFiles().filter(function(item) {\n                    return (\n                        !(item.status === ItemStatus.IDLE && item.origin === FileOrigin.LOCAL) &&\n                        item.status !== ItemStatus.PROCESSING &&\n                        item.status !== ItemStatus.PROCESSING_COMPLETE &&\n                        item.status !== ItemStatus.PROCESSING_REVERT_ERROR\n                    );\n                });\n\n                return Promise.all(files.map(processFile));\n            }\n            return Promise.all(queries.map(processFile));\n        };\n\n        var removeFiles = function removeFiles() {\n            for (\n                var _len4 = arguments.length, args = new Array(_len4), _key4 = 0;\n                _key4 < _len4;\n                _key4++\n            ) {\n                args[_key4] = arguments[_key4];\n            }\n\n            var queries = Array.isArray(args[0]) ? args[0] : args;\n\n            var options;\n            if (typeof queries[queries.length - 1] === 'object') {\n                options = queries.pop();\n            } else if (Array.isArray(args[0])) {\n                options = args[1];\n            }\n\n            var files = getFiles();\n\n            if (!queries.length)\n                return Promise.all(\n                    files.map(function(file) {\n                        return removeFile(file, options);\n                    })\n                );\n\n            // when removing by index the indexes shift after each file removal so we need to convert indexes to ids\n            var mappedQueries = queries\n                .map(function(query) {\n                    return isNumber(query) ? (files[query] ? files[query].id : null) : query;\n                })\n                .filter(function(query) {\n                    return query;\n                });\n\n            return mappedQueries.map(function(q) {\n                return removeFile(q, options);\n            });\n        };\n\n        var exports = Object.assign(\n            {},\n\n            on(),\n            {},\n\n            readWriteApi,\n            {},\n\n            createOptionAPI(store, defaultOptions),\n            {\n                /**\n                 * Override options defined in options object\n                 * @param options\n                 */\n                setOptions: setOptions,\n\n                /**\n                 * Load the given file\n                 * @param source - the source of the file (either a File, base64 data uri or url)\n                 * @param options - object, { index: 0 }\n                 */\n                addFile: addFile,\n\n                /**\n                 * Load the given files\n                 * @param sources - the sources of the files to load\n                 * @param options - object, { index: 0 }\n                 */\n                addFiles: addFiles,\n\n                /**\n                 * Returns the file objects matching the given query\n                 * @param query { string, number, null }\n                 */\n                getFile: getFile,\n\n                /**\n                 * Upload file with given name\n                 * @param query { string, number, null  }\n                 */\n                processFile: processFile,\n\n                /**\n                 * Request prepare output for file with given name\n                 * @param query { string, number, null  }\n                 */\n                prepareFile: prepareFile,\n\n                /**\n                 * Removes a file by its name\n                 * @param query { string, number, null  }\n                 */\n                removeFile: removeFile,\n\n                /**\n                 * Moves a file to a new location in the files list\n                 */\n                moveFile: function moveFile(query, index) {\n                    return store.dispatch('MOVE_ITEM', { query: query, index: index });\n                },\n\n                /**\n                 * Returns all files (wrapped in public api)\n                 */\n                getFiles: getFiles,\n\n                /**\n                 * Starts uploading all files\n                 */\n                processFiles: processFiles,\n\n                /**\n                 * Clears all files from the files list\n                 */\n                removeFiles: removeFiles,\n\n                /**\n                 * Starts preparing output of all files\n                 */\n                prepareFiles: prepareFiles,\n\n                /**\n                 * Sort list of files\n                 */\n                sort: function sort(compare) {\n                    return store.dispatch('SORT', { compare: compare });\n                },\n\n                /**\n                 * Browse the file system for a file\n                 */\n                browse: function browse() {\n                    // needs to be trigger directly as user action needs to be traceable (is not traceable in requestAnimationFrame)\n                    var input = view.element.querySelector('input[type=file]');\n                    if (input) {\n                        input.click();\n                    }\n                },\n\n                /**\n                 * Destroys the app\n                 */\n                destroy: function destroy() {\n                    // request destruction\n                    exports.fire('destroy', view.element);\n\n                    // stop active processes (file uploads, fetches, stuff like that)\n                    // loop over items and depending on states call abort for ongoing processes\n                    store.dispatch('ABORT_ALL');\n\n                    // destroy view\n                    view._destroy();\n\n                    // stop listening to resize\n                    window.removeEventListener('resize', resizeHandler);\n\n                    // stop listening to the visiblitychange event\n                    document.removeEventListener('visibilitychange', visibilityHandler);\n\n                    // dispatch destroy\n                    store.dispatch('DID_DESTROY');\n                },\n\n                /**\n                 * Inserts the plugin before the target element\n                 */\n                insertBefore: function insertBefore$1(element) {\n                    return insertBefore(view.element, element);\n                },\n\n                /**\n                 * Inserts the plugin after the target element\n                 */\n                insertAfter: function insertAfter$1(element) {\n                    return insertAfter(view.element, element);\n                },\n\n                /**\n                 * Appends the plugin to the target element\n                 */\n                appendTo: function appendTo(element) {\n                    return element.appendChild(view.element);\n                },\n\n                /**\n                 * Replaces an element with the app\n                 */\n                replaceElement: function replaceElement(element) {\n                    // insert the app before the element\n                    insertBefore(view.element, element);\n\n                    // remove the original element\n                    element.parentNode.removeChild(element);\n\n                    // remember original element\n                    originalElement = element;\n                },\n\n                /**\n                 * Restores the original element\n                 */\n                restoreElement: function restoreElement() {\n                    if (!originalElement) {\n                        return; // no element to restore\n                    }\n\n                    // restore original element\n                    insertAfter(originalElement, view.element);\n\n                    // remove our element\n                    view.element.parentNode.removeChild(view.element);\n\n                    // remove reference\n                    originalElement = null;\n                },\n\n                /**\n                 * Returns true if the app root is attached to given element\n                 * @param element\n                 */\n                isAttachedTo: function isAttachedTo(element) {\n                    return view.element === element || originalElement === element;\n                },\n\n                /**\n                 * Returns the root element\n                 */\n                element: {\n                    get: function get() {\n                        return view.element;\n                    },\n                },\n\n                /**\n                 * Returns the current pond status\n                 */\n                status: {\n                    get: function get() {\n                        return store.query('GET_STATUS');\n                    },\n                },\n            }\n        );\n\n        // Done!\n        store.dispatch('DID_INIT');\n\n        // create actual api object\n        return createObject(exports);\n    };\n\n    var createAppObject = function createAppObject() {\n        var customOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        // default options\n        var defaultOptions = {};\n        forin(getOptions(), function(key, value) {\n            defaultOptions[key] = value[0];\n        });\n\n        // set app options\n        var app = createApp(\n            Object.assign(\n                {},\n\n                defaultOptions,\n                {},\n\n                customOptions\n            )\n        );\n\n        // return the plugin instance\n        return app;\n    };\n\n    var lowerCaseFirstLetter = function lowerCaseFirstLetter(string) {\n        return string.charAt(0).toLowerCase() + string.slice(1);\n    };\n\n    var attributeNameToPropertyName = function attributeNameToPropertyName(attributeName) {\n        return toCamels(attributeName.replace(/^data-/, ''));\n    };\n\n    var mapObject = function mapObject(object, propertyMap) {\n        // remove unwanted\n        forin(propertyMap, function(selector, mapping) {\n            forin(object, function(property, value) {\n                // create regexp shortcut\n                var selectorRegExp = new RegExp(selector);\n\n                // tests if\n                var matches = selectorRegExp.test(property);\n\n                // no match, skip\n                if (!matches) {\n                    return;\n                }\n\n                // if there's a mapping, the original property is always removed\n                delete object[property];\n\n                // should only remove, we done!\n                if (mapping === false) {\n                    return;\n                }\n\n                // move value to new property\n                if (isString(mapping)) {\n                    object[mapping] = value;\n                    return;\n                }\n\n                // move to group\n                var group = mapping.group;\n                if (isObject(mapping) && !object[group]) {\n                    object[group] = {};\n                }\n\n                object[group][lowerCaseFirstLetter(property.replace(selectorRegExp, ''))] = value;\n            });\n\n            // do submapping\n            if (mapping.mapping) {\n                mapObject(object[mapping.group], mapping.mapping);\n            }\n        });\n    };\n\n    var getAttributesAsObject = function getAttributesAsObject(node) {\n        var attributeMapping =\n            arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        // turn attributes into object\n        var attributes = [];\n        forin(node.attributes, function(index) {\n            attributes.push(node.attributes[index]);\n        });\n\n        var output = attributes\n            .filter(function(attribute) {\n                return attribute.name;\n            })\n            .reduce(function(obj, attribute) {\n                var value = attr(node, attribute.name);\n\n                obj[attributeNameToPropertyName(attribute.name)] =\n                    value === attribute.name ? true : value;\n                return obj;\n            }, {});\n\n        // do mapping of object properties\n        mapObject(output, attributeMapping);\n\n        return output;\n    };\n\n    var createAppAtElement = function createAppAtElement(element) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        // how attributes of the input element are mapped to the options for the plugin\n        var attributeMapping = {\n            // translate to other name\n            '^class$': 'className',\n            '^multiple$': 'allowMultiple',\n            '^capture$': 'captureMethod',\n            '^webkitdirectory$': 'allowDirectoriesOnly',\n\n            // group under single property\n            '^server': {\n                group: 'server',\n                mapping: {\n                    '^process': {\n                        group: 'process',\n                    },\n\n                    '^revert': {\n                        group: 'revert',\n                    },\n\n                    '^fetch': {\n                        group: 'fetch',\n                    },\n\n                    '^restore': {\n                        group: 'restore',\n                    },\n\n                    '^load': {\n                        group: 'load',\n                    },\n                },\n            },\n\n            // don't include in object\n            '^type$': false,\n            '^files$': false,\n        };\n\n        // add additional option translators\n        applyFilters('SET_ATTRIBUTE_TO_OPTION_MAP', attributeMapping);\n\n        // create final options object by setting options object and then overriding options supplied on element\n        var mergedOptions = Object.assign({}, options);\n\n        var attributeOptions = getAttributesAsObject(\n            element.nodeName === 'FIELDSET' ? element.querySelector('input[type=file]') : element,\n            attributeMapping\n        );\n\n        // merge with options object\n        Object.keys(attributeOptions).forEach(function(key) {\n            if (isObject(attributeOptions[key])) {\n                if (!isObject(mergedOptions[key])) {\n                    mergedOptions[key] = {};\n                }\n                Object.assign(mergedOptions[key], attributeOptions[key]);\n            } else {\n                mergedOptions[key] = attributeOptions[key];\n            }\n        });\n\n        // if parent is a fieldset, get files from parent by selecting all input fields that are not file upload fields\n        // these will then be automatically set to the initial files\n        mergedOptions.files = (options.files || []).concat(\n            Array.from(element.querySelectorAll('input:not([type=file])')).map(function(input) {\n                return {\n                    source: input.value,\n                    options: {\n                        type: input.dataset.type,\n                    },\n                };\n            })\n        );\n\n        // build plugin\n        var app = createAppObject(mergedOptions);\n\n        // add already selected files\n        if (element.files) {\n            Array.from(element.files).forEach(function(file) {\n                app.addFile(file);\n            });\n        }\n\n        // replace the target element\n        app.replaceElement(element);\n\n        // expose\n        return app;\n    };\n\n    // if an element is passed, we create the instance at that element, if not, we just create an up object\n    var createApp$1 = function createApp() {\n        return isNode(arguments.length <= 0 ? undefined : arguments[0])\n            ? createAppAtElement.apply(void 0, arguments)\n            : createAppObject.apply(void 0, arguments);\n    };\n\n    var PRIVATE_METHODS = ['fire', '_read', '_write'];\n\n    var createAppAPI = function createAppAPI(app) {\n        var api = {};\n\n        copyObjectPropertiesToObject(app, api, PRIVATE_METHODS);\n\n        return api;\n    };\n\n    /**\n     * Replaces placeholders in given string with replacements\n     * @param string - \"Foo {bar}\"\"\n     * @param replacements - { \"bar\": 10 }\n     */\n    var replaceInString = function replaceInString(string, replacements) {\n        return string.replace(/(?:{([a-zA-Z]+)})/g, function(match, group) {\n            return replacements[group];\n        });\n    };\n\n    var createWorker = function createWorker(fn) {\n        var workerBlob = new Blob(['(', fn.toString(), ')()'], {\n            type: 'application/javascript',\n        });\n\n        var workerURL = URL.createObjectURL(workerBlob);\n        var worker = new Worker(workerURL);\n\n        return {\n            transfer: function transfer(message, cb) {},\n            post: function post(message, cb, transferList) {\n                var id = getUniqueId();\n\n                worker.onmessage = function(e) {\n                    if (e.data.id === id) {\n                        cb(e.data.message);\n                    }\n                };\n\n                worker.postMessage(\n                    {\n                        id: id,\n                        message: message,\n                    },\n\n                    transferList\n                );\n            },\n            terminate: function terminate() {\n                worker.terminate();\n                URL.revokeObjectURL(workerURL);\n            },\n        };\n    };\n\n    var loadImage = function loadImage(url) {\n        return new Promise(function(resolve, reject) {\n            var img = new Image();\n            img.onload = function() {\n                resolve(img);\n            };\n            img.onerror = function(e) {\n                reject(e);\n            };\n            img.src = url;\n        });\n    };\n\n    var renameFile = function renameFile(file, name) {\n        var renamedFile = file.slice(0, file.size, file.type);\n        renamedFile.lastModifiedDate = file.lastModifiedDate;\n        renamedFile.name = name;\n        return renamedFile;\n    };\n\n    var copyFile = function copyFile(file) {\n        return renameFile(file, file.name);\n    };\n\n    // already registered plugins (can't register twice)\n    var registeredPlugins = [];\n\n    // pass utils to plugin\n    var createAppPlugin = function createAppPlugin(plugin) {\n        // already registered\n        if (registeredPlugins.includes(plugin)) {\n            return;\n        }\n\n        // remember this plugin\n        registeredPlugins.push(plugin);\n\n        // setup!\n        var pluginOutline = plugin({\n            addFilter: addFilter,\n            utils: {\n                Type: Type,\n                forin: forin,\n                isString: isString,\n                isFile: isFile,\n                toNaturalFileSize: toNaturalFileSize,\n                replaceInString: replaceInString,\n                getExtensionFromFilename: getExtensionFromFilename,\n                getFilenameWithoutExtension: getFilenameWithoutExtension,\n                guesstimateMimeType: guesstimateMimeType,\n                getFileFromBlob: getFileFromBlob,\n                getFilenameFromURL: getFilenameFromURL,\n                createRoute: createRoute,\n                createWorker: createWorker,\n                createView: createView,\n                createItemAPI: createItemAPI,\n                loadImage: loadImage,\n                copyFile: copyFile,\n                renameFile: renameFile,\n                createBlob: createBlob,\n                applyFilterChain: applyFilterChain,\n                text: text,\n                getNumericAspectRatioFromString: getNumericAspectRatioFromString,\n            },\n\n            views: {\n                fileActionButton: fileActionButton,\n            },\n        });\n\n        // add plugin options to default options\n        extendDefaultOptions(pluginOutline.options);\n    };\n\n    // feature detection used by supported() method\n    var isOperaMini = function isOperaMini() {\n        return Object.prototype.toString.call(window.operamini) === '[object OperaMini]';\n    };\n    var hasPromises = function hasPromises() {\n        return 'Promise' in window;\n    };\n    var hasBlobSlice = function hasBlobSlice() {\n        return 'slice' in Blob.prototype;\n    };\n    var hasCreateObjectURL = function hasCreateObjectURL() {\n        return 'URL' in window && 'createObjectURL' in window.URL;\n    };\n    var hasVisibility = function hasVisibility() {\n        return 'visibilityState' in document;\n    };\n    var hasTiming = function hasTiming() {\n        return 'performance' in window;\n    }; // iOS 8.x\n    var hasCSSSupports = function hasCSSSupports() {\n        return 'supports' in (window.CSS || {});\n    }; // use to detect Safari 9+\n    var isIE11 = function isIE11() {\n        return /MSIE|Trident/.test(window.navigator.userAgent);\n    };\n\n    var supported = (function() {\n        // Runs immediately and then remembers result for subsequent calls\n        var isSupported =\n            // Has to be a browser\n            isBrowser() &&\n            // Can't run on Opera Mini due to lack of everything\n            !isOperaMini() &&\n            // Require these APIs to feature detect a modern browser\n            hasVisibility() &&\n            hasPromises() &&\n            hasBlobSlice() &&\n            hasCreateObjectURL() &&\n            hasTiming() &&\n            // doesn't need CSSSupports but is a good way to detect Safari 9+ (we do want to support IE11 though)\n            (hasCSSSupports() || isIE11());\n\n        return function() {\n            return isSupported;\n        };\n    })();\n\n    /**\n     * Plugin internal state (over all instances)\n     */\n    var state = {\n        // active app instances, used to redraw the apps and to find the later\n        apps: [],\n    };\n\n    // plugin name\n    var name = 'filepond';\n\n    /**\n     * Public Plugin methods\n     */\n    var fn = function fn() {};\n    exports.Status = {};\n    exports.FileStatus = {};\n    exports.FileOrigin = {};\n    exports.OptionTypes = {};\n    exports.create = fn;\n    exports.destroy = fn;\n    exports.parse = fn;\n    exports.find = fn;\n    exports.registerPlugin = fn;\n    exports.getOptions = fn;\n    exports.setOptions = fn;\n\n    // if not supported, no API\n    if (supported()) {\n        // start painter and fire load event\n        createPainter(\n            function() {\n                state.apps.forEach(function(app) {\n                    return app._read();\n                });\n            },\n            function(ts) {\n                state.apps.forEach(function(app) {\n                    return app._write(ts);\n                });\n            }\n        );\n\n        // fire loaded event so we know when FilePond is available\n        var dispatch = function dispatch() {\n            // let others know we have area ready\n            document.dispatchEvent(\n                new CustomEvent('FilePond:loaded', {\n                    detail: {\n                        supported: supported,\n                        create: exports.create,\n                        destroy: exports.destroy,\n                        parse: exports.parse,\n                        find: exports.find,\n                        registerPlugin: exports.registerPlugin,\n                        setOptions: exports.setOptions,\n                    },\n                })\n            );\n\n            // clean up event\n            document.removeEventListener('DOMContentLoaded', dispatch);\n        };\n\n        if (document.readyState !== 'loading') {\n            // move to back of execution queue, FilePond should have been exported by then\n            setTimeout(function() {\n                return dispatch();\n            }, 0);\n        } else {\n            document.addEventListener('DOMContentLoaded', dispatch);\n        }\n\n        // updates the OptionTypes object based on the current options\n        var updateOptionTypes = function updateOptionTypes() {\n            return forin(getOptions(), function(key, value) {\n                exports.OptionTypes[key] = value[1];\n            });\n        };\n\n        exports.Status = Object.assign({}, Status);\n        exports.FileOrigin = Object.assign({}, FileOrigin);\n        exports.FileStatus = Object.assign({}, ItemStatus);\n\n        exports.OptionTypes = {};\n        updateOptionTypes();\n\n        // create method, creates apps and adds them to the app array\n        exports.create = function create() {\n            var app = createApp$1.apply(void 0, arguments);\n            app.on('destroy', exports.destroy);\n            state.apps.push(app);\n            return createAppAPI(app);\n        };\n\n        // destroys apps and removes them from the app array\n        exports.destroy = function destroy(hook) {\n            // returns true if the app was destroyed successfully\n            var indexToRemove = state.apps.findIndex(function(app) {\n                return app.isAttachedTo(hook);\n            });\n            if (indexToRemove >= 0) {\n                // remove from apps\n                var app = state.apps.splice(indexToRemove, 1)[0];\n\n                // restore original dom element\n                app.restoreElement();\n\n                return true;\n            }\n\n            return false;\n        };\n\n        // parses the given context for plugins (does not include the context element itself)\n        exports.parse = function parse(context) {\n            // get all possible hooks\n            var matchedHooks = Array.from(context.querySelectorAll('.' + name));\n\n            // filter out already active hooks\n            var newHooks = matchedHooks.filter(function(newHook) {\n                return !state.apps.find(function(app) {\n                    return app.isAttachedTo(newHook);\n                });\n            });\n\n            // create new instance for each hook\n            return newHooks.map(function(hook) {\n                return exports.create(hook);\n            });\n        };\n\n        // returns an app based on the given element hook\n        exports.find = function find(hook) {\n            var app = state.apps.find(function(app) {\n                return app.isAttachedTo(hook);\n            });\n            if (!app) {\n                return null;\n            }\n            return createAppAPI(app);\n        };\n\n        // adds a plugin extension\n        exports.registerPlugin = function registerPlugin() {\n            for (\n                var _len = arguments.length, plugins = new Array(_len), _key = 0;\n                _key < _len;\n                _key++\n            ) {\n                plugins[_key] = arguments[_key];\n            }\n\n            // register plugins\n            plugins.forEach(createAppPlugin);\n\n            // update OptionTypes, each plugin might have extended the default options\n            updateOptionTypes();\n        };\n\n        exports.getOptions = function getOptions$1() {\n            var opts = {};\n            forin(getOptions(), function(key, value) {\n                opts[key] = value[0];\n            });\n            return opts;\n        };\n\n        exports.setOptions = function setOptions$1(opts) {\n            if (isObject(opts)) {\n                // update existing plugins\n                state.apps.forEach(function(app) {\n                    app.setOptions(opts);\n                });\n\n                // override defaults\n                setOptions(opts);\n            }\n\n            // return new options\n            return exports.getOptions();\n        };\n    }\n\n    exports.supported = supported;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","/**\n * FilePond\n */\nimport * as FilePond from \"filepond\"\nimport FilePondPluginFileValidateType from \"filepond-plugin-file-validate-type\"\nimport FilePondPluginImageResize from \"filepond-plugin-image-resize\"\nimport FilePondPluginImageTransform from \"filepond-plugin-image-transform\"\nimport FilePondPluginImagePreview from \"filepond-plugin-image-preview\"\nimport \"filepond/dist/filepond.css\"\nimport \"filepond-plugin-image-preview/dist/filepond-plugin-image-preview.css\"\n\nFilePond.registerPlugin(\n  FilePondPluginFileValidateType,\n  FilePondPluginImageResize,\n  FilePondPluginImageTransform,\n  FilePondPluginImagePreview\n)\nFilePond.setOptions({\n  allowPaste: false,\n  server: {\n    process: {\n      url: \"/uploads\",\n      headers: {\"X-CSRF-Token\": Ktistec.csrf, \"Accept\": \"text/plain\"}\n    },\n    revert: {\n      url: \"/uploads\",\n      headers: {\"X-CSRF-Token\": Ktistec.csrf}\n    },\n    restore: {\n      url: \"\"\n    },\n    load: {\n      url: \"\"\n    },\n    fetch: null,\n    patch: null\n  }\n})\n\nfunction initialize() {\n  function enable(selector, width, height) {\n    let input = document.querySelector(selector)\n    if (input) {\n      let files = []\n      let value = input.getAttribute(\"value\")\n      if (value) {\n        files.push({\n          source: new URL(input.getAttribute(\"value\")).pathname,\n          options: {\n            type: \"local\"\n          }\n        })\n      }\n      FilePond.create(input, {\n        acceptedFileTypes: [\"image/png\", \"image/jpeg\", \"image/gif\"],\n        imageResizeTargetWidth: width,\n        imageResizeTargetHeight: height,\n        files: files\n      })\n    }\n  }\n  enable(\"form[action='/settings/actor'] input[type='file'][name='image']\", 1400, 700)\n  enable(\"form[action='/settings/actor'] input[type='file'][name='icon']\", 240, 240)\n}\n\ndocument.addEventListener(\"turbo:load\", initialize)\ndocument.addEventListener(\"turbo:render\", initialize)\n\ninitialize()\n"],"names":["module","exports","plugin","_ref","addFilter","Type","utils","item","_ref2","query","Promise","resolve","reject","file","test","type","isImage","mode","width","height","upscale","url","cb","image","targetWidth","targetHeight","fileURL","URL","createObjectURL","size","revokeObjectURL","imageWidth","imageHeight","orientation","getMetadata","_ref3","setMetadata","Image","onload","naturalWidth","naturalHeight","onerror","src","options","allowImageResize","BOOLEAN","imageResizeMode","STRING","imageResizeUpscale","imageResizeTargetWidth","INT","imageResizeTargetHeight","window","document","dispatchEvent","CustomEvent","detail","factory","_AwaitValue","value","this","wrapped","_AsyncGenerator","gen","front","back","resume","key","arg","result","wrappedAwait","then","settle","done","err","next","_invoke","request","return","undefined","_slicedToArray","arr","i","Array","isArray","_arrayWithHoles","_arr","_n","_d","_e","_s","_i","Symbol","iterator","push","length","_iterableToArrayLimit","TypeError","_nonIterableRest","asyncIterator","prototype","throw","vectorMultiply","v","amount","createVector","x","y","vectorAdd","a","b","vectorRotate","radians","origin","cos","Math","sin","t","arguments","getMarkupValue","scalar","axis","parseFloat","min","isDefined","setAttributes","element","attr","Object","keys","forEach","setAttribute","svg","tag","createElementNS","IMAGE_FIT_STYLE","contain","cover","TEXT_ANCHOR","left","center","right","createShape","node","markup","id","CREATE_TYPE_ROUTES","shape","opacity","setAttributeNS","rect","ellipse","text","path","line","appendChild","begin","end","UPDATE_TYPE_ROUTES","assign","styles","cx","cy","rx","ry","preserveAspectRatio","fit","scale","fontSize","fontFamily","fontWeight","textAlign","textContent","points","fill","d","map","point","index","concat","join","childNodes","target","x1","y1","x2","y2","lineDecoration","style","display","l","sqrt","vectorNormalize","indexOf","arrowBeginRotationPoint","arrowBeginCenter","arrowBeginA","arrowBeginB","arrowEndRotationPoint","arrowEndCenter","arrowEndA","arrowEndB","updateMarkupByType","top","bottom","getMarkupRect","lineStyle","borderStyle","backgroundColor","fontColor","stroke","borderColor","lineColor","strokeWidth","borderWidth","lineWidth","lineCap","lineJoin","getMarkupStyles","MARKUP_RECT","prepareMarkup","_markup","props","reduce","prev","curr","zIndex","sortMarkupByZIndex","createMarkupView","_","createView","name","ignoreRect","mixins","apis","write","root","dirty","crop","resize","viewWidth","viewHeight","cropWidth","cropHeight","_size","outputWidth","outputHeight","outputFit","outputUpscale","shouldUpscale","scalarWidth","scalarHeight","max","innerHTML","markupFilter","filter","sort","settings","createMarkupByType","createVector$1","vectorSubtract","vectorDistance","vectorDot","vectorDistanceSquared","getOffsetPointOnEdge","rotation","B","C","sinA","sinB","sinC","cosC","ratio","getImageRectZoomFactor","imageRect","cropRect","rotatedCropSize","w","h","hor","ver","tl","abs","tr","bl","getRotatedRectSize","getCenteredCropRect","container","aspectRatio","getCurrentCropSize","imageSize","zoom","canvasSize","canvasAspectRatio","imageAspectRatio","canvasHeight","imgWidth","imgHeight","calculateCanvasSize","canvasCenter","stage","shouldLimit","scaleToFit","widthFloat","heightFloat","round","IMAGE_SCALE_SPRING_PROPS","stiffness","damping","mass","createClipView","animations","duration","didWriteView","_ref4","background","create","_ref5","ref","appendChildView","createChildView","originX","originY","scaleX","scaleY","translateX","translateY","rotateZ","bitmap","createBitmapView","flip","horizontal","vertical","createImageCanvasWrapper","createMarkup","destroyMarkup","removeChildView","transparencyIndicator","dataset","_ref6","shouldOptimize","translation","PI","cropAspectRatio","stageZoomFactor","imageView","SVGMaskUniqueId","BitmapWorker","self","onmessage","e","createImageBitmap","data","message","postMessage","ColorMatrixWorker","imageData","matrix","colorMatrix","m11","m12","m13","m14","m15","m21","m22","m23","m24","m25","m31","m32","m33","m34","m35","m41","m42","m43","m44","m45","r","g","buffer","transforms","createPreviewImage","canvas","createElement","ctx","getContext","transform","apply","fixImageOrientation","drawImage","isBitmap","calculateAverageColor","ceil","getImageData","averageColor","c","floor","createImageWrapperView","OverlayView","mask","querySelector","location","href","replace","hash","classList","add","status","ImageView","_ref7","clip","_ref8","hidden","containerWidth","inner","containerHeight","fixedPreviewHeight","minPreviewHeight","maxPreviewHeight","panelAspectRatio","allowMultiple","clipHeight","clipWidth","createImageView","createWorker","applyFilter","ImageData","createImageData","set","Uint8ClampedArray","cloneImageData","putImageData","worker","post","response","terminate","pushImage","childViews","images","setTimeout","dispatch","restoreOverlay","_ref9","overlayShadow","overlayError","overlaySuccess","didThrowError","_ref10","_ref12","imageViewBin","destroy","_ref13","_ref14","createRoute","DID_IMAGE_PREVIEW_DRAW","DID_IMAGE_PREVIEW_CONTAINER_CREATE","DID_FINISH_CALCULATE_PREVIEWSIZE","isFirefox","firefoxVersion","loadPreviewFallback","img","crossOrigin","previewImageLoaded","pixelDensityFactor","devicePixelRatio","scaleFactor","previewImageRatio","previewContainerWidth","previewContainerHeight","previewImage","close","navigator","userAgent","match","parseInt","imageBitmap","DID_UPDATE_ITEM_METADATA","action","change","_imageView","shift","shiftImage","updateImage","DID_THROW_ITEM_LOAD_ERROR","DID_THROW_ITEM_PROCESSING_ERROR","DID_THROW_ITEM_INVALID","DID_COMPLETE_ITEM_PROCESSING","_ref11","DID_START_ITEM_PROCESSING","DID_REVERT_ITEM_PROCESSING","_ref15","viewsToRemove","_destroy","removeImageView","fpAPI","isFile","imagePreviewView","viewAPI","is","view","didResizeView","shouldRescale","registerWriter","DID_RESIZE_ROOT","DID_STOP_RESIZE","DID_LOAD_ITEM","archived","isPreviewableImage","supportsCreateImageBitmap","maxPreviewFileSize","imagePreview","queue","DID_IMAGE_PREVIEW_CALCULATE_SIZE","shouldDrawPreview","itemPanelAspectRatio","fixedHeight","_root$ref","previewAspectRatio","previewHeightMax","itemWidth","previewHeight","rescaleItem","requestAnimationFrame","allowImagePreview","imagePreviewFilterItem","FUNCTION","imagePreviewHeight","imagePreviewMinHeight","imagePreviewMaxHeight","imagePreviewMaxFileSize","imagePreviewZoomFactor","imagePreviewUpscale","imagePreviewMaxInstantPreviewFileSize","imagePreviewTransparencyIndicator","imagePreviewCalculateAverageImageColor","imagePreviewMarkupShow","imagePreviewMarkupFilter","isString","replaceInString","guesstimateMimeType","getExtensionFromFilename","getFilenameFromURL","isValidMimeType","acceptedTypes","userInputType","some","acceptedType","wildcard","exec","pop","slice","validateFile","acceptedFileTypes","typeDetector","filename","extension","getItemType","detectedType","catch","accept","validationResult","handleRejection","acceptedFileTypesMapped","acceptedFileType","label","acceptedFileTypesMappedUnique","main","sub","allTypes","allButLastType","lastType","allowFileTypeValidation","ARRAY","labelFileTypeNotAllowed","fileValidateTypeLabelExpectedTypes","fileValidateTypeLabelExpectedTypesMap","OBJECT","fileValidateTypeDetectType","ExtensionMap","jpeg","MATRICES","canvasRelease","clearRect","isFlipped","getBitmap","swapped","getImageOrientationMatrix","HTMLCanvasElement","toBlob","defineProperty","callback","quality","dataURL","toDataURL","split","binStr","atob","len","Uint8Array","charCodeAt","Blob","cropSVG","blob","_options$background","fr","FileReader","onloadend","original","cssText","originalNode","body","bBox","getBBox","parentNode","removeChild","titleNode","viewBoxAttribute","getAttribute","widthAttribute","heightAttribute","widthUnits","heightUnits","viewBoxList","viewBox","overflow","markupSVG","el","removeAttribute","outerHTML","canvasWidth","cropCenterX","cropCenterY","canvasZoomFactor","imageOffset","cropTransforms","cropFlipHorizontal","cropFlipVertical","flipTransforms","transformed","readAsText","TransformWorker","TRANSFORMS","_data$mode","_data$upscale","isIdentityMatrix","originWidth","originHeight","inputData","outputData","ratioWidth","ratioHeight","ratioWidthHalf","ratioHeightHalf","j","weight","weights","weightsAlpha","centerY","yy","dy","centerX","w0","xx","dx","applyFilterMatrix","filterTransform","resizeTransform","applyTransforms","br","bg","bb","m","ir","ig","ib","ia","mr","mg","mb","ma","or","og","ob","identityMatrix","JSON","stringify","correctOrientation","offset","getUint32","intelByteAligned","getUint16","tags","setUint16","getImageHead","reader","DataView","marker","markerLength","orientationCorrected","byteLength","readData","readAsArrayBuffer","createBlob","arrayBuffer","mimeType","BB","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","append","getBlob","fn","workerBlob","toString","workerURL","Worker","trips","transfer","transferList","random","substr","canvasApplyMarkup","funcs","drawers","TYPE_DRAW_ROUTES","promise","func","bind","applyMarkupStyles","beginPath","setLineDash","fillStyle","strokeStyle","globalAlpha","drawMarkupStyles","kappa","ox","oy","xe","ye","xm","ym","moveTo","bezierCurveTo","ar","_width","_height","_x","_y","font","fillText","lineTo","transformImage","instructions","isImage$1","stripImageHead","beforeCreateBlob","afterCreateBlob","canvasMemoryLimit","output","qualityAsPercentage","resolveWithBlob","promisedBlob","imageDataToCanvas","promisedCanvas","promisedImage","canvasToBlob","imageHead","loadImage","imageElement","requiredMemory","fillRect","translate","rotate","imageToImageData","outputFormat","obj","objectToImageData","isBrowser","isIOS","MSStream","forin","getFileFromBlob","TRANSFORM_LIST","isDefaultCrop","shouldPrepareOutput","shouldTransformFile","measure","clearInterval","intervalId","setInterval","getImageSize","filterResult","handleRevert","extend","success","failure","shouldTransform","variants","metadata","variantsDefinition","updateMetadata","createVariant","qualityMode","clientTransforms","client","filteredMetadata","instruction","exif","willChangeType","canChangeQuality","willChangeQuality","out","lastIndexOf","getFilenameWithoutExtension","renameFileToMatchMimeType","getValidOutputMimeType","variantPromises","all","files","allowImageTransform","imageTransformImageFilter","imageTransformOutputMimeType","imageTransformOutputQuality","imageTransformOutputStripImageHead","imageTransformClientTransforms","imageTransformOutputQualityMode","imageTransformVariants","imageTransformVariantsIncludeDefault","imageTransformVariantsDefaultName","imageTransformVariantsIncludeOriginal","imageTransformVariantsOriginalName","imageTransformBeforeCreateBlob","imageTransformAfterCreateBlob","imageTransformCanvasMemoryLimit","imageTransformCanvasBackgroundColor","hasOwnProperty","createObject","definition","property","hasAttribute","svgElements","isSVGElement","includes","className","attributes","parent","splice","IS_BROWSER","getChildCount","children","getViewRect","elementRect","outer","childView","isRectIgnored","childViewRect","expandRect","calculateRectSize","marginBottom","marginRight","child","isNumber","easeInOutQuad","animator","spring","_ref$stiffness","_ref$damping","_ref$mass","position","velocity","resting","api","interpolate","ts","skipToEndState","destination","errorMargin","thereYet","onupdate","oncomplete","get","tween","p","_ref$duration","_ref$easing","easing","_ref$delay","delay","start","reverse","createAnimator","category","def","addGetSet","overwrite","o","getter","setter","defaults","rotateX","rotateY","propsHaveChanged","currentProps","newProps","prop","applyStyles","perspective","elementCurrentStyle","Mixins","mixinConfig","viewProps","viewInternalAPI","viewExternalAPI","initialProps","getRect","listeners","viewState","events","addEventListener","remove","removeEventListener","removeEvent","on","off","findIndex","event","animation","updateRect","layoutCalculated","paddingTop","marginTop","marginLeft","offsetLeft","offsetTop","offsetWidth","offsetHeight","scrollTop","offsetParent","_ref$tag","_ref$name","_ref$attributes","_ref$read","read","_ref$write","_ref$create","_ref$destroy","_ref$filterFrameActio","filterFrameActionsForChild","actions","_ref$didCreateView","didCreateView","_ref$didWriteView","_ref$ignoreRect","_ref$ignoreRectUpdate","ignoreRectUpdate","_ref$mixins","store","getComputedStyle","frameRect","isResting","activeMixins","state","writers","readers","destroyers","getElement","getChildViews","sharedAPIDefinition","internalAPIDefinition","needle","insertBefore","linkView","unlinkView","writer","registerReader","registerDestroyer","destroyer","invalidateLayout","externalAPIDefinition","_read","internalAPI","_write","frameActions","timestamp","mixin","mixinAPIDefinition","mixinAPI","childCount","routes","_ref$actions","newNode","referenceNode","insertAfter","nextSibling","isEmpty","trim","str","isBoolean","toBoolean","toNumber","toInt","toFloat","isInt","isFinite","toBytes","base","naturalFileSize","isFunction","methods","process","patch","revert","fetch","restore","load","createAction","outline","method","timeout","headers","withCredentials","ondata","parts","header","isObject","getType","isNull","isAPI","conversionTable","array","splitter","boolean","int","number","float","bytes","string","function","levels","level","toFunctionReference","serverapi","object","parse","getValueByType","newValue","defaultValue","valueType","newValueType","convertedValue","option","createOptions","currentValue","optionDefinition","enumerable","fromCamels","separator","part","toLowerCase","createOptionActions","toUpperCase","createOptionQueries","InteractionMethod","getUniqueId","substring","_objectWithoutProperties","source","excluded","sourceKeys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","call","_toConsumableArray","arr2","_arrayWithoutHoles","iter","from","_iterableToArray","_nonIterableSpread","decimalSeparator","thousandsStringWithSeparator","arrayRemove","listener","_fire","args","sync","run","fireSync","_len","_key","fire","_len2","_key2","onOnce","_cb","copyObjectPropertiesToObject","getOwnPropertyNames","getOwnPropertyDescriptor","PRIVATE","createItemAPI","ItemStatus","INIT","IDLE","PROCESSING_QUEUED","PROCESSING","PROCESSING_COMPLETE","PROCESSING_ERROR","PROCESSING_REVERT_ERROR","LOADING","LOAD_ERROR","FileOrigin","INPUT","LIMBO","LOCAL","getNonNumeric","getDecimalSeparator","toLocaleString","NUMBER","ACTION","SERVER_API","REGEX","filters","applyFilterChain","matchingFilters","f","initialFilter","current","error","applyFilters","getOptions","defaultOptions","disabled","required","captureMethod","allowSyncAcceptAttribute","allowDrop","allowBrowse","allowPaste","allowReplace","allowRevert","allowRemove","allowProcess","allowReorder","allowDirectoriesOnly","storeAsFile","forceRevert","maxFiles","checkValidity","itemInsertLocationFreedom","itemInsertLocation","itemInsertInterval","dropOnPage","dropOnElement","dropValidation","ignoredFiles","instantUpload","maxParallelUploads","allowMinimumUploadDuration","chunkUploads","chunkForce","chunkSize","chunkRetryDelays","server","fileSizeBase","labelFileSizeBytes","labelFileSizeKilobytes","labelFileSizeMegabytes","labelFileSizeGigabytes","labelDecimalSeparator","labelThousandsSeparator","labelIdle","labelInvalidField","labelFileWaitingForSize","labelFileSizeNotAvailable","labelFileCountSingular","labelFileCountPlural","labelFileLoading","labelFileAdded","labelFileLoadError","labelFileRemoved","labelFileRemoveError","labelFileProcessing","labelFileProcessingComplete","labelFileProcessingAborted","labelFileProcessingError","labelFileProcessingRevertError","labelTapToCancel","labelTapToRetry","labelTapToUndo","labelButtonRemoveItem","labelButtonAbortItemLoad","labelButtonRetryItemLoad","labelButtonAbortItemProcessing","labelButtonUndoItemProcessing","labelButtonRetryItemProcessing","labelButtonProcessItem","iconRemove","iconProcess","iconRetry","iconUndo","iconDone","oninit","onwarning","onactivatefile","oninitfile","onaddfilestart","onaddfileprogress","onaddfile","onprocessfilestart","onprocessfileprogress","onprocessfileabort","onprocessfilerevert","onprocessfile","onprocessfiles","onremovefile","onpreparefile","onupdatefiles","onreorderfiles","beforeDropFile","beforeAddFile","beforeRemoveFile","beforePrepareFile","stylePanelLayout","stylePanelAspectRatio","styleItemPanelAspectRatio","styleButtonRemoveItemPosition","styleButtonProcessItemPosition","styleLoadIndicatorPosition","styleProgressIndicatorPosition","styleButtonRemoveItemAlign","credits","getItemByQuery","items","find","getNumericAspectRatioFromString","getActiveItems","Status","EMPTY","ERROR","BUSY","READY","res","ITEM_ERROR","ITEM_BUSY","ITEM_READY","isItemInErrorState","isItemInBusyState","isItemInReadyState","isAsync","queries","GET_STATUS","GET_ITEM","GET_ACTIVE_ITEM","GET_ACTIVE_ITEMS","GET_ITEMS","GET_ITEM_NAME","GET_ITEM_SIZE","fileSize","GET_STYLES","GET_PANEL_ASPECT_RATIO","GET_ITEM_PANEL_ASPECT_RATIO","GET_ITEMS_BY_STATUS","GET_TOTAL_ITEMS","SHOULD_UPDATE_FILE_INPUT","dataTransfer","DataTransfer","File","canUpdateFileInput","IS_ASYNC","GET_FILE_SIZE_LABELS","labelBytes","labelKilobytes","labelMegabytes","labelGigabytes","limit","isBase64DataURI","leftPad","padding","getDateString","date","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","lastModifiedDate","_relativePath","subtype","guesstimateExtension","getMimeTypeFromBase64DataURI","dataURI","getBlobFromBase64DataURI","byteString","getBase64DataFromBase64DataURI","getByteStringFromBase64DataURI","ab","ArrayBuffer","getBlobFromByteStringWithMimeType","getFileNameFromHeader","matches","decodeURI","getFileSizeFromHeader","getTranfserIdFromHeader","getFileInfoFromHeaders","info","rows","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","createFileLoader","fetchFn","complete","progress","loadURL","now","code","computable","total","fileinfo","setSource","getProgress","abort","isGet","sendRequest","onheaders","onprogress","ontimeout","onabort","aborted","xhr","headersReceived","encodeURI","encodeURIComponent","XMLHttpRequest","upload","lengthComputable","loaded","onreadystatechange","readyState","open","unescape","setRequestHeader","responseType","send","createResponse","createTimeoutResponse","getAllResponseHeaders","hasQS","buildURL","createFetchFunction","apiUrl","statusText","ChunkStatus","processFileChunked","chunks","chunkTransferId","chunkServer","serverId","fd","getResponseHeader","lastChunkIndex","retries","requestUrl","requestParams","canProcessChunk","chunk","processChunk","processChunks","updateTotalProgress","retryProcessChunk","every","clearTimeout","totalBytesTransfered","totalSize","formData","FormData","requestTransferId","createProcessorFunction","params","canChunkUpload","shouldChunkUpload","willChunkUpload","createFileProcessorFunction","createRevertFunction","uniqueFileId","getRandomNumber","createFileProcessor","processFn","perceivedProgress","perceivedPerformanceUpdater","perceivedDuration","clear","getDuration","progressFn","completeFn","tickMin","tickMax","tick","runtime","createPerceivedPerformanceUpdater","transferId","reset","deepCloneObject","createItem","serverFileReference","frozen","released","processingAborted","activeLoader","activeProcessor","abortProcessingRequestComplete","setStatus","_setMetadata","silent","last","filenameWithoutExtension","fileExtension","fileType","relativePath","handler","itemAPI","abortLoad","retryLoad","requestProcessing","abortProcessing","loader","createFileStub","meta","processor","onprocess","console","revertFileUpload","serverTransferId","freeze","release","archive","setFile","getItemById","itemId","getItemIndexByQuery","fetchBlob","getDomainFromURL","protocol","dynamicLabel","listUpdated","listUpdateTimeout","optionalPromise","sortItems","compare","getItemByQueryFromState","itemHandler","_ref$success","_ref$failure","ABORT_ALL","DID_SET_FILES","_ref2$value","activeItems","interactionMethod","itemUpdateTimeout","doUpload","MOVE_ITEM","currentIndex","SORT","ADD_ITEMS","_ref6$success","_ref6$failure","insertLocation","totalItems","promises","ADD_ITEM","_ref7$index","_ref7$success","_ref7$failure","_ref7$options","count","maxFileCount","hasRoomForItem","_item","arrayInsert","insertItem","mainStatus","handleAdd","shouldAdd","loadComplete","isExternalURL","REQUEST_PREPARE_OUTPUT","_ref9$failure","COMPLETE_LOAD_ITEM","RETRY_ITEM_LOAD","REQUEST_ITEM_PREPARE","_success","REQUEST_ITEM_PROCESSING","processNow","PROCESS_ITEM","processNext","queueEntry","processingQueue","itemReference","noop","RETRY_ITEM_PROCESSING","REQUEST_REMOVE_ITEM","shouldRemove","RELEASE_ITEM","REMOVE_ITEM","removeFromView","ABORT_ITEM_LOAD","ABORT_ITEM_PROCESSING","REQUEST_REVERT_ITEM_PROCESSING","shouldRevert","requestRemoveResult","REVERT_ITEM_PROCESSING","isMockItem","SET_OPTIONS","optionKeys","prioritizedOptionKeys","PrioritizedOptions","createElement$1","tagName","textNode","nodeValue","createTextNode","polarToCartesian","radius","angleInDegrees","angleInRadians","percentageArc","to","arcSweep","startAngle","endAngle","describeArc","progressIndicator","spin","align","ringStrokeWidth","ringFrom","ringTo","coordinates","fileActionButton","icon","isDisabled","shouldDisable","toNaturalFileSize","_options$labelBytes","_options$labelKilobyt","_options$labelMegabyt","_options$labelGigabyt","KB","MB","GB","removeDecimalsWhenZero","decimalCount","toFixed","updateFile","fileName","updateFileSizeOnError","fileInfo","DID_UPDATE_ITEM_META","toPercentage","didSetItemLoadProgress","title","fileStatus","DID_REQUEST_ITEM_PROCESSING","DID_ABORT_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_UPDATE_ITEM_LOAD_PROGRESS","DID_THROW_ITEM_PROCESSING_REVERT_ERROR","DID_THROW_ITEM_REMOVE_ERROR","Buttons","AbortItemLoad","RetryItemLoad","RemoveItem","ProcessItem","AbortItemProcessing","RetryItemProcessing","RevertItemProcessing","ButtonKeys","isSupported","calculateFileInfoOffset","getRemoveIndicatorAligment","buttonRect","buttonRemoveItem","calculateButtonWidth","buttonAbortItemLoad","calculateFileVerticalCenterOffset","calculateFileHorizontalCenterOffset","DefaultStyle","buttonRetryItemLoad","buttonProcessItem","buttonAbortItemProcessing","buttonRetryItemProcessing","buttonRevertItemProcessing","loadProgressIndicator","processProgressIndicator","processingCompleteIndicator","IdleStyle","ProcessingStyle","StyleMap","DID_START_ITEM_LOAD","DID_START_ITEM_REMOVE","DID_LOAD_LOCAL_ITEM","processingCompleteIndicatorView","route","DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING","DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD","DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL","buttonAbortItemRemoval","buttonFilter","LocalButtons","alignRemoveItemButton","enabledButtons","_map","buttonView","stopPropagation","loadIndicatorView","progressIndicatorView","activeStyles","stylesToApply","defaultStyles","control","fileWrapper","PANEL_SPRING_PROPS","createSection","section","viewConstructor","panel","heightCurrent","scalable","topRect","bottomRect","ITEM_TRANSLATE_SPRING","ITEM_SCALE_SPRING","StateMap","route$1","DID_UPDATE_PANEL_HEIGHT","write$4","DID_GRAB_ITEM","dragOrigin","DID_DRAG_ITEM","dragState","DID_DROP_ITEM","dragOffset","currentState","filepondItemState","handleClick","markedForRemoval","isPrimary","removedActivateListener","pageX","pageY","dragCenter","offsetX","offsetY","itemIds","prevIndex","setIndex","getIndex","getItemIndex","drag","preventDefault","drop","cancel","getItemsPerRow","horizontalSpace","getItemIndexByPosition","positionInView","itemRect","itemHorizontalMargin","itemsPerRow","childMid","itemVerticalMargin","itemHeight","_index","itemTop","itemRight","itemBottom","dropAreaDimensions","getHeight","setHeight","val","getWidth","setWidth","setDimensions","moveItem","vx","vy","spawnDate","introItemView","getItemHeight","route$2","DID_ADD_ITEM","addIndex","cooldown","dist","lastItemSpanwDate","DID_REMOVE_ITEM","numItems","oldIndex","dragPosition","dragHeight","dragWidth","cols","getGridIndex","getColIndex","visibleChildren","idx","childBottom","childTop","list","dragCoordinates","dragIndex","dragIndexOffset","removeIndexOffset","addIndexOffset","childRect","visualHeight","prevX","prevY","visualIndex","indexX","indexY","vectorX","sign","vectorY","route$3","DID_DRAG","scopeLeft","scopeTop","DID_END_DRAG","listScroller","overflowing","newHeight","attrToggle","setAcceptedFileTypes","toggleAllowMultiple","toggleDirectoryFilter","toggleDisabled","doesAllowBrowse","disableField","toggleRequired","setCaptureMethod","updateRequiredStatus","hasInvalidField","setCustomValidity","browser","handleChange","webkitRelativePath","input","form","resetFileInput","DID_SET_DISABLED","DID_SET_ALLOW_BROWSE","DID_SET_ALLOW_DIRECTORIES_ONLY","DID_SET_ALLOW_MULTIPLE","DID_SET_ACCEPTED_FILE_TYPES","DID_SET_CAPTURE_METHOD","DID_SET_REQUIRED","Key","updateLabelValue","clickable","dropLabel","handleKeyDown","keyCode","click","contains","caption","DID_SET_LABEL_IDLE","route$4","addBlob","DID_DROP","drip","setInputFiles","getField","fields","syncFieldPositionsWithItems","didReorderItems","write$8","shouldUseFileInput","dataContainer","field","fileItem","DID_DEFINE_VALUE","DID_PREPARE_OUTPUT","DID_REORDER_ITEMS","DID_SORT_ITEMS","legend","text$1","zip","epub","requestDataTransferItems","links","getLinks","hasFiles","getFiles","promisedFiles","isFileSystemItem","getFilesFromItem","returnedFileGroups","group","isEntry","entry","getAsEntry","isDirectory","kind","isDirectoryEntry","getFilesInDirectory","getAsFile","dirCounter","fileCounter","resolveIfDone","readEntries","dirEntry","directoryReader","createReader","readBatch","entries","correctedFile","correctMissingFileType","fullPath","webkitGetAsEntry","getLinksFromTransferMetaData","getLinksFromTransferURLData","getData","dragNDropObservers","eventPosition","pageLeft","pageTop","layerX","layerY","getDragNDropObserver","observer","newObserver","createDragNDropObserver","clients","dragenter","dragover","dragleave","handlers","createHandler","addListener","isEventTarget","elementAtPosition","elementFromPoint","getRootNode","pageXOffset","pageYOffset","initialTarget","setDropEffect","effect","dropEffect","onenter","overDropTarget","filterElement","onexit","ondrag","allowdrop","allowsTransfer","ondrop","createHopper","scope","validateItems","catchesDropsOnPage","requiresDropOnElement","_options$filterItems","filterItems","scopeToObserve","createDragNDropClient","documentElement","lastState","filteredItems","ondragend","ondragstart","updateHopperState","hopperState","listening","listeners$1","handlePaste","activeEl","activeElement","nodeName","inScope","clipboardData","createPaster","listen","addFilesNotificationTimeout","notificationClearTimeout","filenames","assist","listModified","clear$1","isUsingFilePond","itemProcessedUndo","itemError","assistant","toCamels","RegExp","charAt","debounce","interval","immidiateOnly","prevent","calculateListItemMargin","calculateListHeight","visual","bounds","scrollList","itemList","newItem","removedItem","verticalItemCount","calculateRootBoundingBoxHeight","measureHeight","cappedHeight","maxHeight","exceedsMaxFiles","maxItems","totalBrowseItems","getDragIndex","toggleDrop","isAllowed","enabled","hopper","toggleBrowse","togglePaste","paster","route$5","DID_SET_ALLOW_DROP","DID_SET_ALLOW_PASTE","widthPrevious","widthUpdated","updateHistory","previousAspectRatio","canHover","matchMedia","hasPointerEvents","passive","frag","tabIndex","rel","isMultiItem","atMaxCapacity","addAction","listItemMargin","listHeight","labelHeight","currentLabelHeight","listMarginTop","listMarginBottom","boundsHeight","history","MAX_BOUNCES","bounces","listAvailableHeight","_listAvailableHeight","isCappedHeight","panelHeight","_listAvailableHeight2","itemMargin","createApp","initialOptions","originalElement","initialState","actionQueue","dispatchQueue","isBlocking","actionHandlers","_queryHandles","queryHandles","getState","processActionQueue","processDispatchQueue","createStore","visibilityHandler","resizeDoneTimer","isResizing","isResizingHorizontally","initialWindowWidth","currentWindowWidth","resizeHandler","isHidden","readWriteApi","innerWidth","routeActionsToEvents","createEvent","eventRoutes","DID_DESTROY","DID_INIT","DID_THROW_MAX_FILES","DID_INIT_ITEM","DID_COMPLETE_ITEM_PROCESSING_ALL","DID_UPDATE_ITEMS","DID_ACTIVATE_ITEM","exposeEvent","pond","bubbles","cancelable","composed","filtered","prepareFile","removeFile","addFiles","sources","lastArgument","processFile","createOptionAPI","setOptions","addFile","getFile","moveFile","processFiles","_len3","_key3","removeFiles","_len4","_key4","q","prepareFiles","browse","appendTo","replaceElement","restoreElement","isAttachedTo","createAppObject","customOptions","mapObject","propertyMap","selector","mapping","selectorRegExp","getAttributesAsObject","attributeMapping","attribute","attributeName","createAppAtElement","mergedOptions","attributeOptions","querySelectorAll","app","createApp$1","HTMLElement","PRIVATE_METHODS","createAppAPI","replacements","renameFile","renamedFile","copyFile","registeredPlugins","createAppPlugin","pluginOutline","views","additionalOptions","supported","operamini","CSS","apps","FileStatus","OptionTypes","registerPlugin","fps","painter","requestTick","cancelTick","setTimerType","performance","cancelAnimationFrame","delta","createPainter","updateOptionTypes","hook","indexToRemove","context","newHook","plugins","opts","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","__esModule","initialize","enable","pathname","Ktistec","csrf"],"sourceRoot":""}