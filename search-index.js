crystal_doc_search_index_callback({"repository_name":"ktistec","body":"# ![Mint](public/logo.png)\n\n**Ktistec** is an ActivityPub (https://www.w3.org/TR/activitypub/) server.\nIt is intended for individual users, not farms of users, although\nsupport for additional users will be added in the future. It is\ndesigned to have few runtime dependencies -- for example, it uses\nSQLite as its database, instead of PostgreSQL + Redis + etc. It is\nlicensed under the AGPLv3.\n\nKtistec powers [Epiktistes](https://epiktistes.com/), my low-volume\nhome in the Fediverse.\n\n## Features\n\n### Posting text and images\n\nKtistec is intended for writing and currently supports the minimum\nviable set of tools for that purpose.\n\nText formatting options include *bold*, *italic*, *strikethrough*,\n*code* (inline and block), *superscript*/*subscript*, *headers*,\n*blockquotes* with nested indentation, and both *bullet* and *numeric*\nlists.\n\n<img src=\"https://raw.githubusercontent.com/toddsundsted/ktistec/master/images/tszn70.png\" width=460>\n\nKtistec supports inline placement of images, with ActivityPub image\nattachments used for compatibility with non-Ktistec servers.\n\n<img src=\"https://raw.githubusercontent.com/toddsundsted/ktistec/master/images/aecz36.png\" width=460>\n\n### Drafts\n\nMeaningful writing is an iterative process so Ktistec supports draft\nposts. Draft posts aren't visible in your timeline until you publish\nthem.\n\n<img src=\"https://raw.githubusercontent.com/toddsundsted/ktistec/master/images/683hld.png\" width=460>\n\n### Threaded replies\n\nThreaded replies make it easier to follow discussions with lots of\nposts.\n\n<img src=\"https://raw.githubusercontent.com/toddsundsted/ktistec/master/images/eaxx1q.png\" width=460>\n\n### @-mention and #-hashtag autocomplete\n\nKtistec automatically converts @-mentions and #-hashtags into links,\nand to encourage hands-on-the-keyboard composition, Ktistec supports\nautocompletion.\n\n<img src=\"https://raw.githubusercontent.com/toddsundsted/ktistec/master/images/22aee8.gif\" width=460>\n\n### Followers/following\n\nThe Fediverse is a distributed social network. You can follow other\nusers on other servers from your timeline or by searching for them by\nname. Ktistec is also compatible with the \"remote follow\" protocol\nused by Mastodon and others.\n\n<img src=\"https://raw.githubusercontent.com/toddsundsted/ktistec/master/images/88hvqq.png\" width=460>\n\n## Prerequisites\n\nTo run an instance of Ktistec, you'll need a server with a permanent\nhostname (AKA it's own domain). In the Fediverse, users are identified\nby (and content is addressed to) a hostname and a username.\n\n## Installation\n\nAt this point, leading up to Ktistec's first release, you must build\nthe server from source code. You will need a recent release of the\n[Crystal programming language](https://crystal-lang.org/).\n\nSince the project is still in development, I don't bother with a\nseparate build step. I just run the server:\n\n`$ LOG_LEVEL=DEBUG crystal run src/ktistec/server.cr`\n\n## Usage\n\nThe server runs on port 3000. If you're planning on running it in\nproduction, you should put Nginx or Apache in front of it. Don't\nforget your SSL certificate!\n\nWhen you run Ktistec for the first time, you'll need to name the\nserver and create the primary user.\n\nKtistec needs to know the *host name* of its home on the internet.\nThe server host name is a part of every users's identity in the\nFediverse. My identity is \"toddsundsted@epiktistes.com\". The host name\nis \"epiktistes.com\" and other federated servers, and users, know to\nsend posts and other content to me there.\n\nGive the server a *site name*, too.\n\n<img src=\"https://raw.githubusercontent.com/toddsundsted/ktistec/master/images/kl3yf6.png\" width=640>\n\nAfter you name the server, you create the primary user. Ktistec\ncurrently supports only one user. This is intentional -- one of\nKtistec's design goals is to promote a more fully distributed\nFediverse.\n\nAt a minimum, you need to specify the user's *username* and\n*password*. You can use a single character for the username if you\nwant, but you'll need six characters, including letters, numbers and\nsymbols, for the password.\n\n*Display name* and *summary* are optional.\n\n<img src=\"https://raw.githubusercontent.com/toddsundsted/ktistec/master/images/mq4ntx.png\" width=640>\n\nOnce these steps are done, you're running!\n\n<img src=\"https://raw.githubusercontent.com/toddsundsted/ktistec/master/images/o0ton2.png\" width=640>\n\n## Contributors\n\n- [Todd Sundsted](https://github.com/toddsundsted) - creator and maintainer\n\n## Copyright and License\n\nKtistec ActivityPub Server\nCopyright (C) 2021 Todd Sundsted\n\nThis program is free software: you can redistribute it and/or modify\nit under the terms of the GNU Affero General Public License as\npublished by the Free Software Foundation, either version 3 of the\nLicense, or (at your option) any later version.\n\nThis program is distributed in the hope that it will be useful, but\nWITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\nAffero General Public License for more details.\n\nYou should have received a copy of the GNU Affero General Public\nLicense along with this program. If not, see\n(https://www.gnu.org/licenses/).\n","program":{"html_id":"ktistec/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"superclass":null,"ancestors":[{"html_id":"ktistec/Ktistec/Database/Migration","kind":"module","full_name":"Ktistec::Database::Migration","name":"Migration"}],"locations":[],"repository_name":"ktistec","program":true,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/Ktistec/Database/Migration","kind":"module","full_name":"Ktistec::Database::Migration","name":"Migration"}],"extended_modules":[{"html_id":"ktistec/Ktistec/Database/Migration","kind":"module","full_name":"Ktistec::Database::Migration","name":"Migration"}],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"ktistec/Account","path":"Account.html","kind":"class","full_name":"Account","name":"Account","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"}],"extended_modules":[{"html_id":"ktistec/Ktistec/Model/ClassMethods","kind":"module","full_name":"Ktistec::Model::ClassMethods","name":"ClassMethods"}],"subclasses":[],"including_types":[],"namespace":null,"doc":"An ActivityPub account.\n\nAlso an account.\n","summary":"<p>An ActivityPub account.</p>","class_methods":[],"constructors":[{"id":"new(userusername:String,passpassword:String,**options)-class-method","html_id":"new(userusername:String,passpassword:String,**options)-class-method","name":"new","doc":"Allocates a new account.\n\nThis constructor is used to create new accounts (which must have a\nvalid username and password).\n","summary":"<p>Allocates a new account.</p>","abstract":false,"args":[{"name":"username","doc":null,"default_value":"","external_name":"user","restriction":"String"},{"name":"password","doc":null,"default_value":"","external_name":"pass","restriction":"String"}],"args_string":"(user username : String, pass password : String, **options)","args_html":"(user username : String, pass password : String, **options)","location":{"filename":"src/models/account.cr","line_number":26,"url":null},"def":{"name":"new","args":[{"name":"username","doc":null,"default_value":"","external_name":"user","restriction":"String"},{"name":"password","doc":null,"default_value":"","external_name":"pass","restriction":"String"}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new(**options.merge({username: username, password: password}))"}}],"instance_methods":[{"id":"_belongs_to_actor:ActivityPub::Actor?-instance-method","html_id":"_belongs_to_actor:ActivityPub::Actor?-instance-method","name":"_belongs_to_actor","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/account.cr","line_number":75,"url":null},"def":{"name":"_belongs_to_actor","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@actor"}},{"id":"_belongs_to_sessions:Enumerable(Session)?-instance-method","html_id":"_belongs_to_sessions:Enumerable(Session)?-instance-method","name":"_belongs_to_sessions","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Enumerable(Session)?","args_html":" : Enumerable(<a href=\"Session.html\">Session</a>)?","location":{"filename":"src/models/account.cr","line_number":77,"url":null},"def":{"name":"_belongs_to_sessions","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Enumerable(Session) | ::Nil","visibility":"Public","body":"@sessions"}},{"id":"actor:ActivityPub::Actor-instance-method","html_id":"actor:ActivityPub::Actor-instance-method","name":"actor","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor","args_html":" : <a href=\"ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/account.cr","line_number":75,"url":null},"def":{"name":"actor","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@actor || (@actor = (ActivityPub::Actor.find?(iri: self.iri) || (raise(NotFound.new(\"#{self.class} actor iri=#{self.iri}: not found\")))))"}},{"id":"actor=(actor:ActivityPub::Actor):ActivityPub::Actor-instance-method","html_id":"actor=(actor:ActivityPub::Actor):ActivityPub::Actor-instance-method","name":"actor=","doc":null,"summary":null,"abstract":false,"args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":"ActivityPub::Actor"}],"args_string":"(actor : ActivityPub::Actor) : ActivityPub::Actor","args_html":"(actor : <a href=\"ActivityPub/Actor.html\">ActivityPub::Actor</a>) : <a href=\"ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/account.cr","line_number":75,"url":null},"def":{"name":"actor=","args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":"ActivityPub::Actor"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@actor = actor\nself.iri = actor.iri.as(typeof(self.iri))\nactor\n"}},{"id":"actor?:ActivityPub::Actor?-instance-method","html_id":"actor?:ActivityPub::Actor?-instance-method","name":"actor?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/account.cr","line_number":75,"url":null},"def":{"name":"actor?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@actor || (@actor = (ActivityPub::Actor.find?(iri: self.iri) || nil))"}},{"id":"encrypted_password:String-instance-method","html_id":"encrypted_password:String-instance-method","name":"encrypted_password","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","args_html":" : String","location":{"filename":"src/models/account.cr","line_number":37,"url":null},"def":{"name":"encrypted_password","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@encrypted_password"}},{"id":"encrypted_password=(encrypted_password:String)-instance-method","html_id":"encrypted_password=(encrypted_password:String)-instance-method","name":"encrypted_password=","doc":null,"summary":null,"abstract":false,"args":[{"name":"encrypted_password","doc":null,"default_value":"","external_name":"encrypted_password","restriction":"String"}],"args_string":"(encrypted_password : String)","args_html":"(encrypted_password : String)","location":{"filename":"src/models/account.cr","line_number":37,"url":null},"def":{"name":"encrypted_password=","args":[{"name":"encrypted_password","doc":null,"default_value":"","external_name":"encrypted_password","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@encrypted_password = encrypted_password"}},{"id":"iri:String?-instance-method","html_id":"iri:String?-instance-method","name":"iri","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/account.cr","line_number":73,"url":null},"def":{"name":"iri","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"if (value = @iri).nil?\n  @iri = (\"#{Ktistec.host}/actors/#{username}\")\nelse\n  value\nend"}},{"id":"iri=(iri:String)-instance-method","html_id":"iri=(iri:String)-instance-method","name":"iri=","doc":null,"summary":null,"abstract":false,"args":[{"name":"iri","doc":null,"default_value":"","external_name":"iri","restriction":"String"}],"args_string":"(iri : String)","args_html":"(iri : String)","location":{"filename":"src/models/account.cr","line_number":73,"url":null},"def":{"name":"iri=","args":[{"name":"iri","doc":null,"default_value":"","external_name":"iri","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@iri = iri"}},{"id":"password-instance-method","html_id":"password-instance-method","name":"password","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/account.cr","line_number":52,"url":null},"def":{"name":"password","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@password.not_nil!"}},{"id":"password=(password:String)-instance-method","html_id":"password=(password:String)-instance-method","name":"password=","doc":null,"summary":null,"abstract":false,"args":[{"name":"password","doc":null,"default_value":"","external_name":"password","restriction":"String"}],"args_string":"(password : String)","args_html":"(password : String)","location":{"filename":"src/models/account.cr","line_number":48,"url":null},"def":{"name":"password=","args":[{"name":"password","doc":null,"default_value":"","external_name":"password","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@password = password\nself.encrypted_password = (Crypto::Bcrypt::Password.create(password, self.cost)).to_s\n"}},{"id":"sessions:Enumerable(Session)-instance-method","html_id":"sessions:Enumerable(Session)-instance-method","name":"sessions","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Enumerable(Session)","args_html":" : Enumerable(<a href=\"Session.html\">Session</a>)","location":{"filename":"src/models/account.cr","line_number":77,"url":null},"def":{"name":"sessions","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Enumerable(Session)","visibility":"Public","body":"sessions = @sessions\nif sessions.nil? || sessions.empty?\n  @sessions = Session.where(account_id: self.id)\nend\n@sessions.not_nil!\n"}},{"id":"sessions=(sessions:Enumerable(Session)):Enumerable(Session)-instance-method","html_id":"sessions=(sessions:Enumerable(Session)):Enumerable(Session)-instance-method","name":"sessions=","doc":null,"summary":null,"abstract":false,"args":[{"name":"sessions","doc":null,"default_value":"","external_name":"sessions","restriction":"Enumerable(Session)"}],"args_string":"(sessions : Enumerable(Session)) : Enumerable(Session)","args_html":"(sessions : Enumerable(<a href=\"Session.html\">Session</a>)) : Enumerable(<a href=\"Session.html\">Session</a>)","location":{"filename":"src/models/account.cr","line_number":77,"url":null},"def":{"name":"sessions=","args":[{"name":"sessions","doc":null,"default_value":"","external_name":"sessions","restriction":"Enumerable(Session)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Enumerable(Session)","visibility":"Public","body":"self.sessions.each do |other|\n  if other.in?(sessions)\n  else\n    other.destroy\n  end\nend\n@sessions = sessions.to_a\nsessions.each do |n|\n  n.account_id = self.id.as(typeof(n.account_id))\nend\nsessions\n"}},{"id":"uid-instance-method","html_id":"uid-instance-method","name":"uid","doc":"permits an account to be used in path helpers in place of\nan actor.","summary":"<p>permits an account to be used in path helpers in place of an actor.</p>","abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/account.cr","line_number":81,"url":null},"def":{"name":"uid","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"username"}},{"id":"username:String-instance-method","html_id":"username:String-instance-method","name":"username","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","args_html":" : String","location":{"filename":"src/models/account.cr","line_number":34,"url":null},"def":{"name":"username","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@username"}},{"id":"username=(username:String)-instance-method","html_id":"username=(username:String)-instance-method","name":"username=","doc":null,"summary":null,"abstract":false,"args":[{"name":"username","doc":null,"default_value":"","external_name":"username","restriction":"String"}],"args_string":"(username : String)","args_html":"(username : String)","location":{"filename":"src/models/account.cr","line_number":34,"url":null},"def":{"name":"username=","args":[{"name":"username","doc":null,"default_value":"","external_name":"username","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@username = username"}},{"id":"valid_password?(password)-instance-method","html_id":"valid_password?(password)-instance-method","name":"valid_password?","doc":"Validates the given password.\n","summary":"<p>Validates the given password.</p>","abstract":false,"args":[{"name":"password","doc":null,"default_value":"","external_name":"password","restriction":""}],"args_string":"(password)","args_html":"(password)","location":{"filename":"src/models/account.cr","line_number":44,"url":null},"def":{"name":"valid_password?","args":[{"name":"password","doc":null,"default_value":"","external_name":"password","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(Crypto::Bcrypt::Password.new(encrypted_password)).verify(password)"}},{"id":"validate_model-instance-method","html_id":"validate_model-instance-method","name":"validate_model","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/account.cr","line_number":56,"url":null},"def":{"name":"validate_model","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if (username = @username)\n  messages = [] of String\n  if username.size >= 1\n  else\n    messages << \"is too short\"\n  end\n  if username.each_char.all? do |char|\n    char.ascii_alphanumeric? || (char.in?('_', '.', '-', '~'))\n  end\n  else\n    messages << \"contains invalid characters\"\n  end\n  if (accounts = Account.where(username: username)).empty? || accounts.all? do |account|\n    account.id == self.id\n  end\n  else\n    messages << \"must be unique\"\n  end\n  if messages.empty?\n  else\n    errors[\"username\"] = messages\n  end\nend\nif (password = @password)\n  messages = [] of String\n  if password.size >= 6\n  else\n    messages << \"is too short\"\n  end\n  if ((password =~ (/[^a-zA-Z0-9]/)) && (password =~ (/[a-zA-Z]/))) && (password =~ (/[0-9]/))\n  else\n    messages << \"is weak\"\n  end\n  if messages.empty?\n  else\n    errors[\"password\"] = messages\n  end\nend\n"}}],"macros":[],"types":[]},{"html_id":"ktistec/ActivitiesController","path":"ActivitiesController.html","kind":"class","full_name":"ActivitiesController","name":"ActivitiesController","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"id":"paginate(collection,env)-class-method","html_id":"paginate(collection,env)-class-method","name":"paginate","doc":null,"summary":null,"abstract":false,"args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(collection, env)","args_html":"(collection, env)","location":{"filename":"src/controllers/activities.cr","line_number":4,"url":null},"def":{"name":"paginate","args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"path = env.request.path\nquery = env.params.query\npage = 1\nbegin\n  if (p = query[\"page\"].to_i) > 0\n    page = p\n  end\nrescue ArgumentError | KeyError\nend\nrender(\"./src/views/partials/paginator.html.ecr\")\n"}},{"id":"pagination_params(env)-class-method","html_id":"pagination_params(env)-class-method","name":"pagination_params","doc":null,"summary":null,"abstract":false,"args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(env)","args_html":"(env)","location":{"filename":"src/controllers/activities.cr","line_number":4,"url":null},"def":{"name":"pagination_params","args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"{Math.max(env.params.query[\"page\"]?.try(&.to_i) || 1, 1), Math.min(env.params.query[\"size\"]?.try(&.to_i) || 10, 1000)}"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/ActivityPub","path":"ActivityPub.html","kind":"module","full_name":"ActivityPub","name":"ActivityPub","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},{"html_id":"ktistec/ActivityPub/Actor","kind":"class","full_name":"ActivityPub::Actor","name":"Actor"},{"html_id":"ktistec/ActivityPub/Collection","kind":"class","full_name":"ActivityPub::Collection","name":"Collection"},{"html_id":"ktistec/ActivityPub/Object","kind":"class","full_name":"ActivityPub::Object","name":"Object"}],"namespace":null,"doc":null,"summary":null,"class_methods":[{"id":"from_hash(prefix:String,options:Hash,*,default=nil,ignore_cached=true)-class-method","html_id":"from_hash(prefix:String,options:Hash,*,default=nil,ignore_cached=true)-class-method","name":"from_hash","doc":null,"summary":null,"abstract":false,"args":[{"name":"prefix","doc":null,"default_value":"","external_name":"prefix","restriction":"String"},{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":"Hash"},{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"default","doc":null,"default_value":"nil","external_name":"default","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"true","external_name":"ignore_cached","restriction":""}],"args_string":"(prefix : String, options : Hash, *, default = <span class=\"n\">nil</span>, ignore_cached = <span class=\"n\">true</span>)","args_html":"(prefix : String, options : <a href=\"Hash.html\">Hash</a>, *, default = <span class=\"n\">nil</span>, ignore_cached = <span class=\"n\">true</span>)","location":{"filename":"src/models/activity_pub.cr","line_number":46,"url":null},"def":{"name":"from_hash","args":[{"name":"prefix","doc":null,"default_value":"","external_name":"prefix","restriction":"String"},{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":"Hash"},{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"default","doc":null,"default_value":"nil","external_name":"default","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"true","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":2,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"{% if true %}\n      key = prefix + \"type\"\n      case options[key]?\n      {% for subclass in (@type.includers.reduce([] of TypeNode) do |a, t|\n  (a + t.all_subclasses) << t\nend).uniq %}\n        when {{ name = subclass.stringify }}\n          key = prefix + \"iri\"\n          (!ignore_cached && options.has_key?(key) ? {{ subclass }}.find?(options[key].to_s).try(&.assign(options, prefix: prefix, ignore_cached: ignore_cached)) : nil) ||\n            {{ subclass }}.new(options, prefix: prefix, ignore_cached: ignore_cached)\n      {% end %}\n      else\n        if default\n          key = prefix + \"iri\"\n          (!ignore_cached && options.has_key?(key) ? default.find?(options[key].to_s).try(&.assign(options, prefix: prefix, ignore_cached: ignore_cached)) : nil) ||\n            default.new(options, prefix: prefix, ignore_cached: ignore_cached)\n        elsif (type = options[key]?)\n          raise NotImplementedError.new(type.to_s)\n        else\n          raise NotImplementedError.new(\"no type\")\n        end\n      end\n    {% end %}"}},{"id":"from_hash?(prefix:String,options:Hash,*,default=nil,ignore_cached=true)-class-method","html_id":"from_hash?(prefix:String,options:Hash,*,default=nil,ignore_cached=true)-class-method","name":"from_hash?","doc":null,"summary":null,"abstract":false,"args":[{"name":"prefix","doc":null,"default_value":"","external_name":"prefix","restriction":"String"},{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":"Hash"},{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"default","doc":null,"default_value":"nil","external_name":"default","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"true","external_name":"ignore_cached","restriction":""}],"args_string":"(prefix : String, options : Hash, *, default = <span class=\"n\">nil</span>, ignore_cached = <span class=\"n\">true</span>)","args_html":"(prefix : String, options : <a href=\"Hash.html\">Hash</a>, *, default = <span class=\"n\">nil</span>, ignore_cached = <span class=\"n\">true</span>)","location":{"filename":"src/models/activity_pub.cr","line_number":70,"url":null},"def":{"name":"from_hash?","args":[{"name":"prefix","doc":null,"default_value":"","external_name":"prefix","restriction":"String"},{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":"Hash"},{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"default","doc":null,"default_value":"nil","external_name":"default","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"true","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":2,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  from_hash(prefix, options, default: default, ignore_cached: ignore_cached)\nrescue NotImplementedError\n  nil\nend"}},{"id":"from_json_ld(json,**options)-class-method","html_id":"from_json_ld(json,**options)-class-method","name":"from_json_ld","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"args_string":"(json, **options)","args_html":"(json, **options)","location":{"filename":"src/models/activity_pub.cr","line_number":87,"url":null},"def":{"name":"from_json_ld","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if json.is_a?(String | IO)\n  json = Ktistec::JSON_LD.expand(JSON.parse(json))\nend\n{% if true %}\n      case json[\"@type\"]?.try(&.as_s.split(\"#\").last)\n      {% for subclass in (@type.includers.reduce([] of TypeNode) do |a, t|\n  (a + t.all_subclasses) << t\nend).uniq %}\n        when {{ name = (subclass.stringify.split(\"::\")).last }}\n          {% id = name.downcase.id %}\n          attrs = {{ subclass }}.map(json, **options)\n          {{ subclass }}.find?(json[\"@id\"]?.try(&.as_s)).try(&.assign(**attrs)) ||\n            {{ subclass }}.new(**attrs)\n      {% end %}\n      else\n        if (default = options[:default]?)\n          attrs = default.map(json, **options)\n          default.find?(json[\"@id\"]?.try(&.as_s)).try(&.assign(**attrs)) ||\n            default.new(**attrs)\n        elsif (type = json[\"@type\"]?)\n          raise NotImplementedError.new(type.as_s)\n        else\n          raise NotImplementedError.new(\"no type\")\n        end\n      end\n    {% end %}\n"}},{"id":"from_json_ld?(json,**options)-class-method","html_id":"from_json_ld?(json,**options)-class-method","name":"from_json_ld?","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"args_string":"(json, **options)","args_html":"(json, **options)","location":{"filename":"src/models/activity_pub.cr","line_number":112,"url":null},"def":{"name":"from_json_ld?","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  from_json_ld(json, **options)\nrescue NotImplementedError\n  nil\nend"}}],"constructors":[{"id":"new(options:Hash,prefix:String=&quot;&quot;,ignore_cached=true)-class-method","html_id":"new(options:Hash,prefix:String=&quot;&quot;,ignore_cached=true)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":"Hash"},{"name":"prefix","doc":null,"default_value":"\"\"","external_name":"prefix","restriction":"String"},{"name":"ignore_cached","doc":null,"default_value":"true","external_name":"ignore_cached","restriction":""}],"args_string":"(options : Hash, prefix : String = <span class=\"s\">&quot;&quot;</span>, ignore_cached = <span class=\"n\">true</span>)","args_html":"(options : <a href=\"Hash.html\">Hash</a>, prefix : String = <span class=\"s\">&quot;&quot;</span>, ignore_cached = <span class=\"n\">true</span>)","location":{"filename":"src/models/activity_pub.cr","line_number":7,"url":null},"def":{"name":"new","args":[{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":"Hash"},{"name":"prefix","doc":null,"default_value":"\"\"","external_name":"prefix","restriction":"String"},{"name":"ignore_cached","doc":null,"default_value":"true","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(options, prefix, ignore_cached)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"id":"new(**options)-class-method","html_id":"new(**options)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"(**options)","args_html":"(**options)","location":{"filename":"src/models/activity_pub.cr","line_number":22,"url":null},"def":{"name":"new","args":[],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(**options)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"assign(options:Hash,prefix:String=&quot;&quot;,ignore_cached=true)-instance-method","html_id":"assign(options:Hash,prefix:String=&quot;&quot;,ignore_cached=true)-instance-method","name":"assign","doc":null,"summary":null,"abstract":false,"args":[{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":"Hash"},{"name":"prefix","doc":null,"default_value":"\"\"","external_name":"prefix","restriction":"String"},{"name":"ignore_cached","doc":null,"default_value":"true","external_name":"ignore_cached","restriction":""}],"args_string":"(options : Hash, prefix : String = <span class=\"s\">&quot;&quot;</span>, ignore_cached = <span class=\"n\">true</span>)","args_html":"(options : <a href=\"Hash.html\">Hash</a>, prefix : String = <span class=\"s\">&quot;&quot;</span>, ignore_cached = <span class=\"n\">true</span>)","location":{"filename":"src/models/activity_pub.cr","line_number":26,"url":null},"def":{"name":"assign","args":[{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":"Hash"},{"name":"prefix","doc":null,"default_value":"\"\"","external_name":"prefix","restriction":"String"},{"name":"ignore_cached","doc":null,"default_value":"true","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"super(options, prefix: prefix)\n{% if true %}\n      {% vs = @type.instance_vars.select do |v|\n  (v.annotation(Ktistec::Model::Assignable)) || (v.annotation(Ktistec::Model::Persistent))\nend %}\n      {% for v in vs %}\n        key = prefix + {{ v.stringify }}\n        if options.keys.any? { |k| k.to_s.starts_with?(key + \".\") }\n          if (o = ActivityPub.from_hash?(key + \".\", options, ignore_cached: ignore_cached)) && o.is_a?(typeof(self.{{ v }}))\n            self.{{ v }} = o\n          end\n        end\n      {% end %}\n    {% end %}\nself\n"}},{"id":"assign(**options)-instance-method","html_id":"assign(**options)-instance-method","name":"assign","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"(**options)","args_html":"(**options)","location":{"filename":"src/models/activity_pub.cr","line_number":42,"url":null},"def":{"name":"assign","args":[],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"super(**options)"}}],"macros":[],"types":[{"html_id":"ktistec/ActivityPub/Activity","path":"ActivityPub/Activity.html","kind":"class","full_name":"ActivityPub::Activity","name":"Activity","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},{"html_id":"ktistec/Ktistec/Model/Linked","kind":"module","full_name":"Ktistec::Model::Linked","name":"Linked"},{"html_id":"ktistec/Ktistec/Model/Serialized","kind":"module","full_name":"Ktistec::Model::Serialized","name":"Serialized"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model/Linked","kind":"module","full_name":"Ktistec::Model::Linked","name":"Linked"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Serialized","kind":"module","full_name":"Ktistec::Model::Serialized","name":"Serialized"}],"extended_modules":[{"html_id":"ktistec/Ktistec/Model/ClassMethods","kind":"module","full_name":"Ktistec::Model::ClassMethods","name":"ClassMethods"},{"html_id":"ktistec/Ktistec/Model/Serialized/ClassMethods","kind":"module","full_name":"Ktistec::Model::Serialized::ClassMethods","name":"ClassMethods"},{"html_id":"ktistec/Ktistec/Open","kind":"module","full_name":"Ktistec::Open","name":"Open"}],"subclasses":[{"html_id":"ktistec/ActivityPub/Activity/Accept","kind":"class","full_name":"ActivityPub::Activity::Accept","name":"Accept"},{"html_id":"ktistec/ActivityPub/Activity/Announce","kind":"class","full_name":"ActivityPub::Activity::Announce","name":"Announce"},{"html_id":"ktistec/ActivityPub/Activity/Create","kind":"class","full_name":"ActivityPub::Activity::Create","name":"Create"},{"html_id":"ktistec/ActivityPub/Activity/Delete","kind":"class","full_name":"ActivityPub::Activity::Delete","name":"Delete"},{"html_id":"ktistec/ActivityPub/Activity/Follow","kind":"class","full_name":"ActivityPub::Activity::Follow","name":"Follow"},{"html_id":"ktistec/ActivityPub/Activity/Like","kind":"class","full_name":"ActivityPub::Activity::Like","name":"Like"},{"html_id":"ktistec/ActivityPub/Activity/Reject","kind":"class","full_name":"ActivityPub::Activity::Reject","name":"Reject"},{"html_id":"ktistec/ActivityPub/Activity/Undo","kind":"class","full_name":"ActivityPub::Activity::Undo","name":"Undo"},{"html_id":"ktistec/ActivityPub/Activity/Update","kind":"class","full_name":"ActivityPub::Activity::Update","name":"Update"}],"including_types":[],"namespace":{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},"doc":null,"summary":null,"class_methods":[{"id":"find(_iriiri:String?)-class-method","html_id":"find(_iriiri:String?)-class-method","name":"find","doc":null,"summary":null,"abstract":false,"args":[{"name":"iri","doc":null,"default_value":"","external_name":"_iri","restriction":"String | ::Nil"}],"args_string":"(_iri iri : String?)","args_html":"(_iri iri : String?)","location":null,"def":{"name":"find","args":[{"name":"iri","doc":null,"default_value":"","external_name":"_iri","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"find(iri: iri)"}},{"id":"find?(_iriiri:String?)-class-method","html_id":"find?(_iriiri:String?)-class-method","name":"find?","doc":null,"summary":null,"abstract":false,"args":[{"name":"iri","doc":null,"default_value":"","external_name":"_iri","restriction":"String | ::Nil"}],"args_string":"(_iri iri : String?)","args_html":"(_iri iri : String?)","location":null,"def":{"name":"find?","args":[{"name":"iri","doc":null,"default_value":"","external_name":"_iri","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"find?(iri: iri)"}},{"id":"from_hash(options,ignore_cached=true)-class-method","html_id":"from_hash(options,ignore_cached=true)-class-method","name":"from_hash","doc":null,"summary":null,"abstract":false,"args":[{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"true","external_name":"ignore_cached","restriction":""}],"args_string":"(options, ignore_cached = <span class=\"n\">true</span>)","args_html":"(options, ignore_cached = <span class=\"n\">true</span>)","location":{"filename":"src/models/activity_pub/activity.cr","line_number":11,"url":null},"def":{"name":"from_hash","args":[{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"true","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(ActivityPub.from_hash(\"\", options, default: self, ignore_cached: ignore_cached)).as(self)"}},{"id":"from_hash?(options,ignore_cached=true)-class-method","html_id":"from_hash?(options,ignore_cached=true)-class-method","name":"from_hash?","doc":null,"summary":null,"abstract":false,"args":[{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"true","external_name":"ignore_cached","restriction":""}],"args_string":"(options, ignore_cached = <span class=\"n\">true</span>)","args_html":"(options, ignore_cached = <span class=\"n\">true</span>)","location":{"filename":"src/models/activity_pub/activity.cr","line_number":11,"url":null},"def":{"name":"from_hash?","args":[{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"true","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  (ActivityPub.from_hash?(\"\", options, default: self, ignore_cached: ignore_cached)).as(self | ::Nil)\nrescue TypeCastError\nend"}},{"id":"from_json_ld(json,**options)-class-method","html_id":"from_json_ld(json,**options)-class-method","name":"from_json_ld","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"args_string":"(json, **options)","args_html":"(json, **options)","location":{"filename":"src/models/activity_pub/activity.cr","line_number":11,"url":null},"def":{"name":"from_json_ld","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(ActivityPub.from_json_ld(json, **options.merge({default: self}))).as(self)"}},{"id":"from_json_ld?(json,**options)-class-method","html_id":"from_json_ld?(json,**options)-class-method","name":"from_json_ld?","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"args_string":"(json, **options)","args_html":"(json, **options)","location":{"filename":"src/models/activity_pub/activity.cr","line_number":11,"url":null},"def":{"name":"from_json_ld?","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  (ActivityPub.from_json_ld?(json, **options.merge({default: self}))).as(self | ::Nil)\nrescue TypeCastError\nend"}},{"id":"map(json,**options)-class-method","html_id":"map(json,**options)-class-method","name":"map","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"args_string":"(json, **options)","args_html":"(json, **options)","location":{"filename":"src/models/activity_pub/activity.cr","line_number":52,"url":null},"def":{"name":"map","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if json.is_a?(String | IO)\n  json = Ktistec::JSON_LD.expand(JSON.parse(json))\nend\n{iri: (json.dig?(\"@id\")).try(&.as_s), _type: (json.dig?(\"@type\")).try do |__arg1|\n  (__arg1.as_s.split(\"#\")).last\nend, published: (p = dig?(json, \"https://www.w3.org/ns/activitystreams#published\")) ? Time.parse_rfc3339(p) : nil, actor_iri: (json.dig?(\"https://www.w3.org/ns/activitystreams#actor\")).try(&.as_s?), actor: if (actor = json.dig?(\"https://www.w3.org/ns/activitystreams#actor\")) && actor.as_h?\n  ActivityPub.from_json_ld(actor)\nend, object_iri: (json.dig?(\"https://www.w3.org/ns/activitystreams#object\")).try(&.as_s?), object: if (object = json.dig?(\"https://www.w3.org/ns/activitystreams#object\")) && object.as_h?\n  ActivityPub.from_json_ld(object)\nend, target_iri: (json.dig?(\"https://www.w3.org/ns/activitystreams#target\")).try(&.as_s?), target: if (target = json.dig?(\"https://www.w3.org/ns/activitystreams#target\")) && target.as_h?\n  ActivityPub.from_json_ld(target)\nend, to: to = dig_ids?(json, \"https://www.w3.org/ns/activitystreams#to\"), cc: cc = dig_ids?(json, \"https://www.w3.org/ns/activitystreams#cc\"), summary: dig?(json, \"https://www.w3.org/ns/activitystreams#summary\", \"und\"), visible: [to, cc].compact.flatten.includes?(\"https://www.w3.org/ns/activitystreams#Public\")}\n"}}],"constructors":[{"id":"dereference?(iri:String?,ignore_cached=false):self?-class-method","html_id":"dereference?(iri:String?,ignore_cached=false):self?-class-method","name":"dereference?","doc":null,"summary":null,"abstract":false,"args":[{"name":"iri","doc":null,"default_value":"","external_name":"iri","restriction":"String | ::Nil"},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"args_string":"(iri : String?, ignore_cached = <span class=\"n\">false</span>) : <span class=\"k\">self</span>?","args_html":"(iri : String?, ignore_cached = <span class=\"n\">false</span>) : <span class=\"k\">self</span>?","location":null,"def":{"name":"dereference?","args":[{"name":"iri","doc":null,"default_value":"","external_name":"iri","restriction":"String | ::Nil"},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"self | ::Nil","visibility":"Public","body":"if iri\n  if (instance = self.find?(iri)) && (!ignore_cached)\n  else\n    if iri.starts_with?(Ktistec.host)\n    else\n      self.open?(iri) do |response|\n        instance = self.from_json_ld?(response.body)\n      end\n    end\n  end\nend\ninstance\n"}}],"instance_methods":[{"id":"actor_iri:String?-instance-method","html_id":"actor_iri:String?-instance-method","name":"actor_iri","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/activity.cr","line_number":22,"url":null},"def":{"name":"actor_iri","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@actor_iri"}},{"id":"actor_iri=(actor_iri:String?)-instance-method","html_id":"actor_iri=(actor_iri:String?)-instance-method","name":"actor_iri=","doc":null,"summary":null,"abstract":false,"args":[{"name":"actor_iri","doc":null,"default_value":"","external_name":"actor_iri","restriction":"String | ::Nil"}],"args_string":"(actor_iri : String?)","args_html":"(actor_iri : String?)","location":{"filename":"src/models/activity_pub/activity.cr","line_number":22,"url":null},"def":{"name":"actor_iri=","args":[{"name":"actor_iri","doc":null,"default_value":"","external_name":"actor_iri","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@actor_iri = actor_iri"}},{"id":"cc:Array(String)?-instance-method","html_id":"cc:Array(String)?-instance-method","name":"cc","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(String)?","args_html":" : <a href=\"../Array.html\">Array</a>(String)?","location":{"filename":"src/models/activity_pub/activity.cr","line_number":34,"url":null},"def":{"name":"cc","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(String) | ::Nil","visibility":"Public","body":"@cc"}},{"id":"cc=(cc:Array(String)?)-instance-method","html_id":"cc=(cc:Array(String)?)-instance-method","name":"cc=","doc":null,"summary":null,"abstract":false,"args":[{"name":"cc","doc":null,"default_value":"","external_name":"cc","restriction":"Array(String) | ::Nil"}],"args_string":"(cc : Array(String)?)","args_html":"(cc : <a href=\"../Array.html\">Array</a>(String)?)","location":{"filename":"src/models/activity_pub/activity.cr","line_number":34,"url":null},"def":{"name":"cc=","args":[{"name":"cc","doc":null,"default_value":"","external_name":"cc","restriction":"Array(String) | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@cc = cc"}},{"id":"display_date-instance-method","html_id":"display_date-instance-method","name":"display_date","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/activity.cr","line_number":39,"url":null},"def":{"name":"display_date","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"((published || created_at).to_local.to_s(\"%l:%M%P  %b %-d, %Y\")).lstrip(' ')"}},{"id":"from_json_ld(json)-instance-method","html_id":"from_json_ld(json)-instance-method","name":"from_json_ld","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"args_string":"(json)","args_html":"(json)","location":{"filename":"src/models/activity_pub/activity.cr","line_number":48,"url":null},"def":{"name":"from_json_ld","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self.assign(**self.class.map(json))"}},{"id":"iri:String?-instance-method","html_id":"iri:String?-instance-method","name":"iri","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":null,"def":{"name":"iri","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"if (value = @iri).nil?\n  @iri = (\"\")\nelse\n  value\nend"}},{"id":"iri=(iri:String)-instance-method","html_id":"iri=(iri:String)-instance-method","name":"iri=","doc":null,"summary":null,"abstract":false,"args":[{"name":"iri","doc":null,"default_value":"","external_name":"iri","restriction":"String"}],"args_string":"(iri : String)","args_html":"(iri : String)","location":null,"def":{"name":"iri=","args":[{"name":"iri","doc":null,"default_value":"","external_name":"iri","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@iri = iri"}},{"id":"object_iri:String?-instance-method","html_id":"object_iri:String?-instance-method","name":"object_iri","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/activity.cr","line_number":25,"url":null},"def":{"name":"object_iri","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@object_iri"}},{"id":"object_iri=(object_iri:String?)-instance-method","html_id":"object_iri=(object_iri:String?)-instance-method","name":"object_iri=","doc":null,"summary":null,"abstract":false,"args":[{"name":"object_iri","doc":null,"default_value":"","external_name":"object_iri","restriction":"String | ::Nil"}],"args_string":"(object_iri : String?)","args_html":"(object_iri : String?)","location":{"filename":"src/models/activity_pub/activity.cr","line_number":25,"url":null},"def":{"name":"object_iri=","args":[{"name":"object_iri","doc":null,"default_value":"","external_name":"object_iri","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@object_iri = object_iri"}},{"id":"published:Time?-instance-method","html_id":"published:Time?-instance-method","name":"published","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Time?","args_html":" : Time?","location":{"filename":"src/models/activity_pub/activity.cr","line_number":19,"url":null},"def":{"name":"published","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Time | ::Nil","visibility":"Public","body":"@published"}},{"id":"published=(published:Time?)-instance-method","html_id":"published=(published:Time?)-instance-method","name":"published=","doc":null,"summary":null,"abstract":false,"args":[{"name":"published","doc":null,"default_value":"","external_name":"published","restriction":"Time | ::Nil"}],"args_string":"(published : Time?)","args_html":"(published : Time?)","location":{"filename":"src/models/activity_pub/activity.cr","line_number":19,"url":null},"def":{"name":"published=","args":[{"name":"published","doc":null,"default_value":"","external_name":"published","restriction":"Time | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@published = published"}},{"id":"summary:String?-instance-method","html_id":"summary:String?-instance-method","name":"summary","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/activity.cr","line_number":37,"url":null},"def":{"name":"summary","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@summary"}},{"id":"summary=(summary:String?)-instance-method","html_id":"summary=(summary:String?)-instance-method","name":"summary=","doc":null,"summary":null,"abstract":false,"args":[{"name":"summary","doc":null,"default_value":"","external_name":"summary","restriction":"String | ::Nil"}],"args_string":"(summary : String?)","args_html":"(summary : String?)","location":{"filename":"src/models/activity_pub/activity.cr","line_number":37,"url":null},"def":{"name":"summary=","args":[{"name":"summary","doc":null,"default_value":"","external_name":"summary","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@summary = summary"}},{"id":"target_iri:String?-instance-method","html_id":"target_iri:String?-instance-method","name":"target_iri","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/activity.cr","line_number":28,"url":null},"def":{"name":"target_iri","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@target_iri"}},{"id":"target_iri=(target_iri:String?)-instance-method","html_id":"target_iri=(target_iri:String?)-instance-method","name":"target_iri=","doc":null,"summary":null,"abstract":false,"args":[{"name":"target_iri","doc":null,"default_value":"","external_name":"target_iri","restriction":"String | ::Nil"}],"args_string":"(target_iri : String?)","args_html":"(target_iri : String?)","location":{"filename":"src/models/activity_pub/activity.cr","line_number":28,"url":null},"def":{"name":"target_iri=","args":[{"name":"target_iri","doc":null,"default_value":"","external_name":"target_iri","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@target_iri = target_iri"}},{"id":"to:Array(String)?-instance-method","html_id":"to:Array(String)?-instance-method","name":"to","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(String)?","args_html":" : <a href=\"../Array.html\">Array</a>(String)?","location":{"filename":"src/models/activity_pub/activity.cr","line_number":31,"url":null},"def":{"name":"to","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(String) | ::Nil","visibility":"Public","body":"@to"}},{"id":"to=(to:Array(String)?)-instance-method","html_id":"to=(to:Array(String)?)-instance-method","name":"to=","doc":null,"summary":null,"abstract":false,"args":[{"name":"to","doc":null,"default_value":"","external_name":"to","restriction":"Array(String) | ::Nil"}],"args_string":"(to : Array(String)?)","args_html":"(to : <a href=\"../Array.html\">Array</a>(String)?)","location":{"filename":"src/models/activity_pub/activity.cr","line_number":31,"url":null},"def":{"name":"to=","args":[{"name":"to","doc":null,"default_value":"","external_name":"to","restriction":"Array(String) | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@to = to"}},{"id":"to_json_ld(recursive=false)-instance-method","html_id":"to_json_ld(recursive=false)-instance-method","name":"to_json_ld","doc":null,"summary":null,"abstract":false,"args":[{"name":"recursive","doc":null,"default_value":"false","external_name":"recursive","restriction":""}],"args_string":"(recursive = <span class=\"n\">false</span>)","args_html":"(recursive = <span class=\"n\">false</span>)","location":{"filename":"src/models/activity_pub/activity.cr","line_number":43,"url":null},"def":{"name":"to_json_ld","args":[{"name":"recursive","doc":null,"default_value":"false","external_name":"recursive","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"activity = self\nrender(\"src/views/activities/activity.json.ecr\")\n"}},{"id":"visible:Bool?-instance-method","html_id":"visible:Bool?-instance-method","name":"visible","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Bool?","args_html":" : Bool?","location":{"filename":"src/models/activity_pub/activity.cr","line_number":16,"url":null},"def":{"name":"visible","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Bool | ::Nil","visibility":"Public","body":"if (value = @visible).nil?\n  @visible = (false)\nelse\n  value\nend"}},{"id":"visible=(visible:Bool)-instance-method","html_id":"visible=(visible:Bool)-instance-method","name":"visible=","doc":null,"summary":null,"abstract":false,"args":[{"name":"visible","doc":null,"default_value":"","external_name":"visible","restriction":"Bool"}],"args_string":"(visible : Bool)","args_html":"(visible : Bool)","location":{"filename":"src/models/activity_pub/activity.cr","line_number":16,"url":null},"def":{"name":"visible=","args":[{"name":"visible","doc":null,"default_value":"","external_name":"visible","restriction":"Bool"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@visible = visible"}}],"macros":[],"types":[{"html_id":"ktistec/ActivityPub/Activity/Accept","path":"ActivityPub/Activity/Accept.html","kind":"class","full_name":"ActivityPub::Activity::Accept","name":"Accept","abstract":false,"superclass":{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},"ancestors":[{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},{"html_id":"ktistec/Ktistec/Model/Linked","kind":"module","full_name":"Ktistec::Model::Linked","name":"Linked"},{"html_id":"ktistec/Ktistec/Model/Serialized","kind":"module","full_name":"Ktistec::Model::Serialized","name":"Serialized"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"_belongs_to_actor:ActivityPub::Actor?-instance-method","html_id":"_belongs_to_actor:ActivityPub::Actor?-instance-method","name":"_belongs_to_actor","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/activity_pub/activity/accept.cr","line_number":7,"url":null},"def":{"name":"_belongs_to_actor","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@actor"}},{"id":"_belongs_to_object:ActivityPub::Activity::Follow?-instance-method","html_id":"_belongs_to_object:ActivityPub::Activity::Follow?-instance-method","name":"_belongs_to_object","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Activity::Follow?","args_html":" : <a href=\"../../ActivityPub/Activity/Follow.html\">ActivityPub::Activity::Follow</a>?","location":{"filename":"src/models/activity_pub/activity/accept.cr","line_number":8,"url":null},"def":{"name":"_belongs_to_object","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Activity::Follow | ::Nil","visibility":"Public","body":"@object"}},{"id":"actor:ActivityPub::Actor-instance-method","html_id":"actor:ActivityPub::Actor-instance-method","name":"actor","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/activity_pub/activity/accept.cr","line_number":7,"url":null},"def":{"name":"actor","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@actor || (@actor = (ActivityPub::Actor.find?(iri: self.actor_iri) || (raise(NotFound.new(\"#{self.class} actor iri=#{self.actor_iri}: not found\")))))"}},{"id":"actor=(actor:ActivityPub::Actor):ActivityPub::Actor-instance-method","html_id":"actor=(actor:ActivityPub::Actor):ActivityPub::Actor-instance-method","name":"actor=","doc":null,"summary":null,"abstract":false,"args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":"ActivityPub::Actor"}],"args_string":"(actor : ActivityPub::Actor) : ActivityPub::Actor","args_html":"(actor : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>) : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/activity_pub/activity/accept.cr","line_number":7,"url":null},"def":{"name":"actor=","args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":"ActivityPub::Actor"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@actor = actor\nself.actor_iri = actor.iri.as(typeof(self.actor_iri))\nactor\n"}},{"id":"actor?:ActivityPub::Actor?-instance-method","html_id":"actor?:ActivityPub::Actor?-instance-method","name":"actor?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/activity_pub/activity/accept.cr","line_number":7,"url":null},"def":{"name":"actor?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@actor || (@actor = (ActivityPub::Actor.find?(iri: self.actor_iri) || nil))"}},{"id":"actor?(*,dereference=false,ignore_cached=false)-instance-method","html_id":"actor?(*,dereference=false,ignore_cached=false)-instance-method","name":"actor?","doc":null,"summary":null,"abstract":false,"args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"args_string":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","args_html":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","location":null,"def":{"name":"actor?","args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"actor = self.actor?\nif (actor && (!ignore_cached)) || (actor && actor.changed?)\nelse\n  if (actor_iri = self.actor_iri) && dereference\n    if actor_iri.starts_with?(Ktistec.host)\n    else\n      ActivityPub::Actor.open?(actor_iri) do |response|\n        if (        actor = ActivityPub::Actor.from_json_ld?(response.body))\n          return self.actor = actor\n        end\n      end\n    end\n  end\nend\nactor\n"}},{"id":"object:ActivityPub::Activity::Follow-instance-method","html_id":"object:ActivityPub::Activity::Follow-instance-method","name":"object","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Activity::Follow","args_html":" : <a href=\"../../ActivityPub/Activity/Follow.html\">ActivityPub::Activity::Follow</a>","location":{"filename":"src/models/activity_pub/activity/accept.cr","line_number":8,"url":null},"def":{"name":"object","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Activity::Follow","visibility":"Public","body":"@object || (@object = (ActivityPub::Activity::Follow.find?(iri: self.object_iri) || (raise(NotFound.new(\"#{self.class} object iri=#{self.object_iri}: not found\")))))"}},{"id":"object=(object:ActivityPub::Activity::Follow):ActivityPub::Activity::Follow-instance-method","html_id":"object=(object:ActivityPub::Activity::Follow):ActivityPub::Activity::Follow-instance-method","name":"object=","doc":null,"summary":null,"abstract":false,"args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"ActivityPub::Activity::Follow"}],"args_string":"(object : ActivityPub::Activity::Follow) : ActivityPub::Activity::Follow","args_html":"(object : <a href=\"../../ActivityPub/Activity/Follow.html\">ActivityPub::Activity::Follow</a>) : <a href=\"../../ActivityPub/Activity/Follow.html\">ActivityPub::Activity::Follow</a>","location":{"filename":"src/models/activity_pub/activity/accept.cr","line_number":8,"url":null},"def":{"name":"object=","args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"ActivityPub::Activity::Follow"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Activity::Follow","visibility":"Public","body":"@object = object\nself.object_iri = object.iri.as(typeof(self.object_iri))\nobject\n"}},{"id":"object?:ActivityPub::Activity::Follow?-instance-method","html_id":"object?:ActivityPub::Activity::Follow?-instance-method","name":"object?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Activity::Follow?","args_html":" : <a href=\"../../ActivityPub/Activity/Follow.html\">ActivityPub::Activity::Follow</a>?","location":{"filename":"src/models/activity_pub/activity/accept.cr","line_number":8,"url":null},"def":{"name":"object?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Activity::Follow | ::Nil","visibility":"Public","body":"@object || (@object = (ActivityPub::Activity::Follow.find?(iri: self.object_iri) || nil))"}},{"id":"object?(*,dereference=false,ignore_cached=false)-instance-method","html_id":"object?(*,dereference=false,ignore_cached=false)-instance-method","name":"object?","doc":null,"summary":null,"abstract":false,"args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"args_string":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","args_html":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","location":null,"def":{"name":"object?","args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"object = self.object?\nif (object && (!ignore_cached)) || (object && object.changed?)\nelse\n  if (object_iri = self.object_iri) && dereference\n    if object_iri.starts_with?(Ktistec.host)\n    else\n      ActivityPub::Activity::Follow.open?(object_iri) do |response|\n        if (        object = ActivityPub::Activity::Follow.from_json_ld?(response.body))\n          return self.object = object\n        end\n      end\n    end\n  end\nend\nobject\n"}}],"macros":[],"types":[]},{"html_id":"ktistec/ActivityPub/Activity/Announce","path":"ActivityPub/Activity/Announce.html","kind":"class","full_name":"ActivityPub::Activity::Announce","name":"Announce","abstract":false,"superclass":{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},"ancestors":[{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},{"html_id":"ktistec/Ktistec/Model/Linked","kind":"module","full_name":"Ktistec::Model::Linked","name":"Linked"},{"html_id":"ktistec/Ktistec/Model/Serialized","kind":"module","full_name":"Ktistec::Model::Serialized","name":"Serialized"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"_belongs_to_actor:ActivityPub::Actor?-instance-method","html_id":"_belongs_to_actor:ActivityPub::Actor?-instance-method","name":"_belongs_to_actor","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/activity_pub/activity/announce.cr","line_number":7,"url":null},"def":{"name":"_belongs_to_actor","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@actor"}},{"id":"_belongs_to_object:ActivityPub::Object?-instance-method","html_id":"_belongs_to_object:ActivityPub::Object?-instance-method","name":"_belongs_to_object","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Object?","args_html":" : <a href=\"../../ActivityPub/Object.html\">ActivityPub::Object</a>?","location":{"filename":"src/models/activity_pub/activity/announce.cr","line_number":8,"url":null},"def":{"name":"_belongs_to_object","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object | ::Nil","visibility":"Public","body":"@object"}},{"id":"actor:ActivityPub::Actor-instance-method","html_id":"actor:ActivityPub::Actor-instance-method","name":"actor","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/activity_pub/activity/announce.cr","line_number":7,"url":null},"def":{"name":"actor","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@actor || (@actor = (ActivityPub::Actor.find?(iri: self.actor_iri) || (raise(NotFound.new(\"#{self.class} actor iri=#{self.actor_iri}: not found\")))))"}},{"id":"actor=(actor:ActivityPub::Actor):ActivityPub::Actor-instance-method","html_id":"actor=(actor:ActivityPub::Actor):ActivityPub::Actor-instance-method","name":"actor=","doc":null,"summary":null,"abstract":false,"args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":"ActivityPub::Actor"}],"args_string":"(actor : ActivityPub::Actor) : ActivityPub::Actor","args_html":"(actor : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>) : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/activity_pub/activity/announce.cr","line_number":7,"url":null},"def":{"name":"actor=","args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":"ActivityPub::Actor"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@actor = actor\nself.actor_iri = actor.iri.as(typeof(self.actor_iri))\nactor\n"}},{"id":"actor?:ActivityPub::Actor?-instance-method","html_id":"actor?:ActivityPub::Actor?-instance-method","name":"actor?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/activity_pub/activity/announce.cr","line_number":7,"url":null},"def":{"name":"actor?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@actor || (@actor = (ActivityPub::Actor.find?(iri: self.actor_iri) || nil))"}},{"id":"actor?(*,dereference=false,ignore_cached=false)-instance-method","html_id":"actor?(*,dereference=false,ignore_cached=false)-instance-method","name":"actor?","doc":null,"summary":null,"abstract":false,"args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"args_string":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","args_html":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","location":null,"def":{"name":"actor?","args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"actor = self.actor?\nif (actor && (!ignore_cached)) || (actor && actor.changed?)\nelse\n  if (actor_iri = self.actor_iri) && dereference\n    if actor_iri.starts_with?(Ktistec.host)\n    else\n      ActivityPub::Actor.open?(actor_iri) do |response|\n        if (        actor = ActivityPub::Actor.from_json_ld?(response.body))\n          return self.actor = actor\n        end\n      end\n    end\n  end\nend\nactor\n"}},{"id":"object:ActivityPub::Object-instance-method","html_id":"object:ActivityPub::Object-instance-method","name":"object","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Object","args_html":" : <a href=\"../../ActivityPub/Object.html\">ActivityPub::Object</a>","location":{"filename":"src/models/activity_pub/activity/announce.cr","line_number":8,"url":null},"def":{"name":"object","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object","visibility":"Public","body":"@object || (@object = (ActivityPub::Object.find?(iri: self.object_iri) || (raise(NotFound.new(\"#{self.class} object iri=#{self.object_iri}: not found\")))))"}},{"id":"object=(object:ActivityPub::Object):ActivityPub::Object-instance-method","html_id":"object=(object:ActivityPub::Object):ActivityPub::Object-instance-method","name":"object=","doc":null,"summary":null,"abstract":false,"args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"ActivityPub::Object"}],"args_string":"(object : ActivityPub::Object) : ActivityPub::Object","args_html":"(object : <a href=\"../../ActivityPub/Object.html\">ActivityPub::Object</a>) : <a href=\"../../ActivityPub/Object.html\">ActivityPub::Object</a>","location":{"filename":"src/models/activity_pub/activity/announce.cr","line_number":8,"url":null},"def":{"name":"object=","args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"ActivityPub::Object"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object","visibility":"Public","body":"@object = object\nself.object_iri = object.iri.as(typeof(self.object_iri))\nobject\n"}},{"id":"object?:ActivityPub::Object?-instance-method","html_id":"object?:ActivityPub::Object?-instance-method","name":"object?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Object?","args_html":" : <a href=\"../../ActivityPub/Object.html\">ActivityPub::Object</a>?","location":{"filename":"src/models/activity_pub/activity/announce.cr","line_number":8,"url":null},"def":{"name":"object?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object | ::Nil","visibility":"Public","body":"@object || (@object = (ActivityPub::Object.find?(iri: self.object_iri) || nil))"}},{"id":"object?(*,dereference=false,ignore_cached=false)-instance-method","html_id":"object?(*,dereference=false,ignore_cached=false)-instance-method","name":"object?","doc":null,"summary":null,"abstract":false,"args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"args_string":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","args_html":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","location":null,"def":{"name":"object?","args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"object = self.object?\nif (object && (!ignore_cached)) || (object && object.changed?)\nelse\n  if (object_iri = self.object_iri) && dereference\n    if object_iri.starts_with?(Ktistec.host)\n    else\n      ActivityPub::Object.open?(object_iri) do |response|\n        if (        object = ActivityPub::Object.from_json_ld?(response.body))\n          return self.object = object\n        end\n      end\n    end\n  end\nend\nobject\n"}}],"macros":[],"types":[]},{"html_id":"ktistec/ActivityPub/Activity/Create","path":"ActivityPub/Activity/Create.html","kind":"class","full_name":"ActivityPub::Activity::Create","name":"Create","abstract":false,"superclass":{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},"ancestors":[{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},{"html_id":"ktistec/Ktistec/Model/Linked","kind":"module","full_name":"Ktistec::Model::Linked","name":"Linked"},{"html_id":"ktistec/Ktistec/Model/Serialized","kind":"module","full_name":"Ktistec::Model::Serialized","name":"Serialized"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"_belongs_to_actor:ActivityPub::Actor?-instance-method","html_id":"_belongs_to_actor:ActivityPub::Actor?-instance-method","name":"_belongs_to_actor","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/activity_pub/activity/create.cr","line_number":7,"url":null},"def":{"name":"_belongs_to_actor","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@actor"}},{"id":"_belongs_to_object:ActivityPub::Object?-instance-method","html_id":"_belongs_to_object:ActivityPub::Object?-instance-method","name":"_belongs_to_object","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Object?","args_html":" : <a href=\"../../ActivityPub/Object.html\">ActivityPub::Object</a>?","location":{"filename":"src/models/activity_pub/activity/create.cr","line_number":8,"url":null},"def":{"name":"_belongs_to_object","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object | ::Nil","visibility":"Public","body":"@object"}},{"id":"actor:ActivityPub::Actor-instance-method","html_id":"actor:ActivityPub::Actor-instance-method","name":"actor","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/activity_pub/activity/create.cr","line_number":7,"url":null},"def":{"name":"actor","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@actor || (@actor = (ActivityPub::Actor.find?(iri: self.actor_iri) || (raise(NotFound.new(\"#{self.class} actor iri=#{self.actor_iri}: not found\")))))"}},{"id":"actor=(actor:ActivityPub::Actor):ActivityPub::Actor-instance-method","html_id":"actor=(actor:ActivityPub::Actor):ActivityPub::Actor-instance-method","name":"actor=","doc":null,"summary":null,"abstract":false,"args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":"ActivityPub::Actor"}],"args_string":"(actor : ActivityPub::Actor) : ActivityPub::Actor","args_html":"(actor : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>) : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/activity_pub/activity/create.cr","line_number":7,"url":null},"def":{"name":"actor=","args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":"ActivityPub::Actor"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@actor = actor\nself.actor_iri = actor.iri.as(typeof(self.actor_iri))\nactor\n"}},{"id":"actor?:ActivityPub::Actor?-instance-method","html_id":"actor?:ActivityPub::Actor?-instance-method","name":"actor?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/activity_pub/activity/create.cr","line_number":7,"url":null},"def":{"name":"actor?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@actor || (@actor = (ActivityPub::Actor.find?(iri: self.actor_iri) || nil))"}},{"id":"actor?(*,dereference=false,ignore_cached=false)-instance-method","html_id":"actor?(*,dereference=false,ignore_cached=false)-instance-method","name":"actor?","doc":null,"summary":null,"abstract":false,"args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"args_string":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","args_html":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","location":null,"def":{"name":"actor?","args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"actor = self.actor?\nif (actor && (!ignore_cached)) || (actor && actor.changed?)\nelse\n  if (actor_iri = self.actor_iri) && dereference\n    if actor_iri.starts_with?(Ktistec.host)\n    else\n      ActivityPub::Actor.open?(actor_iri) do |response|\n        if (        actor = ActivityPub::Actor.from_json_ld?(response.body))\n          return self.actor = actor\n        end\n      end\n    end\n  end\nend\nactor\n"}},{"id":"object:ActivityPub::Object-instance-method","html_id":"object:ActivityPub::Object-instance-method","name":"object","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Object","args_html":" : <a href=\"../../ActivityPub/Object.html\">ActivityPub::Object</a>","location":{"filename":"src/models/activity_pub/activity/create.cr","line_number":8,"url":null},"def":{"name":"object","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object","visibility":"Public","body":"@object || (@object = (ActivityPub::Object.find?(iri: self.object_iri) || (raise(NotFound.new(\"#{self.class} object iri=#{self.object_iri}: not found\")))))"}},{"id":"object=(object:ActivityPub::Object):ActivityPub::Object-instance-method","html_id":"object=(object:ActivityPub::Object):ActivityPub::Object-instance-method","name":"object=","doc":null,"summary":null,"abstract":false,"args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"ActivityPub::Object"}],"args_string":"(object : ActivityPub::Object) : ActivityPub::Object","args_html":"(object : <a href=\"../../ActivityPub/Object.html\">ActivityPub::Object</a>) : <a href=\"../../ActivityPub/Object.html\">ActivityPub::Object</a>","location":{"filename":"src/models/activity_pub/activity/create.cr","line_number":8,"url":null},"def":{"name":"object=","args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"ActivityPub::Object"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object","visibility":"Public","body":"@object = object\nself.object_iri = object.iri.as(typeof(self.object_iri))\nobject\n"}},{"id":"object?:ActivityPub::Object?-instance-method","html_id":"object?:ActivityPub::Object?-instance-method","name":"object?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Object?","args_html":" : <a href=\"../../ActivityPub/Object.html\">ActivityPub::Object</a>?","location":{"filename":"src/models/activity_pub/activity/create.cr","line_number":8,"url":null},"def":{"name":"object?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object | ::Nil","visibility":"Public","body":"@object || (@object = (ActivityPub::Object.find?(iri: self.object_iri) || nil))"}},{"id":"object?(*,dereference=false,ignore_cached=false)-instance-method","html_id":"object?(*,dereference=false,ignore_cached=false)-instance-method","name":"object?","doc":null,"summary":null,"abstract":false,"args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"args_string":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","args_html":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","location":null,"def":{"name":"object?","args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"object = self.object?\nif (object && (!ignore_cached)) || (object && object.changed?)\nelse\n  if (object_iri = self.object_iri) && dereference\n    if object_iri.starts_with?(Ktistec.host)\n    else\n      ActivityPub::Object.open?(object_iri) do |response|\n        if (        object = ActivityPub::Object.from_json_ld?(response.body))\n          return self.object = object\n        end\n      end\n    end\n  end\nend\nobject\n"}},{"id":"valid_for_send?-instance-method","html_id":"valid_for_send?-instance-method","name":"valid_for_send?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/activity/create.cr","line_number":10,"url":null},"def":{"name":"valid_for_send?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"valid?\nmessages = [] of String\nif actor?.try(&.local?)\nelse\n  messages << \"actor must be local\"\nend\nif object?.try(&.attributed_to?) == actor?\nelse\n  messages << \"object must be attributed to actor\"\nend\nif messages.empty?\nelse\n  errors[\"activity\"] = (errors.fetch(\"activity\", [] of String)) + messages\nend\nerrors.empty?\n"}}],"macros":[],"types":[]},{"html_id":"ktistec/ActivityPub/Activity/Delete","path":"ActivityPub/Activity/Delete.html","kind":"class","full_name":"ActivityPub::Activity::Delete","name":"Delete","abstract":false,"superclass":{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},"ancestors":[{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},{"html_id":"ktistec/Ktistec/Model/Linked","kind":"module","full_name":"Ktistec::Model::Linked","name":"Linked"},{"html_id":"ktistec/Ktistec/Model/Serialized","kind":"module","full_name":"Ktistec::Model::Serialized","name":"Serialized"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"_belongs_to_actor:ActivityPub::Actor?-instance-method","html_id":"_belongs_to_actor:ActivityPub::Actor?-instance-method","name":"_belongs_to_actor","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/activity_pub/activity/delete.cr","line_number":7,"url":null},"def":{"name":"_belongs_to_actor","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@actor"}},{"id":"_belongs_to_object:ActivityPub::Object|ActivityPub::Actor?-instance-method","html_id":"_belongs_to_object:ActivityPub::Object|ActivityPub::Actor?-instance-method","name":"_belongs_to_object","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Object | ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Object.html\">ActivityPub::Object</a> | <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/activity_pub/activity/delete.cr","line_number":8,"url":null},"def":{"name":"_belongs_to_object","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object | ActivityPub::Actor | ::Nil","visibility":"Public","body":"@object"}},{"id":"actor:ActivityPub::Actor-instance-method","html_id":"actor:ActivityPub::Actor-instance-method","name":"actor","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/activity_pub/activity/delete.cr","line_number":7,"url":null},"def":{"name":"actor","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@actor || (@actor = (ActivityPub::Actor.find?(iri: self.actor_iri) || (raise(NotFound.new(\"#{self.class} actor iri=#{self.actor_iri}: not found\")))))"}},{"id":"actor=(actor:ActivityPub::Actor):ActivityPub::Actor-instance-method","html_id":"actor=(actor:ActivityPub::Actor):ActivityPub::Actor-instance-method","name":"actor=","doc":null,"summary":null,"abstract":false,"args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":"ActivityPub::Actor"}],"args_string":"(actor : ActivityPub::Actor) : ActivityPub::Actor","args_html":"(actor : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>) : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/activity_pub/activity/delete.cr","line_number":7,"url":null},"def":{"name":"actor=","args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":"ActivityPub::Actor"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@actor = actor\nself.actor_iri = actor.iri.as(typeof(self.actor_iri))\nactor\n"}},{"id":"actor?:ActivityPub::Actor?-instance-method","html_id":"actor?:ActivityPub::Actor?-instance-method","name":"actor?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/activity_pub/activity/delete.cr","line_number":7,"url":null},"def":{"name":"actor?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@actor || (@actor = (ActivityPub::Actor.find?(iri: self.actor_iri) || nil))"}},{"id":"actor?(*,dereference=false,ignore_cached=false)-instance-method","html_id":"actor?(*,dereference=false,ignore_cached=false)-instance-method","name":"actor?","doc":null,"summary":null,"abstract":false,"args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"args_string":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","args_html":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","location":null,"def":{"name":"actor?","args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"actor = self.actor?\nif (actor && (!ignore_cached)) || (actor && actor.changed?)\nelse\n  if (actor_iri = self.actor_iri) && dereference\n    if actor_iri.starts_with?(Ktistec.host)\n    else\n      ActivityPub::Actor.open?(actor_iri) do |response|\n        if (        actor = ActivityPub::Actor.from_json_ld?(response.body))\n          return self.actor = actor\n        end\n      end\n    end\n  end\nend\nactor\n"}},{"id":"object:ActivityPub::Object|ActivityPub::Actor-instance-method","html_id":"object:ActivityPub::Object|ActivityPub::Actor-instance-method","name":"object","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Object | ActivityPub::Actor","args_html":" : <a href=\"../../ActivityPub/Object.html\">ActivityPub::Object</a> | <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/activity_pub/activity/delete.cr","line_number":8,"url":null},"def":{"name":"object","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object | ActivityPub::Actor","visibility":"Public","body":"@object || (@object = ((ActivityPub::Object.find?(iri: self.object_iri) || ActivityPub::Actor.find?(iri: self.object_iri)) || (raise(NotFound.new(\"#{self.class} object iri=#{self.object_iri}: not found\")))))"}},{"id":"object=(object:ActivityPub::Object|ActivityPub::Actor):ActivityPub::Object|ActivityPub::Actor-instance-method","html_id":"object=(object:ActivityPub::Object|ActivityPub::Actor):ActivityPub::Object|ActivityPub::Actor-instance-method","name":"object=","doc":null,"summary":null,"abstract":false,"args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"ActivityPub::Object | ActivityPub::Actor"}],"args_string":"(object : ActivityPub::Object | ActivityPub::Actor) : ActivityPub::Object | ActivityPub::Actor","args_html":"(object : <a href=\"../../ActivityPub/Object.html\">ActivityPub::Object</a> | <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>) : <a href=\"../../ActivityPub/Object.html\">ActivityPub::Object</a> | <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/activity_pub/activity/delete.cr","line_number":8,"url":null},"def":{"name":"object=","args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"ActivityPub::Object | ActivityPub::Actor"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object | ActivityPub::Actor","visibility":"Public","body":"@object = object\nself.object_iri = object.iri.as(typeof(self.object_iri))\nobject\n"}},{"id":"object?:ActivityPub::Object|ActivityPub::Actor?-instance-method","html_id":"object?:ActivityPub::Object|ActivityPub::Actor?-instance-method","name":"object?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Object | ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Object.html\">ActivityPub::Object</a> | <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/activity_pub/activity/delete.cr","line_number":8,"url":null},"def":{"name":"object?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object | ActivityPub::Actor | ::Nil","visibility":"Public","body":"@object || (@object = ((ActivityPub::Object.find?(iri: self.object_iri) || ActivityPub::Actor.find?(iri: self.object_iri)) || nil))"}},{"id":"object?(*,dereference=false,ignore_cached=false)-instance-method","html_id":"object?(*,dereference=false,ignore_cached=false)-instance-method","name":"object?","doc":null,"summary":null,"abstract":false,"args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"args_string":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","args_html":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","location":null,"def":{"name":"object?","args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"object = self.object?\nif (object && (!ignore_cached)) || (object && object.changed?)\nelse\n  if (object_iri = self.object_iri) && dereference\n    if object_iri.starts_with?(Ktistec.host)\n    else\n      ActivityPub::Object.open?(object_iri) do |response|\n        if (        object = ActivityPub::Object.from_json_ld?(response.body))\n          return self.object = object\n        end\n      end\n      ActivityPub::Actor.open?(object_iri) do |response|\n        if (        object = ActivityPub::Actor.from_json_ld?(response.body))\n          return self.object = object\n        end\n      end\n    end\n  end\nend\nobject\n"}},{"id":"validate_model-instance-method","html_id":"validate_model-instance-method","name":"validate_model","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/activity/delete.cr","line_number":10,"url":null},"def":{"name":"validate_model","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if object.deleted?\nelse\n  case (  _object = object)\n  when ActivityPub::Object\n    if actor == _object.attributed_to\n    else\n      errors[\"activity\"] = [\"the actor must be the object's actor\"]\n    end\n  when ActivityPub::Actor\n    if actor == _object\n    else\n      errors[\"activity\"] = [\"the actors must match\"]\n    end\n  end\nend"}}],"macros":[],"types":[]},{"html_id":"ktistec/ActivityPub/Activity/Follow","path":"ActivityPub/Activity/Follow.html","kind":"class","full_name":"ActivityPub::Activity::Follow","name":"Follow","abstract":false,"superclass":{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},"ancestors":[{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},{"html_id":"ktistec/Ktistec/Model/Linked","kind":"module","full_name":"Ktistec::Model::Linked","name":"Linked"},{"html_id":"ktistec/Ktistec/Model/Serialized","kind":"module","full_name":"Ktistec::Model::Serialized","name":"Serialized"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},"doc":null,"summary":null,"class_methods":[{"id":"follows?(actor_or_iri,object_or_iri)-class-method","html_id":"follows?(actor_or_iri,object_or_iri)-class-method","name":"follows?","doc":null,"summary":null,"abstract":false,"args":[{"name":"actor_or_iri","doc":null,"default_value":"","external_name":"actor_or_iri","restriction":""},{"name":"object_or_iri","doc":null,"default_value":"","external_name":"object_or_iri","restriction":""}],"args_string":"(actor_or_iri, object_or_iri)","args_html":"(actor_or_iri, object_or_iri)","location":{"filename":"src/models/activity_pub/activity/follow.cr","line_number":11,"url":null},"def":{"name":"follows?","args":[{"name":"actor_or_iri","doc":null,"default_value":"","external_name":"actor_or_iri","restriction":""},{"name":"object_or_iri","doc":null,"default_value":"","external_name":"object_or_iri","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  actor_iri = actor_or_iri.is_a?(ActivityPub::Actor) ? actor_or_iri.iri : actor_or_iri\n  object_iri = object_or_iri.is_a?(ActivityPub::Actor) ? object_or_iri.iri : object_or_iri\n  {% if true %}\n        {% vs = @type.instance_vars.select(&.annotation(Persistent)) %}\n        columns = {{ vs.map do |v|\n    \"f.#{v.stringify}\"\n  end.join(\",\") }}\n        query = <<-SQL\n            SELECT #{columns}\n              FROM #{table} f\n              JOIN relationships r\n                ON r.from_iri = f.actor_iri\n               AND r.to_iri = f.object_iri\n             WHERE f.type = '#{ActivityPub::Activity::Follow}'\n               AND r.type = '#{Relationship::Social::Follow}'\n               AND actor_iri = ?\n               AND object_iri = ?\n          ORDER BY f.created_at desc\n             LIMIT 1\n        SQL\n        query_one(query, actor_iri, object_iri)\n      {% end %}\nrescue DB::NoResultsError\nend"}}],"constructors":[],"instance_methods":[{"id":"_belongs_to_actor:ActivityPub::Actor?-instance-method","html_id":"_belongs_to_actor:ActivityPub::Actor?-instance-method","name":"_belongs_to_actor","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/activity_pub/activity/follow.cr","line_number":8,"url":null},"def":{"name":"_belongs_to_actor","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@actor"}},{"id":"_belongs_to_object:ActivityPub::Actor?-instance-method","html_id":"_belongs_to_object:ActivityPub::Actor?-instance-method","name":"_belongs_to_object","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/activity_pub/activity/follow.cr","line_number":9,"url":null},"def":{"name":"_belongs_to_object","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@object"}},{"id":"accepted_or_rejected?-instance-method","html_id":"accepted_or_rejected?-instance-method","name":"accepted_or_rejected?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/activity/follow.cr","line_number":42,"url":null},"def":{"name":"accepted_or_rejected?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(ActivityPub::Activity.where(QUERY, iri)).first?"}},{"id":"actor:ActivityPub::Actor-instance-method","html_id":"actor:ActivityPub::Actor-instance-method","name":"actor","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/activity_pub/activity/follow.cr","line_number":8,"url":null},"def":{"name":"actor","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@actor || (@actor = (ActivityPub::Actor.find?(iri: self.actor_iri) || (raise(NotFound.new(\"#{self.class} actor iri=#{self.actor_iri}: not found\")))))"}},{"id":"actor=(actor:ActivityPub::Actor):ActivityPub::Actor-instance-method","html_id":"actor=(actor:ActivityPub::Actor):ActivityPub::Actor-instance-method","name":"actor=","doc":null,"summary":null,"abstract":false,"args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":"ActivityPub::Actor"}],"args_string":"(actor : ActivityPub::Actor) : ActivityPub::Actor","args_html":"(actor : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>) : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/activity_pub/activity/follow.cr","line_number":8,"url":null},"def":{"name":"actor=","args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":"ActivityPub::Actor"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@actor = actor\nself.actor_iri = actor.iri.as(typeof(self.actor_iri))\nactor\n"}},{"id":"actor?:ActivityPub::Actor?-instance-method","html_id":"actor?:ActivityPub::Actor?-instance-method","name":"actor?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/activity_pub/activity/follow.cr","line_number":8,"url":null},"def":{"name":"actor?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@actor || (@actor = (ActivityPub::Actor.find?(iri: self.actor_iri) || nil))"}},{"id":"actor?(*,dereference=false,ignore_cached=false)-instance-method","html_id":"actor?(*,dereference=false,ignore_cached=false)-instance-method","name":"actor?","doc":null,"summary":null,"abstract":false,"args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"args_string":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","args_html":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","location":null,"def":{"name":"actor?","args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"actor = self.actor?\nif (actor && (!ignore_cached)) || (actor && actor.changed?)\nelse\n  if (actor_iri = self.actor_iri) && dereference\n    if actor_iri.starts_with?(Ktistec.host)\n    else\n      ActivityPub::Actor.open?(actor_iri) do |response|\n        if (        actor = ActivityPub::Actor.from_json_ld?(response.body))\n          return self.actor = actor\n        end\n      end\n    end\n  end\nend\nactor\n"}},{"id":"object:ActivityPub::Actor-instance-method","html_id":"object:ActivityPub::Actor-instance-method","name":"object","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/activity_pub/activity/follow.cr","line_number":9,"url":null},"def":{"name":"object","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@object || (@object = (ActivityPub::Actor.find?(iri: self.object_iri) || (raise(NotFound.new(\"#{self.class} object iri=#{self.object_iri}: not found\")))))"}},{"id":"object=(object:ActivityPub::Actor):ActivityPub::Actor-instance-method","html_id":"object=(object:ActivityPub::Actor):ActivityPub::Actor-instance-method","name":"object=","doc":null,"summary":null,"abstract":false,"args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"ActivityPub::Actor"}],"args_string":"(object : ActivityPub::Actor) : ActivityPub::Actor","args_html":"(object : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>) : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/activity_pub/activity/follow.cr","line_number":9,"url":null},"def":{"name":"object=","args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"ActivityPub::Actor"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@object = object\nself.object_iri = object.iri.as(typeof(self.object_iri))\nobject\n"}},{"id":"object?:ActivityPub::Actor?-instance-method","html_id":"object?:ActivityPub::Actor?-instance-method","name":"object?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/activity_pub/activity/follow.cr","line_number":9,"url":null},"def":{"name":"object?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@object || (@object = (ActivityPub::Actor.find?(iri: self.object_iri) || nil))"}},{"id":"object?(*,dereference=false,ignore_cached=false)-instance-method","html_id":"object?(*,dereference=false,ignore_cached=false)-instance-method","name":"object?","doc":null,"summary":null,"abstract":false,"args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"args_string":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","args_html":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","location":null,"def":{"name":"object?","args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"object = self.object?\nif (object && (!ignore_cached)) || (object && object.changed?)\nelse\n  if (object_iri = self.object_iri) && dereference\n    if object_iri.starts_with?(Ktistec.host)\n    else\n      ActivityPub::Actor.open?(object_iri) do |response|\n        if (        object = ActivityPub::Actor.from_json_ld?(response.body))\n          return self.object = object\n        end\n      end\n    end\n  end\nend\nobject\n"}},{"id":"valid_for_send?-instance-method","html_id":"valid_for_send?-instance-method","name":"valid_for_send?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/activity/follow.cr","line_number":46,"url":null},"def":{"name":"valid_for_send?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"valid?\nmessages = [] of String\nif actor?.try(&.local?)\nelse\n  messages << \"actor must be local\"\nend\nif object?.try(&.inbox)\nelse\n  messages << \"object must have an inbox\"\nend\nif messages.empty?\nelse\n  errors[\"activity\"] = (errors.fetch(\"activity\", [] of String)) + messages\nend\nerrors.empty?\n"}}],"macros":[],"types":[]},{"html_id":"ktistec/ActivityPub/Activity/Like","path":"ActivityPub/Activity/Like.html","kind":"class","full_name":"ActivityPub::Activity::Like","name":"Like","abstract":false,"superclass":{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},"ancestors":[{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},{"html_id":"ktistec/Ktistec/Model/Linked","kind":"module","full_name":"Ktistec::Model::Linked","name":"Linked"},{"html_id":"ktistec/Ktistec/Model/Serialized","kind":"module","full_name":"Ktistec::Model::Serialized","name":"Serialized"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"_belongs_to_actor:ActivityPub::Actor?-instance-method","html_id":"_belongs_to_actor:ActivityPub::Actor?-instance-method","name":"_belongs_to_actor","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/activity_pub/activity/like.cr","line_number":7,"url":null},"def":{"name":"_belongs_to_actor","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@actor"}},{"id":"_belongs_to_object:ActivityPub::Object?-instance-method","html_id":"_belongs_to_object:ActivityPub::Object?-instance-method","name":"_belongs_to_object","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Object?","args_html":" : <a href=\"../../ActivityPub/Object.html\">ActivityPub::Object</a>?","location":{"filename":"src/models/activity_pub/activity/like.cr","line_number":8,"url":null},"def":{"name":"_belongs_to_object","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object | ::Nil","visibility":"Public","body":"@object"}},{"id":"actor:ActivityPub::Actor-instance-method","html_id":"actor:ActivityPub::Actor-instance-method","name":"actor","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/activity_pub/activity/like.cr","line_number":7,"url":null},"def":{"name":"actor","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@actor || (@actor = (ActivityPub::Actor.find?(iri: self.actor_iri) || (raise(NotFound.new(\"#{self.class} actor iri=#{self.actor_iri}: not found\")))))"}},{"id":"actor=(actor:ActivityPub::Actor):ActivityPub::Actor-instance-method","html_id":"actor=(actor:ActivityPub::Actor):ActivityPub::Actor-instance-method","name":"actor=","doc":null,"summary":null,"abstract":false,"args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":"ActivityPub::Actor"}],"args_string":"(actor : ActivityPub::Actor) : ActivityPub::Actor","args_html":"(actor : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>) : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/activity_pub/activity/like.cr","line_number":7,"url":null},"def":{"name":"actor=","args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":"ActivityPub::Actor"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@actor = actor\nself.actor_iri = actor.iri.as(typeof(self.actor_iri))\nactor\n"}},{"id":"actor?:ActivityPub::Actor?-instance-method","html_id":"actor?:ActivityPub::Actor?-instance-method","name":"actor?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/activity_pub/activity/like.cr","line_number":7,"url":null},"def":{"name":"actor?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@actor || (@actor = (ActivityPub::Actor.find?(iri: self.actor_iri) || nil))"}},{"id":"actor?(*,dereference=false,ignore_cached=false)-instance-method","html_id":"actor?(*,dereference=false,ignore_cached=false)-instance-method","name":"actor?","doc":null,"summary":null,"abstract":false,"args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"args_string":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","args_html":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","location":null,"def":{"name":"actor?","args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"actor = self.actor?\nif (actor && (!ignore_cached)) || (actor && actor.changed?)\nelse\n  if (actor_iri = self.actor_iri) && dereference\n    if actor_iri.starts_with?(Ktistec.host)\n    else\n      ActivityPub::Actor.open?(actor_iri) do |response|\n        if (        actor = ActivityPub::Actor.from_json_ld?(response.body))\n          return self.actor = actor\n        end\n      end\n    end\n  end\nend\nactor\n"}},{"id":"object:ActivityPub::Object-instance-method","html_id":"object:ActivityPub::Object-instance-method","name":"object","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Object","args_html":" : <a href=\"../../ActivityPub/Object.html\">ActivityPub::Object</a>","location":{"filename":"src/models/activity_pub/activity/like.cr","line_number":8,"url":null},"def":{"name":"object","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object","visibility":"Public","body":"@object || (@object = (ActivityPub::Object.find?(iri: self.object_iri) || (raise(NotFound.new(\"#{self.class} object iri=#{self.object_iri}: not found\")))))"}},{"id":"object=(object:ActivityPub::Object):ActivityPub::Object-instance-method","html_id":"object=(object:ActivityPub::Object):ActivityPub::Object-instance-method","name":"object=","doc":null,"summary":null,"abstract":false,"args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"ActivityPub::Object"}],"args_string":"(object : ActivityPub::Object) : ActivityPub::Object","args_html":"(object : <a href=\"../../ActivityPub/Object.html\">ActivityPub::Object</a>) : <a href=\"../../ActivityPub/Object.html\">ActivityPub::Object</a>","location":{"filename":"src/models/activity_pub/activity/like.cr","line_number":8,"url":null},"def":{"name":"object=","args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"ActivityPub::Object"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object","visibility":"Public","body":"@object = object\nself.object_iri = object.iri.as(typeof(self.object_iri))\nobject\n"}},{"id":"object?:ActivityPub::Object?-instance-method","html_id":"object?:ActivityPub::Object?-instance-method","name":"object?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Object?","args_html":" : <a href=\"../../ActivityPub/Object.html\">ActivityPub::Object</a>?","location":{"filename":"src/models/activity_pub/activity/like.cr","line_number":8,"url":null},"def":{"name":"object?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object | ::Nil","visibility":"Public","body":"@object || (@object = (ActivityPub::Object.find?(iri: self.object_iri) || nil))"}},{"id":"object?(*,dereference=false,ignore_cached=false)-instance-method","html_id":"object?(*,dereference=false,ignore_cached=false)-instance-method","name":"object?","doc":null,"summary":null,"abstract":false,"args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"args_string":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","args_html":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","location":null,"def":{"name":"object?","args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"object = self.object?\nif (object && (!ignore_cached)) || (object && object.changed?)\nelse\n  if (object_iri = self.object_iri) && dereference\n    if object_iri.starts_with?(Ktistec.host)\n    else\n      ActivityPub::Object.open?(object_iri) do |response|\n        if (        object = ActivityPub::Object.from_json_ld?(response.body))\n          return self.object = object\n        end\n      end\n    end\n  end\nend\nobject\n"}}],"macros":[],"types":[]},{"html_id":"ktistec/ActivityPub/Activity/Reject","path":"ActivityPub/Activity/Reject.html","kind":"class","full_name":"ActivityPub::Activity::Reject","name":"Reject","abstract":false,"superclass":{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},"ancestors":[{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},{"html_id":"ktistec/Ktistec/Model/Linked","kind":"module","full_name":"Ktistec::Model::Linked","name":"Linked"},{"html_id":"ktistec/Ktistec/Model/Serialized","kind":"module","full_name":"Ktistec::Model::Serialized","name":"Serialized"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"_belongs_to_actor:ActivityPub::Actor?-instance-method","html_id":"_belongs_to_actor:ActivityPub::Actor?-instance-method","name":"_belongs_to_actor","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/activity_pub/activity/reject.cr","line_number":7,"url":null},"def":{"name":"_belongs_to_actor","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@actor"}},{"id":"_belongs_to_object:ActivityPub::Activity::Follow?-instance-method","html_id":"_belongs_to_object:ActivityPub::Activity::Follow?-instance-method","name":"_belongs_to_object","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Activity::Follow?","args_html":" : <a href=\"../../ActivityPub/Activity/Follow.html\">ActivityPub::Activity::Follow</a>?","location":{"filename":"src/models/activity_pub/activity/reject.cr","line_number":8,"url":null},"def":{"name":"_belongs_to_object","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Activity::Follow | ::Nil","visibility":"Public","body":"@object"}},{"id":"actor:ActivityPub::Actor-instance-method","html_id":"actor:ActivityPub::Actor-instance-method","name":"actor","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/activity_pub/activity/reject.cr","line_number":7,"url":null},"def":{"name":"actor","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@actor || (@actor = (ActivityPub::Actor.find?(iri: self.actor_iri) || (raise(NotFound.new(\"#{self.class} actor iri=#{self.actor_iri}: not found\")))))"}},{"id":"actor=(actor:ActivityPub::Actor):ActivityPub::Actor-instance-method","html_id":"actor=(actor:ActivityPub::Actor):ActivityPub::Actor-instance-method","name":"actor=","doc":null,"summary":null,"abstract":false,"args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":"ActivityPub::Actor"}],"args_string":"(actor : ActivityPub::Actor) : ActivityPub::Actor","args_html":"(actor : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>) : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/activity_pub/activity/reject.cr","line_number":7,"url":null},"def":{"name":"actor=","args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":"ActivityPub::Actor"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@actor = actor\nself.actor_iri = actor.iri.as(typeof(self.actor_iri))\nactor\n"}},{"id":"actor?:ActivityPub::Actor?-instance-method","html_id":"actor?:ActivityPub::Actor?-instance-method","name":"actor?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/activity_pub/activity/reject.cr","line_number":7,"url":null},"def":{"name":"actor?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@actor || (@actor = (ActivityPub::Actor.find?(iri: self.actor_iri) || nil))"}},{"id":"actor?(*,dereference=false,ignore_cached=false)-instance-method","html_id":"actor?(*,dereference=false,ignore_cached=false)-instance-method","name":"actor?","doc":null,"summary":null,"abstract":false,"args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"args_string":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","args_html":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","location":null,"def":{"name":"actor?","args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"actor = self.actor?\nif (actor && (!ignore_cached)) || (actor && actor.changed?)\nelse\n  if (actor_iri = self.actor_iri) && dereference\n    if actor_iri.starts_with?(Ktistec.host)\n    else\n      ActivityPub::Actor.open?(actor_iri) do |response|\n        if (        actor = ActivityPub::Actor.from_json_ld?(response.body))\n          return self.actor = actor\n        end\n      end\n    end\n  end\nend\nactor\n"}},{"id":"object:ActivityPub::Activity::Follow-instance-method","html_id":"object:ActivityPub::Activity::Follow-instance-method","name":"object","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Activity::Follow","args_html":" : <a href=\"../../ActivityPub/Activity/Follow.html\">ActivityPub::Activity::Follow</a>","location":{"filename":"src/models/activity_pub/activity/reject.cr","line_number":8,"url":null},"def":{"name":"object","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Activity::Follow","visibility":"Public","body":"@object || (@object = (ActivityPub::Activity::Follow.find?(iri: self.object_iri) || (raise(NotFound.new(\"#{self.class} object iri=#{self.object_iri}: not found\")))))"}},{"id":"object=(object:ActivityPub::Activity::Follow):ActivityPub::Activity::Follow-instance-method","html_id":"object=(object:ActivityPub::Activity::Follow):ActivityPub::Activity::Follow-instance-method","name":"object=","doc":null,"summary":null,"abstract":false,"args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"ActivityPub::Activity::Follow"}],"args_string":"(object : ActivityPub::Activity::Follow) : ActivityPub::Activity::Follow","args_html":"(object : <a href=\"../../ActivityPub/Activity/Follow.html\">ActivityPub::Activity::Follow</a>) : <a href=\"../../ActivityPub/Activity/Follow.html\">ActivityPub::Activity::Follow</a>","location":{"filename":"src/models/activity_pub/activity/reject.cr","line_number":8,"url":null},"def":{"name":"object=","args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"ActivityPub::Activity::Follow"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Activity::Follow","visibility":"Public","body":"@object = object\nself.object_iri = object.iri.as(typeof(self.object_iri))\nobject\n"}},{"id":"object?:ActivityPub::Activity::Follow?-instance-method","html_id":"object?:ActivityPub::Activity::Follow?-instance-method","name":"object?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Activity::Follow?","args_html":" : <a href=\"../../ActivityPub/Activity/Follow.html\">ActivityPub::Activity::Follow</a>?","location":{"filename":"src/models/activity_pub/activity/reject.cr","line_number":8,"url":null},"def":{"name":"object?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Activity::Follow | ::Nil","visibility":"Public","body":"@object || (@object = (ActivityPub::Activity::Follow.find?(iri: self.object_iri) || nil))"}},{"id":"object?(*,dereference=false,ignore_cached=false)-instance-method","html_id":"object?(*,dereference=false,ignore_cached=false)-instance-method","name":"object?","doc":null,"summary":null,"abstract":false,"args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"args_string":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","args_html":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","location":null,"def":{"name":"object?","args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"object = self.object?\nif (object && (!ignore_cached)) || (object && object.changed?)\nelse\n  if (object_iri = self.object_iri) && dereference\n    if object_iri.starts_with?(Ktistec.host)\n    else\n      ActivityPub::Activity::Follow.open?(object_iri) do |response|\n        if (        object = ActivityPub::Activity::Follow.from_json_ld?(response.body))\n          return self.object = object\n        end\n      end\n    end\n  end\nend\nobject\n"}}],"macros":[],"types":[]},{"html_id":"ktistec/ActivityPub/Activity/Undo","path":"ActivityPub/Activity/Undo.html","kind":"class","full_name":"ActivityPub::Activity::Undo","name":"Undo","abstract":false,"superclass":{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},"ancestors":[{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},{"html_id":"ktistec/Ktistec/Model/Linked","kind":"module","full_name":"Ktistec::Model::Linked","name":"Linked"},{"html_id":"ktistec/Ktistec/Model/Serialized","kind":"module","full_name":"Ktistec::Model::Serialized","name":"Serialized"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"_belongs_to_actor:ActivityPub::Actor?-instance-method","html_id":"_belongs_to_actor:ActivityPub::Actor?-instance-method","name":"_belongs_to_actor","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/activity_pub/activity/undo.cr","line_number":6,"url":null},"def":{"name":"_belongs_to_actor","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@actor"}},{"id":"_belongs_to_object:ActivityPub::Activity?-instance-method","html_id":"_belongs_to_object:ActivityPub::Activity?-instance-method","name":"_belongs_to_object","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Activity?","args_html":" : <a href=\"../../ActivityPub/Activity.html\">ActivityPub::Activity</a>?","location":{"filename":"src/models/activity_pub/activity/undo.cr","line_number":7,"url":null},"def":{"name":"_belongs_to_object","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Activity | ::Nil","visibility":"Public","body":"@object"}},{"id":"actor:ActivityPub::Actor-instance-method","html_id":"actor:ActivityPub::Actor-instance-method","name":"actor","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/activity_pub/activity/undo.cr","line_number":6,"url":null},"def":{"name":"actor","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@actor || (@actor = (ActivityPub::Actor.find?(iri: self.actor_iri) || (raise(NotFound.new(\"#{self.class} actor iri=#{self.actor_iri}: not found\")))))"}},{"id":"actor=(actor:ActivityPub::Actor):ActivityPub::Actor-instance-method","html_id":"actor=(actor:ActivityPub::Actor):ActivityPub::Actor-instance-method","name":"actor=","doc":null,"summary":null,"abstract":false,"args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":"ActivityPub::Actor"}],"args_string":"(actor : ActivityPub::Actor) : ActivityPub::Actor","args_html":"(actor : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>) : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/activity_pub/activity/undo.cr","line_number":6,"url":null},"def":{"name":"actor=","args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":"ActivityPub::Actor"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@actor = actor\nself.actor_iri = actor.iri.as(typeof(self.actor_iri))\nactor\n"}},{"id":"actor?:ActivityPub::Actor?-instance-method","html_id":"actor?:ActivityPub::Actor?-instance-method","name":"actor?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/activity_pub/activity/undo.cr","line_number":6,"url":null},"def":{"name":"actor?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@actor || (@actor = (ActivityPub::Actor.find?(iri: self.actor_iri) || nil))"}},{"id":"actor?(*,dereference=false,ignore_cached=false)-instance-method","html_id":"actor?(*,dereference=false,ignore_cached=false)-instance-method","name":"actor?","doc":null,"summary":null,"abstract":false,"args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"args_string":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","args_html":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","location":null,"def":{"name":"actor?","args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"actor = self.actor?\nif (actor && (!ignore_cached)) || (actor && actor.changed?)\nelse\n  if (actor_iri = self.actor_iri) && dereference\n    if actor_iri.starts_with?(Ktistec.host)\n    else\n      ActivityPub::Actor.open?(actor_iri) do |response|\n        if (        actor = ActivityPub::Actor.from_json_ld?(response.body))\n          return self.actor = actor\n        end\n      end\n    end\n  end\nend\nactor\n"}},{"id":"object:ActivityPub::Activity-instance-method","html_id":"object:ActivityPub::Activity-instance-method","name":"object","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Activity","args_html":" : <a href=\"../../ActivityPub/Activity.html\">ActivityPub::Activity</a>","location":{"filename":"src/models/activity_pub/activity/undo.cr","line_number":7,"url":null},"def":{"name":"object","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Activity","visibility":"Public","body":"@object || (@object = (ActivityPub::Activity.find?(iri: self.object_iri) || (raise(NotFound.new(\"#{self.class} object iri=#{self.object_iri}: not found\")))))"}},{"id":"object=(object:ActivityPub::Activity):ActivityPub::Activity-instance-method","html_id":"object=(object:ActivityPub::Activity):ActivityPub::Activity-instance-method","name":"object=","doc":null,"summary":null,"abstract":false,"args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"ActivityPub::Activity"}],"args_string":"(object : ActivityPub::Activity) : ActivityPub::Activity","args_html":"(object : <a href=\"../../ActivityPub/Activity.html\">ActivityPub::Activity</a>) : <a href=\"../../ActivityPub/Activity.html\">ActivityPub::Activity</a>","location":{"filename":"src/models/activity_pub/activity/undo.cr","line_number":7,"url":null},"def":{"name":"object=","args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"ActivityPub::Activity"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Activity","visibility":"Public","body":"@object = object\nself.object_iri = object.iri.as(typeof(self.object_iri))\nobject\n"}},{"id":"object?:ActivityPub::Activity?-instance-method","html_id":"object?:ActivityPub::Activity?-instance-method","name":"object?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Activity?","args_html":" : <a href=\"../../ActivityPub/Activity.html\">ActivityPub::Activity</a>?","location":{"filename":"src/models/activity_pub/activity/undo.cr","line_number":7,"url":null},"def":{"name":"object?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Activity | ::Nil","visibility":"Public","body":"@object || (@object = (ActivityPub::Activity.find?(iri: self.object_iri) || nil))"}},{"id":"object?(*,dereference=false,ignore_cached=false)-instance-method","html_id":"object?(*,dereference=false,ignore_cached=false)-instance-method","name":"object?","doc":null,"summary":null,"abstract":false,"args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"args_string":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","args_html":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","location":null,"def":{"name":"object?","args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"object = self.object?\nif (object && (!ignore_cached)) || (object && object.changed?)\nelse\n  if (object_iri = self.object_iri) && dereference\n    if object_iri.starts_with?(Ktistec.host)\n    else\n      ActivityPub::Activity.open?(object_iri) do |response|\n        if (        object = ActivityPub::Activity.from_json_ld?(response.body))\n          return self.object = object\n        end\n      end\n    end\n  end\nend\nobject\n"}},{"id":"validate_model-instance-method","html_id":"validate_model-instance-method","name":"validate_model","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/activity/undo.cr","line_number":9,"url":null},"def":{"name":"validate_model","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if actor.iri == object.actor_iri\nelse\n  errors[\"activity\"] = [\"the actor must be the object's actor\"]\nend"}}],"macros":[],"types":[]},{"html_id":"ktistec/ActivityPub/Activity/Update","path":"ActivityPub/Activity/Update.html","kind":"class","full_name":"ActivityPub::Activity::Update","name":"Update","abstract":false,"superclass":{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},"ancestors":[{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},{"html_id":"ktistec/Ktistec/Model/Linked","kind":"module","full_name":"Ktistec::Model::Linked","name":"Linked"},{"html_id":"ktistec/Ktistec/Model/Serialized","kind":"module","full_name":"Ktistec::Model::Serialized","name":"Serialized"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"_belongs_to_actor:ActivityPub::Actor?-instance-method","html_id":"_belongs_to_actor:ActivityPub::Actor?-instance-method","name":"_belongs_to_actor","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/activity_pub/activity/update.cr","line_number":7,"url":null},"def":{"name":"_belongs_to_actor","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@actor"}},{"id":"_belongs_to_object:ActivityPub::Object?-instance-method","html_id":"_belongs_to_object:ActivityPub::Object?-instance-method","name":"_belongs_to_object","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Object?","args_html":" : <a href=\"../../ActivityPub/Object.html\">ActivityPub::Object</a>?","location":{"filename":"src/models/activity_pub/activity/update.cr","line_number":8,"url":null},"def":{"name":"_belongs_to_object","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object | ::Nil","visibility":"Public","body":"@object"}},{"id":"actor:ActivityPub::Actor-instance-method","html_id":"actor:ActivityPub::Actor-instance-method","name":"actor","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/activity_pub/activity/update.cr","line_number":7,"url":null},"def":{"name":"actor","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@actor || (@actor = (ActivityPub::Actor.find?(iri: self.actor_iri) || (raise(NotFound.new(\"#{self.class} actor iri=#{self.actor_iri}: not found\")))))"}},{"id":"actor=(actor:ActivityPub::Actor):ActivityPub::Actor-instance-method","html_id":"actor=(actor:ActivityPub::Actor):ActivityPub::Actor-instance-method","name":"actor=","doc":null,"summary":null,"abstract":false,"args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":"ActivityPub::Actor"}],"args_string":"(actor : ActivityPub::Actor) : ActivityPub::Actor","args_html":"(actor : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>) : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/activity_pub/activity/update.cr","line_number":7,"url":null},"def":{"name":"actor=","args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":"ActivityPub::Actor"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@actor = actor\nself.actor_iri = actor.iri.as(typeof(self.actor_iri))\nactor\n"}},{"id":"actor?:ActivityPub::Actor?-instance-method","html_id":"actor?:ActivityPub::Actor?-instance-method","name":"actor?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/activity_pub/activity/update.cr","line_number":7,"url":null},"def":{"name":"actor?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@actor || (@actor = (ActivityPub::Actor.find?(iri: self.actor_iri) || nil))"}},{"id":"actor?(*,dereference=false,ignore_cached=false)-instance-method","html_id":"actor?(*,dereference=false,ignore_cached=false)-instance-method","name":"actor?","doc":null,"summary":null,"abstract":false,"args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"args_string":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","args_html":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","location":null,"def":{"name":"actor?","args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"actor = self.actor?\nif (actor && (!ignore_cached)) || (actor && actor.changed?)\nelse\n  if (actor_iri = self.actor_iri) && dereference\n    if actor_iri.starts_with?(Ktistec.host)\n    else\n      ActivityPub::Actor.open?(actor_iri) do |response|\n        if (        actor = ActivityPub::Actor.from_json_ld?(response.body))\n          return self.actor = actor\n        end\n      end\n    end\n  end\nend\nactor\n"}},{"id":"object:ActivityPub::Object-instance-method","html_id":"object:ActivityPub::Object-instance-method","name":"object","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Object","args_html":" : <a href=\"../../ActivityPub/Object.html\">ActivityPub::Object</a>","location":{"filename":"src/models/activity_pub/activity/update.cr","line_number":8,"url":null},"def":{"name":"object","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object","visibility":"Public","body":"@object || (@object = (ActivityPub::Object.find?(iri: self.object_iri) || (raise(NotFound.new(\"#{self.class} object iri=#{self.object_iri}: not found\")))))"}},{"id":"object=(object:ActivityPub::Object):ActivityPub::Object-instance-method","html_id":"object=(object:ActivityPub::Object):ActivityPub::Object-instance-method","name":"object=","doc":null,"summary":null,"abstract":false,"args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"ActivityPub::Object"}],"args_string":"(object : ActivityPub::Object) : ActivityPub::Object","args_html":"(object : <a href=\"../../ActivityPub/Object.html\">ActivityPub::Object</a>) : <a href=\"../../ActivityPub/Object.html\">ActivityPub::Object</a>","location":{"filename":"src/models/activity_pub/activity/update.cr","line_number":8,"url":null},"def":{"name":"object=","args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"ActivityPub::Object"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object","visibility":"Public","body":"@object = object\nself.object_iri = object.iri.as(typeof(self.object_iri))\nobject\n"}},{"id":"object?:ActivityPub::Object?-instance-method","html_id":"object?:ActivityPub::Object?-instance-method","name":"object?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Object?","args_html":" : <a href=\"../../ActivityPub/Object.html\">ActivityPub::Object</a>?","location":{"filename":"src/models/activity_pub/activity/update.cr","line_number":8,"url":null},"def":{"name":"object?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object | ::Nil","visibility":"Public","body":"@object || (@object = (ActivityPub::Object.find?(iri: self.object_iri) || nil))"}},{"id":"object?(*,dereference=false,ignore_cached=false)-instance-method","html_id":"object?(*,dereference=false,ignore_cached=false)-instance-method","name":"object?","doc":null,"summary":null,"abstract":false,"args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"args_string":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","args_html":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","location":null,"def":{"name":"object?","args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"object = self.object?\nif (object && (!ignore_cached)) || (object && object.changed?)\nelse\n  if (object_iri = self.object_iri) && dereference\n    if object_iri.starts_with?(Ktistec.host)\n    else\n      ActivityPub::Object.open?(object_iri) do |response|\n        if (        object = ActivityPub::Object.from_json_ld?(response.body))\n          return self.object = object\n        end\n      end\n    end\n  end\nend\nobject\n"}},{"id":"valid_for_send?-instance-method","html_id":"valid_for_send?-instance-method","name":"valid_for_send?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/activity/update.cr","line_number":10,"url":null},"def":{"name":"valid_for_send?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"valid?\nmessages = [] of String\nif actor?.try(&.local?)\nelse\n  messages << \"actor must be local\"\nend\nif object?.try(&.attributed_to?) == actor?\nelse\n  messages << \"object must be attributed to actor\"\nend\nif messages.empty?\nelse\n  errors[\"activity\"] = (errors.fetch(\"activity\", [] of String)) + messages\nend\nerrors.empty?\n"}}],"macros":[],"types":[]}]},{"html_id":"ktistec/ActivityPub/Actor","path":"ActivityPub/Actor.html","kind":"class","full_name":"ActivityPub::Actor","name":"Actor","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},{"html_id":"ktistec/Ktistec/Model/Linked","kind":"module","full_name":"Ktistec::Model::Linked","name":"Linked"},{"html_id":"ktistec/Ktistec/Model/Serialized","kind":"module","full_name":"Ktistec::Model::Serialized","name":"Serialized"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Deletable","kind":"module","full_name":"Ktistec::Model::Deletable","name":"Deletable"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/Deletable","kind":"module","full_name":"Ktistec::Model::Deletable","name":"Deletable"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model/Linked","kind":"module","full_name":"Ktistec::Model::Linked","name":"Linked"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Serialized","kind":"module","full_name":"Ktistec::Model::Serialized","name":"Serialized"}],"extended_modules":[{"html_id":"ktistec/Ktistec/Model/ClassMethods","kind":"module","full_name":"Ktistec::Model::ClassMethods","name":"ClassMethods"},{"html_id":"ktistec/Ktistec/Model/Serialized/ClassMethods","kind":"module","full_name":"Ktistec::Model::Serialized::ClassMethods","name":"ClassMethods"},{"html_id":"ktistec/Ktistec/Open","kind":"module","full_name":"Ktistec::Open","name":"Open"}],"subclasses":[{"html_id":"ktistec/ActivityPub/Actor/Application","kind":"class","full_name":"ActivityPub::Actor::Application","name":"Application"},{"html_id":"ktistec/ActivityPub/Actor/Group","kind":"class","full_name":"ActivityPub::Actor::Group","name":"Group"},{"html_id":"ktistec/ActivityPub/Actor/Organization","kind":"class","full_name":"ActivityPub::Actor::Organization","name":"Organization"},{"html_id":"ktistec/ActivityPub/Actor/Person","kind":"class","full_name":"ActivityPub::Actor::Person","name":"Person"},{"html_id":"ktistec/ActivityPub/Actor/Service","kind":"class","full_name":"ActivityPub::Actor::Service","name":"Service"}],"including_types":[],"namespace":{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},"doc":null,"summary":null,"class_methods":[{"id":"find(_iriiri:String?)-class-method","html_id":"find(_iriiri:String?)-class-method","name":"find","doc":null,"summary":null,"abstract":false,"args":[{"name":"iri","doc":null,"default_value":"","external_name":"_iri","restriction":"String | ::Nil"}],"args_string":"(_iri iri : String?)","args_html":"(_iri iri : String?)","location":null,"def":{"name":"find","args":[{"name":"iri","doc":null,"default_value":"","external_name":"_iri","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"find(iri: iri)"}},{"id":"find?(_iriiri:String?)-class-method","html_id":"find?(_iriiri:String?)-class-method","name":"find?","doc":null,"summary":null,"abstract":false,"args":[{"name":"iri","doc":null,"default_value":"","external_name":"_iri","restriction":"String | ::Nil"}],"args_string":"(_iri iri : String?)","args_html":"(_iri iri : String?)","location":null,"def":{"name":"find?","args":[{"name":"iri","doc":null,"default_value":"","external_name":"_iri","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"find?(iri: iri)"}},{"id":"from_hash(options,ignore_cached=true)-class-method","html_id":"from_hash(options,ignore_cached=true)-class-method","name":"from_hash","doc":null,"summary":null,"abstract":false,"args":[{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"true","external_name":"ignore_cached","restriction":""}],"args_string":"(options, ignore_cached = <span class=\"n\">true</span>)","args_html":"(options, ignore_cached = <span class=\"n\">true</span>)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":24,"url":null},"def":{"name":"from_hash","args":[{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"true","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(ActivityPub.from_hash(\"\", options, default: self, ignore_cached: ignore_cached)).as(self)"}},{"id":"from_hash?(options,ignore_cached=true)-class-method","html_id":"from_hash?(options,ignore_cached=true)-class-method","name":"from_hash?","doc":null,"summary":null,"abstract":false,"args":[{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"true","external_name":"ignore_cached","restriction":""}],"args_string":"(options, ignore_cached = <span class=\"n\">true</span>)","args_html":"(options, ignore_cached = <span class=\"n\">true</span>)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":24,"url":null},"def":{"name":"from_hash?","args":[{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"true","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  (ActivityPub.from_hash?(\"\", options, default: self, ignore_cached: ignore_cached)).as(self | ::Nil)\nrescue TypeCastError\nend"}},{"id":"from_json_ld(json,**options)-class-method","html_id":"from_json_ld(json,**options)-class-method","name":"from_json_ld","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"args_string":"(json, **options)","args_html":"(json, **options)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":24,"url":null},"def":{"name":"from_json_ld","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(ActivityPub.from_json_ld(json, **options.merge({default: self}))).as(self)"}},{"id":"from_json_ld?(json,**options)-class-method","html_id":"from_json_ld?(json,**options)-class-method","name":"from_json_ld?","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"args_string":"(json, **options)","args_html":"(json, **options)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":24,"url":null},"def":{"name":"from_json_ld?","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  (ActivityPub.from_json_ld?(json, **options.merge({default: self}))).as(self | ::Nil)\nrescue TypeCastError\nend"}},{"id":"local_timeline(page=1,size=10)-class-method","html_id":"local_timeline(page=1,size=10)-class-method","name":"local_timeline","doc":null,"summary":null,"abstract":false,"args":[{"name":"page","doc":null,"default_value":"1","external_name":"page","restriction":""},{"name":"size","doc":null,"default_value":"10","external_name":"size","restriction":""}],"args_string":"(page = <span class=\"n\">1</span>, size = <span class=\"n\">10</span>)","args_html":"(page = <span class=\"n\">1</span>, size = <span class=\"n\">10</span>)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":378,"url":null},"def":{"name":"local_timeline","args":[{"name":"page","doc":null,"default_value":"1","external_name":"page","restriction":""},{"name":"size","doc":null,"default_value":"10","external_name":"size","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"content(\"#{Ktistec.host}%\", Relationship::Content::Outbox, [ActivityPub::Activity::Create, ActivityPub::Activity::Announce], nil, page, size, true, false)"}},{"id":"map(json,*,include_key=false,**option)-class-method","html_id":"map(json,*,include_key=false,**option)-class-method","name":"map","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""},{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"include_key","doc":null,"default_value":"false","external_name":"include_key","restriction":""}],"args_string":"(json, *, include_key = <span class=\"n\">false</span>, **option)","args_html":"(json, *, include_key = <span class=\"n\">false</span>, **option)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":447,"url":null},"def":{"name":"map","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""},{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"include_key","doc":null,"default_value":"false","external_name":"include_key","restriction":""}],"double_splat":{"name":"option","doc":null,"default_value":"","external_name":"option","restriction":""},"splat_index":1,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if json.is_a?(String | IO)\n  json = Ktistec::JSON_LD.expand(JSON.parse(json))\nend\n{iri: (json.dig?(\"@id\")).try(&.as_s), _type: (json.dig?(\"@type\")).try do |__arg11|\n  (__arg11.as_s.split(\"#\")).last\nend, username: dig?(json, \"https://www.w3.org/ns/activitystreams#preferredUsername\"), pem_public_key: if include_key\n  dig?(json, \"https://w3id.org/security#publicKey\", \"https://w3id.org/security#publicKeyPem\")\nend, inbox: dig_id?(json, \"http://www.w3.org/ns/ldp#inbox\"), outbox: dig_id?(json, \"https://www.w3.org/ns/activitystreams#outbox\"), following: dig_id?(json, \"https://www.w3.org/ns/activitystreams#following\"), followers: dig_id?(json, \"https://www.w3.org/ns/activitystreams#followers\"), name: dig?(json, \"https://www.w3.org/ns/activitystreams#name\", \"und\"), summary: dig?(json, \"https://www.w3.org/ns/activitystreams#summary\", \"und\"), icon: dig_id?(json, \"https://www.w3.org/ns/activitystreams#icon\", \"https://www.w3.org/ns/activitystreams#url\"), image: dig_id?(json, \"https://www.w3.org/ns/activitystreams#image\", \"https://www.w3.org/ns/activitystreams#url\"), urls: dig_ids?(json, \"https://www.w3.org/ns/activitystreams#url\")}\n"}},{"id":"match?(account)-class-method","html_id":"match?(account)-class-method","name":"match?","doc":null,"summary":null,"abstract":false,"args":[{"name":"account","doc":null,"default_value":"","external_name":"account","restriction":""}],"args_string":"(account)","args_html":"(account)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":107,"url":null},"def":{"name":"match?","args":[{"name":"account","doc":null,"default_value":"","external_name":"account","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if account =~ (/^@?([^@]+)@([^@]+)$/)\n  where(username: $~[1]).find do |actor|\n    if (    urls = actor.urls)\n      urls.any? do |url|\n        begin\n          uri = URI.parse(url)\n          (uri.host.try(&.downcase) == $~[2].downcase) && (uri.path[2..].downcase == $~[1].downcase)\n        rescue URI::Error\n        end\n      end\n    end\n  end\nend"}}],"constructors":[{"id":"dereference?(iri:String?,ignore_cached=false):self?-class-method","html_id":"dereference?(iri:String?,ignore_cached=false):self?-class-method","name":"dereference?","doc":null,"summary":null,"abstract":false,"args":[{"name":"iri","doc":null,"default_value":"","external_name":"iri","restriction":"String | ::Nil"},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"args_string":"(iri : String?, ignore_cached = <span class=\"n\">false</span>) : <span class=\"k\">self</span>?","args_html":"(iri : String?, ignore_cached = <span class=\"n\">false</span>) : <span class=\"k\">self</span>?","location":null,"def":{"name":"dereference?","args":[{"name":"iri","doc":null,"default_value":"","external_name":"iri","restriction":"String | ::Nil"},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"self | ::Nil","visibility":"Public","body":"if iri\n  if (instance = self.find?(iri)) && (!ignore_cached)\n  else\n    if iri.starts_with?(Ktistec.host)\n    else\n      self.open?(iri) do |response|\n        instance = self.from_json_ld?(response.body)\n      end\n    end\n  end\nend\ninstance\n"}}],"instance_methods":[{"id":"_belongs_to_objects:Enumerable(ActivityPub::Object)?-instance-method","html_id":"_belongs_to_objects:Enumerable(ActivityPub::Object)?-instance-method","name":"_belongs_to_objects","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Enumerable(ActivityPub::Object)?","args_html":" : Enumerable(<a href=\"../ActivityPub/Object.html\">ActivityPub::Object</a>)?","location":{"filename":"src/models/activity_pub/actor.cr","line_number":78,"url":null},"def":{"name":"_belongs_to_objects","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Enumerable(ActivityPub::Object) | ::Nil","visibility":"Public","body":"@objects"}},{"id":"account_uri-instance-method","html_id":"account_uri-instance-method","name":"account_uri","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/actor.cr","line_number":103,"url":null},"def":{"name":"account_uri","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"\"#{username}@#{(URI.parse(iri)).host}\""}},{"id":"all_followers(page=1,size=10,public=false)-instance-method","html_id":"all_followers(page=1,size=10,public=false)-instance-method","name":"all_followers","doc":null,"summary":null,"abstract":false,"args":[{"name":"page","doc":null,"default_value":"1","external_name":"page","restriction":""},{"name":"size","doc":null,"default_value":"10","external_name":"size","restriction":""},{"name":"public","doc":null,"default_value":"false","external_name":"public","restriction":""}],"args_string":"(page = <span class=\"n\">1</span>, size = <span class=\"n\">10</span>, public = <span class=\"n\">false</span>)","args_html":"(page = <span class=\"n\">1</span>, size = <span class=\"n\">10</span>, public = <span class=\"n\">false</span>)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":182,"url":null},"def":{"name":"all_followers","args":[{"name":"page","doc":null,"default_value":"1","external_name":"page","restriction":""},{"name":"size","doc":null,"default_value":"10","external_name":"size","restriction":""},{"name":"public","doc":null,"default_value":"false","external_name":"public","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"{% if true %}\n        {% vs = @type.instance_vars.select(&.annotation(Persistent)) %}\n        Ktistec::Util::PaginatedArray(Actor).new.tap do |array|\n          Ktistec.database.query(\n            query(Relationship::Social::Follow, :from_iri, :to_iri, public),\n            self.iri, self.iri, ((page - 1) * size).to_i, size.to_i + 1\n          ) do |rs|\n            rs.each do\n              array <<\n                Actor.new(\n                 {% for v in vs %}\n                   {{ v }}: rs.read({{ v.type }}),\n                 {% end %}\n                )\n            end\n          end\n          if array.size > size\n            array.more = true\n            array.pop\n          end\n        end\n      {% end %}"}},{"id":"all_following(page=1,size=10,public=true)-instance-method","html_id":"all_following(page=1,size=10,public=true)-instance-method","name":"all_following","doc":null,"summary":null,"abstract":false,"args":[{"name":"page","doc":null,"default_value":"1","external_name":"page","restriction":""},{"name":"size","doc":null,"default_value":"10","external_name":"size","restriction":""},{"name":"public","doc":null,"default_value":"true","external_name":"public","restriction":""}],"args_string":"(page = <span class=\"n\">1</span>, size = <span class=\"n\">10</span>, public = <span class=\"n\">true</span>)","args_html":"(page = <span class=\"n\">1</span>, size = <span class=\"n\">10</span>, public = <span class=\"n\">true</span>)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":157,"url":null},"def":{"name":"all_following","args":[{"name":"page","doc":null,"default_value":"1","external_name":"page","restriction":""},{"name":"size","doc":null,"default_value":"10","external_name":"size","restriction":""},{"name":"public","doc":null,"default_value":"true","external_name":"public","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"{% if true %}\n        {% vs = @type.instance_vars.select(&.annotation(Persistent)) %}\n        Ktistec::Util::PaginatedArray(Actor).new.tap do |array|\n          Ktistec.database.query(\n            query(Relationship::Social::Follow, :to_iri, :from_iri, public),\n            self.iri, self.iri, ((page - 1) * size).to_i, size.to_i + 1\n          ) do |rs|\n            rs.each do\n              array <<\n                Actor.new(\n                 {% for v in vs %}\n                   {{ v }}: rs.read({{ v.type }}),\n                 {% end %}\n                )\n            end\n          end\n          if array.size > size\n            array.more = true\n            array.pop\n          end\n        end\n      {% end %}"}},{"id":"before_validate-instance-method","html_id":"before_validate-instance-method","name":"before_validate","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/actor.cr","line_number":80,"url":null},"def":{"name":"before_validate","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if changed?(:username)\n  if (username = self.username) && ((iri.blank? && new_record?) || local?)\n    clear!(:username)\n    host = Ktistec.host\n    self.iri = \"#{host}/actors/#{username}\"\n    self.inbox = \"#{host}/actors/#{username}/inbox\"\n    self.outbox = \"#{host}/actors/#{username}/outbox\"\n    self.following = \"#{host}/actors/#{username}/following\"\n    self.followers = \"#{host}/actors/#{username}/followers\"\n    self.urls = [\"#{host}/@#{username}\"]\n  end\nend"}},{"id":"both_mailboxes(page=1,size=10)-instance-method","html_id":"both_mailboxes(page=1,size=10)-instance-method","name":"both_mailboxes","doc":null,"summary":null,"abstract":false,"args":[{"name":"page","doc":null,"default_value":"1","external_name":"page","restriction":""},{"name":"size","doc":null,"default_value":"10","external_name":"size","restriction":""}],"args_string":"(page = <span class=\"n\">1</span>, size = <span class=\"n\">10</span>)","args_html":"(page = <span class=\"n\">1</span>, size = <span class=\"n\">10</span>)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":391,"url":null},"def":{"name":"both_mailboxes","args":[{"name":"page","doc":null,"default_value":"1","external_name":"page","restriction":""},{"name":"size","doc":null,"default_value":"10","external_name":"size","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self.class.content(self.iri, [Relationship::Content::Inbox, Relationship::Content::Outbox], [ActivityPub::Activity::Create, ActivityPub::Activity::Announce], nil, page, size, false, false)"}},{"id":"display_link-instance-method","html_id":"display_link-instance-method","name":"display_link","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/actor.cr","line_number":99,"url":null},"def":{"name":"display_link","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"urls.try(&.first?) || iri"}},{"id":"display_name-instance-method","html_id":"display_name-instance-method","name":"display_name","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/actor.cr","line_number":95,"url":null},"def":{"name":"display_name","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(name.presence || username.presence) || iri"}},{"id":"drafts(page=1,size=10)-instance-method","html_id":"drafts(page=1,size=10)-instance-method","name":"drafts","doc":null,"summary":null,"abstract":false,"args":[{"name":"page","doc":null,"default_value":"1","external_name":"page","restriction":""},{"name":"size","doc":null,"default_value":"10","external_name":"size","restriction":""}],"args_string":"(page = <span class=\"n\">1</span>, size = <span class=\"n\">10</span>)","args_html":"(page = <span class=\"n\">1</span>, size = <span class=\"n\">10</span>)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":207,"url":null},"def":{"name":"drafts","args":[{"name":"page","doc":null,"default_value":"1","external_name":"page","restriction":""},{"name":"size","doc":null,"default_value":"10","external_name":"size","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"query = \"   SELECT #{Object.columns(prefix: \"o\")}\\n     FROM objects AS o\\n    WHERE o.attributed_to_iri = ?\\n      AND o.published IS NULL\\n      AND o.deleted_at is NULL\\n      AND o.id NOT IN (\\n         SELECT o.id\\n           FROM objects AS o\\n          WHERE o.attributed_to_iri = ?\\n            AND o.published IS NULL\\n            AND o.deleted_at is NULL\\n       ORDER BY o.created_at DESC\\n          LIMIT ?\\n      )\\n ORDER BY o.created_at DESC\\n    LIMIT ?\"\nObject.query_and_paginate(query, iri, iri, page: page, size: size)\n"}},{"id":"find_announce_in_outbox(object:Object)-instance-method","html_id":"find_announce_in_outbox(object:Object)-instance-method","name":"find_announce_in_outbox","doc":null,"summary":null,"abstract":false,"args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"Object"}],"args_string":"(object : Object)","args_html":"(object : <a href=\"../ActivityPub/Object.html\">Object</a>)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":362,"url":null},"def":{"name":"find_announce_in_outbox","args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"Object"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"find_in?(object, Relationship::Content::Outbox, ActivityPub::Activity::Announce)"}},{"id":"find_like_in_outbox(object:Object)-instance-method","html_id":"find_like_in_outbox(object:Object)-instance-method","name":"find_like_in_outbox","doc":null,"summary":null,"abstract":false,"args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"Object"}],"args_string":"(object : Object)","args_html":"(object : <a href=\"../ActivityPub/Object.html\">Object</a>)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":366,"url":null},"def":{"name":"find_like_in_outbox","args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"Object"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"find_in?(object, Relationship::Content::Outbox, ActivityPub::Activity::Like)"}},{"id":"follow(other:Actor,**options)-instance-method","html_id":"follow(other:Actor,**options)-instance-method","name":"follow","doc":null,"summary":null,"abstract":false,"args":[{"name":"other","doc":null,"default_value":"","external_name":"other","restriction":"Actor"}],"args_string":"(other : Actor, **options)","args_html":"(other : <a href=\"../ActivityPub/Actor.html\">Actor</a>, **options)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":121,"url":null},"def":{"name":"follow","args":[{"name":"other","doc":null,"default_value":"","external_name":"other","restriction":"Actor"}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Relationship::Social::Follow.new(**options.merge({from_iri: self.iri, to_iri: other.iri}))"}},{"id":"followers:String?-instance-method","html_id":"followers:String?-instance-method","name":"followers","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/actor.cr","line_number":61,"url":null},"def":{"name":"followers","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@followers"}},{"id":"followers=(followers:String?)-instance-method","html_id":"followers=(followers:String?)-instance-method","name":"followers=","doc":null,"summary":null,"abstract":false,"args":[{"name":"followers","doc":null,"default_value":"","external_name":"followers","restriction":"String | ::Nil"}],"args_string":"(followers : String?)","args_html":"(followers : String?)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":61,"url":null},"def":{"name":"followers=","args":[{"name":"followers","doc":null,"default_value":"","external_name":"followers","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@followers = followers"}},{"id":"following:String?-instance-method","html_id":"following:String?-instance-method","name":"following","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/actor.cr","line_number":58,"url":null},"def":{"name":"following","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@following"}},{"id":"following=(following:String?)-instance-method","html_id":"following=(following:String?)-instance-method","name":"following=","doc":null,"summary":null,"abstract":false,"args":[{"name":"following","doc":null,"default_value":"","external_name":"following","restriction":"String | ::Nil"}],"args_string":"(following : String?)","args_html":"(following : String?)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":58,"url":null},"def":{"name":"following=","args":[{"name":"following","doc":null,"default_value":"","external_name":"following","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@following = following"}},{"id":"follows?(other:Actor,**options)-instance-method","html_id":"follows?(other:Actor,**options)-instance-method","name":"follows?","doc":null,"summary":null,"abstract":false,"args":[{"name":"other","doc":null,"default_value":"","external_name":"other","restriction":"Actor"}],"args_string":"(other : Actor, **options)","args_html":"(other : <a href=\"../ActivityPub/Actor.html\">Actor</a>, **options)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":125,"url":null},"def":{"name":"follows?","args":[{"name":"other","doc":null,"default_value":"","external_name":"other","restriction":"Actor"}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"!other.deleted? ? Relationship::Social::Follow.find?(**options.merge({from_iri: self.iri, to_iri: other.iri})) : nil"}},{"id":"from_json_ld(json,*,include_key=false)-instance-method","html_id":"from_json_ld(json,*,include_key=false)-instance-method","name":"from_json_ld","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""},{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"include_key","doc":null,"default_value":"false","external_name":"include_key","restriction":""}],"args_string":"(json, *, include_key = <span class=\"n\">false</span>)","args_html":"(json, *, include_key = <span class=\"n\">false</span>)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":443,"url":null},"def":{"name":"from_json_ld","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""},{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"include_key","doc":null,"default_value":"false","external_name":"include_key","restriction":""}],"double_splat":null,"splat_index":1,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self.assign(**self.class.map(json, include_key: include_key))"}},{"id":"icon:String?-instance-method","html_id":"icon:String?-instance-method","name":"icon","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/actor.cr","line_number":70,"url":null},"def":{"name":"icon","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@icon"}},{"id":"icon=(icon:String?)-instance-method","html_id":"icon=(icon:String?)-instance-method","name":"icon=","doc":null,"summary":null,"abstract":false,"args":[{"name":"icon","doc":null,"default_value":"","external_name":"icon","restriction":"String | ::Nil"}],"args_string":"(icon : String?)","args_html":"(icon : String?)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":70,"url":null},"def":{"name":"icon=","args":[{"name":"icon","doc":null,"default_value":"","external_name":"icon","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@icon = icon"}},{"id":"image:String?-instance-method","html_id":"image:String?-instance-method","name":"image","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/actor.cr","line_number":73,"url":null},"def":{"name":"image","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@image"}},{"id":"image=(image:String?)-instance-method","html_id":"image=(image:String?)-instance-method","name":"image=","doc":null,"summary":null,"abstract":false,"args":[{"name":"image","doc":null,"default_value":"","external_name":"image","restriction":"String | ::Nil"}],"args_string":"(image : String?)","args_html":"(image : String?)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":73,"url":null},"def":{"name":"image=","args":[{"name":"image","doc":null,"default_value":"","external_name":"image","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@image = image"}},{"id":"in_inbox(page=1,size=10,public=true)-instance-method","html_id":"in_inbox(page=1,size=10,public=true)-instance-method","name":"in_inbox","doc":null,"summary":null,"abstract":false,"args":[{"name":"page","doc":null,"default_value":"1","external_name":"page","restriction":""},{"name":"size","doc":null,"default_value":"10","external_name":"size","restriction":""},{"name":"public","doc":null,"default_value":"true","external_name":"public","restriction":""}],"args_string":"(page = <span class=\"n\">1</span>, size = <span class=\"n\">10</span>, public = <span class=\"n\">true</span>)","args_html":"(page = <span class=\"n\">1</span>, size = <span class=\"n\">10</span>, public = <span class=\"n\">true</span>)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":370,"url":null},"def":{"name":"in_inbox","args":[{"name":"page","doc":null,"default_value":"1","external_name":"page","restriction":""},{"name":"size","doc":null,"default_value":"10","external_name":"size","restriction":""},{"name":"public","doc":null,"default_value":"true","external_name":"public","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self.class.content(self.iri, Relationship::Content::Inbox, nil, [ActivityPub::Activity::Delete, ActivityPub::Activity::Undo], page, size, public)"}},{"id":"in_inbox?(object:Object,inclusion=nil,exclusion=nil)-instance-method","html_id":"in_inbox?(object:Object,inclusion=nil,exclusion=nil)-instance-method","name":"in_inbox?","doc":null,"summary":null,"abstract":false,"args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"Object"},{"name":"inclusion","doc":null,"default_value":"nil","external_name":"inclusion","restriction":""},{"name":"exclusion","doc":null,"default_value":"nil","external_name":"exclusion","restriction":""}],"args_string":"(object : Object, inclusion = <span class=\"n\">nil</span>, exclusion = <span class=\"n\">nil</span>)","args_html":"(object : <a href=\"../ActivityPub/Object.html\">Object</a>, inclusion = <span class=\"n\">nil</span>, exclusion = <span class=\"n\">nil</span>)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":374,"url":null},"def":{"name":"in_inbox?","args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"Object"},{"name":"inclusion","doc":null,"default_value":"nil","external_name":"inclusion","restriction":""},{"name":"exclusion","doc":null,"default_value":"nil","external_name":"exclusion","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"find_in?(object, Relationship::Content::Inbox, inclusion, exclusion)"}},{"id":"in_outbox(page=1,size=10,public=true)-instance-method","html_id":"in_outbox(page=1,size=10,public=true)-instance-method","name":"in_outbox","doc":null,"summary":null,"abstract":false,"args":[{"name":"page","doc":null,"default_value":"1","external_name":"page","restriction":""},{"name":"size","doc":null,"default_value":"10","external_name":"size","restriction":""},{"name":"public","doc":null,"default_value":"true","external_name":"public","restriction":""}],"args_string":"(page = <span class=\"n\">1</span>, size = <span class=\"n\">10</span>, public = <span class=\"n\">true</span>)","args_html":"(page = <span class=\"n\">1</span>, size = <span class=\"n\">10</span>, public = <span class=\"n\">true</span>)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":354,"url":null},"def":{"name":"in_outbox","args":[{"name":"page","doc":null,"default_value":"1","external_name":"page","restriction":""},{"name":"size","doc":null,"default_value":"10","external_name":"size","restriction":""},{"name":"public","doc":null,"default_value":"true","external_name":"public","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self.class.content(self.iri, Relationship::Content::Outbox, nil, [ActivityPub::Activity::Delete, ActivityPub::Activity::Undo], page, size, public)"}},{"id":"in_outbox?(object:Object,inclusion=nil,exclusion=nil)-instance-method","html_id":"in_outbox?(object:Object,inclusion=nil,exclusion=nil)-instance-method","name":"in_outbox?","doc":null,"summary":null,"abstract":false,"args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"Object"},{"name":"inclusion","doc":null,"default_value":"nil","external_name":"inclusion","restriction":""},{"name":"exclusion","doc":null,"default_value":"nil","external_name":"exclusion","restriction":""}],"args_string":"(object : Object, inclusion = <span class=\"n\">nil</span>, exclusion = <span class=\"n\">nil</span>)","args_html":"(object : <a href=\"../ActivityPub/Object.html\">Object</a>, inclusion = <span class=\"n\">nil</span>, exclusion = <span class=\"n\">nil</span>)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":358,"url":null},"def":{"name":"in_outbox?","args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"Object"},{"name":"inclusion","doc":null,"default_value":"nil","external_name":"inclusion","restriction":""},{"name":"exclusion","doc":null,"default_value":"nil","external_name":"exclusion","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"find_in?(object, Relationship::Content::Outbox, inclusion, exclusion)"}},{"id":"inbox:String?-instance-method","html_id":"inbox:String?-instance-method","name":"inbox","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/actor.cr","line_number":52,"url":null},"def":{"name":"inbox","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@inbox"}},{"id":"inbox=(inbox:String?)-instance-method","html_id":"inbox=(inbox:String?)-instance-method","name":"inbox=","doc":null,"summary":null,"abstract":false,"args":[{"name":"inbox","doc":null,"default_value":"","external_name":"inbox","restriction":"String | ::Nil"}],"args_string":"(inbox : String?)","args_html":"(inbox : String?)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":52,"url":null},"def":{"name":"inbox=","args":[{"name":"inbox","doc":null,"default_value":"","external_name":"inbox","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@inbox = inbox"}},{"id":"iri:String?-instance-method","html_id":"iri:String?-instance-method","name":"iri","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":null,"def":{"name":"iri","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"if (value = @iri).nil?\n  @iri = (\"\")\nelse\n  value\nend"}},{"id":"iri=(iri:String)-instance-method","html_id":"iri=(iri:String)-instance-method","name":"iri=","doc":null,"summary":null,"abstract":false,"args":[{"name":"iri","doc":null,"default_value":"","external_name":"iri","restriction":"String"}],"args_string":"(iri : String)","args_html":"(iri : String)","location":null,"def":{"name":"iri=","args":[{"name":"iri","doc":null,"default_value":"","external_name":"iri","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@iri = iri"}},{"id":"make_delete_activity-instance-method","html_id":"make_delete_activity-instance-method","name":"make_delete_activity","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/actor.cr","line_number":468,"url":null},"def":{"name":"make_delete_activity","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"ActivityPub::Activity::Delete.new(iri: \"#{Ktistec.host}/activities/#{Ktistec::Util.id}\", actor: self, object: self, to: [\"https://www.w3.org/ns/activitystreams#Public\"], cc: [followers, following].compact)"}},{"id":"my_timeline(page=1,size=10)-instance-method","html_id":"my_timeline(page=1,size=10)-instance-method","name":"my_timeline","doc":null,"summary":null,"abstract":false,"args":[{"name":"page","doc":null,"default_value":"1","external_name":"page","restriction":""},{"name":"size","doc":null,"default_value":"10","external_name":"size","restriction":""}],"args_string":"(page = <span class=\"n\">1</span>, size = <span class=\"n\">10</span>)","args_html":"(page = <span class=\"n\">1</span>, size = <span class=\"n\">10</span>)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":404,"url":null},"def":{"name":"my_timeline","args":[{"name":"page","doc":null,"default_value":"1","external_name":"page","restriction":""},{"name":"size","doc":null,"default_value":"10","external_name":"size","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self.class.content(self.iri, Relationship::Content::Outbox, [ActivityPub::Activity::Create, ActivityPub::Activity::Announce], nil, page, size, true)"}},{"id":"name:String?-instance-method","html_id":"name:String?-instance-method","name":"name","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/actor.cr","line_number":64,"url":null},"def":{"name":"name","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@name"}},{"id":"name=(name:String?)-instance-method","html_id":"name=(name:String?)-instance-method","name":"name=","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String | ::Nil"}],"args_string":"(name : String?)","args_html":"(name : String?)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":64,"url":null},"def":{"name":"name=","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@name = name"}},{"id":"objects:Enumerable(ActivityPub::Object)-instance-method","html_id":"objects:Enumerable(ActivityPub::Object)-instance-method","name":"objects","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Enumerable(ActivityPub::Object)","args_html":" : Enumerable(<a href=\"../ActivityPub/Object.html\">ActivityPub::Object</a>)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":78,"url":null},"def":{"name":"objects","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Enumerable(ActivityPub::Object)","visibility":"Public","body":"objects = @objects\nif objects.nil? || objects.empty?\n  @objects = ActivityPub::Object.where(attributed_to_iri: self.iri)\nend\n@objects.not_nil!\n"}},{"id":"objects=(objects:Enumerable(ActivityPub::Object)):Enumerable(ActivityPub::Object)-instance-method","html_id":"objects=(objects:Enumerable(ActivityPub::Object)):Enumerable(ActivityPub::Object)-instance-method","name":"objects=","doc":null,"summary":null,"abstract":false,"args":[{"name":"objects","doc":null,"default_value":"","external_name":"objects","restriction":"Enumerable(ActivityPub::Object)"}],"args_string":"(objects : Enumerable(ActivityPub::Object)) : Enumerable(ActivityPub::Object)","args_html":"(objects : Enumerable(<a href=\"../ActivityPub/Object.html\">ActivityPub::Object</a>)) : Enumerable(<a href=\"../ActivityPub/Object.html\">ActivityPub::Object</a>)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":78,"url":null},"def":{"name":"objects=","args":[{"name":"objects","doc":null,"default_value":"","external_name":"objects","restriction":"Enumerable(ActivityPub::Object)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Enumerable(ActivityPub::Object)","visibility":"Public","body":"self.objects.each do |other|\n  if other.in?(objects)\n  else\n    other.destroy\n  end\nend\n@objects = objects.to_a\nobjects.each do |n|\n  n.attributed_to_iri = self.iri.as(typeof(n.attributed_to_iri))\nend\nobjects\n"}},{"id":"objects?(*,dereference=false,ignore_cached=false)-instance-method","html_id":"objects?(*,dereference=false,ignore_cached=false)-instance-method","name":"objects?","doc":null,"summary":null,"abstract":false,"args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"args_string":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","args_html":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","location":null,"def":{"name":"objects?","args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"objects = self.objects?\nif (objects && (!ignore_cached)) || (objects && objects.changed?)\nelse\n  if (objects_iri = self.objects_iri) && dereference\n    if objects_iri.starts_with?(Ktistec.host)\n    else\n      Enumerable(ActivityPub::Object).open?(objects_iri) do |response|\n        if (        objects = Enumerable(ActivityPub::Object).from_json_ld?(response.body))\n          return self.objects = objects\n        end\n      end\n    end\n  end\nend\nobjects\n"}},{"id":"outbox:String?-instance-method","html_id":"outbox:String?-instance-method","name":"outbox","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/actor.cr","line_number":55,"url":null},"def":{"name":"outbox","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@outbox"}},{"id":"outbox=(outbox:String?)-instance-method","html_id":"outbox=(outbox:String?)-instance-method","name":"outbox=","doc":null,"summary":null,"abstract":false,"args":[{"name":"outbox","doc":null,"default_value":"","external_name":"outbox","restriction":"String | ::Nil"}],"args_string":"(outbox : String?)","args_html":"(outbox : String?)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":55,"url":null},"def":{"name":"outbox=","args":[{"name":"outbox","doc":null,"default_value":"","external_name":"outbox","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@outbox = outbox"}},{"id":"pem_private_key:String?-instance-method","html_id":"pem_private_key:String?-instance-method","name":"pem_private_key","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/actor.cr","line_number":37,"url":null},"def":{"name":"pem_private_key","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@pem_private_key"}},{"id":"pem_private_key=(pem_private_key:String?)-instance-method","html_id":"pem_private_key=(pem_private_key:String?)-instance-method","name":"pem_private_key=","doc":null,"summary":null,"abstract":false,"args":[{"name":"pem_private_key","doc":null,"default_value":"","external_name":"pem_private_key","restriction":"String | ::Nil"}],"args_string":"(pem_private_key : String?)","args_html":"(pem_private_key : String?)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":37,"url":null},"def":{"name":"pem_private_key=","args":[{"name":"pem_private_key","doc":null,"default_value":"","external_name":"pem_private_key","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@pem_private_key = pem_private_key"}},{"id":"pem_public_key:String?-instance-method","html_id":"pem_public_key:String?-instance-method","name":"pem_public_key","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/actor.cr","line_number":33,"url":null},"def":{"name":"pem_public_key","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@pem_public_key"}},{"id":"pem_public_key=(pem_public_key:String?)-instance-method","html_id":"pem_public_key=(pem_public_key:String?)-instance-method","name":"pem_public_key=","doc":null,"summary":null,"abstract":false,"args":[{"name":"pem_public_key","doc":null,"default_value":"","external_name":"pem_public_key","restriction":"String | ::Nil"}],"args_string":"(pem_public_key : String?)","args_html":"(pem_public_key : String?)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":33,"url":null},"def":{"name":"pem_public_key=","args":[{"name":"pem_public_key","doc":null,"default_value":"","external_name":"pem_public_key","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@pem_public_key = pem_public_key"}},{"id":"private_key-instance-method","html_id":"private_key-instance-method","name":"private_key","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/actor.cr","line_number":45,"url":null},"def":{"name":"private_key","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if (key = pem_private_key)\n  OpenSSL::RSA.new(key, nil, true)\nend"}},{"id":"public_key-instance-method","html_id":"public_key-instance-method","name":"public_key","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/actor.cr","line_number":39,"url":null},"def":{"name":"public_key","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if (key = pem_public_key)\n  OpenSSL::RSA.new(key, nil, false)\nend"}},{"id":"public_posts(page=1,size=10)-instance-method","html_id":"public_posts(page=1,size=10)-instance-method","name":"public_posts","doc":null,"summary":null,"abstract":false,"args":[{"name":"page","doc":null,"default_value":"1","external_name":"page","restriction":""},{"name":"size","doc":null,"default_value":"10","external_name":"size","restriction":""}],"args_string":"(page = <span class=\"n\">1</span>, size = <span class=\"n\">10</span>)","args_html":"(page = <span class=\"n\">1</span>, size = <span class=\"n\">10</span>)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":416,"url":null},"def":{"name":"public_posts","args":[{"name":"page","doc":null,"default_value":"1","external_name":"page","restriction":""},{"name":"size","doc":null,"default_value":"10","external_name":"size","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"query = \"   SELECT #{Object.columns(prefix: \"o\")}\\n     FROM objects AS o\\n    WHERE o.attributed_to_iri = ?\\n      AND o.visible = 1\\n      AND o.deleted_at is NULL\\n      AND o.id NOT IN (\\n         SELECT o.id\\n           FROM objects AS o\\n          WHERE o.attributed_to_iri = ?\\n            AND o.visible = 1\\n            AND o.deleted_at is NULL\\n       ORDER BY o.published DESC\\n          LIMIT ?\\n      )\\n ORDER BY o.published DESC\\n    LIMIT ?\"\nObject.query_and_paginate(query, iri, iri, page: page, size: size)\n"}},{"id":"summary:String?-instance-method","html_id":"summary:String?-instance-method","name":"summary","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/actor.cr","line_number":67,"url":null},"def":{"name":"summary","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@summary"}},{"id":"summary=(summary:String?)-instance-method","html_id":"summary=(summary:String?)-instance-method","name":"summary=","doc":null,"summary":null,"abstract":false,"args":[{"name":"summary","doc":null,"default_value":"","external_name":"summary","restriction":"String | ::Nil"}],"args_string":"(summary : String?)","args_html":"(summary : String?)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":67,"url":null},"def":{"name":"summary=","args":[{"name":"summary","doc":null,"default_value":"","external_name":"summary","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@summary = summary"}},{"id":"to_json_ld(recursive=false)-instance-method","html_id":"to_json_ld(recursive=false)-instance-method","name":"to_json_ld","doc":null,"summary":null,"abstract":false,"args":[{"name":"recursive","doc":null,"default_value":"false","external_name":"recursive","restriction":""}],"args_string":"(recursive = <span class=\"n\">false</span>)","args_html":"(recursive = <span class=\"n\">false</span>)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":438,"url":null},"def":{"name":"to_json_ld","args":[{"name":"recursive","doc":null,"default_value":"false","external_name":"recursive","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"actor = self\nrender(\"src/views/actors/actor.json.ecr\")\n"}},{"id":"urls:Array(String)?-instance-method","html_id":"urls:Array(String)?-instance-method","name":"urls","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(String)?","args_html":" : <a href=\"../Array.html\">Array</a>(String)?","location":{"filename":"src/models/activity_pub/actor.cr","line_number":76,"url":null},"def":{"name":"urls","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(String) | ::Nil","visibility":"Public","body":"@urls"}},{"id":"urls=(urls:Array(String)?)-instance-method","html_id":"urls=(urls:Array(String)?)-instance-method","name":"urls=","doc":null,"summary":null,"abstract":false,"args":[{"name":"urls","doc":null,"default_value":"","external_name":"urls","restriction":"Array(String) | ::Nil"}],"args_string":"(urls : Array(String)?)","args_html":"(urls : <a href=\"../Array.html\">Array</a>(String)?)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":76,"url":null},"def":{"name":"urls=","args":[{"name":"urls","doc":null,"default_value":"","external_name":"urls","restriction":"Array(String) | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@urls = urls"}},{"id":"username:String?-instance-method","html_id":"username:String?-instance-method","name":"username","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/actor.cr","line_number":29,"url":null},"def":{"name":"username","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@username"}},{"id":"username=(username:String?)-instance-method","html_id":"username=(username:String?)-instance-method","name":"username=","doc":null,"summary":null,"abstract":false,"args":[{"name":"username","doc":null,"default_value":"","external_name":"username","restriction":"String | ::Nil"}],"args_string":"(username : String?)","args_html":"(username : String?)","location":{"filename":"src/models/activity_pub/actor.cr","line_number":29,"url":null},"def":{"name":"username=","args":[{"name":"username","doc":null,"default_value":"","external_name":"username","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@username = username"}}],"macros":[],"types":[{"html_id":"ktistec/ActivityPub/Actor/Application","path":"ActivityPub/Actor/Application.html","kind":"class","full_name":"ActivityPub::Actor::Application","name":"Application","abstract":false,"superclass":{"html_id":"ktistec/ActivityPub/Actor","kind":"class","full_name":"ActivityPub::Actor","name":"Actor"},"ancestors":[{"html_id":"ktistec/ActivityPub/Actor","kind":"class","full_name":"ActivityPub::Actor","name":"Actor"},{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},{"html_id":"ktistec/Ktistec/Model/Linked","kind":"module","full_name":"Ktistec::Model::Linked","name":"Linked"},{"html_id":"ktistec/Ktistec/Model/Serialized","kind":"module","full_name":"Ktistec::Model::Serialized","name":"Serialized"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Deletable","kind":"module","full_name":"Ktistec::Model::Deletable","name":"Deletable"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/ActivityPub/Actor","kind":"class","full_name":"ActivityPub::Actor","name":"Actor"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/ActivityPub/Actor/Group","path":"ActivityPub/Actor/Group.html","kind":"class","full_name":"ActivityPub::Actor::Group","name":"Group","abstract":false,"superclass":{"html_id":"ktistec/ActivityPub/Actor","kind":"class","full_name":"ActivityPub::Actor","name":"Actor"},"ancestors":[{"html_id":"ktistec/ActivityPub/Actor","kind":"class","full_name":"ActivityPub::Actor","name":"Actor"},{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},{"html_id":"ktistec/Ktistec/Model/Linked","kind":"module","full_name":"Ktistec::Model::Linked","name":"Linked"},{"html_id":"ktistec/Ktistec/Model/Serialized","kind":"module","full_name":"Ktistec::Model::Serialized","name":"Serialized"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Deletable","kind":"module","full_name":"Ktistec::Model::Deletable","name":"Deletable"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/ActivityPub/Actor","kind":"class","full_name":"ActivityPub::Actor","name":"Actor"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/ActivityPub/Actor/Organization","path":"ActivityPub/Actor/Organization.html","kind":"class","full_name":"ActivityPub::Actor::Organization","name":"Organization","abstract":false,"superclass":{"html_id":"ktistec/ActivityPub/Actor","kind":"class","full_name":"ActivityPub::Actor","name":"Actor"},"ancestors":[{"html_id":"ktistec/ActivityPub/Actor","kind":"class","full_name":"ActivityPub::Actor","name":"Actor"},{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},{"html_id":"ktistec/Ktistec/Model/Linked","kind":"module","full_name":"Ktistec::Model::Linked","name":"Linked"},{"html_id":"ktistec/Ktistec/Model/Serialized","kind":"module","full_name":"Ktistec::Model::Serialized","name":"Serialized"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Deletable","kind":"module","full_name":"Ktistec::Model::Deletable","name":"Deletable"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/ActivityPub/Actor","kind":"class","full_name":"ActivityPub::Actor","name":"Actor"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/ActivityPub/Actor/Person","path":"ActivityPub/Actor/Person.html","kind":"class","full_name":"ActivityPub::Actor::Person","name":"Person","abstract":false,"superclass":{"html_id":"ktistec/ActivityPub/Actor","kind":"class","full_name":"ActivityPub::Actor","name":"Actor"},"ancestors":[{"html_id":"ktistec/ActivityPub/Actor","kind":"class","full_name":"ActivityPub::Actor","name":"Actor"},{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},{"html_id":"ktistec/Ktistec/Model/Linked","kind":"module","full_name":"Ktistec::Model::Linked","name":"Linked"},{"html_id":"ktistec/Ktistec/Model/Serialized","kind":"module","full_name":"Ktistec::Model::Serialized","name":"Serialized"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Deletable","kind":"module","full_name":"Ktistec::Model::Deletable","name":"Deletable"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/ActivityPub/Actor","kind":"class","full_name":"ActivityPub::Actor","name":"Actor"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/ActivityPub/Actor/Service","path":"ActivityPub/Actor/Service.html","kind":"class","full_name":"ActivityPub::Actor::Service","name":"Service","abstract":false,"superclass":{"html_id":"ktistec/ActivityPub/Actor","kind":"class","full_name":"ActivityPub::Actor","name":"Actor"},"ancestors":[{"html_id":"ktistec/ActivityPub/Actor","kind":"class","full_name":"ActivityPub::Actor","name":"Actor"},{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},{"html_id":"ktistec/Ktistec/Model/Linked","kind":"module","full_name":"Ktistec::Model::Linked","name":"Linked"},{"html_id":"ktistec/Ktistec/Model/Serialized","kind":"module","full_name":"Ktistec::Model::Serialized","name":"Serialized"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Deletable","kind":"module","full_name":"Ktistec::Model::Deletable","name":"Deletable"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/ActivityPub/Actor","kind":"class","full_name":"ActivityPub::Actor","name":"Actor"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]}]},{"html_id":"ktistec/ActivityPub/Collection","path":"ActivityPub/Collection.html","kind":"class","full_name":"ActivityPub::Collection","name":"Collection","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"}],"extended_modules":[{"html_id":"ktistec/Ktistec/Model/ClassMethods","kind":"module","full_name":"Ktistec::Model::ClassMethods","name":"ClassMethods"}],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},"doc":null,"summary":null,"class_methods":[{"id":"find(_iriiri:String?)-class-method","html_id":"find(_iriiri:String?)-class-method","name":"find","doc":null,"summary":null,"abstract":false,"args":[{"name":"iri","doc":null,"default_value":"","external_name":"_iri","restriction":"String | ::Nil"}],"args_string":"(_iri iri : String?)","args_html":"(_iri iri : String?)","location":{"filename":"src/models/activity_pub/collection.cr","line_number":14,"url":null},"def":{"name":"find","args":[{"name":"iri","doc":null,"default_value":"","external_name":"_iri","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"find(iri: iri)"}},{"id":"find?(_iriiri:String?)-class-method","html_id":"find?(_iriiri:String?)-class-method","name":"find?","doc":null,"summary":null,"abstract":false,"args":[{"name":"iri","doc":null,"default_value":"","external_name":"_iri","restriction":"String | ::Nil"}],"args_string":"(_iri iri : String?)","args_html":"(_iri iri : String?)","location":{"filename":"src/models/activity_pub/collection.cr","line_number":18,"url":null},"def":{"name":"find?","args":[{"name":"iri","doc":null,"default_value":"","external_name":"_iri","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"find?(iri: iri)"}},{"id":"from_hash(options,ignore_cached=true)-class-method","html_id":"from_hash(options,ignore_cached=true)-class-method","name":"from_hash","doc":null,"summary":null,"abstract":false,"args":[{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"true","external_name":"ignore_cached","restriction":""}],"args_string":"(options, ignore_cached = <span class=\"n\">true</span>)","args_html":"(options, ignore_cached = <span class=\"n\">true</span>)","location":{"filename":"src/models/activity_pub/collection.cr","line_number":10,"url":null},"def":{"name":"from_hash","args":[{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"true","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(ActivityPub.from_hash(\"\", options, default: self, ignore_cached: ignore_cached)).as(self)"}},{"id":"from_hash?(options,ignore_cached=true)-class-method","html_id":"from_hash?(options,ignore_cached=true)-class-method","name":"from_hash?","doc":null,"summary":null,"abstract":false,"args":[{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"true","external_name":"ignore_cached","restriction":""}],"args_string":"(options, ignore_cached = <span class=\"n\">true</span>)","args_html":"(options, ignore_cached = <span class=\"n\">true</span>)","location":{"filename":"src/models/activity_pub/collection.cr","line_number":10,"url":null},"def":{"name":"from_hash?","args":[{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"true","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  (ActivityPub.from_hash?(\"\", options, default: self, ignore_cached: ignore_cached)).as(self | ::Nil)\nrescue TypeCastError\nend"}},{"id":"from_json_ld(json)-class-method","html_id":"from_json_ld(json)-class-method","name":"from_json_ld","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"args_string":"(json)","args_html":"(json)","location":{"filename":"src/models/activity_pub/collection.cr","line_number":91,"url":null},"def":{"name":"from_json_ld","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new(**map(json))"}},{"id":"from_json_ld(json,**options)-class-method","html_id":"from_json_ld(json,**options)-class-method","name":"from_json_ld","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"args_string":"(json, **options)","args_html":"(json, **options)","location":{"filename":"src/models/activity_pub/collection.cr","line_number":10,"url":null},"def":{"name":"from_json_ld","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(ActivityPub.from_json_ld(json, **options.merge({default: self}))).as(self)"}},{"id":"from_json_ld?(json,**options)-class-method","html_id":"from_json_ld?(json,**options)-class-method","name":"from_json_ld?","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"args_string":"(json, **options)","args_html":"(json, **options)","location":{"filename":"src/models/activity_pub/collection.cr","line_number":10,"url":null},"def":{"name":"from_json_ld?","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  (ActivityPub.from_json_ld?(json, **options.merge({default: self}))).as(self | ::Nil)\nrescue TypeCastError\nend"}},{"id":"map(json,**options)-class-method","html_id":"map(json,**options)-class-method","name":"map","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"args_string":"(json, **options)","args_html":"(json, **options)","location":{"filename":"src/models/activity_pub/collection.cr","line_number":99,"url":null},"def":{"name":"map","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if json.is_a?(String)\n  json = Ktistec::JSON_LD.expand(JSON.parse(json))\nend\n{iri: (json.dig?(\"@id\")).try(&.as_s), items_cached: (json.dig?(\"https://www.w3.org/ns/activitystreams#items\")).try(&.as_a), total_items: (json.dig?(\"https://www.w3.org/ns/activitystreams#totalItems\")).try(&.as_i64), first: (json.dig?(\"https://www.w3.org/ns/activitystreams#first\")).try(&.as_s), last: (json.dig?(\"https://www.w3.org/ns/activitystreams#last\")).try(&.as_s), prev: (json.dig?(\"https://www.w3.org/ns/activitystreams#prev\")).try(&.as_s), next: (json.dig?(\"https://www.w3.org/ns/activitystreams#next\")).try(&.as_s), current: (json.dig?(\"https://www.w3.org/ns/activitystreams#current\")).try(&.as_s)}\n"}}],"constructors":[],"instance_methods":[{"id":"current:String?-instance-method","html_id":"current:String?-instance-method","name":"current","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/collection.cr","line_number":84,"url":null},"def":{"name":"current","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@current"}},{"id":"current=(current:String?)-instance-method","html_id":"current=(current:String?)-instance-method","name":"current=","doc":null,"summary":null,"abstract":false,"args":[{"name":"current","doc":null,"default_value":"","external_name":"current","restriction":"String | ::Nil"}],"args_string":"(current : String?)","args_html":"(current : String?)","location":{"filename":"src/models/activity_pub/collection.cr","line_number":84,"url":null},"def":{"name":"current=","args":[{"name":"current","doc":null,"default_value":"","external_name":"current","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@current = current"}},{"id":"first:String?-instance-method","html_id":"first:String?-instance-method","name":"first","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/collection.cr","line_number":72,"url":null},"def":{"name":"first","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@first"}},{"id":"first=(first:String?)-instance-method","html_id":"first=(first:String?)-instance-method","name":"first=","doc":null,"summary":null,"abstract":false,"args":[{"name":"first","doc":null,"default_value":"","external_name":"first","restriction":"String | ::Nil"}],"args_string":"(first : String?)","args_html":"(first : String?)","location":{"filename":"src/models/activity_pub/collection.cr","line_number":72,"url":null},"def":{"name":"first=","args":[{"name":"first","doc":null,"default_value":"","external_name":"first","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@first = first"}},{"id":"from_json_ld(json)-instance-method","html_id":"from_json_ld(json)-instance-method","name":"from_json_ld","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"args_string":"(json)","args_html":"(json)","location":{"filename":"src/models/activity_pub/collection.cr","line_number":95,"url":null},"def":{"name":"from_json_ld","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self.assign(**self.class.map(json))"}},{"id":"iri:String?-instance-method","html_id":"iri:String?-instance-method","name":"iri","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/collection.cr","line_number":23,"url":null},"def":{"name":"iri","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"if (value = @iri).nil?\n  @iri = (\"\")\nelse\n  value\nend"}},{"id":"iri=(iri:String)-instance-method","html_id":"iri=(iri:String)-instance-method","name":"iri=","doc":null,"summary":null,"abstract":false,"args":[{"name":"iri","doc":null,"default_value":"","external_name":"iri","restriction":"String"}],"args_string":"(iri : String)","args_html":"(iri : String)","location":{"filename":"src/models/activity_pub/collection.cr","line_number":23,"url":null},"def":{"name":"iri=","args":[{"name":"iri","doc":null,"default_value":"","external_name":"iri","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@iri = iri"}},{"id":"items-instance-method","html_id":"items-instance-method","name":"items","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/collection.cr","line_number":42,"url":null},"def":{"name":"items","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if items_json = self.items_json\n  Array(String).from_json(items_json)\nend"}},{"id":"items=(items:Array(String))-instance-method","html_id":"items=(items:Array(String))-instance-method","name":"items=","doc":null,"summary":null,"abstract":false,"args":[{"name":"items","doc":null,"default_value":"","external_name":"items","restriction":"Array(String)"}],"args_string":"(items : Array(String))","args_html":"(items : <a href=\"../Array.html\">Array</a>(String))","location":{"filename":"src/models/activity_pub/collection.cr","line_number":42,"url":null},"def":{"name":"items=","args":[{"name":"items","doc":null,"default_value":"","external_name":"items","restriction":"Array(String)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self.items_json = items.to_json\nitems\n"}},{"id":"items_cached-instance-method","html_id":"items_cached-instance-method","name":"items_cached","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/collection.cr","line_number":64,"url":null},"def":{"name":"items_cached","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@items_cached.not_nil!"}},{"id":"items_cached(&)-instance-method","html_id":"items_cached(&)-instance-method","name":"items_cached","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"(&)","args_html":"(&)","location":{"filename":"src/models/activity_pub/collection.cr","line_number":58,"url":null},"def":{"name":"items_cached","args":[],"double_splat":null,"splat_index":null,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"items_cached.map do |item|\n  yield item\nend"}},{"id":"items_cached=(items_cached:Array(JSON::Any)):Array(JSON::Any)-instance-method","html_id":"items_cached=(items_cached:Array(JSON::Any)):Array(JSON::Any)-instance-method","name":"items_cached=","doc":null,"summary":null,"abstract":false,"args":[{"name":"items_cached","doc":null,"default_value":"","external_name":"items_cached","restriction":"Array(JSON::Any)"}],"args_string":"(items_cached : Array(JSON::Any)) : Array(JSON::Any)","args_html":"(items_cached : <a href=\"../Array.html\">Array</a>(JSON::Any)) : <a href=\"../Array.html\">Array</a>(JSON::Any)","location":{"filename":"src/models/activity_pub/collection.cr","line_number":47,"url":null},"def":{"name":"items_cached=","args":[{"name":"items_cached","doc":null,"default_value":"","external_name":"items_cached","restriction":"Array(JSON::Any)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(JSON::Any)","visibility":"Public","body":"@items_cached = items_cached\nif items_cached.empty?\nelse\n  if items_cached[0].as_s?\n    self.items = items_cached.map(&.as_s)\n  else\n    if items_cached[0].as_h?\n      self.items = items_cached.map do |__arg1|\n        (__arg1.dig(\"@id\")).as_s\n      end\n    end\n  end\nend\nitems_cached\n"}},{"id":"items_json:String?-instance-method","html_id":"items_json:String?-instance-method","name":"items_json","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/collection.cr","line_number":41,"url":null},"def":{"name":"items_json","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@items_json"}},{"id":"items_json=(items_json:String?)-instance-method","html_id":"items_json=(items_json:String?)-instance-method","name":"items_json=","doc":null,"summary":null,"abstract":false,"args":[{"name":"items_json","doc":null,"default_value":"","external_name":"items_json","restriction":"String | ::Nil"}],"args_string":"(items_json : String?)","args_html":"(items_json : String?)","location":{"filename":"src/models/activity_pub/collection.cr","line_number":41,"url":null},"def":{"name":"items_json=","args":[{"name":"items_json","doc":null,"default_value":"","external_name":"items_json","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@items_json = items_json"}},{"id":"last:String?-instance-method","html_id":"last:String?-instance-method","name":"last","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/collection.cr","line_number":75,"url":null},"def":{"name":"last","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@last"}},{"id":"last=(last:String?)-instance-method","html_id":"last=(last:String?)-instance-method","name":"last=","doc":null,"summary":null,"abstract":false,"args":[{"name":"last","doc":null,"default_value":"","external_name":"last","restriction":"String | ::Nil"}],"args_string":"(last : String?)","args_html":"(last : String?)","location":{"filename":"src/models/activity_pub/collection.cr","line_number":75,"url":null},"def":{"name":"last=","args":[{"name":"last","doc":null,"default_value":"","external_name":"last","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@last = last"}},{"id":"local-instance-method","html_id":"local-instance-method","name":"local","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/collection.cr","line_number":36,"url":null},"def":{"name":"local","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"iri.starts_with?(Ktistec.host)"}},{"id":"next:String?-instance-method","html_id":"next:String?-instance-method","name":"next","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/collection.cr","line_number":81,"url":null},"def":{"name":"next","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@next"}},{"id":"next=(next__arg0:String?)-instance-method","html_id":"next=(next__arg0:String?)-instance-method","name":"next=","doc":null,"summary":null,"abstract":false,"args":[{"name":"__arg0","doc":null,"default_value":"","external_name":"next","restriction":"String | ::Nil"}],"args_string":"(next __arg0 : String?)","args_html":"(next __arg0 : String?)","location":{"filename":"src/models/activity_pub/collection.cr","line_number":81,"url":null},"def":{"name":"next=","args":[{"name":"__arg0","doc":null,"default_value":"","external_name":"next","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@next = __arg0"}},{"id":"prev:String?-instance-method","html_id":"prev:String?-instance-method","name":"prev","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/collection.cr","line_number":78,"url":null},"def":{"name":"prev","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@prev"}},{"id":"prev=(prev:String?)-instance-method","html_id":"prev=(prev:String?)-instance-method","name":"prev=","doc":null,"summary":null,"abstract":false,"args":[{"name":"prev","doc":null,"default_value":"","external_name":"prev","restriction":"String | ::Nil"}],"args_string":"(prev : String?)","args_html":"(prev : String?)","location":{"filename":"src/models/activity_pub/collection.cr","line_number":78,"url":null},"def":{"name":"prev=","args":[{"name":"prev","doc":null,"default_value":"","external_name":"prev","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@prev = prev"}},{"id":"to_json_ld(recursive=false)-instance-method","html_id":"to_json_ld(recursive=false)-instance-method","name":"to_json_ld","doc":null,"summary":null,"abstract":false,"args":[{"name":"recursive","doc":null,"default_value":"false","external_name":"recursive","restriction":""}],"args_string":"(recursive = <span class=\"n\">false</span>)","args_html":"(recursive = <span class=\"n\">false</span>)","location":{"filename":"src/models/activity_pub/collection.cr","line_number":86,"url":null},"def":{"name":"to_json_ld","args":[{"name":"recursive","doc":null,"default_value":"false","external_name":"recursive","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"collection = self\nrender(\"src/views/collections/collection.json.ecr\")\n"}},{"id":"total_items:Int64?-instance-method","html_id":"total_items:Int64?-instance-method","name":"total_items","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Int64?","args_html":" : Int64?","location":{"filename":"src/models/activity_pub/collection.cr","line_number":69,"url":null},"def":{"name":"total_items","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Int64 | ::Nil","visibility":"Public","body":"@total_items"}},{"id":"total_items=(total_items:Int64?)-instance-method","html_id":"total_items=(total_items:Int64?)-instance-method","name":"total_items=","doc":null,"summary":null,"abstract":false,"args":[{"name":"total_items","doc":null,"default_value":"","external_name":"total_items","restriction":"Int64 | ::Nil"}],"args_string":"(total_items : Int64?)","args_html":"(total_items : Int64?)","location":{"filename":"src/models/activity_pub/collection.cr","line_number":69,"url":null},"def":{"name":"total_items=","args":[{"name":"total_items","doc":null,"default_value":"","external_name":"total_items","restriction":"Int64 | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@total_items = total_items"}}],"macros":[],"types":[]},{"html_id":"ktistec/ActivityPub/Object","path":"ActivityPub/Object.html","kind":"class","full_name":"ActivityPub::Object","name":"Object","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},{"html_id":"ktistec/Ktistec/Model/Linked","kind":"module","full_name":"Ktistec::Model::Linked","name":"Linked"},{"html_id":"ktistec/Ktistec/Model/Serialized","kind":"module","full_name":"Ktistec::Model::Serialized","name":"Serialized"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Deletable","kind":"module","full_name":"Ktistec::Model::Deletable","name":"Deletable"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/Deletable","kind":"module","full_name":"Ktistec::Model::Deletable","name":"Deletable"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model/Linked","kind":"module","full_name":"Ktistec::Model::Linked","name":"Linked"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Serialized","kind":"module","full_name":"Ktistec::Model::Serialized","name":"Serialized"}],"extended_modules":[{"html_id":"ktistec/Ktistec/Model/ClassMethods","kind":"module","full_name":"Ktistec::Model::ClassMethods","name":"ClassMethods"},{"html_id":"ktistec/Ktistec/Model/Serialized/ClassMethods","kind":"module","full_name":"Ktistec::Model::Serialized::ClassMethods","name":"ClassMethods"},{"html_id":"ktistec/Ktistec/Open","kind":"module","full_name":"Ktistec::Open","name":"Open"}],"subclasses":[{"html_id":"ktistec/ActivityPub/Object/Article","kind":"class","full_name":"ActivityPub::Object::Article","name":"Article"},{"html_id":"ktistec/ActivityPub/Object/Note","kind":"class","full_name":"ActivityPub::Object::Note","name":"Note"},{"html_id":"ktistec/ActivityPub/Object/Question","kind":"class","full_name":"ActivityPub::Object::Question","name":"Question"},{"html_id":"ktistec/ActivityPub/Object/Tombstone","kind":"class","full_name":"ActivityPub::Object::Tombstone","name":"Tombstone"}],"including_types":[],"namespace":{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},"doc":null,"summary":null,"class_methods":[{"id":"federated_posts(page=1,size=10)-class-method","html_id":"federated_posts(page=1,size=10)-class-method","name":"federated_posts","doc":null,"summary":null,"abstract":false,"args":[{"name":"page","doc":null,"default_value":"1","external_name":"page","restriction":""},{"name":"size","doc":null,"default_value":"10","external_name":"size","restriction":""}],"args_string":"(page = <span class=\"n\">1</span>, size = <span class=\"n\">10</span>)","args_html":"(page = <span class=\"n\">1</span>, size = <span class=\"n\">10</span>)","location":{"filename":"src/models/activity_pub/object.cr","line_number":133,"url":null},"def":{"name":"federated_posts","args":[{"name":"page","doc":null,"default_value":"1","external_name":"page","restriction":""},{"name":"size","doc":null,"default_value":"10","external_name":"size","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"query = \"   SELECT #{Object.columns(prefix: \"o\")}\\n     FROM objects AS o\\n    WHERE o.visible = 1\\n      AND o.deleted_at is NULL\\n      AND o.id NOT IN (\\n         SELECT o.id\\n           FROM objects AS o\\n          WHERE o.visible = 1\\n            AND o.deleted_at is NULL\\n       ORDER BY o.published DESC\\n          LIMIT ?\\n      )\\n ORDER BY o.published DESC\\n    LIMIT ?\"\nObject.query_and_paginate(query, page: page, size: size)\n"}},{"id":"find(_iriiri:String?)-class-method","html_id":"find(_iriiri:String?)-class-method","name":"find","doc":null,"summary":null,"abstract":false,"args":[{"name":"iri","doc":null,"default_value":"","external_name":"_iri","restriction":"String | ::Nil"}],"args_string":"(_iri iri : String?)","args_html":"(_iri iri : String?)","location":null,"def":{"name":"find","args":[{"name":"iri","doc":null,"default_value":"","external_name":"_iri","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"find(iri: iri)"}},{"id":"find?(_iriiri:String?)-class-method","html_id":"find?(_iriiri:String?)-class-method","name":"find?","doc":null,"summary":null,"abstract":false,"args":[{"name":"iri","doc":null,"default_value":"","external_name":"_iri","restriction":"String | ::Nil"}],"args_string":"(_iri iri : String?)","args_html":"(_iri iri : String?)","location":null,"def":{"name":"find?","args":[{"name":"iri","doc":null,"default_value":"","external_name":"_iri","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"find?(iri: iri)"}},{"id":"from_hash(options,ignore_cached=true)-class-method","html_id":"from_hash(options,ignore_cached=true)-class-method","name":"from_hash","doc":null,"summary":null,"abstract":false,"args":[{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"true","external_name":"ignore_cached","restriction":""}],"args_string":"(options, ignore_cached = <span class=\"n\">true</span>)","args_html":"(options, ignore_cached = <span class=\"n\">true</span>)","location":{"filename":"src/models/activity_pub/object.cr","line_number":13,"url":null},"def":{"name":"from_hash","args":[{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"true","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(ActivityPub.from_hash(\"\", options, default: self, ignore_cached: ignore_cached)).as(self)"}},{"id":"from_hash?(options,ignore_cached=true)-class-method","html_id":"from_hash?(options,ignore_cached=true)-class-method","name":"from_hash?","doc":null,"summary":null,"abstract":false,"args":[{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"true","external_name":"ignore_cached","restriction":""}],"args_string":"(options, ignore_cached = <span class=\"n\">true</span>)","args_html":"(options, ignore_cached = <span class=\"n\">true</span>)","location":{"filename":"src/models/activity_pub/object.cr","line_number":13,"url":null},"def":{"name":"from_hash?","args":[{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"true","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  (ActivityPub.from_hash?(\"\", options, default: self, ignore_cached: ignore_cached)).as(self | ::Nil)\nrescue TypeCastError\nend"}},{"id":"from_json_ld(json,**options)-class-method","html_id":"from_json_ld(json,**options)-class-method","name":"from_json_ld","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"args_string":"(json, **options)","args_html":"(json, **options)","location":{"filename":"src/models/activity_pub/object.cr","line_number":13,"url":null},"def":{"name":"from_json_ld","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(ActivityPub.from_json_ld(json, **options.merge({default: self}))).as(self)"}},{"id":"from_json_ld?(json,**options)-class-method","html_id":"from_json_ld?(json,**options)-class-method","name":"from_json_ld?","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"args_string":"(json, **options)","args_html":"(json, **options)","location":{"filename":"src/models/activity_pub/object.cr","line_number":13,"url":null},"def":{"name":"from_json_ld?","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  (ActivityPub.from_json_ld?(json, **options.merge({default: self}))).as(self | ::Nil)\nrescue TypeCastError\nend"}},{"id":"map(json,**options)-class-method","html_id":"map(json,**options)-class-method","name":"map","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"args_string":"(json, **options)","args_html":"(json, **options)","location":{"filename":"src/models/activity_pub/object.cr","line_number":274,"url":null},"def":{"name":"map","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if json.is_a?(String | IO)\n  json = Ktistec::JSON_LD.expand(JSON.parse(json))\nend\n{iri: (json.dig?(\"@id\")).try(&.as_s), _type: (json.dig?(\"@type\")).try do |__arg4|\n  (__arg4.as_s.split(\"#\")).last\nend, published: (p = dig?(json, \"https://www.w3.org/ns/activitystreams#published\")) ? Time.parse_rfc3339(p) : nil, attributed_to_iri: dig_id?(json, \"https://www.w3.org/ns/activitystreams#attributedTo\"), in_reply_to_iri: dig_id?(json, \"https://www.w3.org/ns/activitystreams#inReplyTo\"), replies: dig_id?(json, \"https://www.w3.org/ns/activitystreams#replies\"), to: to = dig_ids?(json, \"https://www.w3.org/ns/activitystreams#to\"), cc: cc = dig_ids?(json, \"https://www.w3.org/ns/activitystreams#cc\"), summary: dig?(json, \"https://www.w3.org/ns/activitystreams#summary\", \"und\"), content: dig?(json, \"https://www.w3.org/ns/activitystreams#content\", \"und\"), media_type: dig?(json, \"https://www.w3.org/ns/activitystreams#mediaType\"), attachments: dig_values?(json, \"https://www.w3.org/ns/activitystreams#attachment\") do |attachment|\n  url = (attachment.dig?(\"https://www.w3.org/ns/activitystreams#url\")).try(&.as_s)\n  media_type = (attachment.dig?(\"https://www.w3.org/ns/activitystreams#mediaType\")).try(&.as_s)\n  if url && media_type\n    Attachment.new(url, media_type)\n  end\nend, urls: dig_ids?(json, \"https://www.w3.org/ns/activitystreams#url\"), visible: [to, cc].compact.flatten.includes?(\"https://www.w3.org/ns/activitystreams#Public\")}\n"}}],"constructors":[{"id":"dereference?(iri:String?,ignore_cached=false):self?-class-method","html_id":"dereference?(iri:String?,ignore_cached=false):self?-class-method","name":"dereference?","doc":null,"summary":null,"abstract":false,"args":[{"name":"iri","doc":null,"default_value":"","external_name":"iri","restriction":"String | ::Nil"},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"args_string":"(iri : String?, ignore_cached = <span class=\"n\">false</span>) : <span class=\"k\">self</span>?","args_html":"(iri : String?, ignore_cached = <span class=\"n\">false</span>) : <span class=\"k\">self</span>?","location":null,"def":{"name":"dereference?","args":[{"name":"iri","doc":null,"default_value":"","external_name":"iri","restriction":"String | ::Nil"},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"self | ::Nil","visibility":"Public","body":"if iri\n  if (instance = self.find?(iri)) && (!ignore_cached)\n  else\n    if iri.starts_with?(Ktistec.host)\n    else\n      self.open?(iri) do |response|\n        instance = self.from_json_ld?(response.body)\n      end\n    end\n  end\nend\ninstance\n"}}],"instance_methods":[{"id":"_belongs_to_attributed_to:ActivityPub::Actor?-instance-method","html_id":"_belongs_to_attributed_to:ActivityPub::Actor?-instance-method","name":"_belongs_to_attributed_to","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/activity_pub/object.cr","line_number":25,"url":null},"def":{"name":"_belongs_to_attributed_to","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@attributed_to"}},{"id":"_belongs_to_hashtags:Enumerable(Tag::Hashtag)?-instance-method","html_id":"_belongs_to_hashtags:Enumerable(Tag::Hashtag)?-instance-method","name":"_belongs_to_hashtags","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Enumerable(Tag::Hashtag)?","args_html":" : Enumerable(<a href=\"../Tag/Hashtag.html\">Tag::Hashtag</a>)?","location":{"filename":"src/models/activity_pub/object.cr","line_number":94,"url":null},"def":{"name":"_belongs_to_hashtags","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Enumerable(Tag::Hashtag) | ::Nil","visibility":"Public","body":"@hashtags"}},{"id":"_belongs_to_in_reply_to:ActivityPub::Object?-instance-method","html_id":"_belongs_to_in_reply_to:ActivityPub::Object?-instance-method","name":"_belongs_to_in_reply_to","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Object?","args_html":" : <a href=\"../ActivityPub/Object.html\">ActivityPub::Object</a>?","location":{"filename":"src/models/activity_pub/object.cr","line_number":29,"url":null},"def":{"name":"_belongs_to_in_reply_to","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object | ::Nil","visibility":"Public","body":"@in_reply_to"}},{"id":"_belongs_to_mentions:Enumerable(Tag::Mention)?-instance-method","html_id":"_belongs_to_mentions:Enumerable(Tag::Mention)?-instance-method","name":"_belongs_to_mentions","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Enumerable(Tag::Mention)?","args_html":" : Enumerable(<a href=\"../Tag/Mention.html\">Tag::Mention</a>)?","location":{"filename":"src/models/activity_pub/object.cr","line_number":95,"url":null},"def":{"name":"_belongs_to_mentions","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Enumerable(Tag::Mention) | ::Nil","visibility":"Public","body":"@mentions"}},{"id":"ancestors-instance-method","html_id":"ancestors-instance-method","name":"ancestors","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/object.cr","line_number":242,"url":null},"def":{"name":"ancestors","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"query = \"  WITH RECURSIVE\\n   ancestors_of(iri, depth) AS (\\n        VALUES(?, 0)\\n         UNION\\n        SELECT o.in_reply_to_iri AS iri, p.depth + 1 AS depth\\n          FROM objects AS o, ancestors_of AS p\\n         WHERE o.iri = p.iri AND o.in_reply_to_iri IS NOT NULL\\n      ORDER BY depth DESC\\n   )\\nSELECT #{Object.columns(prefix: \"o\")}, a.depth\\n  FROM objects AS o, ancestors_of AS a\\n WHERE o.iri IN (a.iri)\\n   AND o.deleted_at IS NULL\"\nObject.query_all(query, self.iri, additional_columns: {depth: Int32})\n"}},{"id":"announces_count:Int64-instance-method","html_id":"announces_count:Int64-instance-method","name":"announces_count","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Int64","args_html":" : Int64","location":{"filename":"src/models/activity_pub/object.cr","line_number":154,"url":null},"def":{"name":"announces_count","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Int64","visibility":"Public","body":"@announces_count"}},{"id":"announces_count=(announces_count:Int64)-instance-method","html_id":"announces_count=(announces_count:Int64)-instance-method","name":"announces_count=","doc":null,"summary":null,"abstract":false,"args":[{"name":"announces_count","doc":null,"default_value":"","external_name":"announces_count","restriction":"Int64"}],"args_string":"(announces_count : Int64)","args_html":"(announces_count : Int64)","location":{"filename":"src/models/activity_pub/object.cr","line_number":154,"url":null},"def":{"name":"announces_count=","args":[{"name":"announces_count","doc":null,"default_value":"","external_name":"announces_count","restriction":"Int64"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@announces_count = announces_count"}},{"id":"attachments:Array(Attachment)?-instance-method","html_id":"attachments:Array(Attachment)?-instance-method","name":"attachments","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(Attachment)?","args_html":" : <a href=\"../Array.html\">Array</a>(<a href=\"../ActivityPub/Object/Attachment.html\">Attachment</a>)?","location":{"filename":"src/models/activity_pub/object.cr","line_number":89,"url":null},"def":{"name":"attachments","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(Attachment) | ::Nil","visibility":"Public","body":"@attachments"}},{"id":"attachments=(attachments:Array(Attachment)?)-instance-method","html_id":"attachments=(attachments:Array(Attachment)?)-instance-method","name":"attachments=","doc":null,"summary":null,"abstract":false,"args":[{"name":"attachments","doc":null,"default_value":"","external_name":"attachments","restriction":"Array(Attachment) | ::Nil"}],"args_string":"(attachments : Array(Attachment)?)","args_html":"(attachments : <a href=\"../Array.html\">Array</a>(<a href=\"../ActivityPub/Object/Attachment.html\">Attachment</a>)?)","location":{"filename":"src/models/activity_pub/object.cr","line_number":89,"url":null},"def":{"name":"attachments=","args":[{"name":"attachments","doc":null,"default_value":"","external_name":"attachments","restriction":"Array(Attachment) | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@attachments = attachments"}},{"id":"attributed_to:ActivityPub::Actor-instance-method","html_id":"attributed_to:ActivityPub::Actor-instance-method","name":"attributed_to","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor","args_html":" : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/activity_pub/object.cr","line_number":25,"url":null},"def":{"name":"attributed_to","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@attributed_to || (@attributed_to = (ActivityPub::Actor.find?(iri: self.attributed_to_iri) || (raise(NotFound.new(\"#{self.class} attributed_to iri=#{self.attributed_to_iri}: not found\")))))"}},{"id":"attributed_to=(attributed_to:ActivityPub::Actor):ActivityPub::Actor-instance-method","html_id":"attributed_to=(attributed_to:ActivityPub::Actor):ActivityPub::Actor-instance-method","name":"attributed_to=","doc":null,"summary":null,"abstract":false,"args":[{"name":"attributed_to","doc":null,"default_value":"","external_name":"attributed_to","restriction":"ActivityPub::Actor"}],"args_string":"(attributed_to : ActivityPub::Actor) : ActivityPub::Actor","args_html":"(attributed_to : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>) : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/activity_pub/object.cr","line_number":25,"url":null},"def":{"name":"attributed_to=","args":[{"name":"attributed_to","doc":null,"default_value":"","external_name":"attributed_to","restriction":"ActivityPub::Actor"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@attributed_to = attributed_to\nself.attributed_to_iri = attributed_to.iri.as(typeof(self.attributed_to_iri))\nattributed_to\n"}},{"id":"attributed_to?:ActivityPub::Actor?-instance-method","html_id":"attributed_to?:ActivityPub::Actor?-instance-method","name":"attributed_to?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/activity_pub/object.cr","line_number":25,"url":null},"def":{"name":"attributed_to?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@attributed_to || (@attributed_to = (ActivityPub::Actor.find?(iri: self.attributed_to_iri) || nil))"}},{"id":"attributed_to?(*,dereference=false,ignore_cached=false)-instance-method","html_id":"attributed_to?(*,dereference=false,ignore_cached=false)-instance-method","name":"attributed_to?","doc":null,"summary":null,"abstract":false,"args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"args_string":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","args_html":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","location":null,"def":{"name":"attributed_to?","args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"attributed_to = self.attributed_to?\nif (attributed_to && (!ignore_cached)) || (attributed_to && attributed_to.changed?)\nelse\n  if (attributed_to_iri = self.attributed_to_iri) && dereference\n    if attributed_to_iri.starts_with?(Ktistec.host)\n    else\n      ActivityPub::Actor.open?(attributed_to_iri) do |response|\n        if (        attributed_to = ActivityPub::Actor.from_json_ld?(response.body))\n          return self.attributed_to = attributed_to\n        end\n      end\n    end\n  end\nend\nattributed_to\n"}},{"id":"attributed_to_iri:String?-instance-method","html_id":"attributed_to_iri:String?-instance-method","name":"attributed_to_iri","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/object.cr","line_number":24,"url":null},"def":{"name":"attributed_to_iri","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@attributed_to_iri"}},{"id":"attributed_to_iri=(attributed_to_iri:String?)-instance-method","html_id":"attributed_to_iri=(attributed_to_iri:String?)-instance-method","name":"attributed_to_iri=","doc":null,"summary":null,"abstract":false,"args":[{"name":"attributed_to_iri","doc":null,"default_value":"","external_name":"attributed_to_iri","restriction":"String | ::Nil"}],"args_string":"(attributed_to_iri : String?)","args_html":"(attributed_to_iri : String?)","location":{"filename":"src/models/activity_pub/object.cr","line_number":24,"url":null},"def":{"name":"attributed_to_iri=","args":[{"name":"attributed_to_iri","doc":null,"default_value":"","external_name":"attributed_to_iri","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@attributed_to_iri = attributed_to_iri"}},{"id":"before_validate-instance-method","html_id":"before_validate-instance-method","name":"before_validate","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/object.cr","line_number":97,"url":null},"def":{"name":"before_validate","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if changed?(:source)\n  if (source = self.source) && local?\n    media_type = (source.media_type.split(\";\")).map(&.strip).first?\n    if media_type == \"text/html\"\n      clear!(:source)\n      enhancements = Ktistec::HTML.enhance(source.content)\n      self.content = enhancements.content\n      self.media_type = media_type\n      self.attachments = enhancements.attachments\n      self.hashtags = enhancements.hashtags\n      self.mentions = enhancements.mentions\n      old = self.to\n      new = enhancements.mentions.map(&.href).compact\n      if draft? || old.nil?\n        self.to = new\n      else\n        self.to = old | new\n      end\n    end\n  end\nend"}},{"id":"cc:Array(String)?-instance-method","html_id":"cc:Array(String)?-instance-method","name":"cc","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(String)?","args_html":" : <a href=\"../Array.html\">Array</a>(String)?","location":{"filename":"src/models/activity_pub/object.cr","line_number":38,"url":null},"def":{"name":"cc","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(String) | ::Nil","visibility":"Public","body":"@cc"}},{"id":"cc=(cc:Array(String)?)-instance-method","html_id":"cc=(cc:Array(String)?)-instance-method","name":"cc=","doc":null,"summary":null,"abstract":false,"args":[{"name":"cc","doc":null,"default_value":"","external_name":"cc","restriction":"Array(String) | ::Nil"}],"args_string":"(cc : Array(String)?)","args_html":"(cc : <a href=\"../Array.html\">Array</a>(String)?)","location":{"filename":"src/models/activity_pub/object.cr","line_number":38,"url":null},"def":{"name":"cc=","args":[{"name":"cc","doc":null,"default_value":"","external_name":"cc","restriction":"Array(String) | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@cc = cc"}},{"id":"content:String?-instance-method","html_id":"content:String?-instance-method","name":"content","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/object.cr","line_number":44,"url":null},"def":{"name":"content","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@content"}},{"id":"content=(content:String?)-instance-method","html_id":"content=(content:String?)-instance-method","name":"content=","doc":null,"summary":null,"abstract":false,"args":[{"name":"content","doc":null,"default_value":"","external_name":"content","restriction":"String | ::Nil"}],"args_string":"(content : String?)","args_html":"(content : String?)","location":{"filename":"src/models/activity_pub/object.cr","line_number":44,"url":null},"def":{"name":"content=","args":[{"name":"content","doc":null,"default_value":"","external_name":"content","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@content = content"}},{"id":"depth:Int32-instance-method","html_id":"depth:Int32-instance-method","name":"depth","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Int32","args_html":" : Int32","location":{"filename":"src/models/activity_pub/object.cr","line_number":202,"url":null},"def":{"name":"depth","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Int32","visibility":"Public","body":"@depth"}},{"id":"depth=(depth:Int32)-instance-method","html_id":"depth=(depth:Int32)-instance-method","name":"depth=","doc":null,"summary":null,"abstract":false,"args":[{"name":"depth","doc":null,"default_value":"","external_name":"depth","restriction":"Int32"}],"args_string":"(depth : Int32)","args_html":"(depth : Int32)","location":{"filename":"src/models/activity_pub/object.cr","line_number":202,"url":null},"def":{"name":"depth=","args":[{"name":"depth","doc":null,"default_value":"","external_name":"depth","restriction":"Int32"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@depth = depth"}},{"id":"display_date-instance-method","html_id":"display_date-instance-method","name":"display_date","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/object.cr","line_number":129,"url":null},"def":{"name":"display_date","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"((published || created_at).to_local.to_s(\"%l:%M%P  %b %-d, %Y\")).lstrip(' ')"}},{"id":"display_link-instance-method","html_id":"display_link-instance-method","name":"display_link","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/object.cr","line_number":125,"url":null},"def":{"name":"display_link","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"urls.try(&.first?) || iri"}},{"id":"draft?-instance-method","html_id":"draft?-instance-method","name":"draft?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/object.cr","line_number":121,"url":null},"def":{"name":"draft?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"published.nil? && local?"}},{"id":"from_json_ld(json)-instance-method","html_id":"from_json_ld(json)-instance-method","name":"from_json_ld","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"args_string":"(json)","args_html":"(json)","location":{"filename":"src/models/activity_pub/object.cr","line_number":270,"url":null},"def":{"name":"from_json_ld","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self.assign(**self.class.map(json))"}},{"id":"hashtags:Enumerable(Tag::Hashtag)-instance-method","html_id":"hashtags:Enumerable(Tag::Hashtag)-instance-method","name":"hashtags","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Enumerable(Tag::Hashtag)","args_html":" : Enumerable(<a href=\"../Tag/Hashtag.html\">Tag::Hashtag</a>)","location":{"filename":"src/models/activity_pub/object.cr","line_number":94,"url":null},"def":{"name":"hashtags","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Enumerable(Tag::Hashtag)","visibility":"Public","body":"hashtags = @hashtags\nif hashtags.nil? || hashtags.empty?\n  @hashtags = Tag::Hashtag.where(subject_iri: self.iri)\nend\n@hashtags.not_nil!\n"}},{"id":"hashtags=(hashtags:Enumerable(Tag::Hashtag)):Enumerable(Tag::Hashtag)-instance-method","html_id":"hashtags=(hashtags:Enumerable(Tag::Hashtag)):Enumerable(Tag::Hashtag)-instance-method","name":"hashtags=","doc":null,"summary":null,"abstract":false,"args":[{"name":"hashtags","doc":null,"default_value":"","external_name":"hashtags","restriction":"Enumerable(Tag::Hashtag)"}],"args_string":"(hashtags : Enumerable(Tag::Hashtag)) : Enumerable(Tag::Hashtag)","args_html":"(hashtags : Enumerable(<a href=\"../Tag/Hashtag.html\">Tag::Hashtag</a>)) : Enumerable(<a href=\"../Tag/Hashtag.html\">Tag::Hashtag</a>)","location":{"filename":"src/models/activity_pub/object.cr","line_number":94,"url":null},"def":{"name":"hashtags=","args":[{"name":"hashtags","doc":null,"default_value":"","external_name":"hashtags","restriction":"Enumerable(Tag::Hashtag)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Enumerable(Tag::Hashtag)","visibility":"Public","body":"self.hashtags.each do |other|\n  if other.in?(hashtags)\n  else\n    other.destroy\n  end\nend\n@hashtags = hashtags.to_a\nhashtags.each do |n|\n  n.subject_iri = self.iri.as(typeof(n.subject_iri))\n  n.subject = self\nend\nhashtags\n"}},{"id":"hashtags?(*,dereference=false,ignore_cached=false)-instance-method","html_id":"hashtags?(*,dereference=false,ignore_cached=false)-instance-method","name":"hashtags?","doc":null,"summary":null,"abstract":false,"args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"args_string":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","args_html":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","location":null,"def":{"name":"hashtags?","args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"hashtags = self.hashtags?\nif (hashtags && (!ignore_cached)) || (hashtags && hashtags.changed?)\nelse\n  if (hashtags_iri = self.hashtags_iri) && dereference\n    if hashtags_iri.starts_with?(Ktistec.host)\n    else\n      Enumerable(Tag::Hashtag).open?(hashtags_iri) do |response|\n        if (        hashtags = Enumerable(Tag::Hashtag).from_json_ld?(response.body))\n          return self.hashtags = hashtags\n        end\n      end\n    end\n  end\nend\nhashtags\n"}},{"id":"in_reply_to:ActivityPub::Object-instance-method","html_id":"in_reply_to:ActivityPub::Object-instance-method","name":"in_reply_to","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Object","args_html":" : <a href=\"../ActivityPub/Object.html\">ActivityPub::Object</a>","location":{"filename":"src/models/activity_pub/object.cr","line_number":29,"url":null},"def":{"name":"in_reply_to","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object","visibility":"Public","body":"@in_reply_to || (@in_reply_to = (ActivityPub::Object.find?(iri: self.in_reply_to_iri) || (raise(NotFound.new(\"#{self.class} in_reply_to iri=#{self.in_reply_to_iri}: not found\")))))"}},{"id":"in_reply_to=(in_reply_to:ActivityPub::Object):ActivityPub::Object-instance-method","html_id":"in_reply_to=(in_reply_to:ActivityPub::Object):ActivityPub::Object-instance-method","name":"in_reply_to=","doc":null,"summary":null,"abstract":false,"args":[{"name":"in_reply_to","doc":null,"default_value":"","external_name":"in_reply_to","restriction":"ActivityPub::Object"}],"args_string":"(in_reply_to : ActivityPub::Object) : ActivityPub::Object","args_html":"(in_reply_to : <a href=\"../ActivityPub/Object.html\">ActivityPub::Object</a>) : <a href=\"../ActivityPub/Object.html\">ActivityPub::Object</a>","location":{"filename":"src/models/activity_pub/object.cr","line_number":29,"url":null},"def":{"name":"in_reply_to=","args":[{"name":"in_reply_to","doc":null,"default_value":"","external_name":"in_reply_to","restriction":"ActivityPub::Object"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object","visibility":"Public","body":"@in_reply_to = in_reply_to\nself.in_reply_to_iri = in_reply_to.iri.as(typeof(self.in_reply_to_iri))\nin_reply_to\n"}},{"id":"in_reply_to?:ActivityPub::Object?-instance-method","html_id":"in_reply_to?:ActivityPub::Object?-instance-method","name":"in_reply_to?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Object?","args_html":" : <a href=\"../ActivityPub/Object.html\">ActivityPub::Object</a>?","location":{"filename":"src/models/activity_pub/object.cr","line_number":29,"url":null},"def":{"name":"in_reply_to?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object | ::Nil","visibility":"Public","body":"@in_reply_to || (@in_reply_to = (ActivityPub::Object.find?(iri: self.in_reply_to_iri) || nil))"}},{"id":"in_reply_to?(*,dereference=false,ignore_cached=false)-instance-method","html_id":"in_reply_to?(*,dereference=false,ignore_cached=false)-instance-method","name":"in_reply_to?","doc":null,"summary":null,"abstract":false,"args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"args_string":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","args_html":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","location":null,"def":{"name":"in_reply_to?","args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"in_reply_to = self.in_reply_to?\nif (in_reply_to && (!ignore_cached)) || (in_reply_to && in_reply_to.changed?)\nelse\n  if (in_reply_to_iri = self.in_reply_to_iri) && dereference\n    if in_reply_to_iri.starts_with?(Ktistec.host)\n    else\n      ActivityPub::Object.open?(in_reply_to_iri) do |response|\n        if (        in_reply_to = ActivityPub::Object.from_json_ld?(response.body))\n          return self.in_reply_to = in_reply_to\n        end\n      end\n    end\n  end\nend\nin_reply_to\n"}},{"id":"in_reply_to_iri:String?-instance-method","html_id":"in_reply_to_iri:String?-instance-method","name":"in_reply_to_iri","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/object.cr","line_number":28,"url":null},"def":{"name":"in_reply_to_iri","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@in_reply_to_iri"}},{"id":"in_reply_to_iri=(in_reply_to_iri:String?)-instance-method","html_id":"in_reply_to_iri=(in_reply_to_iri:String?)-instance-method","name":"in_reply_to_iri=","doc":null,"summary":null,"abstract":false,"args":[{"name":"in_reply_to_iri","doc":null,"default_value":"","external_name":"in_reply_to_iri","restriction":"String | ::Nil"}],"args_string":"(in_reply_to_iri : String?)","args_html":"(in_reply_to_iri : String?)","location":{"filename":"src/models/activity_pub/object.cr","line_number":28,"url":null},"def":{"name":"in_reply_to_iri=","args":[{"name":"in_reply_to_iri","doc":null,"default_value":"","external_name":"in_reply_to_iri","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@in_reply_to_iri = in_reply_to_iri"}},{"id":"iri:String?-instance-method","html_id":"iri:String?-instance-method","name":"iri","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":null,"def":{"name":"iri","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"if (value = @iri).nil?\n  @iri = (\"\")\nelse\n  value\nend"}},{"id":"iri=(iri:String)-instance-method","html_id":"iri=(iri:String)-instance-method","name":"iri=","doc":null,"summary":null,"abstract":false,"args":[{"name":"iri","doc":null,"default_value":"","external_name":"iri","restriction":"String"}],"args_string":"(iri : String)","args_html":"(iri : String)","location":null,"def":{"name":"iri=","args":[{"name":"iri","doc":null,"default_value":"","external_name":"iri","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@iri = iri"}},{"id":"likes_count:Int64-instance-method","html_id":"likes_count:Int64-instance-method","name":"likes_count","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Int64","args_html":" : Int64","location":{"filename":"src/models/activity_pub/object.cr","line_number":157,"url":null},"def":{"name":"likes_count","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Int64","visibility":"Public","body":"@likes_count"}},{"id":"likes_count=(likes_count:Int64)-instance-method","html_id":"likes_count=(likes_count:Int64)-instance-method","name":"likes_count=","doc":null,"summary":null,"abstract":false,"args":[{"name":"likes_count","doc":null,"default_value":"","external_name":"likes_count","restriction":"Int64"}],"args_string":"(likes_count : Int64)","args_html":"(likes_count : Int64)","location":{"filename":"src/models/activity_pub/object.cr","line_number":157,"url":null},"def":{"name":"likes_count=","args":[{"name":"likes_count","doc":null,"default_value":"","external_name":"likes_count","restriction":"Int64"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@likes_count = likes_count"}},{"id":"make_delete_activity-instance-method","html_id":"make_delete_activity-instance-method","name":"make_delete_activity","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/object.cr","line_number":299,"url":null},"def":{"name":"make_delete_activity","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"ActivityPub::Activity::Delete.new(iri: \"#{Ktistec.host}/activities/#{Ktistec::Util.id}\", actor: attributed_to, object: self, to: to, cc: cc)"}},{"id":"media_type:String?-instance-method","html_id":"media_type:String?-instance-method","name":"media_type","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/object.cr","line_number":47,"url":null},"def":{"name":"media_type","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@media_type"}},{"id":"media_type=(media_type:String?)-instance-method","html_id":"media_type=(media_type:String?)-instance-method","name":"media_type=","doc":null,"summary":null,"abstract":false,"args":[{"name":"media_type","doc":null,"default_value":"","external_name":"media_type","restriction":"String | ::Nil"}],"args_string":"(media_type : String?)","args_html":"(media_type : String?)","location":{"filename":"src/models/activity_pub/object.cr","line_number":47,"url":null},"def":{"name":"media_type=","args":[{"name":"media_type","doc":null,"default_value":"","external_name":"media_type","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@media_type = media_type"}},{"id":"mentions:Enumerable(Tag::Mention)-instance-method","html_id":"mentions:Enumerable(Tag::Mention)-instance-method","name":"mentions","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Enumerable(Tag::Mention)","args_html":" : Enumerable(<a href=\"../Tag/Mention.html\">Tag::Mention</a>)","location":{"filename":"src/models/activity_pub/object.cr","line_number":95,"url":null},"def":{"name":"mentions","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Enumerable(Tag::Mention)","visibility":"Public","body":"mentions = @mentions\nif mentions.nil? || mentions.empty?\n  @mentions = Tag::Mention.where(subject_iri: self.iri)\nend\n@mentions.not_nil!\n"}},{"id":"mentions=(mentions:Enumerable(Tag::Mention)):Enumerable(Tag::Mention)-instance-method","html_id":"mentions=(mentions:Enumerable(Tag::Mention)):Enumerable(Tag::Mention)-instance-method","name":"mentions=","doc":null,"summary":null,"abstract":false,"args":[{"name":"mentions","doc":null,"default_value":"","external_name":"mentions","restriction":"Enumerable(Tag::Mention)"}],"args_string":"(mentions : Enumerable(Tag::Mention)) : Enumerable(Tag::Mention)","args_html":"(mentions : Enumerable(<a href=\"../Tag/Mention.html\">Tag::Mention</a>)) : Enumerable(<a href=\"../Tag/Mention.html\">Tag::Mention</a>)","location":{"filename":"src/models/activity_pub/object.cr","line_number":95,"url":null},"def":{"name":"mentions=","args":[{"name":"mentions","doc":null,"default_value":"","external_name":"mentions","restriction":"Enumerable(Tag::Mention)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Enumerable(Tag::Mention)","visibility":"Public","body":"self.mentions.each do |other|\n  if other.in?(mentions)\n  else\n    other.destroy\n  end\nend\n@mentions = mentions.to_a\nmentions.each do |n|\n  n.subject_iri = self.iri.as(typeof(n.subject_iri))\n  n.subject = self\nend\nmentions\n"}},{"id":"mentions?(*,dereference=false,ignore_cached=false)-instance-method","html_id":"mentions?(*,dereference=false,ignore_cached=false)-instance-method","name":"mentions?","doc":null,"summary":null,"abstract":false,"args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"args_string":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","args_html":"(*, dereference = <span class=\"n\">false</span>, ignore_cached = <span class=\"n\">false</span>)","location":null,"def":{"name":"mentions?","args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"dereference","doc":null,"default_value":"false","external_name":"dereference","restriction":""},{"name":"ignore_cached","doc":null,"default_value":"false","external_name":"ignore_cached","restriction":""}],"double_splat":null,"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"mentions = self.mentions?\nif (mentions && (!ignore_cached)) || (mentions && mentions.changed?)\nelse\n  if (mentions_iri = self.mentions_iri) && dereference\n    if mentions_iri.starts_with?(Ktistec.host)\n    else\n      Enumerable(Tag::Mention).open?(mentions_iri) do |response|\n        if (        mentions = Enumerable(Tag::Mention).from_json_ld?(response.body))\n          return self.mentions = mentions\n        end\n      end\n    end\n  end\nend\nmentions\n"}},{"id":"published:Time?-instance-method","html_id":"published:Time?-instance-method","name":"published","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Time?","args_html":" : Time?","location":{"filename":"src/models/activity_pub/object.cr","line_number":21,"url":null},"def":{"name":"published","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Time | ::Nil","visibility":"Public","body":"@published"}},{"id":"published=(published:Time?)-instance-method","html_id":"published=(published:Time?)-instance-method","name":"published=","doc":null,"summary":null,"abstract":false,"args":[{"name":"published","doc":null,"default_value":"","external_name":"published","restriction":"Time | ::Nil"}],"args_string":"(published : Time?)","args_html":"(published : Time?)","location":{"filename":"src/models/activity_pub/object.cr","line_number":21,"url":null},"def":{"name":"published=","args":[{"name":"published","doc":null,"default_value":"","external_name":"published","restriction":"Time | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@published = published"}},{"id":"replies:String?-instance-method","html_id":"replies:String?-instance-method","name":"replies","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/object.cr","line_number":32,"url":null},"def":{"name":"replies","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@replies"}},{"id":"replies=(replies:String?)-instance-method","html_id":"replies=(replies:String?)-instance-method","name":"replies=","doc":null,"summary":null,"abstract":false,"args":[{"name":"replies","doc":null,"default_value":"","external_name":"replies","restriction":"String | ::Nil"}],"args_string":"(replies : String?)","args_html":"(replies : String?)","location":{"filename":"src/models/activity_pub/object.cr","line_number":32,"url":null},"def":{"name":"replies=","args":[{"name":"replies","doc":null,"default_value":"","external_name":"replies","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@replies = replies"}},{"id":"replies_count:Int64-instance-method","html_id":"replies_count:Int64-instance-method","name":"replies_count","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Int64","args_html":" : Int64","location":{"filename":"src/models/activity_pub/object.cr","line_number":178,"url":null},"def":{"name":"replies_count","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Int64","visibility":"Public","body":"@replies_count"}},{"id":"replies_count=(replies_count:Int64)-instance-method","html_id":"replies_count=(replies_count:Int64)-instance-method","name":"replies_count=","doc":null,"summary":null,"abstract":false,"args":[{"name":"replies_count","doc":null,"default_value":"","external_name":"replies_count","restriction":"Int64"}],"args_string":"(replies_count : Int64)","args_html":"(replies_count : Int64)","location":{"filename":"src/models/activity_pub/object.cr","line_number":178,"url":null},"def":{"name":"replies_count=","args":[{"name":"replies_count","doc":null,"default_value":"","external_name":"replies_count","restriction":"Int64"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@replies_count = replies_count"}},{"id":"source:Source?-instance-method","html_id":"source:Source?-instance-method","name":"source","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Source?","args_html":" : <a href=\"../ActivityPub/Object/Source.html\">Source</a>?","location":{"filename":"src/models/activity_pub/object.cr","line_number":62,"url":null},"def":{"name":"source","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Source | ::Nil","visibility":"Public","body":"@source"}},{"id":"source=(source:Source?)-instance-method","html_id":"source=(source:Source?)-instance-method","name":"source=","doc":null,"summary":null,"abstract":false,"args":[{"name":"source","doc":null,"default_value":"","external_name":"source","restriction":"Source | ::Nil"}],"args_string":"(source : Source?)","args_html":"(source : <a href=\"../ActivityPub/Object/Source.html\">Source</a>?)","location":{"filename":"src/models/activity_pub/object.cr","line_number":62,"url":null},"def":{"name":"source=","args":[{"name":"source","doc":null,"default_value":"","external_name":"source","restriction":"Source | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@source = source"}},{"id":"summary:String?-instance-method","html_id":"summary:String?-instance-method","name":"summary","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/activity_pub/object.cr","line_number":41,"url":null},"def":{"name":"summary","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@summary"}},{"id":"summary=(summary:String?)-instance-method","html_id":"summary=(summary:String?)-instance-method","name":"summary=","doc":null,"summary":null,"abstract":false,"args":[{"name":"summary","doc":null,"default_value":"","external_name":"summary","restriction":"String | ::Nil"}],"args_string":"(summary : String?)","args_html":"(summary : String?)","location":{"filename":"src/models/activity_pub/object.cr","line_number":41,"url":null},"def":{"name":"summary=","args":[{"name":"summary","doc":null,"default_value":"","external_name":"summary","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@summary = summary"}},{"id":"tags-instance-method","html_id":"tags-instance-method","name":"tags","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/object.cr","line_number":261,"url":null},"def":{"name":"tags","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Tag.where(subject_iri: iri)"}},{"id":"thread-instance-method","html_id":"thread-instance-method","name":"thread","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/object.cr","line_number":204,"url":null},"def":{"name":"thread","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"query = \"     WITH RECURSIVE\\n      ancestors_of(iri, depth) AS (\\n           VALUES(?, 0)\\n            UNION\\n           SELECT o.in_reply_to_iri AS iri, p.depth + 1 AS depth\\n             FROM objects AS o, ancestors_of AS p\\n            WHERE o.iri = p.iri AND o.in_reply_to_iri IS NOT NULL\\n         ORDER BY depth DESC\\n      ),\\n      replies_to(iri, position, depth) AS (\\n         SELECT * FROM (SELECT iri, \\\"\\\", 0 FROM ancestors_of ORDER BY depth DESC LIMIT 1)\\n            UNION\\n           SELECT o.iri, r.position || \\\".\\\" || o.id, r.depth + 1 AS depth\\n             FROM objects AS o, replies_to AS r\\n            WHERE o.in_reply_to_iri = r.iri\\n         ORDER BY depth DESC\\n       )\\n   SELECT #{Object.columns(prefix: \"o\")}, sum(c.announces), sum(c.likes), r.depth\\n     FROM objects AS o, replies_to AS r\\nLEFT JOIN (   SELECT a.id, a.object_iri, a.actor_iri, (a.type = \\\"ActivityPub::Activity::Announce\\\") AS announces, (a.type = \\\"ActivityPub::Activity::Like\\\") AS likes\\n                FROM activities AS a\\n           LEFT JOIN activities AS u\\n                  ON u.object_iri = a.iri\\n                 AND u.type = \\\"ActivityPub::Activity::Undo\\\"\\n                 AND u.actor_iri = a.actor_iri\\n               WHERE u.iri IS NULL\\n          ) AS c\\n       ON c.object_iri = o.iri\\n    WHERE o.iri IN (r.iri)\\n     AND o.deleted_at IS NULL\\n   GROUP BY o.id\\n   ORDER BY r.position\"\nObject.query_all(query, self.iri, additional_columns: {announces_count: ::Union(Int64, ::Nil), likes_count: ::Union(Int64, ::Nil), depth: Int32})\n"}},{"id":"to:Array(String)?-instance-method","html_id":"to:Array(String)?-instance-method","name":"to","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(String)?","args_html":" : <a href=\"../Array.html\">Array</a>(String)?","location":{"filename":"src/models/activity_pub/object.cr","line_number":35,"url":null},"def":{"name":"to","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(String) | ::Nil","visibility":"Public","body":"@to"}},{"id":"to=(to:Array(String)?)-instance-method","html_id":"to=(to:Array(String)?)-instance-method","name":"to=","doc":null,"summary":null,"abstract":false,"args":[{"name":"to","doc":null,"default_value":"","external_name":"to","restriction":"Array(String) | ::Nil"}],"args_string":"(to : Array(String)?)","args_html":"(to : <a href=\"../Array.html\">Array</a>(String)?)","location":{"filename":"src/models/activity_pub/object.cr","line_number":35,"url":null},"def":{"name":"to=","args":[{"name":"to","doc":null,"default_value":"","external_name":"to","restriction":"Array(String) | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@to = to"}},{"id":"to_json_ld(recursive=false)-instance-method","html_id":"to_json_ld(recursive=false)-instance-method","name":"to_json_ld","doc":null,"summary":null,"abstract":false,"args":[{"name":"recursive","doc":null,"default_value":"false","external_name":"recursive","restriction":""}],"args_string":"(recursive = <span class=\"n\">false</span>)","args_html":"(recursive = <span class=\"n\">false</span>)","location":{"filename":"src/models/activity_pub/object.cr","line_number":265,"url":null},"def":{"name":"to_json_ld","args":[{"name":"recursive","doc":null,"default_value":"false","external_name":"recursive","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"object = self\nrender(\"src/views/objects/object.json.ecr\")\n"}},{"id":"urls:Array(String)?-instance-method","html_id":"urls:Array(String)?-instance-method","name":"urls","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(String)?","args_html":" : <a href=\"../Array.html\">Array</a>(String)?","location":{"filename":"src/models/activity_pub/object.cr","line_number":92,"url":null},"def":{"name":"urls","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(String) | ::Nil","visibility":"Public","body":"@urls"}},{"id":"urls=(urls:Array(String)?)-instance-method","html_id":"urls=(urls:Array(String)?)-instance-method","name":"urls=","doc":null,"summary":null,"abstract":false,"args":[{"name":"urls","doc":null,"default_value":"","external_name":"urls","restriction":"Array(String) | ::Nil"}],"args_string":"(urls : Array(String)?)","args_html":"(urls : <a href=\"../Array.html\">Array</a>(String)?)","location":{"filename":"src/models/activity_pub/object.cr","line_number":92,"url":null},"def":{"name":"urls=","args":[{"name":"urls","doc":null,"default_value":"","external_name":"urls","restriction":"Array(String) | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@urls = urls"}},{"id":"visible:Bool?-instance-method","html_id":"visible:Bool?-instance-method","name":"visible","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Bool?","args_html":" : Bool?","location":{"filename":"src/models/activity_pub/object.cr","line_number":18,"url":null},"def":{"name":"visible","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Bool | ::Nil","visibility":"Public","body":"if (value = @visible).nil?\n  @visible = (false)\nelse\n  value\nend"}},{"id":"visible=(visible:Bool)-instance-method","html_id":"visible=(visible:Bool)-instance-method","name":"visible=","doc":null,"summary":null,"abstract":false,"args":[{"name":"visible","doc":null,"default_value":"","external_name":"visible","restriction":"Bool"}],"args_string":"(visible : Bool)","args_html":"(visible : Bool)","location":{"filename":"src/models/activity_pub/object.cr","line_number":18,"url":null},"def":{"name":"visible=","args":[{"name":"visible","doc":null,"default_value":"","external_name":"visible","restriction":"Bool"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@visible = visible"}},{"id":"with_replies_count!-instance-method","html_id":"with_replies_count!-instance-method","name":"with_replies_count!","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/object.cr","line_number":180,"url":null},"def":{"name":"with_replies_count!","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"query = \"     WITH RECURSIVE\\n      replies_to(iri) AS (\\n         VALUES(?)\\n            UNION\\n           SELECT o.iri\\n             FROM objects AS o, replies_to AS r\\n            WHERE o.in_reply_to_iri = r.iri\\n       )\\n   SELECT count(o.iri) - 1\\n     FROM objects AS o, replies_to AS r\\n    WHERE o.iri IN (r.iri)\\n     AND o.deleted_at IS NULL\"\nKtistec.database.query_one(query, iri) do |rs|\n  (rs.read(::Union(Int64, ::Nil))).try do |replies_count|\n    self.replies_count = replies_count\n  end\nend\nself\n"}},{"id":"with_statistics!-instance-method","html_id":"with_statistics!-instance-method","name":"with_statistics!","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/object.cr","line_number":159,"url":null},"def":{"name":"with_statistics!","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"query = \"   SELECT sum(a.type = \\\"ActivityPub::Activity::Announce\\\") AS announces, sum(a.type = \\\"ActivityPub::Activity::Like\\\") AS likes\\n     FROM activities AS a\\nLEFT JOIN activities AS u\\n       ON u.object_iri = a.iri\\n      AND u.type = \\\"ActivityPub::Activity::Undo\\\"\\n      AND u.actor_iri = a.actor_iri\\n    WHERE u.iri IS NULL\\n      AND a.object_iri = ?\"\nKtistec.database.query_one(query, iri) do |rs|\n  (rs.read(::Union(Int64, ::Nil))).try do |announces_count|\n    self.announces_count = announces_count\n  end\n  (rs.read(::Union(Int64, ::Nil))).try do |likes_count|\n    self.likes_count = likes_count\n  end\nend\nself\n"}}],"macros":[],"types":[{"html_id":"ktistec/ActivityPub/Object/Article","path":"ActivityPub/Object/Article.html","kind":"class","full_name":"ActivityPub::Object::Article","name":"Article","abstract":false,"superclass":{"html_id":"ktistec/ActivityPub/Object","kind":"class","full_name":"ActivityPub::Object","name":"Object"},"ancestors":[{"html_id":"ktistec/ActivityPub/Object","kind":"class","full_name":"ActivityPub::Object","name":"Object"},{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},{"html_id":"ktistec/Ktistec/Model/Linked","kind":"module","full_name":"Ktistec::Model::Linked","name":"Linked"},{"html_id":"ktistec/Ktistec/Model/Serialized","kind":"module","full_name":"Ktistec::Model::Serialized","name":"Serialized"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Deletable","kind":"module","full_name":"Ktistec::Model::Deletable","name":"Deletable"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/ActivityPub/Object","kind":"class","full_name":"ActivityPub::Object","name":"Object"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/ActivityPub/Object/Attachment","path":"ActivityPub/Object/Attachment.html","kind":"struct","full_name":"ActivityPub::Object::Attachment","name":"Attachment","abstract":false,"superclass":{"html_id":"ktistec/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"ktistec/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"ktistec/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"ktistec/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/ActivityPub/Object","kind":"class","full_name":"ActivityPub::Object","name":"Object"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(url,media_type)-class-method","html_id":"new(url,media_type)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"url","doc":null,"default_value":"","external_name":"url","restriction":""},{"name":"media_type","doc":null,"default_value":"","external_name":"media_type","restriction":""}],"args_string":"(url, media_type)","args_html":"(url, media_type)","location":{"filename":"src/models/activity_pub/object.cr","line_number":72,"url":null},"def":{"name":"new","args":[{"name":"url","doc":null,"default_value":"","external_name":"url","restriction":""},{"name":"media_type","doc":null,"default_value":"","external_name":"media_type","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(url, media_type)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","args_html":"(pull : JSON::PullParser)","location":{"filename":"src/models/activity_pub/object.cr","line_number":65,"url":null},"def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}}],"instance_methods":[{"id":"audio?-instance-method","html_id":"audio?-instance-method","name":"audio?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/object.cr","line_number":83,"url":null},"def":{"name":"audio?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"media_type.in?([\"audio/mp4\", \"audio/webm\", \"audio/ogg\", \"audio/flac\"] of ::String)"}},{"id":"image?-instance-method","html_id":"image?-instance-method","name":"image?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/object.cr","line_number":75,"url":null},"def":{"name":"image?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"media_type.in?([\"image/bmp\", \"image/gif\", \"image/jpeg\", \"image/png\", \"image/svg+xml\", \"image/x-icon\", \"image/apng\", \"image/webp\"] of ::String)"}},{"id":"media_type:String-instance-method","html_id":"media_type:String-instance-method","name":"media_type","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","args_html":" : String","location":{"filename":"src/models/activity_pub/object.cr","line_number":70,"url":null},"def":{"name":"media_type","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@media_type"}},{"id":"media_type=(media_type:String)-instance-method","html_id":"media_type=(media_type:String)-instance-method","name":"media_type=","doc":null,"summary":null,"abstract":false,"args":[{"name":"media_type","doc":null,"default_value":"","external_name":"media_type","restriction":"String"}],"args_string":"(media_type : String)","args_html":"(media_type : String)","location":{"filename":"src/models/activity_pub/object.cr","line_number":70,"url":null},"def":{"name":"media_type=","args":[{"name":"media_type","doc":null,"default_value":"","external_name":"media_type","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@media_type = media_type"}},{"id":"url:String-instance-method","html_id":"url:String-instance-method","name":"url","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","args_html":" : String","location":{"filename":"src/models/activity_pub/object.cr","line_number":67,"url":null},"def":{"name":"url","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@url"}},{"id":"url=(url:String)-instance-method","html_id":"url=(url:String)-instance-method","name":"url=","doc":null,"summary":null,"abstract":false,"args":[{"name":"url","doc":null,"default_value":"","external_name":"url","restriction":"String"}],"args_string":"(url : String)","args_html":"(url : String)","location":{"filename":"src/models/activity_pub/object.cr","line_number":67,"url":null},"def":{"name":"url=","args":[{"name":"url","doc":null,"default_value":"","external_name":"url","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@url = url"}},{"id":"video?-instance-method","html_id":"video?-instance-method","name":"video?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/activity_pub/object.cr","line_number":79,"url":null},"def":{"name":"video?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"media_type.in?([\"video/mp4\", \"video/webm\", \"video/ogg\"] of ::String)"}}],"macros":[],"types":[]},{"html_id":"ktistec/ActivityPub/Object/Note","path":"ActivityPub/Object/Note.html","kind":"class","full_name":"ActivityPub::Object::Note","name":"Note","abstract":false,"superclass":{"html_id":"ktistec/ActivityPub/Object","kind":"class","full_name":"ActivityPub::Object","name":"Object"},"ancestors":[{"html_id":"ktistec/ActivityPub/Object","kind":"class","full_name":"ActivityPub::Object","name":"Object"},{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},{"html_id":"ktistec/Ktistec/Model/Linked","kind":"module","full_name":"Ktistec::Model::Linked","name":"Linked"},{"html_id":"ktistec/Ktistec/Model/Serialized","kind":"module","full_name":"Ktistec::Model::Serialized","name":"Serialized"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Deletable","kind":"module","full_name":"Ktistec::Model::Deletable","name":"Deletable"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/ActivityPub/Object","kind":"class","full_name":"ActivityPub::Object","name":"Object"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/ActivityPub/Object/Question","path":"ActivityPub/Object/Question.html","kind":"class","full_name":"ActivityPub::Object::Question","name":"Question","abstract":false,"superclass":{"html_id":"ktistec/ActivityPub/Object","kind":"class","full_name":"ActivityPub::Object","name":"Object"},"ancestors":[{"html_id":"ktistec/ActivityPub/Object","kind":"class","full_name":"ActivityPub::Object","name":"Object"},{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},{"html_id":"ktistec/Ktistec/Model/Linked","kind":"module","full_name":"Ktistec::Model::Linked","name":"Linked"},{"html_id":"ktistec/Ktistec/Model/Serialized","kind":"module","full_name":"Ktistec::Model::Serialized","name":"Serialized"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Deletable","kind":"module","full_name":"Ktistec::Model::Deletable","name":"Deletable"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/ActivityPub/Object","kind":"class","full_name":"ActivityPub::Object","name":"Object"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/ActivityPub/Object/Source","path":"ActivityPub/Object/Source.html","kind":"struct","full_name":"ActivityPub::Object::Source","name":"Source","abstract":false,"superclass":{"html_id":"ktistec/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"ktistec/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"ktistec/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"ktistec/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/ActivityPub/Object","kind":"class","full_name":"ActivityPub::Object","name":"Object"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(content,media_type)-class-method","html_id":"new(content,media_type)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"content","doc":null,"default_value":"","external_name":"content","restriction":""},{"name":"media_type","doc":null,"default_value":"","external_name":"media_type","restriction":""}],"args_string":"(content, media_type)","args_html":"(content, media_type)","location":{"filename":"src/models/activity_pub/object.cr","line_number":57,"url":null},"def":{"name":"new","args":[{"name":"content","doc":null,"default_value":"","external_name":"content","restriction":""},{"name":"media_type","doc":null,"default_value":"","external_name":"media_type","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(content, media_type)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","args_html":"(pull : JSON::PullParser)","location":{"filename":"src/models/activity_pub/object.cr","line_number":50,"url":null},"def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}}],"instance_methods":[{"id":"content:String-instance-method","html_id":"content:String-instance-method","name":"content","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","args_html":" : String","location":{"filename":"src/models/activity_pub/object.cr","line_number":52,"url":null},"def":{"name":"content","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@content"}},{"id":"content=(content:String)-instance-method","html_id":"content=(content:String)-instance-method","name":"content=","doc":null,"summary":null,"abstract":false,"args":[{"name":"content","doc":null,"default_value":"","external_name":"content","restriction":"String"}],"args_string":"(content : String)","args_html":"(content : String)","location":{"filename":"src/models/activity_pub/object.cr","line_number":52,"url":null},"def":{"name":"content=","args":[{"name":"content","doc":null,"default_value":"","external_name":"content","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@content = content"}},{"id":"media_type:String-instance-method","html_id":"media_type:String-instance-method","name":"media_type","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","args_html":" : String","location":{"filename":"src/models/activity_pub/object.cr","line_number":55,"url":null},"def":{"name":"media_type","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@media_type"}},{"id":"media_type=(media_type:String)-instance-method","html_id":"media_type=(media_type:String)-instance-method","name":"media_type=","doc":null,"summary":null,"abstract":false,"args":[{"name":"media_type","doc":null,"default_value":"","external_name":"media_type","restriction":"String"}],"args_string":"(media_type : String)","args_html":"(media_type : String)","location":{"filename":"src/models/activity_pub/object.cr","line_number":55,"url":null},"def":{"name":"media_type=","args":[{"name":"media_type","doc":null,"default_value":"","external_name":"media_type","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@media_type = media_type"}}],"macros":[],"types":[]},{"html_id":"ktistec/ActivityPub/Object/Tombstone","path":"ActivityPub/Object/Tombstone.html","kind":"class","full_name":"ActivityPub::Object::Tombstone","name":"Tombstone","abstract":false,"superclass":{"html_id":"ktistec/ActivityPub/Object","kind":"class","full_name":"ActivityPub::Object","name":"Object"},"ancestors":[{"html_id":"ktistec/ActivityPub/Object","kind":"class","full_name":"ActivityPub::Object","name":"Object"},{"html_id":"ktistec/ActivityPub","kind":"module","full_name":"ActivityPub","name":"ActivityPub"},{"html_id":"ktistec/Ktistec/Model/Linked","kind":"module","full_name":"Ktistec::Model::Linked","name":"Linked"},{"html_id":"ktistec/Ktistec/Model/Serialized","kind":"module","full_name":"Ktistec::Model::Serialized","name":"Serialized"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Deletable","kind":"module","full_name":"Ktistec::Model::Deletable","name":"Deletable"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/ActivityPub/Object","kind":"class","full_name":"ActivityPub::Object","name":"Object"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]}]}]},{"html_id":"ktistec/ActorsController","path":"ActorsController.html","kind":"class","full_name":"ActorsController","name":"ActorsController","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"id":"paginate(collection,env)-class-method","html_id":"paginate(collection,env)-class-method","name":"paginate","doc":null,"summary":null,"abstract":false,"args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(collection, env)","args_html":"(collection, env)","location":{"filename":"src/controllers/actors.cr","line_number":6,"url":null},"def":{"name":"paginate","args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"path = env.request.path\nquery = env.params.query\npage = 1\nbegin\n  if (p = query[\"page\"].to_i) > 0\n    page = p\n  end\nrescue ArgumentError | KeyError\nend\nrender(\"./src/views/partials/paginator.html.ecr\")\n"}},{"id":"pagination_params(env)-class-method","html_id":"pagination_params(env)-class-method","name":"pagination_params","doc":null,"summary":null,"abstract":false,"args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(env)","args_html":"(env)","location":{"filename":"src/controllers/actors.cr","line_number":6,"url":null},"def":{"name":"pagination_params","args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"{Math.max(env.params.query[\"page\"]?.try(&.to_i) || 1, 1), Math.min(env.params.query[\"size\"]?.try(&.to_i) || 10, 1000)}"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/Array","path":"Array.html","kind":"class","full_name":"Array(T)","name":"Array","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"},{"html_id":"ktistec/Indexable","kind":"module","full_name":"Indexable","name":"Indexable"},{"html_id":"ktistec/Enumerable","kind":"module","full_name":"Enumerable","name":"Enumerable"},{"html_id":"ktistec/Iterable","kind":"module","full_name":"Iterable","name":"Iterable"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/Comparable","kind":"module","full_name":"Comparable","name":"Comparable"},{"html_id":"ktistec/Indexable","kind":"module","full_name":"Indexable","name":"Indexable"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":"An `Array` is an ordered, integer-indexed collection of objects of type T.\n\nArray indexing starts at 0. A negative index is assumed to be\nrelative to the end of the array: -1 indicates the last element,\n-2 is the next to last element, and so on.\n\nAn `Array` can be created using the usual `new` method (several are provided), or with an array literal:\n\n```\nArray(Int32).new  # => []\n[1, 2, 3]         # Array(Int32)\n[1, \"hello\", 'x'] # Array(Int32 | String | Char)\n```\n\nAn `Array` can have mixed types, meaning T will be a union of types, but these are determined\nwhen the array is created, either by specifying T or by using an array literal. In the latter\ncase, T will be set to the union of the array literal elements' types.\n\nWhen creating an empty array you must always specify T:\n\n```\n[] of Int32 # same as Array(Int32)\n[]          # syntax error\n```\n\nAn `Array` is implemented using an internal buffer of some capacity\nand is reallocated when elements are pushed to it when more capacity\nis needed. This is normally known as a [dynamic array](http://en.wikipedia.org/wiki/Dynamic_array).\n\nYou can use a special array literal syntax with other types too, as long as they define an argless\n`new` method and a `<<` method. `Set` is one such type:\n\n```\nset = Set{1, 2, 3} # => Set{1, 2, 3}\nset.class          # => Set(Int32)\n```\n\nThe above is the same as this:\n\n```\nset = Set(typeof(1, 2, 3)).new\nset << 1\nset << 2\nset << 3\n```","summary":"<p>An <code><a href=\"Array.html\">Array</a></code> is an ordered, integer-indexed collection of objects of type T.</p>","class_methods":[],"constructors":[],"instance_methods":[{"id":"presence-instance-method","html_id":"presence-instance-method","name":"presence","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/ext/array.cr","line_number":2,"url":null},"def":{"name":"presence","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if !empty?\n  self\nend"}}],"macros":[],"types":[]},{"html_id":"ktistec/EverythingController","path":"EverythingController.html","kind":"class","full_name":"EverythingController","name":"EverythingController","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"id":"paginate(collection,env)-class-method","html_id":"paginate(collection,env)-class-method","name":"paginate","doc":null,"summary":null,"abstract":false,"args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(collection, env)","args_html":"(collection, env)","location":{"filename":"src/controllers/everything.cr","line_number":4,"url":null},"def":{"name":"paginate","args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"path = env.request.path\nquery = env.params.query\npage = 1\nbegin\n  if (p = query[\"page\"].to_i) > 0\n    page = p\n  end\nrescue ArgumentError | KeyError\nend\nrender(\"./src/views/partials/paginator.html.ecr\")\n"}},{"id":"pagination_params(env)-class-method","html_id":"pagination_params(env)-class-method","name":"pagination_params","doc":null,"summary":null,"abstract":false,"args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(env)","args_html":"(env)","location":{"filename":"src/controllers/everything.cr","line_number":4,"url":null},"def":{"name":"pagination_params","args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"{Math.max(env.params.query[\"page\"]?.try(&.to_i) || 1, 1), Math.min(env.params.query[\"size\"]?.try(&.to_i) || 10, 1000)}"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/Hash","path":"Hash.html","kind":"class","full_name":"Hash(K, V)","name":"Hash","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Iterable","kind":"module","full_name":"Iterable","name":"Iterable"},{"html_id":"ktistec/Enumerable","kind":"module","full_name":"Enumerable","name":"Enumerable"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/Enumerable","kind":"module","full_name":"Enumerable","name":"Enumerable"},{"html_id":"ktistec/Iterable","kind":"module","full_name":"Iterable","name":"Iterable"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":"A `Hash` represents a collection of key-value mappings, similar to a dictionary.\n\nMain operations are storing a key-value mapping (`#[]=`) and\nquerying the value associated to a key (`#[]`). Key-value mappings can also be\ndeleted (`#delete`).\nKeys are unique within a hash. When adding a key-value mapping with a key that\nis already in use, the old value will be forgotten.\n\n```\n# Create a new Hash for mapping String to Int32\nhash = Hash(String, Int32).new\nhash[\"one\"] = 1\nhash[\"two\"] = 2\nhash[\"one\"] # => 1\n```\n\n[Hash literals](https://crystal-lang.org/reference/syntax_and_semantics/literals/hash.html)\ncan also be used to create a `Hash`:\n\n```\n{\"one\" => 1, \"two\" => 2}\n```\n\nImplementation is based on an open hash table.\nTwo objects refer to the same hash key when their hash value (`Object#hash`)\nis identical and both objects are equal to each other (`Object#==`).\n\nEnumeration follows the order that the corresponding keys were inserted.\n\nNOTE: When using mutable data types as keys, changing the value of a key after\nit was inserted into the `Hash` may lead to undefined behaviour. This can be\nrestored by re-indexing the hash with `#rehash`.","summary":"<p>A <code><a href=\"Hash.html\">Hash</a></code> represents a collection of key-value mappings, similar to a dictionary.</p>","class_methods":[],"constructors":[],"instance_methods":[{"id":"presence-instance-method","html_id":"presence-instance-method","name":"presence","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/ext/hash.cr","line_number":2,"url":null},"def":{"name":"presence","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if !empty?\n  self\nend"}}],"macros":[],"types":[]},{"html_id":"ktistec/HomeController","path":"HomeController.html","kind":"class","full_name":"HomeController","name":"HomeController","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"id":"paginate(collection,env)-class-method","html_id":"paginate(collection,env)-class-method","name":"paginate","doc":null,"summary":null,"abstract":false,"args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(collection, env)","args_html":"(collection, env)","location":{"filename":"src/controllers/home.cr","line_number":6,"url":null},"def":{"name":"paginate","args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"path = env.request.path\nquery = env.params.query\npage = 1\nbegin\n  if (p = query[\"page\"].to_i) > 0\n    page = p\n  end\nrescue ArgumentError | KeyError\nend\nrender(\"./src/views/partials/paginator.html.ecr\")\n"}},{"id":"pagination_params(env)-class-method","html_id":"pagination_params(env)-class-method","name":"pagination_params","doc":null,"summary":null,"abstract":false,"args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(env)","args_html":"(env)","location":{"filename":"src/controllers/home.cr","line_number":6,"url":null},"def":{"name":"pagination_params","args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"{Math.max(env.params.query[\"page\"]?.try(&.to_i) || 1, 1), Math.min(env.params.query[\"size\"]?.try(&.to_i) || 10, 1000)}"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/Ktistec","path":"Ktistec.html","kind":"module","full_name":"Ktistec","name":"Ktistec","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"id":"database-class-method","html_id":"database-class-method","name":"database","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/framework.cr","line_number":17,"url":null},"def":{"name":"database","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@database || (@@database = (begin\n  if File.exists?((Ktistec.db_file.split(\"//\")).last)\n  else\n    DB.open(Ktistec.db_file) do |db|\n      db.exec(\"CREATE TABLE options (key TEXT PRIMARY KEY, value TEXT)\")\n      db.exec(\"INSERT INTO options (key, value) VALUES (?, ?)\", \"secret_key\", Random::Secure.hex(64))\n      db.exec(\"CREATE TABLE migrations (id INTEGER PRIMARY KEY, name TEXT)\")\n    end\n  end\n  DB.open(Ktistec.db_file)\nend))"}},{"id":"db_file-class-method","html_id":"db_file-class-method","name":"db_file","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/framework.cr","line_number":6,"url":null},"def":{"name":"db_file","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@db_file || (@@db_file = if Kemal.config.env == \"production\"\n  \"sqlite3://#{File.expand_path(\"~/.ktistec.db\", home: true)}\"\nelse\n  \"sqlite3://ktistec.db\"\nend)"}},{"id":"host-class-method","html_id":"host-class-method","name":"host","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/framework.cr","line_number":56,"url":null},"def":{"name":"host","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@host || (@@host = (Ktistec.database.scalar(\"SELECT value FROM options WHERE key = ?\", \"host\")).as(String))"}},{"id":"host=(host)-class-method","html_id":"host=(host)-class-method","name":"host=","doc":null,"summary":null,"abstract":false,"args":[{"name":"host","doc":null,"default_value":"","external_name":"host","restriction":""}],"args_string":"(host)","args_html":"(host)","location":{"filename":"src/framework/framework.cr","line_number":40,"url":null},"def":{"name":"host=","args":[{"name":"host","doc":null,"default_value":"","external_name":"host","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"uri = URI.parse(host)\nif present?(uri.scheme)\nelse\n  raise(\"scheme must be present\")\nend\nif present?(uri.host)\nelse\n  raise(\"host must be present\")\nend\nif present?(uri.fragment)\n  raise(\"fragment must not be present\")\nend\nif present?(uri.query)\n  raise(\"query must not be present\")\nend\nif (path = present?(uri.path))\n  if path == \"/\"\n  else\n    raise(\"path must not be present\")\n  end\n  uri.path = \"\"\nend\n@@host = uri.normalize.to_s\nquery = \"INSERT OR REPLACE INTO options (key, value) VALUES (?, ?)\"\nKtistec.database.exec(query, \"host\", @@host)\n@@host\n"}},{"id":"host?-class-method","html_id":"host?-class-method","name":"host?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/framework.cr","line_number":60,"url":null},"def":{"name":"host?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  host\nrescue DB::NoResultsError\n  false\nend"}},{"id":"secret_key-class-method","html_id":"secret_key-class-method","name":"secret_key","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/framework.cr","line_number":32,"url":null},"def":{"name":"secret_key","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@secret_key || (@@secret_key = (Ktistec.database.scalar(\"SELECT value FROM options WHERE key = ?\", \"secret_key\")).as(String))"}},{"id":"site-class-method","html_id":"site-class-method","name":"site","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/framework.cr","line_number":74,"url":null},"def":{"name":"site","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@site || (@@site = (Ktistec.database.scalar(\"SELECT value FROM options WHERE key = ?\", \"site\")).as(String))"}},{"id":"site=(site)-class-method","html_id":"site=(site)-class-method","name":"site=","doc":null,"summary":null,"abstract":false,"args":[{"name":"site","doc":null,"default_value":"","external_name":"site","restriction":""}],"args_string":"(site)","args_html":"(site)","location":{"filename":"src/framework/framework.cr","line_number":66,"url":null},"def":{"name":"site=","args":[{"name":"site","doc":null,"default_value":"","external_name":"site","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if present?(site)\nelse\n  raise(\"must be present\")\nend\n@@site = site\nquery = \"INSERT OR REPLACE INTO options (key, value) VALUES (?, ?)\"\nKtistec.database.exec(query, \"site\", @@site)\n@@site\n"}},{"id":"site?-class-method","html_id":"site?-class-method","name":"site?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/framework.cr","line_number":78,"url":null},"def":{"name":"site?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  site\nrescue DB::NoResultsError\n  false\nend"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"ktistec/Ktistec/Auth","path":"Ktistec/Auth.html","kind":"class","full_name":"Ktistec::Auth","name":"Auth","abstract":false,"superclass":{"html_id":"ktistec/Kemal/Handler","kind":"class","full_name":"Kemal::Handler","name":"Handler"},"ancestors":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"},{"html_id":"ktistec/Kemal/Handler","kind":"class","full_name":"Kemal::Handler","name":"Handler"},{"html_id":"ktistec/HTTP/Handler","kind":"module","full_name":"HTTP::Handler","name":"Handler"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec","kind":"module","full_name":"Ktistec","name":"Ktistec"},"doc":"Authentication middleware.\n","summary":"<p>Authentication middleware.</p>","class_methods":[{"id":"paginate(collection,env)-class-method","html_id":"paginate(collection,env)-class-method","name":"paginate","doc":null,"summary":null,"abstract":false,"args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(collection, env)","args_html":"(collection, env)","location":{"filename":"src/framework/auth.cr","line_number":9,"url":null},"def":{"name":"paginate","args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"path = env.request.path\nquery = env.params.query\npage = 1\nbegin\n  if (p = query[\"page\"].to_i) > 0\n    page = p\n  end\nrescue ArgumentError | KeyError\nend\nrender(\"./src/views/partials/paginator.html.ecr\")\n"}},{"id":"pagination_params(env)-class-method","html_id":"pagination_params(env)-class-method","name":"pagination_params","doc":null,"summary":null,"abstract":false,"args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(env)","args_html":"(env)","location":{"filename":"src/framework/auth.cr","line_number":9,"url":null},"def":{"name":"pagination_params","args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"{Math.max(env.params.query[\"page\"]?.try(&.to_i) || 1, 1), Math.min(env.params.query[\"size\"]?.try(&.to_i) || 10, 1000)}"}}],"constructors":[],"instance_methods":[{"id":"call(env)-instance-method","html_id":"call(env)-instance-method","name":"call","doc":null,"summary":null,"abstract":false,"args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(env)","args_html":"(env)","location":{"filename":"src/framework/auth.cr","line_number":11,"url":null},"def":{"name":"call","args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if env.route_lookup.found?\nelse\n  return call_next(env)\nend\nif env.session.account? || (exclude_match?(env))\n  return call_next(env)\nend\n_message = \"Unauthorized\"\nif env.accepts?(\"text/html\")\n  env.response.status_code = 401\n  env.response.headers[\"Content-Type\"] = \"text/html\"\n  env.response.print(render(\"src/views/pages/generic.html.ecr\", \"src/views/layouts/default.html.ecr\"))\nelse\n  env.response.status_code = 401\n  env.response.headers[\"Content-Type\"] = \"application/json\"\n  env.response.print(\"{\\\"msg\\\":\\\"#{_message}\\\"}\")\nend\n"}}],"macros":[],"types":[]},{"html_id":"ktistec/Ktistec/Controller","path":"Ktistec/Controller.html","kind":"module","full_name":"Ktistec::Controller","name":"Controller","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[{"html_id":"ktistec/ActivitiesController","kind":"class","full_name":"ActivitiesController","name":"ActivitiesController"},{"html_id":"ktistec/ActorsController","kind":"class","full_name":"ActorsController","name":"ActorsController"},{"html_id":"ktistec/EverythingController","kind":"class","full_name":"EverythingController","name":"EverythingController"},{"html_id":"ktistec/HomeController","kind":"class","full_name":"HomeController","name":"HomeController"},{"html_id":"ktistec/Ktistec/Auth","kind":"class","full_name":"Ktistec::Auth","name":"Auth"},{"html_id":"ktistec/ObjectsController","kind":"class","full_name":"ObjectsController","name":"ObjectsController"},{"html_id":"ktistec/RelationshipsController","kind":"class","full_name":"RelationshipsController","name":"RelationshipsController"},{"html_id":"ktistec/RemoteFollowsController","kind":"class","full_name":"RemoteFollowsController","name":"RemoteFollowsController"},{"html_id":"ktistec/SearchesController","kind":"class","full_name":"SearchesController","name":"SearchesController"},{"html_id":"ktistec/SessionsController","kind":"class","full_name":"SessionsController","name":"SessionsController"},{"html_id":"ktistec/SettingsController","kind":"class","full_name":"SettingsController","name":"SettingsController"},{"html_id":"ktistec/SuggestionsController","kind":"class","full_name":"SuggestionsController","name":"SuggestionsController"},{"html_id":"ktistec/TagsController","kind":"class","full_name":"TagsController","name":"TagsController"},{"html_id":"ktistec/UploadsController","kind":"class","full_name":"UploadsController","name":"UploadsController"},{"html_id":"ktistec/WellKnownController","kind":"class","full_name":"WellKnownController","name":"WellKnownController"}],"namespace":{"html_id":"ktistec/Ktistec","kind":"module","full_name":"Ktistec","name":"Ktistec"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[{"id":"_tag(_io,_name,*contents,**attributes,&block)-macro","html_id":"_tag(_io,_name,*contents,**attributes,&amp;block)-macro","name":"_tag","doc":null,"summary":null,"abstract":false,"args":[{"name":"_io","doc":null,"default_value":"","external_name":"_io","restriction":""},{"name":"_name","doc":null,"default_value":"","external_name":"_name","restriction":""},{"name":"contents","doc":null,"default_value":"","external_name":"contents","restriction":""}],"args_string":"(_io, _name, *contents, **attributes, &block)","location":{"filename":"src/framework/controller.cr","line_number":120,"url":null},"def":{"name":"_tag","args":[{"name":"_io","doc":null,"default_value":"","external_name":"_io","restriction":""},{"name":"_name","doc":null,"default_value":"","external_name":"_name","restriction":""},{"name":"contents","doc":null,"default_value":"","external_name":"contents","restriction":""}],"double_splat":{"name":"attributes","doc":null,"default_value":"","external_name":"attributes","restriction":""},"splat_index":2,"block_arg":{"name":"block","doc":null,"default_value":"","external_name":"block","restriction":""},"visibility":"Public","body":"      \n{% if attributes.size > 0 %}\n        {{ _io }} << %q|<{{ _name.id }}|\n        {% for k, v in attributes %}\n          {{ _io }} << \" \"\n          {{ _io }} << {{ k.stringify }}\n          {{ _io }} << \"=\"\n          {{ _io }} << {{ v }}.inspect\n        {% end %}\n        {{ _io }} << %q|>|\n      {% else %}\n        {{ _io }} << %q|<{{ _name.id }}>|\n      {% end %}\n\n      \n{% for c in contents %}\n        {% if (c.is_a?(Call) && (!c.receiver)) && (c.name == \"tag\") %}\n          {% if c.args && c.named_args %}\n            _{{ c.name }}({{ _io }}, {{ *c.args }}, {{ *c.named_args }}) {{ c.block }}\n          {% else %}{% if c.args %}\n            _{{ c.name }}({{ _io }}, {{ *c.args }}) {{ c.block }}\n          {% else %}{% if c.named_args %}\n            _{{ c.name }}({{ _io }}, {{ *c.named_args }}) {{ c.block }}\n          {% else %}\n            _{{ c.name }}({{ _io }}) {{ c.block }}\n          {% end %}{% end %}{% end %}\n        {% else %}{% if c.is_a?(Call) || c.is_a?(StringLiteral) %}\n          {{ _io }} << {{ c }}\n        {% else %}\n          {% raise(\"Unsupported tag content: #{c}\") %}\n        {% end %}{% end %}\n      {% end %}\n\n      \n{% if block %}\n        begin\n          {{ *block.args }} = {{ _io }}\n          {{ block.body }}\n        end\n      {% end %}\n\n      \n{{ _io }}\n << \"</\n{{ _name.id }}\n>\"\n    \n"}},{"id":"accepts?(*mime_type)-macro","html_id":"accepts?(*mime_type)-macro","name":"accepts?","doc":null,"summary":null,"abstract":false,"args":[{"name":"mime_type","doc":null,"default_value":"","external_name":"mime_type","restriction":""}],"args_string":"(*mime_type)","location":{"filename":"src/framework/controller.cr","line_number":199,"url":null},"def":{"name":"accepts?","args":[{"name":"mime_type","doc":null,"default_value":"","external_name":"mime_type","restriction":""}],"double_splat":null,"splat_index":0,"block_arg":null,"visibility":"Public","body":"      \nenv.accepts?(\n{{ *mime_type }}\n)\n    \n"}},{"id":"activity_button(arg1,arg2,arg3,type=nil,form_class=nil,button_class=nil,&block)-macro","html_id":"activity_button(arg1,arg2,arg3,type=nil,form_class=nil,button_class=nil,&amp;block)-macro","name":"activity_button","doc":"Posts an activity to an outbox.\n","summary":"<p>Posts an activity to an outbox.</p>","abstract":false,"args":[{"name":"arg1","doc":null,"default_value":"","external_name":"arg1","restriction":""},{"name":"arg2","doc":null,"default_value":"","external_name":"arg2","restriction":""},{"name":"arg3","doc":null,"default_value":"","external_name":"arg3","restriction":""},{"name":"type","doc":null,"default_value":"nil","external_name":"type","restriction":""},{"name":"form_class","doc":null,"default_value":"nil","external_name":"form_class","restriction":""},{"name":"button_class","doc":null,"default_value":"nil","external_name":"button_class","restriction":""}],"args_string":"(arg1, arg2, arg3, type = <span class=\"n\">nil</span>, form_class = <span class=\"n\">nil</span>, button_class = <span class=\"n\">nil</span>, &block)","location":{"filename":"src/framework/controller.cr","line_number":175,"url":null},"def":{"name":"activity_button","args":[{"name":"arg1","doc":null,"default_value":"","external_name":"arg1","restriction":""},{"name":"arg2","doc":null,"default_value":"","external_name":"arg2","restriction":""},{"name":"arg3","doc":null,"default_value":"","external_name":"arg3","restriction":""},{"name":"type","doc":null,"default_value":"nil","external_name":"type","restriction":""},{"name":"form_class","doc":null,"default_value":"nil","external_name":"form_class","restriction":""},{"name":"button_class","doc":null,"default_value":"nil","external_name":"button_class","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":{"name":"block","doc":null,"default_value":"","external_name":"block","restriction":""},"visibility":"Public","body":"      \n{% if block %}\n        {% outbox_url = arg1\nobject_iri = arg2\ntype = arg3\n %}\n      {% else %}\n        {% outbox_url = arg2\nobject_iri = arg3\ntext = arg1\n %}\n      {% end %}\n\n      \n{% form_class = [\"ui\", \"form\", form_class].select do |i|\n  i\nend.join(\" \") %}\n\n      \n{% button_class = [\"ui\", \"button\", button_class].select do |i|\n  i\nend.join(\" \") %}\n\n      \n# see BUG: https://github.com/crystal-lang/crystal/issues/10236\n\n      tag(\n        :form,\n        tag(:input, type: \"hidden\", name: \"authenticity_token\", value: \nenv.session.string?(\"csrf\")),\n        tag(:input, type: \"hidden\", name: \"type\", value: \n{{ type || text }}\n),\n        tag(:input, type: \"hidden\", name: \"object\", value: \n{{ object_iri }}\n),\n        \n{% if block %}\n          tag(:button, type: \"submit\", \"class\": {{ button_class }}) {{ block }},\n        {% else %}\n          tag(:button, {{ text }}, type: \"submit\", \"class\": {{ button_class }}),\n        {% end %}\n\n        method: \"POST\", action: \n{{ outbox_url }}\n,\n        \"class\": \n{{ form_class }}\n\n      )\n    \n"}},{"id":"activity_path(activity=nil)-macro","html_id":"activity_path(activity=nil)-macro","name":"activity_path","doc":null,"summary":null,"abstract":false,"args":[{"name":"activity","doc":null,"default_value":"nil","external_name":"activity","restriction":""}],"args_string":"(activity = <span class=\"n\">nil</span>)","location":{"filename":"src/framework/controller.cr","line_number":64,"url":null},"def":{"name":"activity_path","args":[{"name":"activity","doc":null,"default_value":"nil","external_name":"activity","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \"/activities/#{\n{{ activity }}\n.try(&.uid) || \nenv.params.url[\"id\"]}\"\n    \n"}},{"id":"actor_path(actor=nil)-macro","html_id":"actor_path(actor=nil)-macro","name":"actor_path","doc":null,"summary":null,"abstract":false,"args":[{"name":"actor","doc":null,"default_value":"nil","external_name":"actor","restriction":""}],"args_string":"(actor = <span class=\"n\">nil</span>)","location":{"filename":"src/framework/controller.cr","line_number":88,"url":null},"def":{"name":"actor_path","args":[{"name":"actor","doc":null,"default_value":"nil","external_name":"actor","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \"/actors/#{\n{{ actor }}\n.try(&.uid) || \nenv.params.url[\"username\"]}\"\n    \n"}},{"id":"actor_relationships_path(actor=nil,relationship=nil)-macro","html_id":"actor_relationships_path(actor=nil,relationship=nil)-macro","name":"actor_relationships_path","doc":null,"summary":null,"abstract":false,"args":[{"name":"actor","doc":null,"default_value":"nil","external_name":"actor","restriction":""},{"name":"relationship","doc":null,"default_value":"nil","external_name":"relationship","restriction":""}],"args_string":"(actor = <span class=\"n\">nil</span>, relationship = <span class=\"n\">nil</span>)","location":{"filename":"src/framework/controller.cr","line_number":92,"url":null},"def":{"name":"actor_relationships_path","args":[{"name":"actor","doc":null,"default_value":"nil","external_name":"actor","restriction":""},{"name":"relationship","doc":null,"default_value":"nil","external_name":"relationship","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \"#{actor_path(\n{{ actor }}\n)}/#{\n{{ relationship }}\n || \nenv.params.url[\"relationship\"]}\"\n    \n"}},{"id":"actor_remote_follow_path(actor=nil)-macro","html_id":"actor_remote_follow_path(actor=nil)-macro","name":"actor_remote_follow_path","doc":null,"summary":null,"abstract":false,"args":[{"name":"actor","doc":null,"default_value":"nil","external_name":"actor","restriction":""}],"args_string":"(actor = <span class=\"n\">nil</span>)","location":{"filename":"src/framework/controller.cr","line_number":96,"url":null},"def":{"name":"actor_remote_follow_path","args":[{"name":"actor","doc":null,"default_value":"nil","external_name":"actor","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \"#{actor_path(\n{{ actor }}\n)}/remote-follow\"\n    \n"}},{"id":"anchor(object)-macro","html_id":"anchor(object)-macro","name":"anchor","doc":null,"summary":null,"abstract":false,"args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":""}],"args_string":"(object)","location":{"filename":"src/framework/controller.cr","line_number":108,"url":null},"def":{"name":"anchor","args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \"object-#{\n{{ object }}\n.id}\"\n    \n"}},{"id":"back_path-macro","html_id":"back_path-macro","name":"back_path","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","location":{"filename":"src/framework/controller.cr","line_number":56,"url":null},"def":{"name":"back_path","args":[],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \nenv.request.headers.fetch(\"Referer\", \"/\")\n    \n"}},{"id":"bad_request(message=nil,code=nil,basedir=&quot;src/views&quot;)-macro","html_id":"bad_request(message=nil,code=nil,basedir=&amp;quot;src/views&amp;quot;)-macro","name":"bad_request","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"nil","external_name":"message","restriction":""},{"name":"code","doc":null,"default_value":"nil","external_name":"code","restriction":""},{"name":"basedir","doc":null,"default_value":"\"src/views\"","external_name":"basedir","restriction":""}],"args_string":"(message = <span class=\"n\">nil</span>, code = <span class=\"n\">nil</span>, basedir = <span class=\"s\">&quot;src/views&quot;</span>)","location":{"filename":"src/framework/controller.cr","line_number":266,"url":null},"def":{"name":"bad_request","args":[{"name":"message","doc":null,"default_value":"nil","external_name":"message","restriction":""},{"name":"code","doc":null,"default_value":"nil","external_name":"code","restriction":""},{"name":"basedir","doc":null,"default_value":"\"src/views\"","external_name":"basedir","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"        \n{% if message.is_a?(StringLiteral) && (message.includes?('/')) %}\n          if accepts?(\"application/activity+json\", \"application/json\")\n            {% if read_file?(\"#{basedir.id}/#{message.id}.json.ecr\") %}\n              halt env, status_code: {{ code }} || 400, response: render {{ \"#{basedir.id}/#{message.id}.json.ecr\" }}\n            {% end %}\n          end\n          if accepts?(\"text/html\")\n            {% if read_file?(\"#{basedir.id}/#{message.id}.html.ecr\") %}\n              halt env, status_code: {{ code }} || 400, response: render {{ \"#{basedir.id}/#{message.id}.html.ecr\" }}, \"src/views/layouts/default.html.ecr\"\n            {% else %}{% if read_file?(\"#{basedir.id}/#{message.id}.html.slang\") %}\n              halt env, status_code: {{ code }} || 400, response: render {{ \"#{basedir.id}/#{message.id}.html.slang\" }}, \"src/views/layouts/default.html.ecr\"\n            {% end %}{% end %}\n          end\n          if accepts?(\"text/plain\")\n            {% if read_file?(\"#{basedir.id}/#{message.id}.text.ecr\") %}\n              halt env, status_code: {{ code }} || 400, response: render {{ \"#{basedir.id}/#{message.id}.text.ecr\" }}\n            {% end %}\n          end\n          {% if read_file?(\"#{basedir.id}/#{message.id}.json.ecr\") %}\n            halt env, status_code: {{ code }} || 400, response: render {{ \"#{basedir.id}/#{message.id}.json.ecr\" }}\n          {% else %}{% if read_file?(\"#{basedir.id}/#{message.id}.html.ecr\") %}\n              halt env, status_code: {{ code }} || 400, response: render {{ \"#{basedir.id}/#{message.id}.html.ecr\" }}, \"src/views/layouts/default.html.ecr\"\n          {% else %}{% if read_file?(\"#{basedir.id}/#{message.id}.html.slang\") %}\n              halt env, status_code: {{ code }} || 400, response: render {{ \"#{basedir.id}/#{message.id}.html.slang\" }}, \"src/views/layouts/default.html.ecr\"\n          {% end %}{% end %}{% end %}\n        {% else %}\n          if accepts?(\"application/activity+json\", \"application/json\")\n            halt env, status_code: {{ code }} || 400, response: ({msg: ({{ message }} || \"Bad Request\").downcase}.to_json)\n          end\n          if accepts?(\"text/html\")\n            _message = {{ message }} || \"Bad Request\"\n            halt env, status_code: {{ code }} || 400, response: render \"src/views/pages/generic.html.ecr\", \"src/views/layouts/default.html.ecr\"\n          end\n          if accepts?(\"text/plain\")\n            halt env, status_code: {{ code }} || 400, response: ({{ message }} || \"Bad Request\").downcase\n          end\n          halt env, status_code: {{ code }} || 400, response: ({msg: ({{ message }} || \"Bad Request\").downcase}.to_json)\n        {% end %}\n\n      \n"}},{"id":"comma(collection,counter)-macro","html_id":"comma(collection,counter)-macro","name":"comma","doc":"Emits a comma when one would be necessary when iterating through\na collection.\n","summary":"<p>Emits a comma when one would be necessary when iterating through a collection.</p>","abstract":false,"args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"counter","doc":null,"default_value":"","external_name":"counter","restriction":""}],"args_string":"(collection, counter)","location":{"filename":"src/framework/controller.cr","line_number":296,"url":null},"def":{"name":"comma","args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"counter","doc":null,"default_value":"","external_name":"counter","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \n{{ counter }}\n < \n{{ collection }}\n.size - 1 ? \",\" : \"\"\n    \n"}},{"id":"conflict(message=nil,code=nil,basedir=&quot;src/views&quot;)-macro","html_id":"conflict(message=nil,code=nil,basedir=&amp;quot;src/views&amp;quot;)-macro","name":"conflict","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"nil","external_name":"message","restriction":""},{"name":"code","doc":null,"default_value":"nil","external_name":"code","restriction":""},{"name":"basedir","doc":null,"default_value":"\"src/views\"","external_name":"basedir","restriction":""}],"args_string":"(message = <span class=\"n\">nil</span>, code = <span class=\"n\">nil</span>, basedir = <span class=\"s\">&quot;src/views&quot;</span>)","location":{"filename":"src/framework/controller.cr","line_number":269,"url":null},"def":{"name":"conflict","args":[{"name":"message","doc":null,"default_value":"nil","external_name":"message","restriction":""},{"name":"code","doc":null,"default_value":"nil","external_name":"code","restriction":""},{"name":"basedir","doc":null,"default_value":"\"src/views\"","external_name":"basedir","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"        \n{% if message.is_a?(StringLiteral) && (message.includes?('/')) %}\n          if accepts?(\"application/activity+json\", \"application/json\")\n            {% if read_file?(\"#{basedir.id}/#{message.id}.json.ecr\") %}\n              halt env, status_code: {{ code }} || 409, response: render {{ \"#{basedir.id}/#{message.id}.json.ecr\" }}\n            {% end %}\n          end\n          if accepts?(\"text/html\")\n            {% if read_file?(\"#{basedir.id}/#{message.id}.html.ecr\") %}\n              halt env, status_code: {{ code }} || 409, response: render {{ \"#{basedir.id}/#{message.id}.html.ecr\" }}, \"src/views/layouts/default.html.ecr\"\n            {% else %}{% if read_file?(\"#{basedir.id}/#{message.id}.html.slang\") %}\n              halt env, status_code: {{ code }} || 409, response: render {{ \"#{basedir.id}/#{message.id}.html.slang\" }}, \"src/views/layouts/default.html.ecr\"\n            {% end %}{% end %}\n          end\n          if accepts?(\"text/plain\")\n            {% if read_file?(\"#{basedir.id}/#{message.id}.text.ecr\") %}\n              halt env, status_code: {{ code }} || 409, response: render {{ \"#{basedir.id}/#{message.id}.text.ecr\" }}\n            {% end %}\n          end\n          {% if read_file?(\"#{basedir.id}/#{message.id}.json.ecr\") %}\n            halt env, status_code: {{ code }} || 409, response: render {{ \"#{basedir.id}/#{message.id}.json.ecr\" }}\n          {% else %}{% if read_file?(\"#{basedir.id}/#{message.id}.html.ecr\") %}\n              halt env, status_code: {{ code }} || 409, response: render {{ \"#{basedir.id}/#{message.id}.html.ecr\" }}, \"src/views/layouts/default.html.ecr\"\n          {% else %}{% if read_file?(\"#{basedir.id}/#{message.id}.html.slang\") %}\n              halt env, status_code: {{ code }} || 409, response: render {{ \"#{basedir.id}/#{message.id}.html.slang\" }}, \"src/views/layouts/default.html.ecr\"\n          {% end %}{% end %}{% end %}\n        {% else %}\n          if accepts?(\"application/activity+json\", \"application/json\")\n            halt env, status_code: {{ code }} || 409, response: ({msg: ({{ message }} || \"Conflict\").downcase}.to_json)\n          end\n          if accepts?(\"text/html\")\n            _message = {{ message }} || \"Conflict\"\n            halt env, status_code: {{ code }} || 409, response: render \"src/views/pages/generic.html.ecr\", \"src/views/layouts/default.html.ecr\"\n          end\n          if accepts?(\"text/plain\")\n            halt env, status_code: {{ code }} || 409, response: ({{ message }} || \"Conflict\").downcase\n          end\n          halt env, status_code: {{ code }} || 409, response: ({msg: ({{ message }} || \"Conflict\").downcase}.to_json)\n        {% end %}\n\n      \n"}},{"id":"created(message=nil,code=nil,basedir=&quot;src/views&quot;)-macro","html_id":"created(message=nil,code=nil,basedir=&amp;quot;src/views&amp;quot;)-macro","name":"created","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"nil","external_name":"message","restriction":""},{"name":"code","doc":null,"default_value":"nil","external_name":"code","restriction":""},{"name":"basedir","doc":null,"default_value":"\"src/views\"","external_name":"basedir","restriction":""}],"args_string":"(message = <span class=\"n\">nil</span>, code = <span class=\"n\">nil</span>, basedir = <span class=\"s\">&quot;src/views&quot;</span>)","location":{"filename":"src/framework/controller.cr","line_number":265,"url":null},"def":{"name":"created","args":[{"name":"message","doc":null,"default_value":"nil","external_name":"message","restriction":""},{"name":"code","doc":null,"default_value":"nil","external_name":"code","restriction":""},{"name":"basedir","doc":null,"default_value":"\"src/views\"","external_name":"basedir","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"        \n{% if message.is_a?(StringLiteral) && (message.includes?('/')) %}\n          if accepts?(\"application/activity+json\", \"application/json\")\n            {% if read_file?(\"#{basedir.id}/#{message.id}.json.ecr\") %}\n              halt env, status_code: {{ code }} || 201, response: render {{ \"#{basedir.id}/#{message.id}.json.ecr\" }}\n            {% end %}\n          end\n          if accepts?(\"text/html\")\n            {% if read_file?(\"#{basedir.id}/#{message.id}.html.ecr\") %}\n              halt env, status_code: {{ code }} || 201, response: render {{ \"#{basedir.id}/#{message.id}.html.ecr\" }}, \"src/views/layouts/default.html.ecr\"\n            {% else %}{% if read_file?(\"#{basedir.id}/#{message.id}.html.slang\") %}\n              halt env, status_code: {{ code }} || 201, response: render {{ \"#{basedir.id}/#{message.id}.html.slang\" }}, \"src/views/layouts/default.html.ecr\"\n            {% end %}{% end %}\n          end\n          if accepts?(\"text/plain\")\n            {% if read_file?(\"#{basedir.id}/#{message.id}.text.ecr\") %}\n              halt env, status_code: {{ code }} || 201, response: render {{ \"#{basedir.id}/#{message.id}.text.ecr\" }}\n            {% end %}\n          end\n          {% if read_file?(\"#{basedir.id}/#{message.id}.json.ecr\") %}\n            halt env, status_code: {{ code }} || 201, response: render {{ \"#{basedir.id}/#{message.id}.json.ecr\" }}\n          {% else %}{% if read_file?(\"#{basedir.id}/#{message.id}.html.ecr\") %}\n              halt env, status_code: {{ code }} || 201, response: render {{ \"#{basedir.id}/#{message.id}.html.ecr\" }}, \"src/views/layouts/default.html.ecr\"\n          {% else %}{% if read_file?(\"#{basedir.id}/#{message.id}.html.slang\") %}\n              halt env, status_code: {{ code }} || 201, response: render {{ \"#{basedir.id}/#{message.id}.html.slang\" }}, \"src/views/layouts/default.html.ecr\"\n          {% end %}{% end %}{% end %}\n        {% else %}\n          if accepts?(\"application/activity+json\", \"application/json\")\n            halt env, status_code: {{ code }} || 201, response: ({msg: ({{ message }} || \"Created\").downcase}.to_json)\n          end\n          if accepts?(\"text/html\")\n            _message = {{ message }} || \"Created\"\n            halt env, status_code: {{ code }} || 201, response: render \"src/views/pages/generic.html.ecr\", \"src/views/layouts/default.html.ecr\"\n          end\n          if accepts?(\"text/plain\")\n            halt env, status_code: {{ code }} || 201, response: ({{ message }} || \"Created\").downcase\n          end\n          halt env, status_code: {{ code }} || 201, response: ({msg: ({{ message }} || \"Created\").downcase}.to_json)\n        {% end %}\n\n      \n"}},{"id":"def_response_helper(name,message,code)-macro","html_id":"def_response_helper(name,message,code)-macro","name":"def_response_helper","doc":"Define a simple response helper.\n","summary":"<p>Define a simple response helper.</p>","abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""},{"name":"code","doc":null,"default_value":"","external_name":"code","restriction":""}],"args_string":"(name, message, code)","location":{"filename":"src/framework/controller.cr","line_number":221,"url":null},"def":{"name":"def_response_helper","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"message","doc":null,"default_value":"","external_name":"message","restriction":""},{"name":"code","doc":null,"default_value":"","external_name":"code","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      macro \n{{ name.id }}\n(message = nil, code = nil, basedir = \"src/views\")\n        \n\\{% if\n message.is_a?(StringLiteral) && message.includes?('/') %}\n          if accepts?(\"application/activity+json\", \"application/json\")\n            \n\\{% if\n read_file?(\"#{basedir.id}/#{message.id}.json.ecr\") %}\n              halt \nenv, status_code: \n\\{\n{code}} || \n{{ code }}\n, response: render \n\\{\n{\"#{basedir.id}/#{message.id}.json.ecr\"}}\n            \n\\{% end\n %}\n          \nend\n          if accepts?(\"text/html\")\n            \n\\{% if\n read_file?(\"#{basedir.id}/#{message.id}.html.ecr\") %}\n              halt \nenv, status_code: \n\\{\n{code}} || \n{{ code }}\n, response: render \n\\{\n{\"#{basedir.id}/#{message.id}.html.ecr\"}}, \"src/views/layouts/default.html.ecr\"\n            \n\\{% e\nlsif read_file?(\"#{basedir.id}/#{message.id}.html.slang\") %}\n              halt \nenv, status_code: \n\\{\n{code}} || \n{{ code }}\n, response: render \n\\{\n{\"#{basedir.id}/#{message.id}.html.slang\"}}, \"src/views/layouts/default.html.ecr\"\n            \n\\{% end\n %}\n          \nend\n          if accepts?(\"text/plain\")\n            \n\\{% if\n read_file?(\"#{basedir.id}/#{message.id}.text.ecr\") %}\n              halt \nenv, status_code: \n\\{\n{code}} || \n{{ code }}\n, response: render \n\\{\n{\"#{basedir.id}/#{message.id}.text.ecr\"}}\n            \n\\{% end\n %}\n          \nend\n          \n\\{% if\n read_file?(\"#{basedir.id}/#{message.id}.json.ecr\") %}\n            halt \nenv, status_code: \n\\{\n{code}} || \n{{ code }}\n, response: render \n\\{\n{\"#{basedir.id}/#{message.id}.json.ecr\"}}\n          \n\\{% e\nlsif read_file?(\"#{basedir.id}/#{message.id}.html.ecr\") %}\n              halt \nenv, status_code: \n\\{\n{code}} || \n{{ code }}\n, response: render \n\\{\n{\"#{basedir.id}/#{message.id}.html.ecr\"}}, \"src/views/layouts/default.html.ecr\"\n          \n\\{% e\nlsif read_file?(\"#{basedir.id}/#{message.id}.html.slang\") %}\n              halt \nenv, status_code: \n\\{\n{code}} || \n{{ code }}\n, response: render \n\\{\n{\"#{basedir.id}/#{message.id}.html.slang\"}}, \"src/views/layouts/default.html.ecr\"\n          \n\\{% end\n %}\n        \n\\{% e\nlse %}\n          if accepts?(\"application/activity+json\", \"application/json\")\n            halt \nenv, status_code: \n\\{\n{code}} || \n{{ code }}\n, response: (\n{msg: (\n\\{\n{message}} || \n{{ message }}\n).downcase}.to_json)\n          \nend\n          if accepts?(\"text/html\")\n            _message = \n\\{\n{message}} || \n{{ message }}\n\n            halt \nenv, status_code: \n\\{\n{code}} || \n{{ code }}\n, response: render \"src/views/pages/generic.html.ecr\", \"src/views/layouts/default.html.ecr\"\n          \nend\n          if accepts?(\"text/plain\")\n            halt \nenv, status_code: \n\\{\n{code}} || \n{{ code }}\n, response: (\n\\{\n{message}} || \n{{ message }}\n).downcase\n          \nend\n          halt \nenv, status_code: \n\\{\n{code}} || \n{{ code }}\n, response: (\n{msg: (\n\\{\n{message}} || \n{{ message }}\n).downcase}.to_json)\n        \n\\{% end\n %}\n      \nend\n    \n"}},{"id":"edit_object_path(object=nil)-macro","html_id":"edit_object_path(object=nil)-macro","name":"edit_object_path","doc":null,"summary":null,"abstract":false,"args":[{"name":"object","doc":null,"default_value":"nil","external_name":"object","restriction":""}],"args_string":"(object = <span class=\"n\">nil</span>)","location":{"filename":"src/framework/controller.cr","line_number":76,"url":null},"def":{"name":"edit_object_path","args":[{"name":"object","doc":null,"default_value":"nil","external_name":"object","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \"/objects/#{\n{{ object }}\n.try(&.uid) || \nenv.params.url[\"id\"]}/edit\"\n    \n"}},{"id":"forbidden(message=nil,code=nil,basedir=&quot;src/views&quot;)-macro","html_id":"forbidden(message=nil,code=nil,basedir=&amp;quot;src/views&amp;quot;)-macro","name":"forbidden","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"nil","external_name":"message","restriction":""},{"name":"code","doc":null,"default_value":"nil","external_name":"code","restriction":""},{"name":"basedir","doc":null,"default_value":"\"src/views\"","external_name":"basedir","restriction":""}],"args_string":"(message = <span class=\"n\">nil</span>, code = <span class=\"n\">nil</span>, basedir = <span class=\"s\">&quot;src/views&quot;</span>)","location":{"filename":"src/framework/controller.cr","line_number":267,"url":null},"def":{"name":"forbidden","args":[{"name":"message","doc":null,"default_value":"nil","external_name":"message","restriction":""},{"name":"code","doc":null,"default_value":"nil","external_name":"code","restriction":""},{"name":"basedir","doc":null,"default_value":"\"src/views\"","external_name":"basedir","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"        \n{% if message.is_a?(StringLiteral) && (message.includes?('/')) %}\n          if accepts?(\"application/activity+json\", \"application/json\")\n            {% if read_file?(\"#{basedir.id}/#{message.id}.json.ecr\") %}\n              halt env, status_code: {{ code }} || 403, response: render {{ \"#{basedir.id}/#{message.id}.json.ecr\" }}\n            {% end %}\n          end\n          if accepts?(\"text/html\")\n            {% if read_file?(\"#{basedir.id}/#{message.id}.html.ecr\") %}\n              halt env, status_code: {{ code }} || 403, response: render {{ \"#{basedir.id}/#{message.id}.html.ecr\" }}, \"src/views/layouts/default.html.ecr\"\n            {% else %}{% if read_file?(\"#{basedir.id}/#{message.id}.html.slang\") %}\n              halt env, status_code: {{ code }} || 403, response: render {{ \"#{basedir.id}/#{message.id}.html.slang\" }}, \"src/views/layouts/default.html.ecr\"\n            {% end %}{% end %}\n          end\n          if accepts?(\"text/plain\")\n            {% if read_file?(\"#{basedir.id}/#{message.id}.text.ecr\") %}\n              halt env, status_code: {{ code }} || 403, response: render {{ \"#{basedir.id}/#{message.id}.text.ecr\" }}\n            {% end %}\n          end\n          {% if read_file?(\"#{basedir.id}/#{message.id}.json.ecr\") %}\n            halt env, status_code: {{ code }} || 403, response: render {{ \"#{basedir.id}/#{message.id}.json.ecr\" }}\n          {% else %}{% if read_file?(\"#{basedir.id}/#{message.id}.html.ecr\") %}\n              halt env, status_code: {{ code }} || 403, response: render {{ \"#{basedir.id}/#{message.id}.html.ecr\" }}, \"src/views/layouts/default.html.ecr\"\n          {% else %}{% if read_file?(\"#{basedir.id}/#{message.id}.html.slang\") %}\n              halt env, status_code: {{ code }} || 403, response: render {{ \"#{basedir.id}/#{message.id}.html.slang\" }}, \"src/views/layouts/default.html.ecr\"\n          {% end %}{% end %}{% end %}\n        {% else %}\n          if accepts?(\"application/activity+json\", \"application/json\")\n            halt env, status_code: {{ code }} || 403, response: ({msg: ({{ message }} || \"Forbidden\").downcase}.to_json)\n          end\n          if accepts?(\"text/html\")\n            _message = {{ message }} || \"Forbidden\"\n            halt env, status_code: {{ code }} || 403, response: render \"src/views/pages/generic.html.ecr\", \"src/views/layouts/default.html.ecr\"\n          end\n          if accepts?(\"text/plain\")\n            halt env, status_code: {{ code }} || 403, response: ({{ message }} || \"Forbidden\").downcase\n          end\n          halt env, status_code: {{ code }} || 403, response: ({msg: ({{ message }} || \"Forbidden\").downcase}.to_json)\n        {% end %}\n\n      \n"}},{"id":"home_path-macro","html_id":"home_path-macro","name":"home_path","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","location":{"filename":"src/framework/controller.cr","line_number":40,"url":null},"def":{"name":"home_path","args":[],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \"/\"\n    "}},{"id":"host-macro","html_id":"host-macro","name":"host","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","location":{"filename":"src/framework/controller.cr","line_number":36,"url":null},"def":{"name":"host","args":[],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      Ktistec.host\n    "}},{"id":"id-macro","html_id":"id-macro","name":"id","doc":"Generates a random, URL-safe identifier.\n","summary":"<p>Generates a random, URL-safe identifier.</p>","abstract":false,"args":[],"args_string":"","location":{"filename":"src/framework/controller.cr","line_number":302,"url":null},"def":{"name":"id","args":[],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      Ktistec::Util.id\n    "}},{"id":"inbox_path(actor=nil)-macro","html_id":"inbox_path(actor=nil)-macro","name":"inbox_path","doc":null,"summary":null,"abstract":false,"args":[{"name":"actor","doc":null,"default_value":"nil","external_name":"actor","restriction":""}],"args_string":"(actor = <span class=\"n\">nil</span>)","location":{"filename":"src/framework/controller.cr","line_number":104,"url":null},"def":{"name":"inbox_path","args":[{"name":"actor","doc":null,"default_value":"nil","external_name":"actor","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \"#{actor_path(\n{{ actor }}\n)}/inbox\"\n    \n"}},{"id":"not_found(message=nil,code=nil,basedir=&quot;src/views&quot;)-macro","html_id":"not_found(message=nil,code=nil,basedir=&amp;quot;src/views&amp;quot;)-macro","name":"not_found","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"nil","external_name":"message","restriction":""},{"name":"code","doc":null,"default_value":"nil","external_name":"code","restriction":""},{"name":"basedir","doc":null,"default_value":"\"src/views\"","external_name":"basedir","restriction":""}],"args_string":"(message = <span class=\"n\">nil</span>, code = <span class=\"n\">nil</span>, basedir = <span class=\"s\">&quot;src/views&quot;</span>)","location":{"filename":"src/framework/controller.cr","line_number":268,"url":null},"def":{"name":"not_found","args":[{"name":"message","doc":null,"default_value":"nil","external_name":"message","restriction":""},{"name":"code","doc":null,"default_value":"nil","external_name":"code","restriction":""},{"name":"basedir","doc":null,"default_value":"\"src/views\"","external_name":"basedir","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"        \n{% if message.is_a?(StringLiteral) && (message.includes?('/')) %}\n          if accepts?(\"application/activity+json\", \"application/json\")\n            {% if read_file?(\"#{basedir.id}/#{message.id}.json.ecr\") %}\n              halt env, status_code: {{ code }} || 404, response: render {{ \"#{basedir.id}/#{message.id}.json.ecr\" }}\n            {% end %}\n          end\n          if accepts?(\"text/html\")\n            {% if read_file?(\"#{basedir.id}/#{message.id}.html.ecr\") %}\n              halt env, status_code: {{ code }} || 404, response: render {{ \"#{basedir.id}/#{message.id}.html.ecr\" }}, \"src/views/layouts/default.html.ecr\"\n            {% else %}{% if read_file?(\"#{basedir.id}/#{message.id}.html.slang\") %}\n              halt env, status_code: {{ code }} || 404, response: render {{ \"#{basedir.id}/#{message.id}.html.slang\" }}, \"src/views/layouts/default.html.ecr\"\n            {% end %}{% end %}\n          end\n          if accepts?(\"text/plain\")\n            {% if read_file?(\"#{basedir.id}/#{message.id}.text.ecr\") %}\n              halt env, status_code: {{ code }} || 404, response: render {{ \"#{basedir.id}/#{message.id}.text.ecr\" }}\n            {% end %}\n          end\n          {% if read_file?(\"#{basedir.id}/#{message.id}.json.ecr\") %}\n            halt env, status_code: {{ code }} || 404, response: render {{ \"#{basedir.id}/#{message.id}.json.ecr\" }}\n          {% else %}{% if read_file?(\"#{basedir.id}/#{message.id}.html.ecr\") %}\n              halt env, status_code: {{ code }} || 404, response: render {{ \"#{basedir.id}/#{message.id}.html.ecr\" }}, \"src/views/layouts/default.html.ecr\"\n          {% else %}{% if read_file?(\"#{basedir.id}/#{message.id}.html.slang\") %}\n              halt env, status_code: {{ code }} || 404, response: render {{ \"#{basedir.id}/#{message.id}.html.slang\" }}, \"src/views/layouts/default.html.ecr\"\n          {% end %}{% end %}{% end %}\n        {% else %}\n          if accepts?(\"application/activity+json\", \"application/json\")\n            halt env, status_code: {{ code }} || 404, response: ({msg: ({{ message }} || \"Not Found\").downcase}.to_json)\n          end\n          if accepts?(\"text/html\")\n            _message = {{ message }} || \"Not Found\"\n            halt env, status_code: {{ code }} || 404, response: render \"src/views/pages/generic.html.ecr\", \"src/views/layouts/default.html.ecr\"\n          end\n          if accepts?(\"text/plain\")\n            halt env, status_code: {{ code }} || 404, response: ({{ message }} || \"Not Found\").downcase\n          end\n          halt env, status_code: {{ code }} || 404, response: ({msg: ({{ message }} || \"Not Found\").downcase}.to_json)\n        {% end %}\n\n      \n"}},{"id":"object_path(object=nil)-macro","html_id":"object_path(object=nil)-macro","name":"object_path","doc":null,"summary":null,"abstract":false,"args":[{"name":"object","doc":null,"default_value":"nil","external_name":"object","restriction":""}],"args_string":"(object = <span class=\"n\">nil</span>)","location":{"filename":"src/framework/controller.cr","line_number":80,"url":null},"def":{"name":"object_path","args":[{"name":"object","doc":null,"default_value":"nil","external_name":"object","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \"/objects/#{\n{{ object }}\n.try(&.uid) || \nenv.params.url[\"id\"]}\"\n    \n"}},{"id":"objects_path-macro","html_id":"objects_path-macro","name":"objects_path","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","location":{"filename":"src/framework/controller.cr","line_number":68,"url":null},"def":{"name":"objects_path","args":[],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \"/objects\"\n    "}},{"id":"ok(message=nil,code=nil,basedir=&quot;src/views&quot;)-macro","html_id":"ok(message=nil,code=nil,basedir=&amp;quot;src/views&amp;quot;)-macro","name":"ok","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"nil","external_name":"message","restriction":""},{"name":"code","doc":null,"default_value":"nil","external_name":"code","restriction":""},{"name":"basedir","doc":null,"default_value":"\"src/views\"","external_name":"basedir","restriction":""}],"args_string":"(message = <span class=\"n\">nil</span>, code = <span class=\"n\">nil</span>, basedir = <span class=\"s\">&quot;src/views&quot;</span>)","location":{"filename":"src/framework/controller.cr","line_number":264,"url":null},"def":{"name":"ok","args":[{"name":"message","doc":null,"default_value":"nil","external_name":"message","restriction":""},{"name":"code","doc":null,"default_value":"nil","external_name":"code","restriction":""},{"name":"basedir","doc":null,"default_value":"\"src/views\"","external_name":"basedir","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"        \n{% if message.is_a?(StringLiteral) && (message.includes?('/')) %}\n          if accepts?(\"application/activity+json\", \"application/json\")\n            {% if read_file?(\"#{basedir.id}/#{message.id}.json.ecr\") %}\n              halt env, status_code: {{ code }} || 200, response: render {{ \"#{basedir.id}/#{message.id}.json.ecr\" }}\n            {% end %}\n          end\n          if accepts?(\"text/html\")\n            {% if read_file?(\"#{basedir.id}/#{message.id}.html.ecr\") %}\n              halt env, status_code: {{ code }} || 200, response: render {{ \"#{basedir.id}/#{message.id}.html.ecr\" }}, \"src/views/layouts/default.html.ecr\"\n            {% else %}{% if read_file?(\"#{basedir.id}/#{message.id}.html.slang\") %}\n              halt env, status_code: {{ code }} || 200, response: render {{ \"#{basedir.id}/#{message.id}.html.slang\" }}, \"src/views/layouts/default.html.ecr\"\n            {% end %}{% end %}\n          end\n          if accepts?(\"text/plain\")\n            {% if read_file?(\"#{basedir.id}/#{message.id}.text.ecr\") %}\n              halt env, status_code: {{ code }} || 200, response: render {{ \"#{basedir.id}/#{message.id}.text.ecr\" }}\n            {% end %}\n          end\n          {% if read_file?(\"#{basedir.id}/#{message.id}.json.ecr\") %}\n            halt env, status_code: {{ code }} || 200, response: render {{ \"#{basedir.id}/#{message.id}.json.ecr\" }}\n          {% else %}{% if read_file?(\"#{basedir.id}/#{message.id}.html.ecr\") %}\n              halt env, status_code: {{ code }} || 200, response: render {{ \"#{basedir.id}/#{message.id}.html.ecr\" }}, \"src/views/layouts/default.html.ecr\"\n          {% else %}{% if read_file?(\"#{basedir.id}/#{message.id}.html.slang\") %}\n              halt env, status_code: {{ code }} || 200, response: render {{ \"#{basedir.id}/#{message.id}.html.slang\" }}, \"src/views/layouts/default.html.ecr\"\n          {% end %}{% end %}{% end %}\n        {% else %}\n          if accepts?(\"application/activity+json\", \"application/json\")\n            halt env, status_code: {{ code }} || 200, response: ({msg: ({{ message }} || \"OK\").downcase}.to_json)\n          end\n          if accepts?(\"text/html\")\n            _message = {{ message }} || \"OK\"\n            halt env, status_code: {{ code }} || 200, response: render \"src/views/pages/generic.html.ecr\", \"src/views/layouts/default.html.ecr\"\n          end\n          if accepts?(\"text/plain\")\n            halt env, status_code: {{ code }} || 200, response: ({{ message }} || \"OK\").downcase\n          end\n          halt env, status_code: {{ code }} || 200, response: ({msg: ({{ message }} || \"OK\").downcase}.to_json)\n        {% end %}\n\n      \n"}},{"id":"outbox_path(actor=nil)-macro","html_id":"outbox_path(actor=nil)-macro","name":"outbox_path","doc":null,"summary":null,"abstract":false,"args":[{"name":"actor","doc":null,"default_value":"nil","external_name":"actor","restriction":""}],"args_string":"(actor = <span class=\"n\">nil</span>)","location":{"filename":"src/framework/controller.cr","line_number":100,"url":null},"def":{"name":"outbox_path","args":[{"name":"actor","doc":null,"default_value":"nil","external_name":"actor","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \"#{actor_path(\n{{ actor }}\n)}/outbox\"\n    \n"}},{"id":"redirect(url,status_code=302,body=nil)-macro","html_id":"redirect(url,status_code=302,body=nil)-macro","name":"redirect","doc":"Redirect and end processing.\n","summary":"<p>Redirect and end processing.</p>","abstract":false,"args":[{"name":"url","doc":null,"default_value":"","external_name":"url","restriction":""},{"name":"status_code","doc":null,"default_value":"302","external_name":"status_code","restriction":""},{"name":"body","doc":null,"default_value":"nil","external_name":"body","restriction":""}],"args_string":"(url, status_code = <span class=\"n\">302</span>, body = <span class=\"n\">nil</span>)","location":{"filename":"src/framework/controller.cr","line_number":209,"url":null},"def":{"name":"redirect","args":[{"name":"url","doc":null,"default_value":"","external_name":"url","restriction":""},{"name":"status_code","doc":null,"default_value":"302","external_name":"status_code","restriction":""},{"name":"body","doc":null,"default_value":"nil","external_name":"body","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \nenv.response.headers.add(\"Location\", \n{{ url }}\n)\n      \nenv.response.status_code = \n{{ status_code }}\n\n      \n{% if body %}\n        env.response.print({{ body }})\n      {% end %}\n\n      \nenv.response.close\n      next\n    \n"}},{"id":"remote_activity_path(activity=nil)-macro","html_id":"remote_activity_path(activity=nil)-macro","name":"remote_activity_path","doc":null,"summary":null,"abstract":false,"args":[{"name":"activity","doc":null,"default_value":"nil","external_name":"activity","restriction":""}],"args_string":"(activity = <span class=\"n\">nil</span>)","location":{"filename":"src/framework/controller.cr","line_number":60,"url":null},"def":{"name":"remote_activity_path","args":[{"name":"activity","doc":null,"default_value":"nil","external_name":"activity","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \"/remote/activities/#{\n{{ activity }}\n.try(&.id) || \nenv.params.url[\"id\"]}\"\n    \n"}},{"id":"remote_actor_path(actor=nil)-macro","html_id":"remote_actor_path(actor=nil)-macro","name":"remote_actor_path","doc":null,"summary":null,"abstract":false,"args":[{"name":"actor","doc":null,"default_value":"nil","external_name":"actor","restriction":""}],"args_string":"(actor = <span class=\"n\">nil</span>)","location":{"filename":"src/framework/controller.cr","line_number":84,"url":null},"def":{"name":"remote_actor_path","args":[{"name":"actor","doc":null,"default_value":"nil","external_name":"actor","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \"/remote/actors/#{\n{{ actor }}\n.try(&.id) || \nenv.params.url[\"id\"]}\"\n    \n"}},{"id":"remote_object_path(object=nil)-macro","html_id":"remote_object_path(object=nil)-macro","name":"remote_object_path","doc":null,"summary":null,"abstract":false,"args":[{"name":"object","doc":null,"default_value":"nil","external_name":"object","restriction":""}],"args_string":"(object = <span class=\"n\">nil</span>)","location":{"filename":"src/framework/controller.cr","line_number":72,"url":null},"def":{"name":"remote_object_path","args":[{"name":"object","doc":null,"default_value":"nil","external_name":"object","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \"/remote/objects/#{\n{{ object }}\n.try(&.id) || \nenv.params.url[\"id\"]}\"\n    \n"}},{"id":"remote_thread_path(object)-macro","html_id":"remote_thread_path(object)-macro","name":"remote_thread_path","doc":null,"summary":null,"abstract":false,"args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":""}],"args_string":"(object)","location":{"filename":"src/framework/controller.cr","line_number":112,"url":null},"def":{"name":"remote_thread_path","args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \"/remote/objects/#{\n{{ object }}\n.id}/thread#object-#{\n{{ object }}\n.id}\"\n    \n"}},{"id":"replies_path(object)-macro","html_id":"replies_path(object)-macro","name":"replies_path","doc":null,"summary":null,"abstract":false,"args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":""}],"args_string":"(object)","location":{"filename":"src/framework/controller.cr","line_number":116,"url":null},"def":{"name":"replies_path","args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \"/remote/objects/#{\n{{ object }}\n.id}/replies\"\n    \n"}},{"id":"s(str)-macro","html_id":"s(str)-macro","name":"s","doc":"Sanitizes HTML.\n\nFor use in views:\n    <%= s string %>\n","summary":"<p>Sanitizes HTML.</p>","abstract":false,"args":[{"name":"str","doc":null,"default_value":"","external_name":"str","restriction":""}],"args_string":"(str)","location":{"filename":"src/framework/controller.cr","line_number":289,"url":null},"def":{"name":"s","args":[{"name":"str","doc":null,"default_value":"","external_name":"str","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      Ktistec::Util.sanitize(\n{{ str }}\n)\n    \n"}},{"id":"search_path-macro","html_id":"search_path-macro","name":"search_path","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","location":{"filename":"src/framework/controller.cr","line_number":44,"url":null},"def":{"name":"search_path","args":[],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \"/search\"\n    "}},{"id":"server_error(message=nil,code=nil,basedir=&quot;src/views&quot;)-macro","html_id":"server_error(message=nil,code=nil,basedir=&amp;quot;src/views&amp;quot;)-macro","name":"server_error","doc":null,"summary":null,"abstract":false,"args":[{"name":"message","doc":null,"default_value":"nil","external_name":"message","restriction":""},{"name":"code","doc":null,"default_value":"nil","external_name":"code","restriction":""},{"name":"basedir","doc":null,"default_value":"\"src/views\"","external_name":"basedir","restriction":""}],"args_string":"(message = <span class=\"n\">nil</span>, code = <span class=\"n\">nil</span>, basedir = <span class=\"s\">&quot;src/views&quot;</span>)","location":{"filename":"src/framework/controller.cr","line_number":270,"url":null},"def":{"name":"server_error","args":[{"name":"message","doc":null,"default_value":"nil","external_name":"message","restriction":""},{"name":"code","doc":null,"default_value":"nil","external_name":"code","restriction":""},{"name":"basedir","doc":null,"default_value":"\"src/views\"","external_name":"basedir","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"        \n{% if message.is_a?(StringLiteral) && (message.includes?('/')) %}\n          if accepts?(\"application/activity+json\", \"application/json\")\n            {% if read_file?(\"#{basedir.id}/#{message.id}.json.ecr\") %}\n              halt env, status_code: {{ code }} || 500, response: render {{ \"#{basedir.id}/#{message.id}.json.ecr\" }}\n            {% end %}\n          end\n          if accepts?(\"text/html\")\n            {% if read_file?(\"#{basedir.id}/#{message.id}.html.ecr\") %}\n              halt env, status_code: {{ code }} || 500, response: render {{ \"#{basedir.id}/#{message.id}.html.ecr\" }}, \"src/views/layouts/default.html.ecr\"\n            {% else %}{% if read_file?(\"#{basedir.id}/#{message.id}.html.slang\") %}\n              halt env, status_code: {{ code }} || 500, response: render {{ \"#{basedir.id}/#{message.id}.html.slang\" }}, \"src/views/layouts/default.html.ecr\"\n            {% end %}{% end %}\n          end\n          if accepts?(\"text/plain\")\n            {% if read_file?(\"#{basedir.id}/#{message.id}.text.ecr\") %}\n              halt env, status_code: {{ code }} || 500, response: render {{ \"#{basedir.id}/#{message.id}.text.ecr\" }}\n            {% end %}\n          end\n          {% if read_file?(\"#{basedir.id}/#{message.id}.json.ecr\") %}\n            halt env, status_code: {{ code }} || 500, response: render {{ \"#{basedir.id}/#{message.id}.json.ecr\" }}\n          {% else %}{% if read_file?(\"#{basedir.id}/#{message.id}.html.ecr\") %}\n              halt env, status_code: {{ code }} || 500, response: render {{ \"#{basedir.id}/#{message.id}.html.ecr\" }}, \"src/views/layouts/default.html.ecr\"\n          {% else %}{% if read_file?(\"#{basedir.id}/#{message.id}.html.slang\") %}\n              halt env, status_code: {{ code }} || 500, response: render {{ \"#{basedir.id}/#{message.id}.html.slang\" }}, \"src/views/layouts/default.html.ecr\"\n          {% end %}{% end %}{% end %}\n        {% else %}\n          if accepts?(\"application/activity+json\", \"application/json\")\n            halt env, status_code: {{ code }} || 500, response: ({msg: ({{ message }} || \"Server Error\").downcase}.to_json)\n          end\n          if accepts?(\"text/html\")\n            _message = {{ message }} || \"Server Error\"\n            halt env, status_code: {{ code }} || 500, response: render \"src/views/pages/generic.html.ecr\", \"src/views/layouts/default.html.ecr\"\n          end\n          if accepts?(\"text/plain\")\n            halt env, status_code: {{ code }} || 500, response: ({{ message }} || \"Server Error\").downcase\n          end\n          halt env, status_code: {{ code }} || 500, response: ({msg: ({{ message }} || \"Server Error\").downcase}.to_json)\n        {% end %}\n\n      \n"}},{"id":"sessions_path-macro","html_id":"sessions_path-macro","name":"sessions_path","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","location":{"filename":"src/framework/controller.cr","line_number":48,"url":null},"def":{"name":"sessions_path","args":[],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \"/sessions\"\n    "}},{"id":"settings_path-macro","html_id":"settings_path-macro","name":"settings_path","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","location":{"filename":"src/framework/controller.cr","line_number":52,"url":null},"def":{"name":"settings_path","args":[],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \"/settings\"\n    "}},{"id":"skip_auth(paths,method=GET,*methods)-macro","html_id":"skip_auth(paths,method=GET,*methods)-macro","name":"skip_auth","doc":"Don't authenticate specified handlers.\n\n    skip_auth [\"/foo\", \"/bar\"], GET, POST\n","summary":"<p>Don't authenticate specified handlers.</p>","abstract":false,"args":[{"name":"paths","doc":null,"default_value":"","external_name":"paths","restriction":""},{"name":"method","doc":null,"default_value":"GET","external_name":"method","restriction":""},{"name":"methods","doc":null,"default_value":"","external_name":"methods","restriction":""}],"args_string":"(paths, method = <span class=\"t\">GET</span>, *methods)","location":{"filename":"src/framework/controller.cr","line_number":276,"url":null},"def":{"name":"skip_auth","args":[{"name":"paths","doc":null,"default_value":"","external_name":"paths","restriction":""},{"name":"method","doc":null,"default_value":"GET","external_name":"method","restriction":""},{"name":"methods","doc":null,"default_value":"","external_name":"methods","restriction":""}],"double_splat":null,"splat_index":2,"block_arg":null,"visibility":"Public","body":"      class ::Ktistec::Auth < ::Kemal::Handler\n        \n{% for method in (methods << method) %}\n          exclude {{ paths }}, {{ method.stringify }}\n        {% end %}\n\n      \nend\n    \n"}},{"id":"tag(_name,*contents,**attributes,&block)-macro","html_id":"tag(_name,*contents,**attributes,&amp;block)-macro","name":"tag","doc":null,"summary":null,"abstract":false,"args":[{"name":"_name","doc":null,"default_value":"","external_name":"_name","restriction":""},{"name":"contents","doc":null,"default_value":"","external_name":"contents","restriction":""}],"args_string":"(_name, *contents, **attributes, &block)","location":{"filename":"src/framework/controller.cr","line_number":159,"url":null},"def":{"name":"tag","args":[{"name":"_name","doc":null,"default_value":"","external_name":"_name","restriction":""},{"name":"contents","doc":null,"default_value":"","external_name":"contents","restriction":""}],"double_splat":{"name":"attributes","doc":null,"default_value":"","external_name":"attributes","restriction":""},"splat_index":1,"block_arg":{"name":"block","doc":null,"default_value":"","external_name":"block","restriction":""},"visibility":"Public","body":"      String.build do |\n%io\n|\n        \n{% if contents.size > 0 && attributes.size > 0 %}\n          _tag(%io, {{ _name }}, {{ *contents }}, {{ **attributes }}) {{ block }}\n        {% else %}{% if contents.size > 0 %}\n          _tag(%io, {{ _name }}, {{ *contents }}) {{ block }}\n        {% else %}{% if attributes.size > 0 %}\n          _tag(%io, {{ _name }}, {{ **attributes }}) {{ block }}\n        {% else %}\n          _tag(%io, {{ _name }}) {{ block }}\n        {% end %}{% end %}{% end %}\n\n      \nend\n    \n"}},{"id":"xhr?-macro","html_id":"xhr?-macro","name":"xhr?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","location":{"filename":"src/framework/controller.cr","line_number":203,"url":null},"def":{"name":"xhr?","args":[],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \nenv.xhr?\n    \n"}}],"types":[]},{"html_id":"ktistec/Ktistec/CSRF","path":"Ktistec/CSRF.html","kind":"class","full_name":"Ktistec::CSRF","name":"CSRF","abstract":false,"superclass":{"html_id":"ktistec/Kemal/Handler","kind":"class","full_name":"Kemal::Handler","name":"Handler"},"ancestors":[{"html_id":"ktistec/Kemal/Handler","kind":"class","full_name":"Kemal::Handler","name":"Handler"},{"html_id":"ktistec/HTTP/Handler","kind":"module","full_name":"HTTP::Handler","name":"Handler"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec","kind":"module","full_name":"Ktistec","name":"Ktistec"},"doc":"CSRF preventing middleware.\n","summary":"<p>CSRF preventing middleware.</p>","class_methods":[],"constructors":[{"id":"new(header=&quot;X-CSRF-Token&quot;,allowed_routes=[]ofString,allowed_methods=[&quot;GET&quot;,&quot;HEAD&quot;,&quot;OPTIONS&quot;,&quot;TRACE&quot;]of::String,parameter_name=&quot;authenticity_token&quot;,error:String|HTTP::Server::Context->String=&quot;Forbidden(CSRF)&quot;)-class-method","html_id":"new(header=&quot;X-CSRF-Token&quot;,allowed_routes=[]ofString,allowed_methods=[&quot;GET&quot;,&quot;HEAD&quot;,&quot;OPTIONS&quot;,&quot;TRACE&quot;]of::String,parameter_name=&quot;authenticity_token&quot;,error:String|HTTP::Server::Context->String=&quot;Forbidden(CSRF)&quot;)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"header","doc":null,"default_value":"\"X-CSRF-Token\"","external_name":"header","restriction":""},{"name":"allowed_routes","doc":null,"default_value":"[] of String","external_name":"allowed_routes","restriction":""},{"name":"allowed_methods","doc":null,"default_value":"[\"GET\", \"HEAD\", \"OPTIONS\", \"TRACE\"] of ::String","external_name":"allowed_methods","restriction":""},{"name":"parameter_name","doc":null,"default_value":"\"authenticity_token\"","external_name":"parameter_name","restriction":""},{"name":"error","doc":null,"default_value":"\"Forbidden (CSRF)\"","external_name":"error","restriction":"String | (HTTP::Server::Context -> String)"}],"args_string":"(header = <span class=\"s\">&quot;X-CSRF-Token&quot;</span>, allowed_routes = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">String</span>, allowed_methods = [<span class=\"s\">&quot;GET&quot;</span>, <span class=\"s\">&quot;HEAD&quot;</span>, <span class=\"s\">&quot;OPTIONS&quot;</span>, <span class=\"s\">&quot;TRACE&quot;</span>] <span class=\"k\">of</span> <span class=\"t\">::</span><span class=\"t\">String</span>, parameter_name = <span class=\"s\">&quot;authenticity_token&quot;</span>, error : String | HTTP::Server::Context -> String = <span class=\"s\">&quot;Forbidden (CSRF)&quot;</span>)","args_html":"(header = <span class=\"s\">&quot;X-CSRF-Token&quot;</span>, allowed_routes = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">String</span>, allowed_methods = [<span class=\"s\">&quot;GET&quot;</span>, <span class=\"s\">&quot;HEAD&quot;</span>, <span class=\"s\">&quot;OPTIONS&quot;</span>, <span class=\"s\">&quot;TRACE&quot;</span>] <span class=\"k\">of</span> <span class=\"t\">::</span><span class=\"t\">String</span>, parameter_name = <span class=\"s\">&quot;authenticity_token&quot;</span>, error : String | <a href=\"../HTTP/Server/Context.html\">HTTP::Server::Context</a> -> String = <span class=\"s\">&quot;Forbidden (CSRF)&quot;</span>)","location":{"filename":"src/framework/csrf.cr","line_number":29,"url":null},"def":{"name":"new","args":[{"name":"header","doc":null,"default_value":"\"X-CSRF-Token\"","external_name":"header","restriction":""},{"name":"allowed_routes","doc":null,"default_value":"[] of String","external_name":"allowed_routes","restriction":""},{"name":"allowed_methods","doc":null,"default_value":"[\"GET\", \"HEAD\", \"OPTIONS\", \"TRACE\"] of ::String","external_name":"allowed_methods","restriction":""},{"name":"parameter_name","doc":null,"default_value":"\"authenticity_token\"","external_name":"parameter_name","restriction":""},{"name":"error","doc":null,"default_value":"\"Forbidden (CSRF)\"","external_name":"error","restriction":"String | (HTTP::Server::Context -> String)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(header, allowed_routes, allowed_methods, parameter_name, error)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"call(context)-instance-method","html_id":"call(context)-instance-method","name":"call","doc":null,"summary":null,"abstract":false,"args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":""}],"args_string":"(context)","args_html":"(context)","location":{"filename":"src/framework/csrf.cr","line_number":48,"url":null},"def":{"name":"call","args":[{"name":"context","doc":null,"default_value":"","external_name":"context","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if exclude_match?(context)\n  return call_next(context)\nend\nif context.session.string?(\"csrf\")\nelse\n  csrf_token = Random::Secure.hex(16)\n  context.session.string(\"csrf\", csrf_token)\n  context.response.cookies << HTTP::Cookie.new(name: @parameter_name, value: csrf_token, expires: Time.local.to_utc + 1.hour, http_only: false)\nend\nif @allowed_methods.includes?(context.request.method)\n  return call_next(context)\nend\nreq = context.request\nsubmitted_token = if req.headers[@header]?\n  req.headers[@header]\nelse\n  if context.params.body[@parameter_name]?\n    context.params.body[@parameter_name]\n  else\n    \"nothing\"\n  end\nend\ncurrent_token = context.session.string(\"csrf\")\nif current_token == submitted_token\n  return call_next(context)\nelse\n  context.response.status_code = 403\n  if (error = @error) && (!error.is_a?(String))\n    context.response.print(error.call(context))\n  else\n    context.response.print(error)\n  end\nend\n"}},{"id":"setup-instance-method","html_id":"setup-instance-method","name":"setup","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/csrf.cr","line_number":39,"url":null},"def":{"name":"setup","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@allowed_routes.each do |path|\n  class_name = {{ @type.name }}\n  ([\"GET\", \"HEAD\", \"OPTIONS\", \"TRACE\", \"PUT\", \"POST\"] of ::String).each do |method|\n    @@exclude_routes_tree.add(\"#{class_name}/#{method.downcase}#{path}\", \"/#{method.downcase}#{path}\")\n  end\nend"}}],"macros":[],"types":[]},{"html_id":"ktistec/Ktistec/Database","path":"Ktistec/Database.html","kind":"module","full_name":"Ktistec::Database","name":"Database","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec","kind":"module","full_name":"Ktistec","name":"Ktistec"},"doc":"Database utilities.\n","summary":"<p>Database utilities.</p>","class_methods":[{"id":"all_applied_versions-class-method","html_id":"all_applied_versions-class-method","name":"all_applied_versions","doc":"Returns all applied versions.\n","summary":"<p>Returns all applied versions.</p>","abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/database.cr","line_number":26,"url":null},"def":{"name":"all_applied_versions","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Ktistec.database.query_all(\"SELECT id FROM migrations\", as: Int)"}},{"id":"all_migrations-class-method","html_id":"all_migrations-class-method","name":"all_migrations","doc":"Returns all defined migrations in no particular order.\n","summary":"<p>Returns all defined migrations in no particular order.</p>","abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/database.cr","line_number":14,"url":null},"def":{"name":"all_migrations","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@migrations"}},{"id":"all_pending_versions-class-method","html_id":"all_pending_versions-class-method","name":"all_pending_versions","doc":"Returns all pending versions.\n","summary":"<p>Returns all pending versions.</p>","abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/database.cr","line_number":32,"url":null},"def":{"name":"all_pending_versions","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"all_versions - all_applied_versions"}},{"id":"all_versions-class-method","html_id":"all_versions-class-method","name":"all_versions","doc":"Returns all versions in sorted order.\n","summary":"<p>Returns all versions in sorted order.</p>","abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/database.cr","line_number":20,"url":null},"def":{"name":"all_versions","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@migrations.keys.sort"}},{"id":"do_operation(operation,version)-class-method","html_id":"do_operation(operation,version)-class-method","name":"do_operation","doc":"Perform an operation on a migration.\n","summary":"<p>Perform an operation on a migration.</p>","abstract":false,"args":[{"name":"operation","doc":null,"default_value":"","external_name":"operation","restriction":""},{"name":"version","doc":null,"default_value":"","external_name":"version","restriction":""}],"args_string":"(operation, version)","args_html":"(operation, version)","location":{"filename":"src/framework/database.cr","line_number":44,"url":null},"def":{"name":"do_operation","args":[{"name":"operation","doc":null,"default_value":"","external_name":"operation","restriction":""},{"name":"version","doc":null,"default_value":"","external_name":"version","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"migration = find_migration(version)\ncase operation\nwhen :create\n  if all_applied_versions.includes?(version)\n    \"#{migration.name}: is already applied\"\n  else\n    Ktistec.database.exec(\"INSERT INTO migrations VALUES (?, ?)\", version, migration.name)\n    \"#{migration.name}: created but not applied\"\n  end\nwhen :apply\n  if all_applied_versions.includes?(version)\n    \"#{migration.name}: is already applied\"\n  else\n    if (    up = migration.up).nil?\n      \"#{migration.name}: is not defined\"\n    else\n      time = Benchmark.measure do\n        up.call(Ktistec.database)\n      end\n      Ktistec.database.exec(\"INSERT INTO migrations VALUES (?, ?)\", version, migration.name)\n      \"#{migration.name}: applied in %.4fs\" % time.real\n    end\n  end\nwhen :destroy\n  if all_pending_versions.includes?(version)\n    \"#{migration.name}: is already reverted\"\n  else\n    Ktistec.database.exec(\"DELETE FROM migrations WHERE id = ?\", version)\n    \"#{migration.name}: destroyed but not reverted\"\n  end\nwhen :revert\n  if all_pending_versions.includes?(version)\n    \"#{migration.name}: is already reverted\"\n  else\n    if (    down = migration.down).nil?\n      \"#{migration.name}: is not defined\"\n    else\n      time = Benchmark.measure do\n        down.call(Ktistec.database)\n      end\n      Ktistec.database.exec(\"DELETE FROM migrations WHERE id = ?\", version)\n      \"#{migration.name}: reverted in %.4fs\" % time.real\n    end\n  end\nelse\n  raise(\"invalid operation: #{operation}\")\nend\n"}},{"id":"find_migration(version)-class-method","html_id":"find_migration(version)-class-method","name":"find_migration","doc":"Finds migration by version.\n","summary":"<p>Finds migration by version.</p>","abstract":false,"args":[{"name":"version","doc":null,"default_value":"","external_name":"version","restriction":""}],"args_string":"(version)","args_html":"(version)","location":{"filename":"src/framework/database.cr","line_number":38,"url":null},"def":{"name":"find_migration","args":[{"name":"version","doc":null,"default_value":"","external_name":"version","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@migrations[version]"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"ktistec/Ktistec/Database/Migration","path":"Ktistec/Database/Migration.html","kind":"module","full_name":"Ktistec::Database::Migration","name":"Migration","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec/Database","kind":"module","full_name":"Ktistec::Database","name":"Database"},"doc":"Common interface for all migrations.\n","summary":"<p>Common interface for all migrations.</p>","class_methods":[],"constructors":[],"instance_methods":[{"id":"down(filename=__FILE__,&proc:Operation)-instance-method","html_id":"down(filename=__FILE__,&proc:Operation)-instance-method","name":"down","doc":"Reverts the migration.\n","summary":"<p>Reverts the migration.</p>","abstract":false,"args":[{"name":"filename","doc":null,"default_value":"__FILE__","external_name":"filename","restriction":""}],"args_string":"(filename = __FILE__, &proc : Operation)","args_html":"(filename = __FILE__, &proc : Operation)","location":{"filename":"src/framework/database.cr","line_number":106,"url":null},"def":{"name":"down","args":[{"name":"filename","doc":null,"default_value":"__FILE__","external_name":"filename","restriction":""}],"double_splat":null,"splat_index":null,"yields":0,"block_arg":{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":"Operation"},"return_type":"","visibility":"Public","body":"if (filename.split(\"/\")).last =~ PATTERN\n  Ktistec::Database.all_migrations.tap do |all_migrations|\n    all_migrations[$~[1].to_i] = if (    definition = all_migrations[$~[1].to_i]?)\n      definition.copy_with(down: proc)\n    else\n      Definition.new(name: $~[2], down: proc)\n    end\n  end\nend"}},{"id":"up(filename=__FILE__,&proc:Operation)-instance-method","html_id":"up(filename=__FILE__,&proc:Operation)-instance-method","name":"up","doc":"Applies the migration.\n","summary":"<p>Applies the migration.</p>","abstract":false,"args":[{"name":"filename","doc":null,"default_value":"__FILE__","external_name":"filename","restriction":""}],"args_string":"(filename = __FILE__, &proc : Operation)","args_html":"(filename = __FILE__, &proc : Operation)","location":{"filename":"src/framework/database.cr","line_number":91,"url":null},"def":{"name":"up","args":[{"name":"filename","doc":null,"default_value":"__FILE__","external_name":"filename","restriction":""}],"double_splat":null,"splat_index":null,"yields":0,"block_arg":{"name":"proc","doc":null,"default_value":"","external_name":"proc","restriction":"Operation"},"return_type":"","visibility":"Public","body":"if (filename.split(\"/\")).last =~ PATTERN\n  Ktistec::Database.all_migrations.tap do |all_migrations|\n    all_migrations[$~[1].to_i] = if (    definition = all_migrations[$~[1].to_i]?)\n      definition.copy_with(up: proc)\n    else\n      Definition.new(name: $~[2], up: proc)\n    end\n  end\nend"}}],"macros":[],"types":[]}]},{"html_id":"ktistec/Ktistec/HTML","path":"Ktistec/HTML.html","kind":"module","full_name":"Ktistec::HTML","name":"HTML","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[{"html_id":"ktistec/Ktistec/HTML","kind":"module","full_name":"Ktistec::HTML","name":"HTML"}],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec","kind":"module","full_name":"Ktistec","name":"Ktistec"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"enhance(content)-instance-method","html_id":"enhance(content)-instance-method","name":"enhance","doc":"Improves the content we generate ourselves.\n","summary":"<p>Improves the content we generate ourselves.</p>","abstract":false,"args":[{"name":"content","doc":null,"default_value":"","external_name":"content","restriction":""}],"args_string":"(content)","args_html":"(content)","location":{"filename":"src/utils/html.cr","line_number":27,"url":null},"def":{"name":"enhance","args":[{"name":"content","doc":null,"default_value":"","external_name":"content","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if content.nil? || content.empty?\n  return Enhancements.new\nend\nxml = XML.parse_html(\"<div>#{content}</div>\", ((((XML::HTMLParserOptions::RECOVER | XML::HTMLParserOptions::NODEFDTD) | XML::HTMLParserOptions::NOIMPLIED) | XML::HTMLParserOptions::NOERROR) | XML::HTMLParserOptions::NOWARNING) | XML::HTMLParserOptions::NONET)\nEnhancements.new.tap do |enhancements|\n  (xml.xpath_nodes(\"//figure\")).each do |figure|\n    (figure.xpath_nodes(\".//img\")).each do |image|\n      enhancements.attachments << (Attachment.new(image[\"src\"], figure[\"data-trix-content-type\"]))\n    end\n    (figure.xpath_nodes(\".//a[.//img]\")).each do |anchor|\n      children = anchor.children\n      anchor.unlink\n      children.each do |child|\n        figure.add_child(child)\n      end\n    end\n    (figure.xpath_nodes(\".//figcaption\")).each do |caption|\n      caption.attributes.map(&.name).each do |attr|\n        caption.delete(attr)\n      end\n    end\n    figure.attributes.map(&.name).each do |attr|\n      figure.delete(attr)\n    end\n  end\n  (xml.xpath_nodes(\"//node()[not(self::a)]/text()\")).each do |text|\n    if ((remainder = text.text).includes?('#')) || (remainder.includes?('@'))\n      cursor = insertion = (XML.parse(\"<span/>\")).first_element_child.not_nil!\n      text.replace_with(insertion)\n      while !remainder.empty?\n        text, tag, remainder = remainder.partition(/\\B(#([[:alnum:]][[:alnum:]_-]+)|@[^@\\s]+@[^@\\s]+)\\b/)\n        if text.empty?\n        else\n          cursor = cursor.add_sibling(XML::Node.new(text))\n        end\n        if tag.empty?\n        else\n          if tag[0] == '#'\n            hashtag = tag[1..]\n            node = \"<a href=\\\"#{Ktistec.host}/tags/#{hashtag}\\\" class=\\\"hashtag\\\" rel=\\\"tag\\\">##{hashtag}</a>\"\n            cursor = cursor.add_sibling((XML.parse(node)).first_element_child.not_nil!)\n            enhancements.hashtags << Hashtag.new(name: hashtag, href: \"#{Ktistec.host}/tags/#{hashtag}\")\n          else\n            mention = tag[1..]\n            node = (            actor = ActivityPub::Actor.match?(mention)) ? \"<a href=\\\"#{actor.iri}\\\" class=\\\"mention\\\" rel=\\\"tag\\\">@#{actor.username}</a>\" : \"<span class=\\\"mention\\\">@#{mention}</span>\"\n            cursor = cursor.add_sibling((XML.parse(node)).first_element_child.not_nil!)\n            enhancements.mentions << Mention.new(name: mention, href: actor.try(&.iri))\n          end\n        end\n      end\n      insertion.unlink\n    end\n  end\n  enhancements.content = String.build do |build|\n    (xml.xpath_nodes(\"/*/node()\")).each do |node|\n      if node.name == \"div\"\n        build << \"<p>\"\n        node.children.each do |child|\n          if (child.name == \"br\") && (child.next.try(&.name) == \"br\")\n          else\n            if (child.name == \"br\") && (child.previous.try(&.name) == \"br\")\n              build << \"</p><p>\"\n            else\n              if child.name == \"figure\"\n                build << \"</p>\"\n                child.to_xml(build, options: XML::SaveOptions::AS_HTML)\n                build << \"<p>\"\n              else\n                child.to_xml(build, options: XML::SaveOptions::AS_HTML)\n              end\n            end\n          end\n        end\n        build << \"</p>\"\n      else\n        node.to_xml(build, options: XML::SaveOptions::AS_HTML)\n      end\n    end\n  end.gsub(/<p><br><\\/p>|<p><\\/p>/, \"\")\nend\n"}}],"macros":[],"types":[{"html_id":"ktistec/Ktistec/HTML/Attachment","path":"Ktistec/HTML/Attachment.html","kind":"alias","full_name":"Ktistec::HTML::Attachment","name":"Attachment","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":true,"aliased":"ActivityPub::Object::Attachment","aliased_html":"<a href=\"../../ActivityPub/Object/Attachment.html\">ActivityPub::Object::Attachment</a>","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec/HTML","kind":"module","full_name":"Ktistec::HTML","name":"HTML"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/Ktistec/HTML/Enhancements","path":"Ktistec/HTML/Enhancements.html","kind":"class","full_name":"Ktistec::HTML::Enhancements","name":"Enhancements","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec/HTML","kind":"module","full_name":"Ktistec::HTML","name":"HTML"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"attachments:Array(Attachment)-instance-method","html_id":"attachments:Array(Attachment)-instance-method","name":"attachments","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(Attachment)","args_html":" : <a href=\"../../Array.html\">Array</a>(<a href=\"../../Ktistec/HTML/Attachment.html\">Attachment</a>)","location":{"filename":"src/utils/html.cr","line_number":20,"url":null},"def":{"name":"attachments","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(Attachment)","visibility":"Public","body":"@attachments"}},{"id":"attachments=(attachments:Array(Attachment))-instance-method","html_id":"attachments=(attachments:Array(Attachment))-instance-method","name":"attachments=","doc":null,"summary":null,"abstract":false,"args":[{"name":"attachments","doc":null,"default_value":"","external_name":"attachments","restriction":"Array(Attachment)"}],"args_string":"(attachments : Array(Attachment))","args_html":"(attachments : <a href=\"../../Array.html\">Array</a>(<a href=\"../../Ktistec/HTML/Attachment.html\">Attachment</a>))","location":{"filename":"src/utils/html.cr","line_number":20,"url":null},"def":{"name":"attachments=","args":[{"name":"attachments","doc":null,"default_value":"","external_name":"attachments","restriction":"Array(Attachment)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@attachments = attachments"}},{"id":"content:String-instance-method","html_id":"content:String-instance-method","name":"content","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","args_html":" : String","location":{"filename":"src/utils/html.cr","line_number":19,"url":null},"def":{"name":"content","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@content"}},{"id":"content=(content:String)-instance-method","html_id":"content=(content:String)-instance-method","name":"content=","doc":null,"summary":null,"abstract":false,"args":[{"name":"content","doc":null,"default_value":"","external_name":"content","restriction":"String"}],"args_string":"(content : String)","args_html":"(content : String)","location":{"filename":"src/utils/html.cr","line_number":19,"url":null},"def":{"name":"content=","args":[{"name":"content","doc":null,"default_value":"","external_name":"content","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@content = content"}},{"id":"hashtags:Array(Hashtag)-instance-method","html_id":"hashtags:Array(Hashtag)-instance-method","name":"hashtags","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(Hashtag)","args_html":" : <a href=\"../../Array.html\">Array</a>(<a href=\"../../Ktistec/HTML/Hashtag.html\">Hashtag</a>)","location":{"filename":"src/utils/html.cr","line_number":21,"url":null},"def":{"name":"hashtags","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(Hashtag)","visibility":"Public","body":"@hashtags"}},{"id":"hashtags=(hashtags:Array(Hashtag))-instance-method","html_id":"hashtags=(hashtags:Array(Hashtag))-instance-method","name":"hashtags=","doc":null,"summary":null,"abstract":false,"args":[{"name":"hashtags","doc":null,"default_value":"","external_name":"hashtags","restriction":"Array(Hashtag)"}],"args_string":"(hashtags : Array(Hashtag))","args_html":"(hashtags : <a href=\"../../Array.html\">Array</a>(<a href=\"../../Ktistec/HTML/Hashtag.html\">Hashtag</a>))","location":{"filename":"src/utils/html.cr","line_number":21,"url":null},"def":{"name":"hashtags=","args":[{"name":"hashtags","doc":null,"default_value":"","external_name":"hashtags","restriction":"Array(Hashtag)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@hashtags = hashtags"}},{"id":"mentions:Array(Mention)-instance-method","html_id":"mentions:Array(Mention)-instance-method","name":"mentions","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(Mention)","args_html":" : <a href=\"../../Array.html\">Array</a>(<a href=\"../../Ktistec/HTML/Mention.html\">Mention</a>)","location":{"filename":"src/utils/html.cr","line_number":22,"url":null},"def":{"name":"mentions","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(Mention)","visibility":"Public","body":"@mentions"}},{"id":"mentions=(mentions:Array(Mention))-instance-method","html_id":"mentions=(mentions:Array(Mention))-instance-method","name":"mentions=","doc":null,"summary":null,"abstract":false,"args":[{"name":"mentions","doc":null,"default_value":"","external_name":"mentions","restriction":"Array(Mention)"}],"args_string":"(mentions : Array(Mention))","args_html":"(mentions : <a href=\"../../Array.html\">Array</a>(<a href=\"../../Ktistec/HTML/Mention.html\">Mention</a>))","location":{"filename":"src/utils/html.cr","line_number":22,"url":null},"def":{"name":"mentions=","args":[{"name":"mentions","doc":null,"default_value":"","external_name":"mentions","restriction":"Array(Mention)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@mentions = mentions"}}],"macros":[],"types":[]},{"html_id":"ktistec/Ktistec/HTML/Hashtag","path":"Ktistec/HTML/Hashtag.html","kind":"alias","full_name":"Ktistec::HTML::Hashtag","name":"Hashtag","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":true,"aliased":"Tag::Hashtag","aliased_html":"<a href=\"../../Tag/Hashtag.html\">Tag::Hashtag</a>","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec/HTML","kind":"module","full_name":"Ktistec::HTML","name":"HTML"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/Ktistec/HTML/Mention","path":"Ktistec/HTML/Mention.html","kind":"alias","full_name":"Ktistec::HTML::Mention","name":"Mention","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":true,"aliased":"Tag::Mention","aliased_html":"<a href=\"../../Tag/Mention.html\">Tag::Mention</a>","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec/HTML","kind":"module","full_name":"Ktistec::HTML","name":"HTML"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]}]},{"html_id":"ktistec/Ktistec/JSON_LD","path":"Ktistec/JSON_LD.html","kind":"module","full_name":"Ktistec::JSON_LD","name":"JSON_LD","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec","kind":"module","full_name":"Ktistec","name":"Ktistec"},"doc":null,"summary":null,"class_methods":[{"id":"expand(body,loader=Loader.new)-class-method","html_id":"expand(body,loader=Loader.new)-class-method","name":"expand","doc":"Expands the JSON-LD document.\n","summary":"<p>Expands the JSON-LD document.</p>","abstract":false,"args":[{"name":"body","doc":null,"default_value":"","external_name":"body","restriction":""},{"name":"loader","doc":null,"default_value":"Loader.new","external_name":"loader","restriction":""}],"args_string":"(body, loader = <span class=\"t\">Loader</span>.<span class=\"k\">new</span>)","args_html":"(body, loader = <span class=\"t\">Loader</span>.<span class=\"k\">new</span>)","location":{"filename":"src/framework/json_ld.cr","line_number":17,"url":null},"def":{"name":"expand","args":[{"name":"body","doc":null,"default_value":"","external_name":"body","restriction":""},{"name":"loader","doc":null,"default_value":"Loader.new","external_name":"loader","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if body.is_a?(String | IO)\n  body = JSON.parse(body)\nend\nLog.info do\n  body\nend\nexpand(body, context(body[\"@context\"]? || empty, loader), loader)\n"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"ktistec/Ktistec/JSON_LD/Loader","path":"Ktistec/JSON_LD/Loader.html","kind":"class","full_name":"Ktistec::JSON_LD::Loader","name":"Loader","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec/JSON_LD","kind":"module","full_name":"Ktistec::JSON_LD","name":"JSON_LD"},"doc":"Loads context from cache.\n","summary":"<p>Loads context from cache.</p>","class_methods":[],"constructors":[],"instance_methods":[{"id":"load(url)-instance-method","html_id":"load(url)-instance-method","name":"load","doc":null,"summary":null,"abstract":false,"args":[{"name":"url","doc":null,"default_value":"","external_name":"url","restriction":""}],"args_string":"(url)","args_html":"(url)","location":{"filename":"src/framework/json_ld.cr","line_number":119,"url":null},"def":{"name":"load","args":[{"name":"url","doc":null,"default_value":"","external_name":"url","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  uri = URI.parse(url)\n  CONTEXTS.dig(\"#{uri.host}#{uri.path}/context.jsonld\", \"@context\")\nrescue KeyError\n  Log.info do\n    \"uncached external context not loaded: #{url}\"\n  end\n  empty\nend"}}],"macros":[],"types":[]}]},{"html_id":"ktistec/Ktistec/JWT","path":"Ktistec/JWT.html","kind":"module","full_name":"Ktistec::JWT","name":"JWT","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec","kind":"module","full_name":"Ktistec","name":"Ktistec"},"doc":null,"summary":null,"class_methods":[{"id":"decode(token,secret_key=Ktistec.secret_key)-class-method","html_id":"decode(token,secret_key=Ktistec.secret_key)-class-method","name":"decode","doc":"Decodes the token. Returns the payload.\n","summary":"<p>Decodes the token.</p>","abstract":false,"args":[{"name":"token","doc":null,"default_value":"","external_name":"token","restriction":""},{"name":"secret_key","doc":null,"default_value":"Ktistec.secret_key","external_name":"secret_key","restriction":""}],"args_string":"(token, secret_key = <span class=\"t\">Ktistec</span>.secret_key)","args_html":"(token, secret_key = <span class=\"t\">Ktistec</span>.secret_key)","location":{"filename":"src/framework/jwt.cr","line_number":22,"url":null},"def":{"name":"decode","args":[{"name":"token","doc":null,"default_value":"","external_name":"token","restriction":""},{"name":"secret_key","doc":null,"default_value":"Ktistec.secret_key","external_name":"secret_key","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  hashed_header, hashed_payload, hashed_signature = token.split(\".\")\n  if verify(Base64.decode_string(hashed_signature), \"#{hashed_header}.#{hashed_payload}\", secret_key)\n  else\n    raise(Error.new)\n  end\n  JSON.parse(Base64.decode_string(hashed_payload))\nrescue ex : JSON::ParseException | Base64::Error | IndexError\n  raise(Error.new(ex.message))\nend"}},{"id":"encode(payload,secret_key=Ktistec.secret_key)-class-method","html_id":"encode(payload,secret_key=Ktistec.secret_key)-class-method","name":"encode","doc":"Encodes the payload. Generates a token.\n","summary":"<p>Encodes the payload.</p>","abstract":false,"args":[{"name":"payload","doc":null,"default_value":"","external_name":"payload","restriction":""},{"name":"secret_key","doc":null,"default_value":"Ktistec.secret_key","external_name":"secret_key","restriction":""}],"args_string":"(payload, secret_key = <span class=\"t\">Ktistec</span>.secret_key)","args_html":"(payload, secret_key = <span class=\"t\">Ktistec</span>.secret_key)","location":{"filename":"src/framework/jwt.cr","line_number":11,"url":null},"def":{"name":"encode","args":[{"name":"payload","doc":null,"default_value":"","external_name":"payload","restriction":""},{"name":"secret_key","doc":null,"default_value":"Ktistec.secret_key","external_name":"secret_key","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"parts = [] of String\nheader = {\"typ\" => \"JWT\", \"alg\" => \"HS256\"}\nparts << (encode64(header.to_json))\nparts << (encode64(payload.to_json))\nparts << (encode64(sign(parts.join(\".\"), secret_key)))\nparts.join(\".\")\n"}},{"id":"expired?(payload)-class-method","html_id":"expired?(payload)-class-method","name":"expired?","doc":null,"summary":null,"abstract":false,"args":[{"name":"payload","doc":null,"default_value":"","external_name":"payload","restriction":""}],"args_string":"(payload)","args_html":"(payload)","location":{"filename":"src/framework/jwt.cr","line_number":34,"url":null},"def":{"name":"expired?","args":[{"name":"payload","doc":null,"default_value":"","external_name":"payload","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(Time.parse_iso8601(payload[\"iat\"].as_s)) < (Time.utc - 1.month)"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"ktistec/Ktistec/JWT/Error","path":"Ktistec/JWT/Error.html","kind":"class","full_name":"Ktistec::JWT::Error","name":"Error","abstract":false,"superclass":{"html_id":"ktistec/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"ktistec/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec/JWT","kind":"module","full_name":"Ktistec::JWT","name":"JWT"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]}]},{"html_id":"ktistec/Ktistec/Method","path":"Ktistec/Method.html","kind":"class","full_name":"Ktistec::Method","name":"Method","abstract":false,"superclass":{"html_id":"ktistec/Kemal/Handler","kind":"class","full_name":"Kemal::Handler","name":"Handler"},"ancestors":[{"html_id":"ktistec/Kemal/Handler","kind":"class","full_name":"Kemal::Handler","name":"Handler"},{"html_id":"ktistec/HTTP/Handler","kind":"module","full_name":"HTTP::Handler","name":"Handler"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec","kind":"module","full_name":"Ktistec","name":"Ktistec"},"doc":"HTTP method aliasing.\n","summary":"<p>HTTP method aliasing.</p>","class_methods":[],"constructors":[],"instance_methods":[{"id":"call(env)-instance-method","html_id":"call(env)-instance-method","name":"call","doc":null,"summary":null,"abstract":false,"args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(env)","args_html":"(env)","location":{"filename":"src/framework/method.cr","line_number":14,"url":null},"def":{"name":"call","args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if env.request.path == \"/uploads\"\n  return call_next(env)\nend\nif env.request.method == \"POST\"\nelse\n  return call_next(env)\nend\nif env.params.body[\"_method\"]? == \"delete\"\nelse\n  return call_next(env)\nend\nenv.request.method = env.params.body[\"_method\"].upcase\nenv.params = Kemal::ParamParser.new(env.request, env.route_lookup.params)\ncall_next(env)\n"}}],"macros":[],"types":[]},{"html_id":"ktistec/Ktistec/Model","path":"Ktistec/Model.html","kind":"module","full_name":"Ktistec::Model(*T)","name":"Model","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[{"html_id":"ktistec/Account","kind":"class","full_name":"Account","name":"Account"},{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},{"html_id":"ktistec/ActivityPub/Actor","kind":"class","full_name":"ActivityPub::Actor","name":"Actor"},{"html_id":"ktistec/ActivityPub/Collection","kind":"class","full_name":"ActivityPub::Collection","name":"Collection"},{"html_id":"ktistec/ActivityPub/Object","kind":"class","full_name":"ActivityPub::Object","name":"Object"},{"html_id":"ktistec/Relationship","kind":"class","full_name":"Relationship","name":"Relationship"},{"html_id":"ktistec/Session","kind":"class","full_name":"Session","name":"Session"},{"html_id":"ktistec/Tag","kind":"class","full_name":"Tag","name":"Tag"},{"html_id":"ktistec/Task","kind":"class","full_name":"Task","name":"Task"}],"namespace":{"html_id":"ktistec/Ktistec","kind":"module","full_name":"Ktistec","name":"Ktistec"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"id:Int64?-instance-method","html_id":"id:Int64?-instance-method","name":"id","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Int64?","args_html":" : Int64?","location":{"filename":"src/framework/model.cr","line_number":713,"url":null},"def":{"name":"id","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Int64 | ::Nil","visibility":"Public","body":"@id"}},{"id":"id=(id:Int64?)-instance-method","html_id":"id=(id:Int64?)-instance-method","name":"id=","doc":null,"summary":null,"abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"Int64 | ::Nil"}],"args_string":"(id : Int64?)","args_html":"(id : Int64?)","location":{"filename":"src/framework/model.cr","line_number":713,"url":null},"def":{"name":"id=","args":[{"name":"id","doc":null,"default_value":"","external_name":"id","restriction":"Int64 | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@id = id"}}],"macros":[{"id":"persistent_columns(prefix=nil)-macro","html_id":"persistent_columns(prefix=nil)-macro","name":"persistent_columns","doc":null,"summary":null,"abstract":false,"args":[{"name":"prefix","doc":null,"default_value":"nil","external_name":"prefix","restriction":""}],"args_string":"(prefix = <span class=\"n\">nil</span>)","location":{"filename":"src/framework/model.cr","line_number":36,"url":null},"def":{"name":"persistent_columns","args":[{"name":"prefix","doc":null,"default_value":"nil","external_name":"prefix","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"      \n{\n        \n{% prefix = prefix ? \"#{prefix.id}.\" : \"\" %}\n\n        \n{% vs = @type.instance_vars.select(&.annotation(Persistent)) %}\n\n        \n{% for v in vs %}\n          \"{{ prefix.id }}{{ v.id }}\": {{ v.type }},\n        {% end %}\n\n      }\n    \n"}}],"types":[{"html_id":"ktistec/Ktistec/Model/Assignable","path":"Ktistec/Model/Assignable.html","kind":"annotation","full_name":"Ktistec::Model::Assignable","name":"Assignable","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model(*T)","name":"Model"},"doc":"Marks properties as bulk assignable.\n","summary":"<p>Marks properties as bulk assignable.</p>","class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/Ktistec/Model/ClassMethods","path":"Ktistec/Model/ClassMethods.html","kind":"module","full_name":"Ktistec::Model::ClassMethods","name":"ClassMethods","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model(*T)","name":"Model"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"all-instance-method","html_id":"all-instance-method","name":"all","doc":"Returns all instances.\n","summary":"<p>Returns all instances.</p>","abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/model.cr","line_number":186,"url":null},"def":{"name":"all","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"query_all(\"SELECT #{columns} FROM #{table} WHERE #{conditions}\")"}},{"id":"columns(prefix=nil)-instance-method","html_id":"columns(prefix=nil)-instance-method","name":"columns","doc":null,"summary":null,"abstract":false,"args":[{"name":"prefix","doc":null,"default_value":"nil","external_name":"prefix","restriction":""}],"args_string":"(prefix = <span class=\"n\">nil</span>)","args_html":"(prefix = <span class=\"n\">nil</span>)","location":{"filename":"src/framework/model.cr","line_number":64,"url":null},"def":{"name":"columns","args":[{"name":"prefix","doc":null,"default_value":"nil","external_name":"prefix","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"prefix = prefix ? \"\\\"#{prefix}\\\".\" : \"\"\n{% if true %}\n          {% vs = @type.instance_vars.select(&.annotation(Persistent)).map do |__arg2|\n  __arg2.stringify.stringify\nend %}\n          {{ vs }}.map { |v| \"#{prefix}#{v}\" }.join(\",\")\n        {% end %}\n"}},{"id":"conditions(*terms,prefix=nil,**options)-instance-method","html_id":"conditions(*terms,prefix=nil,**options)-instance-method","name":"conditions","doc":null,"summary":null,"abstract":false,"args":[{"name":"terms","doc":null,"default_value":"","external_name":"terms","restriction":""},{"name":"prefix","doc":null,"default_value":"nil","external_name":"prefix","restriction":""}],"args_string":"(*terms, prefix = <span class=\"n\">nil</span>, **options)","args_html":"(*terms, prefix = <span class=\"n\">nil</span>, **options)","location":{"filename":"src/framework/model.cr","line_number":72,"url":null},"def":{"name":"conditions","args":[{"name":"terms","doc":null,"default_value":"","external_name":"terms","restriction":""},{"name":"prefix","doc":null,"default_value":"nil","external_name":"prefix","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"prefix = prefix ? \"\\\"#{prefix}\\\".\" : \"\"\n{% if true %}\n          {% vs = @type.instance_vars.select(&.annotation(Persistent)) %}\n          conditions =\n            [\n              {% if @type < Deletable %}\n                \"#{prefix}\\\"deleted_at\\\" IS NULL\",\n              {% end %}\n              {% if @type < Polymorphic %}\n                \"#{prefix}\\\"type\\\" IN (%s)\" % {{ (@type.all_subclasses << @type).map do |__arg4|\n  __arg4.stringify.stringify\nend.join(\",\") }},\n              {% end %}\n            ] of String +\n            options.keys.select { |o| o.in?({{ vs.map(&.symbolize) }}) }.map { |v| \"#{prefix}\\\"#{v}\\\" = ?\" } +\n            terms.to_a\n          conditions.size > 0 ?\n            conditions.join(\" AND \") :\n            \"1\"\n        {% end %}\n"}},{"id":"count(**options)-instance-method","html_id":"count(**options)-instance-method","name":"count","doc":"Returns the count of saved instances.\n","summary":"<p>Returns the count of saved instances.</p>","abstract":false,"args":[],"args_string":"(**options)","args_html":"(**options)","location":{"filename":"src/framework/model.cr","line_number":95,"url":null},"def":{"name":"count","args":[],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(Ktistec.database.scalar(\"SELECT COUNT(id) FROM #{table} WHERE #{conditions(**options)}\", *options.values)).as(Int)"}},{"id":"empty?-instance-method","html_id":"empty?-instance-method","name":"empty?","doc":"Returns true if no instances exist.\n","summary":"<p>Returns true if no instances exist.</p>","abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/model.cr","line_number":55,"url":null},"def":{"name":"empty?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"count == 0"}},{"id":"find(_idid:Int?)-instance-method","html_id":"find(_idid:Int?)-instance-method","name":"find","doc":"Finds the saved instance.\n\nRaises `NotFound` if no such saved instance exists.\n","summary":"<p>Finds the saved instance.</p>","abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"_id","restriction":"Int | ::Nil"}],"args_string":"(_id id : Int?)","args_html":"(_id id : Int?)","location":{"filename":"src/framework/model.cr","line_number":194,"url":null},"def":{"name":"find","args":[{"name":"id","doc":null,"default_value":"","external_name":"_id","restriction":"Int | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  query_one(\"SELECT #{columns} FROM #{table} WHERE #{conditions(id: id)}\", id)\nrescue DB::NoResultsError\n  raise(NotFound.new(\"#{self} id=#{id}: not found\"))\nend"}},{"id":"find(**options)-instance-method","html_id":"find(**options)-instance-method","name":"find","doc":"Finds the saved instance.\n\nRaises `NotFound` if no such saved instance exists.\n","summary":"<p>Finds the saved instance.</p>","abstract":false,"args":[],"args_string":"(**options)","args_html":"(**options)","location":{"filename":"src/framework/model.cr","line_number":213,"url":null},"def":{"name":"find","args":[],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  query_one(\"SELECT #{columns} FROM #{table} WHERE #{conditions(**options)}\", *options.values)\nrescue DB::NoResultsError\n  raise(NotFound.new(\"#{self} options=#{options}: not found\"))\nend"}},{"id":"find?(_idid:Int?)-instance-method","html_id":"find?(_idid:Int?)-instance-method","name":"find?","doc":"Finds the saved instance.\n\nReturns `nil` if no such saved instance exists.\n","summary":"<p>Finds the saved instance.</p>","abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"_id","restriction":"Int | ::Nil"}],"args_string":"(_id id : Int?)","args_html":"(_id id : Int?)","location":{"filename":"src/framework/model.cr","line_number":204,"url":null},"def":{"name":"find?","args":[{"name":"id","doc":null,"default_value":"","external_name":"_id","restriction":"Int | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  find(id)\nrescue NotFound\nend"}},{"id":"find?(**options)-instance-method","html_id":"find?(**options)-instance-method","name":"find?","doc":"Finds the saved instance.\n\nReturns `nil` if no such saved instance exists.\n","summary":"<p>Finds the saved instance.</p>","abstract":false,"args":[],"args_string":"(**options)","args_html":"(**options)","location":{"filename":"src/framework/model.cr","line_number":223,"url":null},"def":{"name":"find?","args":[],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  find(**options)\nrescue NotFound\nend"}},{"id":"persistent_columns-instance-method","html_id":"persistent_columns-instance-method","name":"persistent_columns","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/model.cr","line_number":101,"url":null},"def":{"name":"persistent_columns","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"{% if true %}\n          {\n            {% for v in @type.instance_vars.select(&.annotation(Persistent)) %}\n              {{ v }}: {{ v.type }},\n            {% end %}\n          }\n        {% end %}"}},{"id":"table(as_name=nil)-instance-method","html_id":"table(as_name=nil)-instance-method","name":"table","doc":null,"summary":null,"abstract":false,"args":[{"name":"as_name","doc":null,"default_value":"nil","external_name":"as_name","restriction":""}],"args_string":"(as_name = <span class=\"n\">nil</span>)","args_html":"(as_name = <span class=\"n\">nil</span>)","location":{"filename":"src/framework/model.cr","line_number":59,"url":null},"def":{"name":"table","args":[{"name":"as_name","doc":null,"default_value":"nil","external_name":"as_name","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"as_name = as_name ? \" AS \\\"#{as_name}\\\"\" : \"\"\n\"\\\"#{table_name}\\\"#{as_name}\"\n"}},{"id":"table_name-instance-method","html_id":"table_name-instance-method","name":"table_name","doc":"Returns the table name.\n","summary":"<p>Returns the table name.</p>","abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/model.cr","line_number":49,"url":null},"def":{"name":"table_name","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@table_name || (@@table_name = Utils.table_name(self))"}},{"id":"where(where:String,*arguments)-instance-method","html_id":"where(where:String,*arguments)-instance-method","name":"where","doc":"Returns saved instances.\n","summary":"<p>Returns saved instances.</p>","abstract":false,"args":[{"name":"where","doc":null,"default_value":"","external_name":"where","restriction":"String"},{"name":"arguments","doc":null,"default_value":"","external_name":"arguments","restriction":""}],"args_string":"(where : String, *arguments)","args_html":"(where : String, *arguments)","location":{"filename":"src/framework/model.cr","line_number":236,"url":null},"def":{"name":"where","args":[{"name":"where","doc":null,"default_value":"","external_name":"where","restriction":"String"},{"name":"arguments","doc":null,"default_value":"","external_name":"arguments","restriction":""}],"double_splat":null,"splat_index":1,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"query_all(\"SELECT #{columns} FROM #{table} WHERE #{conditions(where)}\", *arguments)"}},{"id":"where(**options)-instance-method","html_id":"where(**options)-instance-method","name":"where","doc":"Returns saved instances.\n","summary":"<p>Returns saved instances.</p>","abstract":false,"args":[],"args_string":"(**options)","args_html":"(**options)","location":{"filename":"src/framework/model.cr","line_number":230,"url":null},"def":{"name":"where","args":[],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"query_all(\"SELECT #{columns} FROM #{table} WHERE #{conditions(**options)}\", *options.values)"}}],"macros":[],"types":[]},{"html_id":"ktistec/Ktistec/Model/Common","path":"Ktistec/Model/Common.html","kind":"module","full_name":"Ktistec::Model::Common","name":"Common","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[{"html_id":"ktistec/Account","kind":"class","full_name":"Account","name":"Account"},{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},{"html_id":"ktistec/ActivityPub/Actor","kind":"class","full_name":"ActivityPub::Actor","name":"Actor"},{"html_id":"ktistec/ActivityPub/Collection","kind":"class","full_name":"ActivityPub::Collection","name":"Collection"},{"html_id":"ktistec/ActivityPub/Object","kind":"class","full_name":"ActivityPub::Object","name":"Object"},{"html_id":"ktistec/Relationship","kind":"class","full_name":"Relationship","name":"Relationship"},{"html_id":"ktistec/Session","kind":"class","full_name":"Session","name":"Session"},{"html_id":"ktistec/Tag","kind":"class","full_name":"Tag","name":"Tag"},{"html_id":"ktistec/Task","kind":"class","full_name":"Task","name":"Task"}],"namespace":{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model(*T)","name":"Model"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"created_at:Time?-instance-method","html_id":"created_at:Time?-instance-method","name":"created_at","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Time?","args_html":" : Time?","location":{"filename":"src/framework/model/common.cr","line_number":8,"url":null},"def":{"name":"created_at","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Time | ::Nil","visibility":"Public","body":"if (value = @created_at).nil?\n  @created_at = (Time.utc)\nelse\n  value\nend"}},{"id":"created_at=(created_at:Time)-instance-method","html_id":"created_at=(created_at:Time)-instance-method","name":"created_at=","doc":null,"summary":null,"abstract":false,"args":[{"name":"created_at","doc":null,"default_value":"","external_name":"created_at","restriction":"Time"}],"args_string":"(created_at : Time)","args_html":"(created_at : Time)","location":{"filename":"src/framework/model/common.cr","line_number":8,"url":null},"def":{"name":"created_at=","args":[{"name":"created_at","doc":null,"default_value":"","external_name":"created_at","restriction":"Time"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@created_at = created_at"}},{"id":"updated_at:Time?-instance-method","html_id":"updated_at:Time?-instance-method","name":"updated_at","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Time?","args_html":" : Time?","location":{"filename":"src/framework/model/common.cr","line_number":12,"url":null},"def":{"name":"updated_at","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Time | ::Nil","visibility":"Public","body":"if (value = @updated_at).nil?\n  @updated_at = (Time.utc)\nelse\n  value\nend"}},{"id":"updated_at=(updated_at:Time)-instance-method","html_id":"updated_at=(updated_at:Time)-instance-method","name":"updated_at=","doc":null,"summary":null,"abstract":false,"args":[{"name":"updated_at","doc":null,"default_value":"","external_name":"updated_at","restriction":"Time"}],"args_string":"(updated_at : Time)","args_html":"(updated_at : Time)","location":{"filename":"src/framework/model/common.cr","line_number":12,"url":null},"def":{"name":"updated_at=","args":[{"name":"updated_at","doc":null,"default_value":"","external_name":"updated_at","restriction":"Time"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@updated_at = updated_at"}}],"macros":[],"types":[]},{"html_id":"ktistec/Ktistec/Model/Deletable","path":"Ktistec/Model/Deletable.html","kind":"module","full_name":"Ktistec::Model::Deletable","name":"Deletable","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[{"html_id":"ktistec/ActivityPub/Actor","kind":"class","full_name":"ActivityPub::Actor","name":"Actor"},{"html_id":"ktistec/ActivityPub/Object","kind":"class","full_name":"ActivityPub::Object","name":"Object"}],"namespace":{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model(*T)","name":"Model"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"delete-instance-method","html_id":"delete-instance-method","name":"delete","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/model/deletable.cr","line_number":10,"url":null},"def":{"name":"delete","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Ktistec.database.exec(\"UPDATE #{table_name} SET deleted_at = ? WHERE id = ?\", @deleted_at = Time.utc, @id)\n@id = nil\nself\n"}},{"id":"deleted?-instance-method","html_id":"deleted?-instance-method","name":"deleted?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/model/deletable.cr","line_number":16,"url":null},"def":{"name":"deleted?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"deleted_at"}},{"id":"deleted_at:Time?-instance-method","html_id":"deleted_at:Time?-instance-method","name":"deleted_at","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Time?","args_html":" : Time?","location":{"filename":"src/framework/model/deletable.cr","line_number":8,"url":null},"def":{"name":"deleted_at","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Time | ::Nil","visibility":"Public","body":"@deleted_at"}},{"id":"deleted_at=(deleted_at:Time?)-instance-method","html_id":"deleted_at=(deleted_at:Time?)-instance-method","name":"deleted_at=","doc":null,"summary":null,"abstract":false,"args":[{"name":"deleted_at","doc":null,"default_value":"","external_name":"deleted_at","restriction":"Time | ::Nil"}],"args_string":"(deleted_at : Time?)","args_html":"(deleted_at : Time?)","location":{"filename":"src/framework/model/deletable.cr","line_number":8,"url":null},"def":{"name":"deleted_at=","args":[{"name":"deleted_at","doc":null,"default_value":"","external_name":"deleted_at","restriction":"Time | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@deleted_at = deleted_at"}}],"macros":[],"types":[]},{"html_id":"ktistec/Ktistec/Model/Error","path":"Ktistec/Model/Error.html","kind":"class","full_name":"Ktistec::Model::Error","name":"Error","abstract":false,"superclass":{"html_id":"ktistec/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"ktistec/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model(*T)","name":"Model"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/Ktistec/Model/Errors","path":"Ktistec/Model/Errors.html","kind":"alias","full_name":"Ktistec::Model::Errors","name":"Errors","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":true,"aliased":"Hash(String, Array(String))","aliased_html":"<a href=\"../../Hash.html\">Hash</a>(String, <a href=\"../../Array.html\">Array(String)</a>)","const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model(*T)","name":"Model"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/Ktistec/Model/Insignificant","path":"Ktistec/Model/Insignificant.html","kind":"annotation","full_name":"Ktistec::Model::Insignificant","name":"Insignificant","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model(*T)","name":"Model"},"doc":"Marks properties as insignificant (not part of identity).\n","summary":"<p>Marks properties as insignificant (not part of identity).</p>","class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","path":"Ktistec/Model/InstanceMethods.html","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[{"html_id":"ktistec/Account","kind":"class","full_name":"Account","name":"Account"},{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},{"html_id":"ktistec/ActivityPub/Actor","kind":"class","full_name":"ActivityPub::Actor","name":"Actor"},{"html_id":"ktistec/ActivityPub/Collection","kind":"class","full_name":"ActivityPub::Collection","name":"Collection"},{"html_id":"ktistec/ActivityPub/Object","kind":"class","full_name":"ActivityPub::Object","name":"Object"},{"html_id":"ktistec/Relationship","kind":"class","full_name":"Relationship","name":"Relationship"},{"html_id":"ktistec/Session","kind":"class","full_name":"Session","name":"Session"},{"html_id":"ktistec/Tag","kind":"class","full_name":"Tag","name":"Tag"},{"html_id":"ktistec/Task","kind":"class","full_name":"Task","name":"Task"}],"namespace":{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model(*T)","name":"Model"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(options:Hash,prefix:String=&quot;&quot;)-class-method","html_id":"new(options:Hash,prefix:String=&quot;&quot;)-class-method","name":"new","doc":"Initializes the new instance.\n","summary":"<p>Initializes the new instance.</p>","abstract":false,"args":[{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":"Hash"},{"name":"prefix","doc":null,"default_value":"\"\"","external_name":"prefix","restriction":"String"}],"args_string":"(options : Hash, prefix : String = <span class=\"s\">&quot;&quot;</span>)","args_html":"(options : <a href=\"../../Hash.html\">Hash</a>, prefix : String = <span class=\"s\">&quot;&quot;</span>)","location":{"filename":"src/framework/model.cr","line_number":246,"url":null},"def":{"name":"new","args":[{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":"Hash"},{"name":"prefix","doc":null,"default_value":"\"\"","external_name":"prefix","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(options, prefix)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}},{"id":"new(**options)-class-method","html_id":"new(**options)-class-method","name":"new","doc":"Initializes the new instance.\n","summary":"<p>Initializes the new instance.</p>","abstract":false,"args":[],"args_string":"(**options)","args_html":"(**options)","location":{"filename":"src/framework/model.cr","line_number":264,"url":null},"def":{"name":"new","args":[],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(**options)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"==(other)-instance-method","html_id":"==(other)-instance-method","name":"==","doc":"Returns true if all persistent properties are equal.\n","summary":"<p>Returns true if all persistent properties are equal.</p>","abstract":false,"args":[{"name":"other","doc":null,"default_value":"","external_name":"other","restriction":""}],"args_string":"(other)","args_html":"(other)","location":{"filename":"src/framework/model.cr","line_number":316,"url":null},"def":{"name":"==","args":[{"name":"other","doc":null,"default_value":"","external_name":"other","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if other.is_a?(self)\n  {% if true %}\n            {% vs = @type.instance_vars.select do |v|\n    (v.annotation(Persistent)) && (!(v.annotation(Insignificant)))\n  end %}\n            self.same?(other) || ({{ (vs.map do |v|\n    \"self.#{v} == other.#{v}\"\n  end.join(\" && \")).id }})\n          {% end %}\nelse\n  false\nend"}},{"id":"_run_validations-instance-method","html_id":"_run_validations-instance-method","name":"_run_validations","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/model.cr","line_number":542,"url":null},"def":{"name":"_run_validations","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@errors.clear\n{% if true %}\n          if self.responds_to?(:validate_model)\n            self.validate_model\n          end\n          {% vs = @type.instance_vars.select do |v|\n  (v.annotation(Assignable)) || (v.annotation(Persistent))\nend %}\n          {% for v in vs %}\n            if self.responds_to?(:_validate_{{ v }})\n              if error = self._validate_{{ v }}\n                @errors[{{ v.stringify }}] = [error]\n              end\n            end\n          {% end %}\n        {% end %}\n@errors\n"}},{"id":"_save_model(skip_validation=false)-instance-method","html_id":"_save_model(skip_validation=false)-instance-method","name":"_save_model","doc":null,"summary":null,"abstract":false,"args":[{"name":"skip_validation","doc":null,"default_value":"false","external_name":"skip_validation","restriction":""}],"args_string":"(skip_validation = <span class=\"n\">false</span>)","args_html":"(skip_validation = <span class=\"n\">false</span>)","location":{"filename":"src/framework/model.cr","line_number":587,"url":null},"def":{"name":"_save_model","args":[{"name":"skip_validation","doc":null,"default_value":"false","external_name":"skip_validation","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"{% if true %}\n          {% vs = @type.instance_vars.select(&.annotation(Persistent)) %}\n          columns = {{ vs.map do |__arg11|\n  __arg11.stringify.stringify\nend.join(\",\") }}\n          conditions = ([\"?\"] * {{ vs.size }}).join(\",\")\n          if self.responds_to?(:updated_at=)\n            self.updated_at = Time.utc\n          end\n          @id = Ktistec.database.exec(\n            \"INSERT OR REPLACE INTO #{table_name} (#{columns}) VALUES (#{conditions})\",\n            {% for v in vs %}\n              self.{{ v }},\n            {% end %}\n          ).last_insert_id\n        {% end %}\nclear!\n"}},{"id":"_serialize_graph(result,association=nil,index=nil,skip_associated=false)-instance-method","html_id":"_serialize_graph(result,association=nil,index=nil,skip_associated=false)-instance-method","name":"_serialize_graph","doc":null,"summary":null,"abstract":false,"args":[{"name":"result","doc":null,"default_value":"","external_name":"result","restriction":""},{"name":"association","doc":null,"default_value":"nil","external_name":"association","restriction":""},{"name":"index","doc":null,"default_value":"nil","external_name":"index","restriction":""},{"name":"skip_associated","doc":null,"default_value":"false","external_name":"skip_associated","restriction":""}],"args_string":"(result, association = <span class=\"n\">nil</span>, index = <span class=\"n\">nil</span>, skip_associated = <span class=\"n\">false</span>)","args_html":"(result, association = <span class=\"n\">nil</span>, index = <span class=\"n\">nil</span>, skip_associated = <span class=\"n\">false</span>)","location":{"filename":"src/framework/model.cr","line_number":462,"url":null},"def":{"name":"_serialize_graph","args":[{"name":"result","doc":null,"default_value":"","external_name":"result","restriction":""},{"name":"association","doc":null,"default_value":"nil","external_name":"association","restriction":""},{"name":"index","doc":null,"default_value":"nil","external_name":"index","restriction":""},{"name":"skip_associated","doc":null,"default_value":"false","external_name":"skip_associated","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if self.destroyed?\n  return\nend\n{% if @type < Deletable %}\n          return if self.deleted?\n        {% end %}\nresult << (Node.new(self, association, index))\n{% if true %}\n          {% ancestors = @type.ancestors << @type %}\n          {% methods = ancestors.map(&.methods).reduce do |a, b|\n  a + b\nend %}\n          {% methods = methods.select do |d|\n  d.name.starts_with?(\"_belongs_to_\")\nend %}\n          unless skip_associated\n            options = {skip_associated: skip_associated}\n            {% for d in methods %}\n              if (%body = {{ d.body }})\n                if %body.responds_to?(:each)\n                  %body.each_with_index do |model, i|\n                    unless result.any? { |node| model == node.model }\n                      model._serialize_graph(result, {{ d.name[12..-1].stringify }}, i, **options)\n                    end\n                  end\n                else\n                  unless result.any? { |node| %body == node.model }\n                    %body._serialize_graph(result, {{ d.name[12..-1].stringify }}, **options)\n                  end\n                end\n              end\n            {% end %}\n          end\n        {% end %}\n"}},{"id":"assign(options:Hash,prefix:String=&quot;&quot;)-instance-method","html_id":"assign(options:Hash,prefix:String=&quot;&quot;)-instance-method","name":"assign","doc":"Bulk assigns properties.\n","summary":"<p>Bulk assigns properties.</p>","abstract":false,"args":[{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":"Hash"},{"name":"prefix","doc":null,"default_value":"\"\"","external_name":"prefix","restriction":"String"}],"args_string":"(options : Hash, prefix : String = <span class=\"s\">&quot;&quot;</span>)","args_html":"(options : <a href=\"../../Hash.html\">Hash</a>, prefix : String = <span class=\"s\">&quot;&quot;</span>)","location":{"filename":"src/framework/model.cr","line_number":282,"url":null},"def":{"name":"assign","args":[{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":"Hash"},{"name":"prefix","doc":null,"default_value":"\"\"","external_name":"prefix","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"{% if true %}\n          {% vs = @type.instance_vars.select do |v|\n  (v.annotation(Assignable)) || (v.annotation(Persistent))\nend %}\n          {% for v in vs %}\n            key = prefix + {{ v.stringify }}\n            if options.has_key?(key)\n              if (o = options[key]?).is_a?(typeof(self.{{ v }}))\n                self.{{ v }} = o\n              end\n            end\n          {% end %}\n        {% end %}\nself\n"}},{"id":"assign(**options)-instance-method","html_id":"assign(**options)-instance-method","name":"assign","doc":"Bulk assigns properties.\n","summary":"<p>Bulk assigns properties.</p>","abstract":false,"args":[],"args_string":"(**options)","args_html":"(**options)","location":{"filename":"src/framework/model.cr","line_number":299,"url":null},"def":{"name":"assign","args":[],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"{% if true %}\n          {% vs = @type.instance_vars.select do |v|\n  (v.annotation(Assignable)) || (v.annotation(Persistent))\nend %}\n          {% for v in vs %}\n            key = {{ v.stringify }}\n            if options.has_key?(key)\n              if (o = options[key]?).is_a?(typeof(self.{{ v }}))\n                self.{{ v }} = o\n              end\n            end\n          {% end %}\n        {% end %}\nself\n"}},{"id":"changed?(property=nil)-instance-method","html_id":"changed?(property=nil)-instance-method","name":"changed?","doc":null,"summary":null,"abstract":false,"args":[{"name":"property","doc":null,"default_value":"nil","external_name":"property","restriction":""}],"args_string":"(property = <span class=\"n\">nil</span>)","args_html":"(property = <span class=\"n\">nil</span>)","location":{"filename":"src/framework/model.cr","line_number":622,"url":null},"def":{"name":"changed?","args":[{"name":"property","doc":null,"default_value":"nil","external_name":"property","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_record? || (begin\n  @saved_record || (@saved_record = self.class.find?(@id))\n  if property\n    {% if true %}\n              {% vs = @type.instance_vars.select do |v|\n      (v.annotation(Assignable)) || (v.annotation(Persistent))\n    end %}\n              case property\n              {% for v in vs %}\n                when .==({{ v.symbolize }})\n                  self.{{ v }} != @saved_record.try(&.as(typeof(self)).{{ v }})\n              {% end %}\n              else\n                false\n              end\n            {% end %}\n  else\n    self != @saved_record\n  end\nend)"}},{"id":"clear!(property=nil)-instance-method","html_id":"clear!(property=nil)-instance-method","name":"clear!","doc":null,"summary":null,"abstract":false,"args":[{"name":"property","doc":null,"default_value":"nil","external_name":"property","restriction":""}],"args_string":"(property = <span class=\"n\">nil</span>)","args_html":"(property = <span class=\"n\">nil</span>)","location":{"filename":"src/framework/model.cr","line_number":643,"url":null},"def":{"name":"clear!","args":[{"name":"property","doc":null,"default_value":"nil","external_name":"property","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if property\n  @saved_record || (@saved_record = self.class.find?(@id))\n  @saved_record.try do |saved_record|\n    {% if true %}\n              {% vs = @type.instance_vars.select do |v|\n      (v.annotation(Assignable)) || (v.annotation(Persistent))\n    end %}\n              case property\n              {% for v in vs %}\n              when .==({{ v.symbolize }})\n                saved_record.as(typeof(self)).{{ v }} = self.{{ v }}\n              {% end %}\n              end\n            {% end %}\n  end\nelse\n  @saved_record = self.dup.clear_saved_record\nend"}},{"id":"destroy-instance-method","html_id":"destroy-instance-method","name":"destroy","doc":"Destroys the instance.\n","summary":"<p>Destroys the instance.</p>","abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/model.cr","line_number":609,"url":null},"def":{"name":"destroy","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if self.responds_to?(:before_destroy)\n  self.before_destroy\nend\nKtistec.database.exec(\"DELETE FROM #{table_name} WHERE id = ?\", @id)\nif self.responds_to?(:after_destroy)\n  self.after_destroy\nend\n@destroyed = true\n@id = nil\nself\n"}},{"id":"destroyed?-instance-method","html_id":"destroyed?-instance-method","name":"destroyed?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/model.cr","line_number":605,"url":null},"def":{"name":"destroyed?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@destroyed"}},{"id":"errors-instance-method","html_id":"errors-instance-method","name":"errors","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/model.cr","line_number":512,"url":null},"def":{"name":"errors","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@errors"}},{"id":"new_record?-instance-method","html_id":"new_record?-instance-method","name":"new_record?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/model.cr","line_number":618,"url":null},"def":{"name":"new_record?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@id.nil?"}},{"id":"save(skip_validation=false,skip_associated=false)-instance-method","html_id":"save(skip_validation=false,skip_associated=false)-instance-method","name":"save","doc":"Saves the instance.\n","summary":"<p>Saves the instance.</p>","abstract":false,"args":[{"name":"skip_validation","doc":null,"default_value":"false","external_name":"skip_validation","restriction":""},{"name":"skip_associated","doc":null,"default_value":"false","external_name":"skip_associated","restriction":""}],"args_string":"(skip_validation = <span class=\"n\">false</span>, skip_associated = <span class=\"n\">false</span>)","args_html":"(skip_validation = <span class=\"n\">false</span>, skip_associated = <span class=\"n\">false</span>)","location":{"filename":"src/framework/model.cr","line_number":576,"url":null},"def":{"name":"save","args":[{"name":"skip_validation","doc":null,"default_value":"false","external_name":"skip_validation","restriction":""},{"name":"skip_associated","doc":null,"default_value":"false","external_name":"skip_associated","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if skip_validation || valid?(skip_associated: skip_associated)\nelse\n  raise(Invalid.new(errors))\nend\nnodes = [] of Node\nrun_callback(before_save, skip_associated: skip_associated, nodes: nodes)\nnodes.each do |node|\n  node.model._save_model(skip_validation: skip_validation)\nend\nrun_callback(after_save, skip_associated: skip_associated, nodes: nodes)\nself\n"}},{"id":"serialize_graph(skip_associated=false)-instance-method","html_id":"serialize_graph(skip_associated=false)-instance-method","name":"serialize_graph","doc":null,"summary":null,"abstract":false,"args":[{"name":"skip_associated","doc":null,"default_value":"false","external_name":"skip_associated","restriction":""}],"args_string":"(skip_associated = <span class=\"n\">false</span>)","args_html":"(skip_associated = <span class=\"n\">false</span>)","location":{"filename":"src/framework/model.cr","line_number":456,"url":null},"def":{"name":"serialize_graph","args":[{"name":"skip_associated","doc":null,"default_value":"false","external_name":"skip_associated","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"([] of Node).tap do |result|\n  _serialize_graph(result, skip_associated: skip_associated)\nend"}},{"id":"table_name-instance-method","html_id":"table_name-instance-method","name":"table_name","doc":"Returns the table name.\n","summary":"<p>Returns the table name.</p>","abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/model.cr","line_number":329,"url":null},"def":{"name":"table_name","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@@table_name || (@@table_name = Utils.table_name(self.class))"}},{"id":"to_h-instance-method","html_id":"to_h-instance-method","name":"to_h","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/model.cr","line_number":689,"url":null},"def":{"name":"to_h","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"{% if true %}\n          {\n            {% vs = @type.instance_vars.select(&.annotation(Persistent)) %}\n            {% for v in vs %}\n              {{ v.stringify }} => self.{{ v }},\n            {% end %}\n          }\n        {% end %}"}},{"id":"to_json(json:JSON::Builder)-instance-method","html_id":"to_json(json:JSON::Builder)-instance-method","name":"to_json","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":"JSON::Builder"}],"args_string":"(json : JSON::Builder)","args_html":"(json : JSON::Builder)","location":{"filename":"src/framework/model.cr","line_number":668,"url":null},"def":{"name":"to_json","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":"JSON::Builder"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"{% if true %}\n          {% vs = @type.instance_vars.select(&.annotation(Persistent)) %}\n          json.object do\n            {% for v in vs %}\n              json.field({{ v.stringify }}, self.{{ v }})\n            {% end %}\n          end\n        {% end %}"}},{"id":"to_s(io:IO)-instance-method","html_id":"to_s(io:IO)-instance-method","name":"to_s","doc":null,"summary":null,"abstract":false,"args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":"IO"}],"args_string":"(io : IO)","args_html":"(io : IO)","location":{"filename":"src/framework/model.cr","line_number":679,"url":null},"def":{"name":"to_s","args":[{"name":"io","doc":null,"default_value":"","external_name":"io","restriction":"IO"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"super(io)\n{% if true %}\n          {% vs = @type.instance_vars.select(&.annotation(Persistent)) %}\n          {% for v in vs %}\n            io << \" \" << {{ v.stringify }} << \"=\" << self.{{ v }}.inspect\n          {% end %}\n        {% end %}\n"}},{"id":"valid?(skip_associated=false)-instance-method","html_id":"valid?(skip_associated=false)-instance-method","name":"valid?","doc":"Returns true if the instance is valid.\n","summary":"<p>Returns true if the instance is valid.</p>","abstract":false,"args":[{"name":"skip_associated","doc":null,"default_value":"false","external_name":"skip_associated","restriction":""}],"args_string":"(skip_associated = <span class=\"n\">false</span>)","args_html":"(skip_associated = <span class=\"n\">false</span>)","location":{"filename":"src/framework/model.cr","line_number":516,"url":null},"def":{"name":"valid?","args":[{"name":"skip_associated","doc":null,"default_value":"false","external_name":"skip_associated","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"validate(skip_associated: skip_associated).empty?"}},{"id":"validate(skip_associated=false)-instance-method","html_id":"validate(skip_associated=false)-instance-method","name":"validate","doc":"Validates the instance and returns any errors.\n","summary":"<p>Validates the instance and returns any errors.</p>","abstract":false,"args":[{"name":"skip_associated","doc":null,"default_value":"false","external_name":"skip_associated","restriction":""}],"args_string":"(skip_associated = <span class=\"n\">false</span>)","args_html":"(skip_associated = <span class=\"n\">false</span>)","location":{"filename":"src/framework/model.cr","line_number":522,"url":null},"def":{"name":"validate","args":[{"name":"skip_associated","doc":null,"default_value":"false","external_name":"skip_associated","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@errors.clear\nnodes = [] of Node\nrun_callback(before_validate, skip_associated: skip_associated, nodes: nodes)\nnodes.each do |node|\n  if (  errors = node.model._run_validations)\n    if (    association = node.association)\n      if (      index = node.index)\n        errors = errors.transform_keys do |key|\n          \"#{association}.#{index}.#{key}\"\n        end\n      else\n        errors = errors.transform_keys do |key|\n          \"#{association}.#{key}\"\n        end\n      end\n    end\n    @errors.merge!(errors)\n  end\nend\nrun_callback(after_validate, skip_associated: skip_associated, nodes: nodes)\n@errors\n"}}],"macros":[{"id":"belongs_to(name,primary_key=id,foreign_key=nil,class_name=nil)-macro","html_id":"belongs_to(name,primary_key=id,foreign_key=nil,class_name=nil)-macro","name":"belongs_to","doc":"Specifies a one-to-one association with another model.\n","summary":"<p>Specifies a one-to-one association with another model.</p>","abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"primary_key","doc":null,"default_value":"id","external_name":"primary_key","restriction":""},{"name":"foreign_key","doc":null,"default_value":"nil","external_name":"foreign_key","restriction":""},{"name":"class_name","doc":null,"default_value":"nil","external_name":"class_name","restriction":""}],"args_string":"(name, primary_key = id, foreign_key = <span class=\"n\">nil</span>, class_name = <span class=\"n\">nil</span>)","location":{"filename":"src/framework/model.cr","line_number":335,"url":null},"def":{"name":"belongs_to","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"primary_key","doc":null,"default_value":"id","external_name":"primary_key","restriction":""},{"name":"foreign_key","doc":null,"default_value":"nil","external_name":"foreign_key","restriction":""},{"name":"class_name","doc":null,"default_value":"nil","external_name":"class_name","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"        \n{% foreign_key = foreign_key || \"#{name}_id\".id %}\n\n        \n{% class_name = class_name ? class_name.id : name.stringify.camelcase.id %}\n\n        \n{% union_types = (class_name.split(\"|\")).map do |__arg8|\n  __arg8.strip.id\nend %}\n\n        @[Assignable]\n        @\n{{ name }}\n : \n{{ class_name }}\n?\n        def \n{{ name }}\n=(@\n{{ name }}\n : \n{{ class_name }}\n) : \n{{ class_name }}\n\n          self.\n{{ foreign_key }}\n = \n{{ name }}\n.\n{{ primary_key }}\n.as(typeof(self.\n{{ foreign_key }}\n))\n          \n{{ name }}\n\n        \nend\n        def \n{{ name }}\n? : \n{{ class_name }}\n?\n          @\n{{ name }}\n ||= begin\n            \n{% for union_type in union_types %}\n              {{ union_type }}.find?({{ primary_key }}: self.{{ foreign_key }}) ||\n            {% end %}\n\n            nil\n          \nend\n        \nend\n        def \n{{ name }}\n : \n{{ class_name }}\n\n          @\n{{ name }}\n ||= begin\n            \n{% for union_type in union_types %}\n              {{ union_type }}.find?({{ primary_key }}: self.{{ foreign_key }}) ||\n            {% end %}\n\n            raise NotFound.new(\"#{self.class} \n{{ name }}\n \n{{ primary_key }}\n=#{self.\n{{ foreign_key }}\n}: not found\")\n          \nend\n        \nend\n        def _belongs_to_\n{{ name }}\n : \n{{ class_name }}\n?\n          @\n{{ name }}\n\n        \nend\n      \n"}},{"id":"has_many(name,primary_key=id,foreign_key=nil,class_name=nil,inverse_of=nil)-macro","html_id":"has_many(name,primary_key=id,foreign_key=nil,class_name=nil,inverse_of=nil)-macro","name":"has_many","doc":"Specifies a one-to-many association with another model.\n","summary":"<p>Specifies a one-to-many association with another model.</p>","abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"primary_key","doc":null,"default_value":"id","external_name":"primary_key","restriction":""},{"name":"foreign_key","doc":null,"default_value":"nil","external_name":"foreign_key","restriction":""},{"name":"class_name","doc":null,"default_value":"nil","external_name":"class_name","restriction":""},{"name":"inverse_of","doc":null,"default_value":"nil","external_name":"inverse_of","restriction":""}],"args_string":"(name, primary_key = id, foreign_key = <span class=\"n\">nil</span>, class_name = <span class=\"n\">nil</span>, inverse_of = <span class=\"n\">nil</span>)","location":{"filename":"src/framework/model.cr","line_number":368,"url":null},"def":{"name":"has_many","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"primary_key","doc":null,"default_value":"id","external_name":"primary_key","restriction":""},{"name":"foreign_key","doc":null,"default_value":"nil","external_name":"foreign_key","restriction":""},{"name":"class_name","doc":null,"default_value":"nil","external_name":"class_name","restriction":""},{"name":"inverse_of","doc":null,"default_value":"nil","external_name":"inverse_of","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"        \n{% singular = name.stringify %}\n\n        \n{% singular = singular =~ (/(ses|sses|shes|ches|xes|zes)$/) ? singular[0..-3] : singular[0..-2] %}\n\n        \n{% foreign_key = foreign_key || \"#{(@type.stringify.split(\"::\")).last.underscore.id}_id\".id %}\n\n        \n{% class_name = class_name || singular.camelcase.id %}\n\n        @[Assignable]\n        @\n{{ name }}\n : Array(\n{{ class_name }}\n)?\n        def \n{{ name }}\n=(\n{{ name }}\n : Enumerable(\n{{ class_name }}\n)) : Enumerable(\n{{ class_name }}\n)\n          self.\n{{ name }}\n.each do |other|\n            other.destroy unless other.in?(\n{{ name }}\n)\n          \nend\n          @\n{{ name }}\n = \n{{ name }}\n.to_a\n          \n{{ name }}\n.each do |n|\n            n.\n{{ foreign_key }}\n = self.\n{{ primary_key }}\n.as(typeof(n.\n{{ foreign_key }}\n))\n            \n{% if inverse_of %}\n              n.{{ inverse_of }} = self\n            {% end %}\n\n          \nend\n          \n{{ name }}\n\n        \nend\n        def \n{{ name }}\n : Enumerable(\n{{ class_name }}\n)\n          \n{{ name }}\n = @\n{{ name }}\n\n          if \n{{ name }}\n.nil? || \n{{ name }}\n.empty?\n            @\n{{ name }}\n = \n{{ class_name }}\n.where(\n{{ foreign_key }}\n: self.\n{{ primary_key }}\n)\n          \nend\n          @\n{{ name }}\n.not_nil!\n        \nend\n        def _belongs_to_\n{{ name }}\n : Enumerable(\n{{ class_name }}\n)?\n          @\n{{ name }}\n\n        \nend\n      \n"}},{"id":"has_one(name,primary_key=id,foreign_key=nil,class_name=nil,inverse_of=nil)-macro","html_id":"has_one(name,primary_key=id,foreign_key=nil,class_name=nil,inverse_of=nil)-macro","name":"has_one","doc":"Specifies a one-to-one association with another model.\n","summary":"<p>Specifies a one-to-one association with another model.</p>","abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"primary_key","doc":null,"default_value":"id","external_name":"primary_key","restriction":""},{"name":"foreign_key","doc":null,"default_value":"nil","external_name":"foreign_key","restriction":""},{"name":"class_name","doc":null,"default_value":"nil","external_name":"class_name","restriction":""},{"name":"inverse_of","doc":null,"default_value":"nil","external_name":"inverse_of","restriction":""}],"args_string":"(name, primary_key = id, foreign_key = <span class=\"n\">nil</span>, class_name = <span class=\"n\">nil</span>, inverse_of = <span class=\"n\">nil</span>)","location":{"filename":"src/framework/model.cr","line_number":402,"url":null},"def":{"name":"has_one","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"primary_key","doc":null,"default_value":"id","external_name":"primary_key","restriction":""},{"name":"foreign_key","doc":null,"default_value":"nil","external_name":"foreign_key","restriction":""},{"name":"class_name","doc":null,"default_value":"nil","external_name":"class_name","restriction":""},{"name":"inverse_of","doc":null,"default_value":"nil","external_name":"inverse_of","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"        \n{% foreign_key = foreign_key || \"#{(@type.stringify.split(\"::\")).last.underscore.id}_id\".id %}\n\n        \n{% class_name = class_name || name.stringify.camelcase.id %}\n\n        @[Assignable]\n        @\n{{ name }}\n : \n{{ class_name }}\n?\n        def \n{{ name }}\n=(\n{{ name }}\n : \n{{ class_name }}\n) : \n{{ class_name }}\n\n          if (other = self.\n{{ name }}\n?)\n            other.destroy unless other == \n{{ name }}\n\n          \nend\n          @\n{{ name }}\n = \n{{ name }}\n\n          \n{{ name }}\n.\n{{ foreign_key }}\n = self.\n{{ primary_key }}\n.as(typeof(\n{{ name }}\n.\n{{ foreign_key }}\n))\n          \n{% if inverse_of %}\n            {{ name }}.{{ inverse_of }} = self\n          {% end %}\n\n          \n{{ name }}\n\n        \nend\n        def \n{{ name }}\n? : \n{{ class_name }}\n?\n          @\n{{ name }}\n ||= \n{{ class_name }}\n.find?(\n{{ foreign_key }}\n: self.\n{{ primary_key }}\n)\n        \nend\n        def \n{{ name }}\n : \n{{ class_name }}\n\n          @\n{{ name }}\n ||= \n{{ class_name }}\n.find(\n{{ foreign_key }}\n: self.\n{{ primary_key }}\n)\n        \nend\n        def _belongs_to_\n{{ name }}\n : \n{{ class_name }}\n?\n          @\n{{ name }}\n\n        \nend\n      \n"}},{"id":"serializes(name,format=json,to_method=nil,from_method=nil,column_name=nil,class_name=nil)-macro","html_id":"serializes(name,format=json,to_method=nil,from_method=nil,column_name=nil,class_name=nil)-macro","name":"serializes","doc":"Specifies a serializer for a column.\n","summary":"<p>Specifies a serializer for a column.</p>","abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"format","doc":null,"default_value":"json","external_name":"format","restriction":""},{"name":"to_method","doc":null,"default_value":"nil","external_name":"to_method","restriction":""},{"name":"from_method","doc":null,"default_value":"nil","external_name":"from_method","restriction":""},{"name":"column_name","doc":null,"default_value":"nil","external_name":"column_name","restriction":""},{"name":"class_name","doc":null,"default_value":"nil","external_name":"class_name","restriction":""}],"args_string":"(name, format = json, to_method = <span class=\"n\">nil</span>, from_method = <span class=\"n\">nil</span>, column_name = <span class=\"n\">nil</span>, class_name = <span class=\"n\">nil</span>)","location":{"filename":"src/framework/model.cr","line_number":431,"url":null},"def":{"name":"serializes","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"format","doc":null,"default_value":"json","external_name":"format","restriction":""},{"name":"to_method","doc":null,"default_value":"nil","external_name":"to_method","restriction":""},{"name":"from_method","doc":null,"default_value":"nil","external_name":"from_method","restriction":""},{"name":"column_name","doc":null,"default_value":"nil","external_name":"column_name","restriction":""},{"name":"class_name","doc":null,"default_value":"nil","external_name":"class_name","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"        \n{% if true %}\n          {% to_method = to_method || \"to_#{format}\".id %}\n          {% from_method = from_method || \"from_#{format}\".id %}\n          {% column_name = column_name || \"#{name}_#{format}\".id %}\n          {% class_name = class_name || name.stringify.capitalize.id %}\n          def {{ name }}=({{ name }} : {{ class_name }})\n            self.{{ column_name }} = {{ name }}.{{ to_method }}\n            {{ name }}\n          end\n          def {{ name }}\n            if {{ column_name }} = self.{{ column_name }}\n              {{ class_name }}.{{ from_method }}({{ column_name }})\n            end\n          end\n        {% end %}\n\n      \n"}},{"id":"validates(property,&block)-macro","html_id":"validates(property,&amp;block)-macro","name":"validates","doc":"Adds a validation to a property on an instance.\n\n    validates xyz { \"is blank\" if xyz.blank? }\n","summary":"<p>Adds a validation to a property on an instance.</p>","abstract":false,"args":[{"name":"property","doc":null,"default_value":"","external_name":"property","restriction":""}],"args_string":"(property, &block)","location":{"filename":"src/framework/model.cr","line_number":564,"url":null},"def":{"name":"validates","args":[{"name":"property","doc":null,"default_value":"","external_name":"property","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":{"name":"block","doc":null,"default_value":"","external_name":"block","restriction":""},"visibility":"Public","body":"        private def _validate_\n{{ property.name }}\n\n          \n{% if block %}\n            {{ block.body }}\n          {% else %}\n            {{ property.block.body }}\n          {% end %}\n\n        \nend\n      \n"}}],"types":[{"html_id":"ktistec/Ktistec/Model/InstanceMethods/Node","path":"Ktistec/Model/InstanceMethods/Node.html","kind":"struct","full_name":"Ktistec::Model::InstanceMethods::Node","name":"Node","abstract":false,"superclass":{"html_id":"ktistec/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"ktistec/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"ktistec/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(model:Model::InstanceMethods,association:String?,index:Int32?)-class-method","html_id":"new(model:Model::InstanceMethods,association:String?,index:Int32?)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"model","doc":null,"default_value":"","external_name":"model","restriction":"Model::InstanceMethods"},{"name":"association","doc":null,"default_value":"","external_name":"association","restriction":"String | ::Nil"},{"name":"index","doc":null,"default_value":"","external_name":"index","restriction":"Int32 | ::Nil"}],"args_string":"(model : Model::InstanceMethods, association : String?, index : Int32?)","args_html":"(model : <a href=\"../../../Ktistec/Model/InstanceMethods.html\">Model::InstanceMethods</a>, association : String?, index : Int32?)","location":{"filename":"src/framework/model.cr","line_number":449,"url":null},"def":{"name":"new","args":[{"name":"model","doc":null,"default_value":"","external_name":"model","restriction":"Model::InstanceMethods"},{"name":"association","doc":null,"default_value":"","external_name":"association","restriction":"String | ::Nil"},{"name":"index","doc":null,"default_value":"","external_name":"index","restriction":"Int32 | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(model, association, index)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"association:String?-instance-method","html_id":"association:String?-instance-method","name":"association","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":null,"def":{"name":"association","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@association"}},{"id":"clone-instance-method","html_id":"clone-instance-method","name":"clone","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/model.cr","line_number":449,"url":null},"def":{"name":"clone","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self.class.new(@model.clone, @association.clone, @index.clone)"}},{"id":"copy_with(model_model=@model,association_association=@association,index_index=@index)-instance-method","html_id":"copy_with(model_model=@model,association_association=@association,index_index=@index)-instance-method","name":"copy_with","doc":null,"summary":null,"abstract":false,"args":[{"name":"_model","doc":null,"default_value":"@model","external_name":"model","restriction":""},{"name":"_association","doc":null,"default_value":"@association","external_name":"association","restriction":""},{"name":"_index","doc":null,"default_value":"@index","external_name":"index","restriction":""}],"args_string":"(model _model = @model, association _association = @association, index _index = @index)","args_html":"(model _model = @model, association _association = @association, index _index = @index)","location":{"filename":"src/framework/model.cr","line_number":449,"url":null},"def":{"name":"copy_with","args":[{"name":"_model","doc":null,"default_value":"@model","external_name":"model","restriction":""},{"name":"_association","doc":null,"default_value":"@association","external_name":"association","restriction":""},{"name":"_index","doc":null,"default_value":"@index","external_name":"index","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self.class.new(_model, _association, _index)"}},{"id":"index:Int32?-instance-method","html_id":"index:Int32?-instance-method","name":"index","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Int32?","args_html":" : Int32?","location":null,"def":{"name":"index","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Int32 | ::Nil","visibility":"Public","body":"@index"}},{"id":"model:Model::InstanceMethods-instance-method","html_id":"model:Model::InstanceMethods-instance-method","name":"model","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Model::InstanceMethods","args_html":" : <a href=\"../../../Ktistec/Model/InstanceMethods.html\">Model::InstanceMethods</a>","location":null,"def":{"name":"model","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Model::InstanceMethods","visibility":"Public","body":"@model"}}],"macros":[],"types":[]}]},{"html_id":"ktistec/Ktistec/Model/Invalid","path":"Ktistec/Model/Invalid.html","kind":"class","full_name":"Ktistec::Model::Invalid","name":"Invalid","abstract":false,"superclass":{"html_id":"ktistec/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"ktistec/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model(*T)","name":"Model"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(errors:Errors)-class-method","html_id":"new(errors:Errors)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"errors","doc":null,"default_value":"","external_name":"errors","restriction":"Errors"}],"args_string":"(errors : Errors)","args_html":"(errors : <a href=\"../../Ktistec/Model/Errors.html\">Errors</a>)","location":{"filename":"src/framework/model.cr","line_number":722,"url":null},"def":{"name":"new","args":[{"name":"errors","doc":null,"default_value":"","external_name":"errors","restriction":"Errors"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(errors)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/Ktistec/Model/Linked","path":"Ktistec/Model/Linked.html","kind":"module","full_name":"Ktistec::Model::Linked","name":"Linked","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},{"html_id":"ktistec/ActivityPub/Actor","kind":"class","full_name":"ActivityPub::Actor","name":"Actor"},{"html_id":"ktistec/ActivityPub/Object","kind":"class","full_name":"ActivityPub::Object","name":"Object"}],"namespace":{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model(*T)","name":"Model"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"cached?-instance-method","html_id":"cached?-instance-method","name":"cached?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/model/linked.cr","line_number":22,"url":null},"def":{"name":"cached?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"!local?"}},{"id":"local?-instance-method","html_id":"local?-instance-method","name":"local?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/model/linked.cr","line_number":18,"url":null},"def":{"name":"local?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"iri.starts_with?(Ktistec.host)"}},{"id":"origin-instance-method","html_id":"origin-instance-method","name":"origin","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/model/linked.cr","line_number":9,"url":null},"def":{"name":"origin","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"uri = URI.parse(iri)\n\"#{uri.scheme}://#{uri.host}\"\n"}},{"id":"uid-instance-method","html_id":"uid-instance-method","name":"uid","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/model/linked.cr","line_number":14,"url":null},"def":{"name":"uid","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"((URI.parse(iri)).path.split(\"/\")).last"}}],"macros":[],"types":[]},{"html_id":"ktistec/Ktistec/Model/NotFound","path":"Ktistec/Model/NotFound.html","kind":"class","full_name":"Ktistec::Model::NotFound","name":"NotFound","abstract":false,"superclass":{"html_id":"ktistec/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"ktistec/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model(*T)","name":"Model"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/Ktistec/Model/Persistent","path":"Ktistec/Model/Persistent.html","kind":"annotation","full_name":"Ktistec::Model::Persistent","name":"Persistent","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model(*T)","name":"Model"},"doc":"Marks properties as persistent (and bulk assignable).\n","summary":"<p>Marks properties as persistent (and bulk assignable).</p>","class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/Ktistec/Model/Polymorphic","path":"Ktistec/Model/Polymorphic.html","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},{"html_id":"ktistec/ActivityPub/Actor","kind":"class","full_name":"ActivityPub::Actor","name":"Actor"},{"html_id":"ktistec/ActivityPub/Object","kind":"class","full_name":"ActivityPub::Object","name":"Object"},{"html_id":"ktistec/Relationship","kind":"class","full_name":"Relationship","name":"Relationship"},{"html_id":"ktistec/Tag","kind":"class","full_name":"Tag","name":"Tag"},{"html_id":"ktistec/Task","kind":"class","full_name":"Task","name":"Task"}],"namespace":{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model(*T)","name":"Model"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"as_a(as_as:T.class):TforallT-instance-method","html_id":"as_a(as_as:T.class):TforallT-instance-method","name":"as_a","doc":null,"summary":null,"abstract":false,"args":[{"name":"_as","doc":null,"default_value":"","external_name":"as","restriction":"T.class"}],"args_string":"(as _as : <span class=\"t\">T</span>.<span class=\"k\">class</span>) : T forall T","args_html":"(as _as : <span class=\"t\">T</span>.<span class=\"k\">class</span>) : T forall T","location":{"filename":"src/framework/model/polymorphic.cr","line_number":16,"url":null},"def":{"name":"as_a","args":[{"name":"_as","doc":null,"default_value":"","external_name":"as","restriction":"T.class"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"T","visibility":"Public","body":"T.find(self.id)"}},{"id":"type:String?-instance-method","html_id":"type:String?-instance-method","name":"type","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/framework/model/polymorphic.cr","line_number":21,"url":null},"def":{"name":"type","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"if (value = @type).nil?\n  @type = ({{ @type.stringify }})\nelse\n  value\nend"}},{"id":"type=(type:String)-instance-method","html_id":"type=(type:String)-instance-method","name":"type=","doc":null,"summary":null,"abstract":false,"args":[{"name":"type","doc":null,"default_value":"","external_name":"type","restriction":"String"}],"args_string":"(type : String)","args_html":"(type : String)","location":{"filename":"src/framework/model/polymorphic.cr","line_number":21,"url":null},"def":{"name":"type=","args":[{"name":"type","doc":null,"default_value":"","external_name":"type","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@type = type"}}],"macros":[{"id":"find(_idid,*,as_as)-macro","html_id":"find(_idid,*,as_as)-macro","name":"find","doc":null,"summary":null,"abstract":false,"args":[{"name":"id","doc":null,"default_value":"","external_name":"_id","restriction":""},{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"_as","doc":null,"default_value":"","external_name":"as","restriction":""}],"args_string":"(_id id, *, as _as)","location":{"filename":"src/framework/model/polymorphic.cr","line_number":6,"url":null},"def":{"name":"find","args":[{"name":"id","doc":null,"default_value":"","external_name":"_id","restriction":""},{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"_as","doc":null,"default_value":"","external_name":"as","restriction":""}],"double_splat":null,"splat_index":1,"block_arg":null,"visibility":"Public","body":"        \n{% unless _as.resolve < @type\n  raise(\"can't convert #{@type} to #{_as}\")\nend %}\n\n        \n{{ _as }}\n.find(\n{{ id }}\n)\n      \n"}},{"id":"find(*,as_as,**options)-macro","html_id":"find(*,as_as,**options)-macro","name":"find","doc":null,"summary":null,"abstract":false,"args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"_as","doc":null,"default_value":"","external_name":"as","restriction":""}],"args_string":"(*, as _as, **options)","location":{"filename":"src/framework/model/polymorphic.cr","line_number":11,"url":null},"def":{"name":"find","args":[{"name":"","doc":null,"default_value":"","external_name":"","restriction":""},{"name":"_as","doc":null,"default_value":"","external_name":"as","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"block_arg":null,"visibility":"Public","body":"        \n{% unless _as.resolve < @type\n  raise(\"can't convert #{@type} to #{_as}\")\nend %}\n\n        \n{{ _as }}\n.find(\n{{ **options }}\n)\n      \n"}}],"types":[]},{"html_id":"ktistec/Ktistec/Model/Serialized","path":"Ktistec/Model/Serialized.html","kind":"module","full_name":"Ktistec::Model::Serialized","name":"Serialized","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[{"html_id":"ktistec/ActivityPub/Activity","kind":"class","full_name":"ActivityPub::Activity","name":"Activity"},{"html_id":"ktistec/ActivityPub/Actor","kind":"class","full_name":"ActivityPub::Actor","name":"Actor"},{"html_id":"ktistec/ActivityPub/Object","kind":"class","full_name":"ActivityPub::Object","name":"Object"}],"namespace":{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model(*T)","name":"Model"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"ktistec/Ktistec/Model/Serialized/ClassMethods","path":"Ktistec/Model/Serialized/ClassMethods.html","kind":"module","full_name":"Ktistec::Model::Serialized::ClassMethods","name":"ClassMethods","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec/Model/Serialized","kind":"module","full_name":"Ktistec::Model::Serialized","name":"Serialized"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"dig?(json:JSON::Any,*selector,as:T.class=String)forallT-instance-method","html_id":"dig?(json:JSON::Any,*selector,as:T.class=String)forallT-instance-method","name":"dig?","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":"JSON::Any"},{"name":"selector","doc":null,"default_value":"","external_name":"selector","restriction":""},{"name":"as","doc":null,"default_value":"String","external_name":"as","restriction":"T.class"}],"args_string":"(json : JSON::Any, *selector, as : <span class=\"t\">T</span>.<span class=\"k\">class</span> = <span class=\"t\">String</span>) forall T","args_html":"(json : JSON::Any, *selector, as : <span class=\"t\">T</span>.<span class=\"k\">class</span> = <span class=\"t\">String</span>) forall T","location":{"filename":"src/framework/model/serialized.cr","line_number":11,"url":null},"def":{"name":"dig?","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":"JSON::Any"},{"name":"selector","doc":null,"default_value":"","external_name":"selector","restriction":""},{"name":"as","doc":null,"default_value":"String","external_name":"as","restriction":"T.class"}],"double_splat":null,"splat_index":1,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(json.dig?(*selector)).try do |__arg0|\n  __arg0.raw.as(T)\nend"}},{"id":"dig_id?(json,*selector)-instance-method","html_id":"dig_id?(json,*selector)-instance-method","name":"dig_id?","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""},{"name":"selector","doc":null,"default_value":"","external_name":"selector","restriction":""}],"args_string":"(json, *selector)","args_html":"(json, *selector)","location":{"filename":"src/framework/model/serialized.cr","line_number":31,"url":null},"def":{"name":"dig_id?","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""},{"name":"selector","doc":null,"default_value":"","external_name":"selector","restriction":""}],"double_splat":null,"splat_index":1,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"dig_value?(json, *selector) do |value|\n  ((value.dig?(\"@id\")) || value).try(&.as_s?)\nend"}},{"id":"dig_ids?(json,*selector)-instance-method","html_id":"dig_ids?(json,*selector)-instance-method","name":"dig_ids?","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""},{"name":"selector","doc":null,"default_value":"","external_name":"selector","restriction":""}],"args_string":"(json, *selector)","args_html":"(json, *selector)","location":{"filename":"src/framework/model/serialized.cr","line_number":37,"url":null},"def":{"name":"dig_ids?","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""},{"name":"selector","doc":null,"default_value":"","external_name":"selector","restriction":""}],"double_splat":null,"splat_index":1,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"dig_values?(json, *selector) do |value|\n  ((value.dig?(\"@id\")) || value).try(&.as_s?)\nend"}},{"id":"dig_value?(json,*selector,&)-instance-method","html_id":"dig_value?(json,*selector,&)-instance-method","name":"dig_value?","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""},{"name":"selector","doc":null,"default_value":"","external_name":"selector","restriction":""}],"args_string":"(json, *selector, &)","args_html":"(json, *selector, &)","location":{"filename":"src/framework/model/serialized.cr","line_number":15,"url":null},"def":{"name":"dig_value?","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""},{"name":"selector","doc":null,"default_value":"","external_name":"selector","restriction":""}],"double_splat":null,"splat_index":1,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"if (value = json.dig?(*selector))\n  yield value\nend"}},{"id":"dig_values?(json,*selector,&)-instance-method","html_id":"dig_values?(json,*selector,&)-instance-method","name":"dig_values?","doc":null,"summary":null,"abstract":false,"args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""},{"name":"selector","doc":null,"default_value":"","external_name":"selector","restriction":""}],"args_string":"(json, *selector, &)","args_html":"(json, *selector, &)","location":{"filename":"src/framework/model/serialized.cr","line_number":21,"url":null},"def":{"name":"dig_values?","args":[{"name":"json","doc":null,"default_value":"","external_name":"json","restriction":""},{"name":"selector","doc":null,"default_value":"","external_name":"selector","restriction":""}],"double_splat":null,"splat_index":1,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"if (value = json.dig?(*selector))\n  (if value.as_a?\n    value.as_a.map do |v|\n      yield v\n    end\n  else\n    [yield value]\n  end).compact\nend"}}],"macros":[],"types":[]}]},{"html_id":"ktistec/Ktistec/Model/Utils","path":"Ktistec/Model/Utils.html","kind":"module","full_name":"Ktistec::Model::Utils","name":"Utils","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model(*T)","name":"Model"},"doc":"Model utilities.\n","summary":"<p>Model utilities.</p>","class_methods":[{"id":"table_name(clazz)-class-method","html_id":"table_name(clazz)-class-method","name":"table_name","doc":"Returns the table name, given a model.\n","summary":"<p>Returns the table name, given a model.</p>","abstract":false,"args":[{"name":"clazz","doc":null,"default_value":"","external_name":"clazz","restriction":""}],"args_string":"(clazz)","args_html":"(clazz)","location":{"filename":"src/framework/model.cr","line_number":26,"url":null},"def":{"name":"table_name","args":[{"name":"clazz","doc":null,"default_value":"","external_name":"clazz","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(name = (clazz.to_s.gsub(\"::\", \"\")).underscore) + (if name.ends_with?(/s|ss|sh|ch|x|z/)\n  \"es\"\nelse\n  \"s\"\nend)"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]}]},{"html_id":"ktistec/Ktistec/Open","path":"Ktistec/Open.html","kind":"module","full_name":"Ktistec::Open","name":"Open","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[{"html_id":"ktistec/Ktistec/Open","kind":"module","full_name":"Ktistec::Open","name":"Open"}],"subclasses":[],"including_types":[{"html_id":"ktistec/Task/Deliver","kind":"class","full_name":"Task::Deliver","name":"Deliver"}],"namespace":{"html_id":"ktistec/Ktistec","kind":"module","full_name":"Ktistec","name":"Ktistec"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"open(url,headers=HTTP::Headers{&quot;Accept&quot;=>&quot;application/activity+json&quot;},attempts=10,&)-instance-method","html_id":"open(url,headers=HTTP::Headers{&quot;Accept&quot;=>&quot;application/activity+json&quot;},attempts=10,&)-instance-method","name":"open","doc":null,"summary":null,"abstract":false,"args":[{"name":"url","doc":null,"default_value":"","external_name":"url","restriction":""},{"name":"headers","doc":null,"default_value":"HTTP::Headers {\"Accept\" => \"application/activity+json\"}","external_name":"headers","restriction":""},{"name":"attempts","doc":null,"default_value":"10","external_name":"attempts","restriction":""}],"args_string":"(url, headers = <span class=\"t\">HTTP</span><span class=\"t\">::</span><span class=\"t\">Headers</span> {<span class=\"s\">&quot;Accept&quot;</span> => <span class=\"s\">&quot;application/activity+json&quot;</span>}, attempts = <span class=\"n\">10</span>, &)","args_html":"(url, headers = <span class=\"t\">HTTP</span><span class=\"t\">::</span><span class=\"t\">Headers</span> {<span class=\"s\">&quot;Accept&quot;</span> => <span class=\"s\">&quot;application/activity+json&quot;</span>}, attempts = <span class=\"n\">10</span>, &)","location":{"filename":"src/framework/open.cr","line_number":5,"url":null},"def":{"name":"open","args":[{"name":"url","doc":null,"default_value":"","external_name":"url","restriction":""},{"name":"headers","doc":null,"default_value":"HTTP::Headers {\"Accept\" => \"application/activity+json\"}","external_name":"headers","restriction":""},{"name":"attempts","doc":null,"default_value":"10","external_name":"attempts","restriction":""}],"double_splat":null,"splat_index":null,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"was = url\nattempts.times do\n  response = HTTP::Client.get(url, headers)\n  case response.status_code\n  when 200\n    return yield response\n  when 301, 302, 307, 308\n    if (tmp = response.headers[\"Location\"]?) && (url = tmp)\n      next\n    else\n      break\n    end\n  else\n    break\n  end\nend\nmessage = if was != url\n  \"Open failed: #{was} [from #{url}]\"\nelse\n  \"Open failed: #{was}\"\nend\nraise(Error.new(message))\n"}},{"id":"open(url,headers=HTTP::Headers{&quot;Accept&quot;=>&quot;application/activity+json&quot;},attempts=10)-instance-method","html_id":"open(url,headers=HTTP::Headers{&quot;Accept&quot;=>&quot;application/activity+json&quot;},attempts=10)-instance-method","name":"open","doc":null,"summary":null,"abstract":false,"args":[{"name":"url","doc":null,"default_value":"","external_name":"url","restriction":""},{"name":"headers","doc":null,"default_value":"HTTP::Headers {\"Accept\" => \"application/activity+json\"}","external_name":"headers","restriction":""},{"name":"attempts","doc":null,"default_value":"10","external_name":"attempts","restriction":""}],"args_string":"(url, headers = <span class=\"t\">HTTP</span><span class=\"t\">::</span><span class=\"t\">Headers</span> {<span class=\"s\">&quot;Accept&quot;</span> => <span class=\"s\">&quot;application/activity+json&quot;</span>}, attempts = <span class=\"n\">10</span>)","args_html":"(url, headers = <span class=\"t\">HTTP</span><span class=\"t\">::</span><span class=\"t\">Headers</span> {<span class=\"s\">&quot;Accept&quot;</span> => <span class=\"s\">&quot;application/activity+json&quot;</span>}, attempts = <span class=\"n\">10</span>)","location":{"filename":"src/framework/open.cr","line_number":31,"url":null},"def":{"name":"open","args":[{"name":"url","doc":null,"default_value":"","external_name":"url","restriction":""},{"name":"headers","doc":null,"default_value":"HTTP::Headers {\"Accept\" => \"application/activity+json\"}","external_name":"headers","restriction":""},{"name":"attempts","doc":null,"default_value":"10","external_name":"attempts","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"open(url, headers, attempts) do |response|\n  response\nend"}},{"id":"open?(url,headers=HTTP::Headers{&quot;Accept&quot;=>&quot;application/activity+json&quot;},attempts=10,&)-instance-method","html_id":"open?(url,headers=HTTP::Headers{&quot;Accept&quot;=>&quot;application/activity+json&quot;},attempts=10,&)-instance-method","name":"open?","doc":null,"summary":null,"abstract":false,"args":[{"name":"url","doc":null,"default_value":"","external_name":"url","restriction":""},{"name":"headers","doc":null,"default_value":"HTTP::Headers {\"Accept\" => \"application/activity+json\"}","external_name":"headers","restriction":""},{"name":"attempts","doc":null,"default_value":"10","external_name":"attempts","restriction":""}],"args_string":"(url, headers = <span class=\"t\">HTTP</span><span class=\"t\">::</span><span class=\"t\">Headers</span> {<span class=\"s\">&quot;Accept&quot;</span> => <span class=\"s\">&quot;application/activity+json&quot;</span>}, attempts = <span class=\"n\">10</span>, &)","args_html":"(url, headers = <span class=\"t\">HTTP</span><span class=\"t\">::</span><span class=\"t\">Headers</span> {<span class=\"s\">&quot;Accept&quot;</span> => <span class=\"s\">&quot;application/activity+json&quot;</span>}, attempts = <span class=\"n\">10</span>, &)","location":{"filename":"src/framework/open.cr","line_number":37,"url":null},"def":{"name":"open?","args":[{"name":"url","doc":null,"default_value":"","external_name":"url","restriction":""},{"name":"headers","doc":null,"default_value":"HTTP::Headers {\"Accept\" => \"application/activity+json\"}","external_name":"headers","restriction":""},{"name":"attempts","doc":null,"default_value":"10","external_name":"attempts","restriction":""}],"double_splat":null,"splat_index":null,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  yield open(url, headers, attempts)\nrescue Error\nend"}},{"id":"open?(url,headers=HTTP::Headers{&quot;Accept&quot;=>&quot;application/activity+json&quot;},attempts=10)-instance-method","html_id":"open?(url,headers=HTTP::Headers{&quot;Accept&quot;=>&quot;application/activity+json&quot;},attempts=10)-instance-method","name":"open?","doc":null,"summary":null,"abstract":false,"args":[{"name":"url","doc":null,"default_value":"","external_name":"url","restriction":""},{"name":"headers","doc":null,"default_value":"HTTP::Headers {\"Accept\" => \"application/activity+json\"}","external_name":"headers","restriction":""},{"name":"attempts","doc":null,"default_value":"10","external_name":"attempts","restriction":""}],"args_string":"(url, headers = <span class=\"t\">HTTP</span><span class=\"t\">::</span><span class=\"t\">Headers</span> {<span class=\"s\">&quot;Accept&quot;</span> => <span class=\"s\">&quot;application/activity+json&quot;</span>}, attempts = <span class=\"n\">10</span>)","args_html":"(url, headers = <span class=\"t\">HTTP</span><span class=\"t\">::</span><span class=\"t\">Headers</span> {<span class=\"s\">&quot;Accept&quot;</span> => <span class=\"s\">&quot;application/activity+json&quot;</span>}, attempts = <span class=\"n\">10</span>)","location":{"filename":"src/framework/open.cr","line_number":42,"url":null},"def":{"name":"open?","args":[{"name":"url","doc":null,"default_value":"","external_name":"url","restriction":""},{"name":"headers","doc":null,"default_value":"HTTP::Headers {\"Accept\" => \"application/activity+json\"}","external_name":"headers","restriction":""},{"name":"attempts","doc":null,"default_value":"10","external_name":"attempts","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"open?(url, headers, attempts) do |response|\n  response\nend"}}],"macros":[],"types":[{"html_id":"ktistec/Ktistec/Open/Error","path":"Ktistec/Open/Error.html","kind":"class","full_name":"Ktistec::Open::Error","name":"Error","abstract":false,"superclass":{"html_id":"ktistec/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"ktistec/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec/Open","kind":"module","full_name":"Ktistec::Open","name":"Open"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]}]},{"html_id":"ktistec/Ktistec/Rewrite","path":"Ktistec/Rewrite.html","kind":"class","full_name":"Ktistec::Rewrite","name":"Rewrite","abstract":false,"superclass":{"html_id":"ktistec/Kemal/Handler","kind":"class","full_name":"Kemal::Handler","name":"Handler"},"ancestors":[{"html_id":"ktistec/Kemal/Handler","kind":"class","full_name":"Kemal::Handler","name":"Handler"},{"html_id":"ktistec/HTTP/Handler","kind":"module","full_name":"HTTP::Handler","name":"Handler"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec","kind":"module","full_name":"Ktistec","name":"Ktistec"},"doc":"Path rewriting middleware.\n","summary":"<p>Path rewriting middleware.</p>","class_methods":[],"constructors":[],"instance_methods":[{"id":"call(env)-instance-method","html_id":"call(env)-instance-method","name":"call","doc":null,"summary":null,"abstract":false,"args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(env)","args_html":"(env)","location":{"filename":"src/framework/rewrite.cr","line_number":7,"url":null},"def":{"name":"call","args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if (/^\\/(@|%40)([a-zA-Z0-9.~_-]+).*/) =~ env.request.path\nelse\n  return call_next(env)\nend\nenv.request.path = \"/actors/#{$~[2]}\"\ncall_next(env)\n"}}],"macros":[],"types":[]},{"html_id":"ktistec/Ktistec/Server","path":"Ktistec/Server.html","kind":"class","full_name":"Ktistec::Server","name":"Server","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec","kind":"module","full_name":"Ktistec","name":"Ktistec"},"doc":"An [ActivityPub](https://www.w3.org/TR/activitypub/) server.\n\n    Ktistec::Server.run do\n      # configuration, initialization, etc.\n    end\n","summary":"<p>An <a href=\"https://www.w3.org/TR/activitypub/\">ActivityPub</a> server.</p>","class_methods":[{"id":"run(&)-class-method","html_id":"run(&)-class-method","name":"run","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"(&)","args_html":"(&)","location":{"filename":"src/framework/framework.cr","line_number":91,"url":null},"def":{"name":"run","args":[],"double_splat":null,"splat_index":null,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"Ktistec::Database.all_pending_versions.each do |version|\n  puts(Ktistec::Database.do_operation(:apply, version))\nend\nwith new yield\nKemal.run\n"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/Ktistec/Signature","path":"Ktistec/Signature.html","kind":"module","full_name":"Ktistec::Signature","name":"Signature","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec","kind":"module","full_name":"Ktistec","name":"Ktistec"},"doc":"HTTP Signature (https://tools.ietf.org/html/draft-cavage-http-signatures-10)\nsupport.\n","summary":"<p>HTTP Signature (https://tools.ietf.org/html/draft-cavage-http-signatures-10) support.</p>","class_methods":[{"id":"sign(actor,url,body=nil,content_type=nil,method=:post,time=Time.utc)-class-method","html_id":"sign(actor,url,body=nil,content_type=nil,method=:post,time=Time.utc)-class-method","name":"sign","doc":null,"summary":null,"abstract":false,"args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":""},{"name":"url","doc":null,"default_value":"","external_name":"url","restriction":""},{"name":"body","doc":null,"default_value":"nil","external_name":"body","restriction":""},{"name":"content_type","doc":null,"default_value":"nil","external_name":"content_type","restriction":""},{"name":"method","doc":null,"default_value":":post","external_name":"method","restriction":""},{"name":"time","doc":null,"default_value":"Time.utc","external_name":"time","restriction":""}],"args_string":"(actor, url, body = <span class=\"n\">nil</span>, content_type = <span class=\"n\">nil</span>, method = <span class=\"n\">:post</span>, time = <span class=\"t\">Time</span>.utc)","args_html":"(actor, url, body = <span class=\"n\">nil</span>, content_type = <span class=\"n\">nil</span>, method = <span class=\"n\">:post</span>, time = <span class=\"t\">Time</span>.utc)","location":{"filename":"src/framework/signature.cr","line_number":11,"url":null},"def":{"name":"sign","args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":""},{"name":"url","doc":null,"default_value":"","external_name":"url","restriction":""},{"name":"body","doc":null,"default_value":"nil","external_name":"body","restriction":""},{"name":"content_type","doc":null,"default_value":"nil","external_name":"content_type","restriction":""},{"name":"method","doc":null,"default_value":":post","external_name":"method","restriction":""},{"name":"time","doc":null,"default_value":"Time.utc","external_name":"time","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"key = actor.private_key.not_nil!\nurl = URI.parse(url)\ndate = Time::Format::HTTP_DATE.format(time)\nheaders_string = \"(request-target) host date\"\nsignature_string = \"(request-target): #{method} #{url.path}\\nhost: #{url.host}\\ndate: #{date}\"\nheaders = HTTP::Headers {\"Date\" => date}\nif body\n  digest = \"SHA-256=\" + (Base64.strict_encode(((OpenSSL::Digest.new(\"SHA256\")).update(body)).final))\n  headers_string = headers_string + \" digest\"\n  signature_string = signature_string + \"\\ndigest: #{digest}\"\n  headers[\"Digest\"] = digest\nend\nif content_type\n  headers_string = headers_string + \" content-type\"\n  signature_string = signature_string + \"\\ncontent-type: #{content_type}\"\n  headers[\"Content-Type\"] = content_type\nend\nsignature = Base64.strict_encode(key.sign(OpenSSL::Digest.new(\"SHA256\"), signature_string))\nsignature = \"keyId=\\\"#{actor.iri}\\\",signature=\\\"#{signature}\\\",headers=\\\"#{headers_string}\\\"\"\nheaders[\"Signature\"] = signature\nheaders\n"}},{"id":"verify(actor,url,headers,body=nil,method=:post)-class-method","html_id":"verify(actor,url,headers,body=nil,method=:post)-class-method","name":"verify","doc":null,"summary":null,"abstract":false,"args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":""},{"name":"url","doc":null,"default_value":"","external_name":"url","restriction":""},{"name":"headers","doc":null,"default_value":"","external_name":"headers","restriction":""},{"name":"body","doc":null,"default_value":"nil","external_name":"body","restriction":""},{"name":"method","doc":null,"default_value":":post","external_name":"method","restriction":""}],"args_string":"(actor, url, headers, body = <span class=\"n\">nil</span>, method = <span class=\"n\">:post</span>)","args_html":"(actor, url, headers, body = <span class=\"n\">nil</span>, method = <span class=\"n\">:post</span>)","location":{"filename":"src/framework/signature.cr","line_number":35,"url":null},"def":{"name":"verify","args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":""},{"name":"url","doc":null,"default_value":"","external_name":"url","restriction":""},{"name":"headers","doc":null,"default_value":"","external_name":"headers","restriction":""},{"name":"body","doc":null,"default_value":"nil","external_name":"body","restriction":""},{"name":"method","doc":null,"default_value":":post","external_name":"method","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if (signature = headers[\"Signature\"]?)\nelse\n  raise(Error.new(\"missing signature\"))\nend\nparameters = (signature.split(\",\", remove_empty: true)).reduce({} of String => String) do |a, h|\n  k, v = h.split(\"=\", 2)\n  a[k] = v[1..-2]\n  a\nend\nif (parameters.keys.sort & [\"signature\", \"headers\"]).size == 2\nelse\n  raise(Error.new(\"malformed signature\"))\nend\nurl = URI.parse(url)\ntime = headers[\"Date\"]\nsplit_headers_string = parameters[\"headers\"].split\nif \"(request-target)\".in?(split_headers_string)\nelse\n  raise(Error.new(\"request target must be signed\"))\nend\nif \"host\".in?(split_headers_string)\nelse\n  raise(Error.new(\"host header must be signed\"))\nend\nif \"date\".in?(split_headers_string)\nelse\n  raise(Error.new(\"date header must be signed\"))\nend\nif (\"digest\".in?(split_headers_string)) || (method != (:post))\nelse\n  raise(Error.new(\"body digest must be signed\"))\nend\nsignature_string = split_headers_string.map do |header|\n  case header\n  when \"(request-target)\"\n    \"#{header}: #{method} #{url.path}\"\n  when \"host\"\n    \"#{header}: #{url.host}\"\n  when \"date\"\n    \"#{header}: #{time}\"\n  when \"content-type\"\n    \"#{header}: #{headers[\"Content-Type\"]}\"\n  when \"digest\"\n    \"#{header}: #{headers[\"Digest\"]}\"\n  end\nend.compact.join(\"\\n\")\nkey = actor.public_key\nif key.try(&.verify(OpenSSL::Digest.new(\"SHA256\"), Base64.decode(parameters[\"signature\"]), signature_string))\nelse\n  raise(Error.new(\"invalid signature: signed by keyId=#{parameters[\"keyId\"]}\"))\nend\nif \"date\".in?(split_headers_string)\n  time = Time::Format::HTTP_DATE.parse(time)\n  if time > 5.minutes.ago && time < 5.minutes.from_now\n  else\n    raise(Error.new(\"date out of range\"))\n  end\nend\nif \"digest\".in?(split_headers_string)\n  digest = \"SHA-256=\" + (Base64.strict_encode(((OpenSSL::Digest.new(\"SHA256\")).update(body.not_nil!)).final))\n  if headers[\"Digest\"]? == digest\n  else\n    raise(Error.new(\"body doesn't match\"))\n  end\nend\ntrue\n"}},{"id":"verify?(actor,url,headers,*args,**opts)-class-method","html_id":"verify?(actor,url,headers,*args,**opts)-class-method","name":"verify?","doc":null,"summary":null,"abstract":false,"args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":""},{"name":"url","doc":null,"default_value":"","external_name":"url","restriction":""},{"name":"headers","doc":null,"default_value":"","external_name":"headers","restriction":""},{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(actor, url, headers, *args, **opts)","args_html":"(actor, url, headers, *args, **opts)","location":{"filename":"src/framework/signature.cr","line_number":96,"url":null},"def":{"name":"verify?","args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":""},{"name":"url","doc":null,"default_value":"","external_name":"url","restriction":""},{"name":"headers","doc":null,"default_value":"","external_name":"headers","restriction":""},{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"opts","doc":null,"default_value":"","external_name":"opts","restriction":""},"splat_index":3,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"begin\n  verify(actor, url, headers, *args, **opts)\nrescue ex : Error | OpenSSL::Error\n  Log.info do\n    \"verification failed: #{ex.message}\"\n  end\n  false\nend"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"ktistec/Ktistec/Signature/Error","path":"Ktistec/Signature/Error.html","kind":"class","full_name":"Ktistec::Signature::Error","name":"Error","abstract":false,"superclass":{"html_id":"ktistec/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"ktistec/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec/Signature","kind":"module","full_name":"Ktistec::Signature","name":"Signature"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[]}]},{"html_id":"ktistec/Ktistec/Util","path":"Ktistec/Util.html","kind":"module","full_name":"Ktistec::Util","name":"Util","abstract":false,"superclass":null,"ancestors":[],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[{"html_id":"ktistec/Ktistec/Util","kind":"module","full_name":"Ktistec::Util","name":"Util"}],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec","kind":"module","full_name":"Ktistec","name":"Ktistec"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"id-instance-method","html_id":"id-instance-method","name":"id","doc":"Generates a random, URL-safe identifier.\n\n64 bits should ensure it takes about 5 billion attempts to\ngenerate a collision.\n","summary":"<p>Generates a random, URL-safe identifier.</p>","abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/framework/util.cr","line_number":12,"url":null},"def":{"name":"id","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"Random::Secure.urlsafe_base64(8)"}},{"id":"sanitize(content)-instance-method","html_id":"sanitize(content)-instance-method","name":"sanitize","doc":"Cleans up the content we receive from others.\n","summary":"<p>Cleans up the content we receive from others.</p>","abstract":false,"args":[{"name":"content","doc":null,"default_value":"","external_name":"content","restriction":""}],"args_string":"(content)","args_html":"(content)","location":{"filename":"src/framework/util.cr","line_number":18,"url":null},"def":{"name":"sanitize","args":[{"name":"content","doc":null,"default_value":"","external_name":"content","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if content.nil? || content.empty?\n  return \"\"\nend\nString.build do |build|\n  sanitize(XML.parse_html(\"<div>#{content}</div>\", ((((XML::HTMLParserOptions::RECOVER | XML::HTMLParserOptions::NODEFDTD) | XML::HTMLParserOptions::NOIMPLIED) | XML::HTMLParserOptions::NOERROR) | XML::HTMLParserOptions::NOWARNING) | XML::HTMLParserOptions::NONET), build)\nend.gsub(/^<div>|<\\/div>$/, \"\")\n"}}],"macros":[],"types":[{"html_id":"ktistec/Ktistec/Util/PaginatedArray","path":"Ktistec/Util/PaginatedArray.html","kind":"class","full_name":"Ktistec::Util::PaginatedArray(T)","name":"PaginatedArray","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Ktistec/Util","kind":"module","full_name":"Ktistec::Util","name":"Util"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"<<(*args,**options)-instance-method","html_id":"<<(*args,**options)-instance-method","name":"<<","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/framework/util.cr","line_number":101,"url":null},"def":{"name":"<<","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@array.<<(*args, **options)"}},{"id":"<<(*args,**options,&)-instance-method","html_id":"<<(*args,**options,&)-instance-method","name":"<<","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/framework/util.cr","line_number":101,"url":null},"def":{"name":"<<","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"@array.<<(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"id":"each(*args,**options)-instance-method","html_id":"each(*args,**options)-instance-method","name":"each","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/framework/util.cr","line_number":101,"url":null},"def":{"name":"each","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@array.each(*args, **options)"}},{"id":"each(*args,**options,&)-instance-method","html_id":"each(*args,**options,&)-instance-method","name":"each","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/framework/util.cr","line_number":101,"url":null},"def":{"name":"each","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"@array.each(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"id":"each_with_index(*args,**options)-instance-method","html_id":"each_with_index(*args,**options)-instance-method","name":"each_with_index","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/framework/util.cr","line_number":101,"url":null},"def":{"name":"each_with_index","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@array.each_with_index(*args, **options)"}},{"id":"each_with_index(*args,**options,&)-instance-method","html_id":"each_with_index(*args,**options,&)-instance-method","name":"each_with_index","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/framework/util.cr","line_number":101,"url":null},"def":{"name":"each_with_index","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"@array.each_with_index(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"id":"empty?(*args,**options)-instance-method","html_id":"empty?(*args,**options)-instance-method","name":"empty?","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/framework/util.cr","line_number":101,"url":null},"def":{"name":"empty?","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@array.empty?(*args, **options)"}},{"id":"empty?(*args,**options,&)-instance-method","html_id":"empty?(*args,**options,&)-instance-method","name":"empty?","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/framework/util.cr","line_number":101,"url":null},"def":{"name":"empty?","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"@array.empty?(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"id":"first(*args,**options)-instance-method","html_id":"first(*args,**options)-instance-method","name":"first","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/framework/util.cr","line_number":101,"url":null},"def":{"name":"first","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@array.first(*args, **options)"}},{"id":"first(*args,**options,&)-instance-method","html_id":"first(*args,**options,&)-instance-method","name":"first","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/framework/util.cr","line_number":101,"url":null},"def":{"name":"first","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"@array.first(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"id":"inspect(*args,**options,&)-instance-method","html_id":"inspect(*args,**options,&)-instance-method","name":"inspect","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/framework/util.cr","line_number":101,"url":null},"def":{"name":"inspect","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"@array.inspect(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"id":"inspect(*args,**options)-instance-method","html_id":"inspect(*args,**options)-instance-method","name":"inspect","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/framework/util.cr","line_number":101,"url":null},"def":{"name":"inspect","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@array.inspect(*args, **options)"}},{"id":"map(*args,**options)-instance-method","html_id":"map(*args,**options)-instance-method","name":"map","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/framework/util.cr","line_number":101,"url":null},"def":{"name":"map","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@array.map(*args, **options)"}},{"id":"map(*args,**options,&)-instance-method","html_id":"map(*args,**options,&)-instance-method","name":"map","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/framework/util.cr","line_number":101,"url":null},"def":{"name":"map","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"@array.map(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"id":"more=(more:Bool)-instance-method","html_id":"more=(more:Bool)-instance-method","name":"more=","doc":null,"summary":null,"abstract":false,"args":[{"name":"more","doc":null,"default_value":"","external_name":"more","restriction":"Bool"}],"args_string":"(more : Bool)","args_html":"(more : Bool)","location":{"filename":"src/framework/util.cr","line_number":103,"url":null},"def":{"name":"more=","args":[{"name":"more","doc":null,"default_value":"","external_name":"more","restriction":"Bool"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@more = more"}},{"id":"more?:Bool-instance-method","html_id":"more?:Bool-instance-method","name":"more?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Bool","args_html":" : Bool","location":{"filename":"src/framework/util.cr","line_number":103,"url":null},"def":{"name":"more?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Bool","visibility":"Public","body":"@more"}},{"id":"pop(*args,**options,&)-instance-method","html_id":"pop(*args,**options,&)-instance-method","name":"pop","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/framework/util.cr","line_number":101,"url":null},"def":{"name":"pop","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"@array.pop(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"id":"pop(*args,**options)-instance-method","html_id":"pop(*args,**options)-instance-method","name":"pop","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/framework/util.cr","line_number":101,"url":null},"def":{"name":"pop","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@array.pop(*args, **options)"}},{"id":"size(*args,**options)-instance-method","html_id":"size(*args,**options)-instance-method","name":"size","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/framework/util.cr","line_number":101,"url":null},"def":{"name":"size","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@array.size(*args, **options)"}},{"id":"size(*args,**options,&)-instance-method","html_id":"size(*args,**options,&)-instance-method","name":"size","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/framework/util.cr","line_number":101,"url":null},"def":{"name":"size","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"@array.size(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"id":"to_a(*args,**options)-instance-method","html_id":"to_a(*args,**options)-instance-method","name":"to_a","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/framework/util.cr","line_number":101,"url":null},"def":{"name":"to_a","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@array.to_a(*args, **options)"}},{"id":"to_a(*args,**options,&)-instance-method","html_id":"to_a(*args,**options,&)-instance-method","name":"to_a","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/framework/util.cr","line_number":101,"url":null},"def":{"name":"to_a","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"@array.to_a(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"id":"to_s(*args,**options)-instance-method","html_id":"to_s(*args,**options)-instance-method","name":"to_s","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/framework/util.cr","line_number":101,"url":null},"def":{"name":"to_s","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@array.to_s(*args, **options)"}},{"id":"to_s(*args,**options,&)-instance-method","html_id":"to_s(*args,**options,&)-instance-method","name":"to_s","doc":null,"summary":null,"abstract":false,"args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/framework/util.cr","line_number":101,"url":null},"def":{"name":"to_s","args":[{"name":"args","doc":null,"default_value":"","external_name":"args","restriction":""}],"double_splat":{"name":"options","doc":null,"default_value":"","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arg":null,"return_type":"","visibility":"Public","body":"@array.to_s(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}}],"macros":[],"types":[]}]}]},{"html_id":"ktistec/ObjectsController","path":"ObjectsController.html","kind":"class","full_name":"ObjectsController","name":"ObjectsController","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"id":"paginate(collection,env)-class-method","html_id":"paginate(collection,env)-class-method","name":"paginate","doc":null,"summary":null,"abstract":false,"args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(collection, env)","args_html":"(collection, env)","location":{"filename":"src/controllers/objects.cr","line_number":5,"url":null},"def":{"name":"paginate","args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"path = env.request.path\nquery = env.params.query\npage = 1\nbegin\n  if (p = query[\"page\"].to_i) > 0\n    page = p\n  end\nrescue ArgumentError | KeyError\nend\nrender(\"./src/views/partials/paginator.html.ecr\")\n"}},{"id":"pagination_params(env)-class-method","html_id":"pagination_params(env)-class-method","name":"pagination_params","doc":null,"summary":null,"abstract":false,"args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(env)","args_html":"(env)","location":{"filename":"src/controllers/objects.cr","line_number":5,"url":null},"def":{"name":"pagination_params","args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"{Math.max(env.params.query[\"page\"]?.try(&.to_i) || 1, 1), Math.min(env.params.query[\"size\"]?.try(&.to_i) || 10, 1000)}"}}],"constructors":[],"instance_methods":[],"macros":[{"id":"depth(object)-macro","html_id":"depth(object)-macro","name":"depth","doc":null,"summary":null,"abstract":false,"args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":""}],"args_string":"(object)","location":{"filename":"src/controllers/objects.cr","line_number":9,"url":null},"def":{"name":"depth","args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":""}],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    \"depth-#{Math.min(\n{{ object }}\n.depth, 9)}\"\n  \n"}},{"id":"id_param-macro","html_id":"id_param-macro","name":"id_param","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","location":{"filename":"src/controllers/objects.cr","line_number":17,"url":null},"def":{"name":"id_param","args":[],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    \nenv.params.url[\"id\"].to_i64\n  \n"}},{"id":"iri_param-macro","html_id":"iri_param-macro","name":"iri_param","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","location":{"filename":"src/controllers/objects.cr","line_number":13,"url":null},"def":{"name":"iri_param","args":[],"double_splat":null,"splat_index":null,"block_arg":null,"visibility":"Public","body":"    \"#{host}/objects/#{env.params.url[\"id\"]}\"\n  "}}],"types":[]},{"html_id":"ktistec/Relationship","path":"Relationship.html","kind":"class","full_name":"Relationship","name":"Relationship","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"}],"extended_modules":[{"html_id":"ktistec/Ktistec/Model/ClassMethods","kind":"module","full_name":"Ktistec::Model::ClassMethods","name":"ClassMethods"}],"subclasses":[{"html_id":"ktistec/Relationship/Content/Inbox","kind":"class","full_name":"Relationship::Content::Inbox","name":"Inbox"},{"html_id":"ktistec/Relationship/Content/Outbox","kind":"class","full_name":"Relationship::Content::Outbox","name":"Outbox"},{"html_id":"ktistec/Relationship/Social/Follow","kind":"class","full_name":"Relationship::Social::Follow","name":"Follow"}],"including_types":[],"namespace":null,"doc":"Relationship between things.\n","summary":"<p>Relationship between things.</p>","class_methods":[],"constructors":[],"instance_methods":[{"id":"confirmed:Bool?-instance-method","html_id":"confirmed:Bool?-instance-method","name":"confirmed","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Bool?","args_html":" : Bool?","location":{"filename":"src/models/relationship.cr","line_number":18,"url":null},"def":{"name":"confirmed","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Bool | ::Nil","visibility":"Public","body":"if (value = @confirmed).nil?\n  @confirmed = (false)\nelse\n  value\nend"}},{"id":"confirmed=(confirmed:Bool)-instance-method","html_id":"confirmed=(confirmed:Bool)-instance-method","name":"confirmed=","doc":null,"summary":null,"abstract":false,"args":[{"name":"confirmed","doc":null,"default_value":"","external_name":"confirmed","restriction":"Bool"}],"args_string":"(confirmed : Bool)","args_html":"(confirmed : Bool)","location":{"filename":"src/models/relationship.cr","line_number":18,"url":null},"def":{"name":"confirmed=","args":[{"name":"confirmed","doc":null,"default_value":"","external_name":"confirmed","restriction":"Bool"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@confirmed = confirmed"}},{"id":"from_iri:String-instance-method","html_id":"from_iri:String-instance-method","name":"from_iri","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","args_html":" : String","location":{"filename":"src/models/relationship.cr","line_number":12,"url":null},"def":{"name":"from_iri","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@from_iri"}},{"id":"from_iri=(from_iri:String)-instance-method","html_id":"from_iri=(from_iri:String)-instance-method","name":"from_iri=","doc":null,"summary":null,"abstract":false,"args":[{"name":"from_iri","doc":null,"default_value":"","external_name":"from_iri","restriction":"String"}],"args_string":"(from_iri : String)","args_html":"(from_iri : String)","location":{"filename":"src/models/relationship.cr","line_number":12,"url":null},"def":{"name":"from_iri=","args":[{"name":"from_iri","doc":null,"default_value":"","external_name":"from_iri","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@from_iri = from_iri"}},{"id":"to_iri:String-instance-method","html_id":"to_iri:String-instance-method","name":"to_iri","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","args_html":" : String","location":{"filename":"src/models/relationship.cr","line_number":15,"url":null},"def":{"name":"to_iri","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@to_iri"}},{"id":"to_iri=(to_iri:String)-instance-method","html_id":"to_iri=(to_iri:String)-instance-method","name":"to_iri=","doc":null,"summary":null,"abstract":false,"args":[{"name":"to_iri","doc":null,"default_value":"","external_name":"to_iri","restriction":"String"}],"args_string":"(to_iri : String)","args_html":"(to_iri : String)","location":{"filename":"src/models/relationship.cr","line_number":15,"url":null},"def":{"name":"to_iri=","args":[{"name":"to_iri","doc":null,"default_value":"","external_name":"to_iri","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@to_iri = to_iri"}},{"id":"validate_model-instance-method","html_id":"validate_model-instance-method","name":"validate_model","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/relationship.cr","line_number":25,"url":null},"def":{"name":"validate_model","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if @@must_be_unique\n  relationship = Relationship.find?(from_iri: from_iri, to_iri: to_iri, type: type)\n  if relationship && (relationship.id != self.id)\n    errors[\"relationship\"] = [\"already exists\"]\n  end\nend"}},{"id":"visible:Bool?-instance-method","html_id":"visible:Bool?-instance-method","name":"visible","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Bool?","args_html":" : Bool?","location":{"filename":"src/models/relationship.cr","line_number":21,"url":null},"def":{"name":"visible","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Bool | ::Nil","visibility":"Public","body":"if (value = @visible).nil?\n  @visible = (false)\nelse\n  value\nend"}},{"id":"visible=(visible:Bool)-instance-method","html_id":"visible=(visible:Bool)-instance-method","name":"visible=","doc":null,"summary":null,"abstract":false,"args":[{"name":"visible","doc":null,"default_value":"","external_name":"visible","restriction":"Bool"}],"args_string":"(visible : Bool)","args_html":"(visible : Bool)","location":{"filename":"src/models/relationship.cr","line_number":21,"url":null},"def":{"name":"visible=","args":[{"name":"visible","doc":null,"default_value":"","external_name":"visible","restriction":"Bool"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@visible = visible"}}],"macros":[],"types":[{"html_id":"ktistec/Relationship/Content","path":"Relationship/Content.html","kind":"class","full_name":"Relationship::Content","name":"Content","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Relationship","kind":"class","full_name":"Relationship","name":"Relationship"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"ktistec/Relationship/Content/Inbox","path":"Relationship/Content/Inbox.html","kind":"class","full_name":"Relationship::Content::Inbox","name":"Inbox","abstract":false,"superclass":{"html_id":"ktistec/Relationship","kind":"class","full_name":"Relationship","name":"Relationship"},"ancestors":[{"html_id":"ktistec/Relationship","kind":"class","full_name":"Relationship","name":"Relationship"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Relationship/Content","kind":"class","full_name":"Relationship::Content","name":"Content"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"_belongs_to_activity:ActivityPub::Activity?-instance-method","html_id":"_belongs_to_activity:ActivityPub::Activity?-instance-method","name":"_belongs_to_activity","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Activity?","args_html":" : <a href=\"../../ActivityPub/Activity.html\">ActivityPub::Activity</a>?","location":{"filename":"src/models/relationship/content/inbox.cr","line_number":13,"url":null},"def":{"name":"_belongs_to_activity","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Activity | ::Nil","visibility":"Public","body":"@activity"}},{"id":"_belongs_to_owner:ActivityPub::Actor?-instance-method","html_id":"_belongs_to_owner:ActivityPub::Actor?-instance-method","name":"_belongs_to_owner","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/relationship/content/inbox.cr","line_number":10,"url":null},"def":{"name":"_belongs_to_owner","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@owner"}},{"id":"activity:ActivityPub::Activity-instance-method","html_id":"activity:ActivityPub::Activity-instance-method","name":"activity","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Activity","args_html":" : <a href=\"../../ActivityPub/Activity.html\">ActivityPub::Activity</a>","location":{"filename":"src/models/relationship/content/inbox.cr","line_number":13,"url":null},"def":{"name":"activity","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Activity","visibility":"Public","body":"@activity || (@activity = (ActivityPub::Activity.find?(iri: self.to_iri) || (raise(NotFound.new(\"#{self.class} activity iri=#{self.to_iri}: not found\")))))"}},{"id":"activity=(activity:ActivityPub::Activity):ActivityPub::Activity-instance-method","html_id":"activity=(activity:ActivityPub::Activity):ActivityPub::Activity-instance-method","name":"activity=","doc":null,"summary":null,"abstract":false,"args":[{"name":"activity","doc":null,"default_value":"","external_name":"activity","restriction":"ActivityPub::Activity"}],"args_string":"(activity : ActivityPub::Activity) : ActivityPub::Activity","args_html":"(activity : <a href=\"../../ActivityPub/Activity.html\">ActivityPub::Activity</a>) : <a href=\"../../ActivityPub/Activity.html\">ActivityPub::Activity</a>","location":{"filename":"src/models/relationship/content/inbox.cr","line_number":13,"url":null},"def":{"name":"activity=","args":[{"name":"activity","doc":null,"default_value":"","external_name":"activity","restriction":"ActivityPub::Activity"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Activity","visibility":"Public","body":"@activity = activity\nself.to_iri = activity.iri.as(typeof(self.to_iri))\nactivity\n"}},{"id":"activity?:ActivityPub::Activity?-instance-method","html_id":"activity?:ActivityPub::Activity?-instance-method","name":"activity?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Activity?","args_html":" : <a href=\"../../ActivityPub/Activity.html\">ActivityPub::Activity</a>?","location":{"filename":"src/models/relationship/content/inbox.cr","line_number":13,"url":null},"def":{"name":"activity?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Activity | ::Nil","visibility":"Public","body":"@activity || (@activity = (ActivityPub::Activity.find?(iri: self.to_iri) || nil))"}},{"id":"confirmed:Bool?-instance-method","html_id":"confirmed:Bool?-instance-method","name":"confirmed","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Bool?","args_html":" : Bool?","location":{"filename":"src/models/relationship/content/inbox.cr","line_number":16,"url":null},"def":{"name":"confirmed","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Bool | ::Nil","visibility":"Public","body":"if (value = @confirmed).nil?\n  @confirmed = (true)\nelse\n  value\nend"}},{"id":"confirmed=(confirmed:Bool)-instance-method","html_id":"confirmed=(confirmed:Bool)-instance-method","name":"confirmed=","doc":null,"summary":null,"abstract":false,"args":[{"name":"confirmed","doc":null,"default_value":"","external_name":"confirmed","restriction":"Bool"}],"args_string":"(confirmed : Bool)","args_html":"(confirmed : Bool)","location":{"filename":"src/models/relationship/content/inbox.cr","line_number":16,"url":null},"def":{"name":"confirmed=","args":[{"name":"confirmed","doc":null,"default_value":"","external_name":"confirmed","restriction":"Bool"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@confirmed = confirmed"}},{"id":"owner:ActivityPub::Actor-instance-method","html_id":"owner:ActivityPub::Actor-instance-method","name":"owner","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/relationship/content/inbox.cr","line_number":10,"url":null},"def":{"name":"owner","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@owner || (@owner = (ActivityPub::Actor.find?(iri: self.from_iri) || (raise(NotFound.new(\"#{self.class} owner iri=#{self.from_iri}: not found\")))))"}},{"id":"owner=(owner:ActivityPub::Actor):ActivityPub::Actor-instance-method","html_id":"owner=(owner:ActivityPub::Actor):ActivityPub::Actor-instance-method","name":"owner=","doc":null,"summary":null,"abstract":false,"args":[{"name":"owner","doc":null,"default_value":"","external_name":"owner","restriction":"ActivityPub::Actor"}],"args_string":"(owner : ActivityPub::Actor) : ActivityPub::Actor","args_html":"(owner : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>) : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/relationship/content/inbox.cr","line_number":10,"url":null},"def":{"name":"owner=","args":[{"name":"owner","doc":null,"default_value":"","external_name":"owner","restriction":"ActivityPub::Actor"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@owner = owner\nself.from_iri = owner.iri.as(typeof(self.from_iri))\nowner\n"}},{"id":"owner?:ActivityPub::Actor?-instance-method","html_id":"owner?:ActivityPub::Actor?-instance-method","name":"owner?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/relationship/content/inbox.cr","line_number":10,"url":null},"def":{"name":"owner?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@owner || (@owner = (ActivityPub::Actor.find?(iri: self.from_iri) || nil))"}}],"macros":[],"types":[]},{"html_id":"ktistec/Relationship/Content/Outbox","path":"Relationship/Content/Outbox.html","kind":"class","full_name":"Relationship::Content::Outbox","name":"Outbox","abstract":false,"superclass":{"html_id":"ktistec/Relationship","kind":"class","full_name":"Relationship","name":"Relationship"},"ancestors":[{"html_id":"ktistec/Relationship","kind":"class","full_name":"Relationship","name":"Relationship"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Relationship/Content","kind":"class","full_name":"Relationship::Content","name":"Content"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"_belongs_to_activity:ActivityPub::Activity?-instance-method","html_id":"_belongs_to_activity:ActivityPub::Activity?-instance-method","name":"_belongs_to_activity","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Activity?","args_html":" : <a href=\"../../ActivityPub/Activity.html\">ActivityPub::Activity</a>?","location":{"filename":"src/models/relationship/content/outbox.cr","line_number":13,"url":null},"def":{"name":"_belongs_to_activity","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Activity | ::Nil","visibility":"Public","body":"@activity"}},{"id":"_belongs_to_owner:ActivityPub::Actor?-instance-method","html_id":"_belongs_to_owner:ActivityPub::Actor?-instance-method","name":"_belongs_to_owner","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/relationship/content/outbox.cr","line_number":10,"url":null},"def":{"name":"_belongs_to_owner","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@owner"}},{"id":"activity:ActivityPub::Activity-instance-method","html_id":"activity:ActivityPub::Activity-instance-method","name":"activity","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Activity","args_html":" : <a href=\"../../ActivityPub/Activity.html\">ActivityPub::Activity</a>","location":{"filename":"src/models/relationship/content/outbox.cr","line_number":13,"url":null},"def":{"name":"activity","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Activity","visibility":"Public","body":"@activity || (@activity = (ActivityPub::Activity.find?(iri: self.to_iri) || (raise(NotFound.new(\"#{self.class} activity iri=#{self.to_iri}: not found\")))))"}},{"id":"activity=(activity:ActivityPub::Activity):ActivityPub::Activity-instance-method","html_id":"activity=(activity:ActivityPub::Activity):ActivityPub::Activity-instance-method","name":"activity=","doc":null,"summary":null,"abstract":false,"args":[{"name":"activity","doc":null,"default_value":"","external_name":"activity","restriction":"ActivityPub::Activity"}],"args_string":"(activity : ActivityPub::Activity) : ActivityPub::Activity","args_html":"(activity : <a href=\"../../ActivityPub/Activity.html\">ActivityPub::Activity</a>) : <a href=\"../../ActivityPub/Activity.html\">ActivityPub::Activity</a>","location":{"filename":"src/models/relationship/content/outbox.cr","line_number":13,"url":null},"def":{"name":"activity=","args":[{"name":"activity","doc":null,"default_value":"","external_name":"activity","restriction":"ActivityPub::Activity"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Activity","visibility":"Public","body":"@activity = activity\nself.to_iri = activity.iri.as(typeof(self.to_iri))\nactivity\n"}},{"id":"activity?:ActivityPub::Activity?-instance-method","html_id":"activity?:ActivityPub::Activity?-instance-method","name":"activity?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Activity?","args_html":" : <a href=\"../../ActivityPub/Activity.html\">ActivityPub::Activity</a>?","location":{"filename":"src/models/relationship/content/outbox.cr","line_number":13,"url":null},"def":{"name":"activity?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Activity | ::Nil","visibility":"Public","body":"@activity || (@activity = (ActivityPub::Activity.find?(iri: self.to_iri) || nil))"}},{"id":"confirmed:Bool?-instance-method","html_id":"confirmed:Bool?-instance-method","name":"confirmed","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Bool?","args_html":" : Bool?","location":{"filename":"src/models/relationship/content/outbox.cr","line_number":16,"url":null},"def":{"name":"confirmed","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Bool | ::Nil","visibility":"Public","body":"if (value = @confirmed).nil?\n  @confirmed = (true)\nelse\n  value\nend"}},{"id":"confirmed=(confirmed:Bool)-instance-method","html_id":"confirmed=(confirmed:Bool)-instance-method","name":"confirmed=","doc":null,"summary":null,"abstract":false,"args":[{"name":"confirmed","doc":null,"default_value":"","external_name":"confirmed","restriction":"Bool"}],"args_string":"(confirmed : Bool)","args_html":"(confirmed : Bool)","location":{"filename":"src/models/relationship/content/outbox.cr","line_number":16,"url":null},"def":{"name":"confirmed=","args":[{"name":"confirmed","doc":null,"default_value":"","external_name":"confirmed","restriction":"Bool"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@confirmed = confirmed"}},{"id":"owner:ActivityPub::Actor-instance-method","html_id":"owner:ActivityPub::Actor-instance-method","name":"owner","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/relationship/content/outbox.cr","line_number":10,"url":null},"def":{"name":"owner","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@owner || (@owner = (ActivityPub::Actor.find?(iri: self.from_iri) || (raise(NotFound.new(\"#{self.class} owner iri=#{self.from_iri}: not found\")))))"}},{"id":"owner=(owner:ActivityPub::Actor):ActivityPub::Actor-instance-method","html_id":"owner=(owner:ActivityPub::Actor):ActivityPub::Actor-instance-method","name":"owner=","doc":null,"summary":null,"abstract":false,"args":[{"name":"owner","doc":null,"default_value":"","external_name":"owner","restriction":"ActivityPub::Actor"}],"args_string":"(owner : ActivityPub::Actor) : ActivityPub::Actor","args_html":"(owner : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>) : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/relationship/content/outbox.cr","line_number":10,"url":null},"def":{"name":"owner=","args":[{"name":"owner","doc":null,"default_value":"","external_name":"owner","restriction":"ActivityPub::Actor"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@owner = owner\nself.from_iri = owner.iri.as(typeof(self.from_iri))\nowner\n"}},{"id":"owner?:ActivityPub::Actor?-instance-method","html_id":"owner?:ActivityPub::Actor?-instance-method","name":"owner?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/relationship/content/outbox.cr","line_number":10,"url":null},"def":{"name":"owner?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@owner || (@owner = (ActivityPub::Actor.find?(iri: self.from_iri) || nil))"}}],"macros":[],"types":[]}]},{"html_id":"ktistec/Relationship/Social","path":"Relationship/Social.html","kind":"class","full_name":"Relationship::Social","name":"Social","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Relationship","kind":"class","full_name":"Relationship","name":"Relationship"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[],"macros":[],"types":[{"html_id":"ktistec/Relationship/Social/Follow","path":"Relationship/Social/Follow.html","kind":"class","full_name":"Relationship::Social::Follow","name":"Follow","abstract":false,"superclass":{"html_id":"ktistec/Relationship","kind":"class","full_name":"Relationship","name":"Relationship"},"ancestors":[{"html_id":"ktistec/Relationship","kind":"class","full_name":"Relationship","name":"Relationship"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Relationship/Social","kind":"class","full_name":"Relationship::Social","name":"Social"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"_belongs_to_actor:ActivityPub::Actor?-instance-method","html_id":"_belongs_to_actor:ActivityPub::Actor?-instance-method","name":"_belongs_to_actor","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/relationship/social/follow.cr","line_number":7,"url":null},"def":{"name":"_belongs_to_actor","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@actor"}},{"id":"_belongs_to_object:ActivityPub::Actor?-instance-method","html_id":"_belongs_to_object:ActivityPub::Actor?-instance-method","name":"_belongs_to_object","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/relationship/social/follow.cr","line_number":10,"url":null},"def":{"name":"_belongs_to_object","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@object"}},{"id":"actor:ActivityPub::Actor-instance-method","html_id":"actor:ActivityPub::Actor-instance-method","name":"actor","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/relationship/social/follow.cr","line_number":7,"url":null},"def":{"name":"actor","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@actor || (@actor = (ActivityPub::Actor.find?(iri: self.from_iri) || (raise(NotFound.new(\"#{self.class} actor iri=#{self.from_iri}: not found\")))))"}},{"id":"actor=(actor:ActivityPub::Actor):ActivityPub::Actor-instance-method","html_id":"actor=(actor:ActivityPub::Actor):ActivityPub::Actor-instance-method","name":"actor=","doc":null,"summary":null,"abstract":false,"args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":"ActivityPub::Actor"}],"args_string":"(actor : ActivityPub::Actor) : ActivityPub::Actor","args_html":"(actor : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>) : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/relationship/social/follow.cr","line_number":7,"url":null},"def":{"name":"actor=","args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":"ActivityPub::Actor"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@actor = actor\nself.from_iri = actor.iri.as(typeof(self.from_iri))\nactor\n"}},{"id":"actor?:ActivityPub::Actor?-instance-method","html_id":"actor?:ActivityPub::Actor?-instance-method","name":"actor?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/relationship/social/follow.cr","line_number":7,"url":null},"def":{"name":"actor?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@actor || (@actor = (ActivityPub::Actor.find?(iri: self.from_iri) || nil))"}},{"id":"object:ActivityPub::Actor-instance-method","html_id":"object:ActivityPub::Actor-instance-method","name":"object","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/relationship/social/follow.cr","line_number":10,"url":null},"def":{"name":"object","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@object || (@object = (ActivityPub::Actor.find?(iri: self.to_iri) || (raise(NotFound.new(\"#{self.class} object iri=#{self.to_iri}: not found\")))))"}},{"id":"object=(object:ActivityPub::Actor):ActivityPub::Actor-instance-method","html_id":"object=(object:ActivityPub::Actor):ActivityPub::Actor-instance-method","name":"object=","doc":null,"summary":null,"abstract":false,"args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"ActivityPub::Actor"}],"args_string":"(object : ActivityPub::Actor) : ActivityPub::Actor","args_html":"(object : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>) : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/relationship/social/follow.cr","line_number":10,"url":null},"def":{"name":"object=","args":[{"name":"object","doc":null,"default_value":"","external_name":"object","restriction":"ActivityPub::Actor"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@object = object\nself.to_iri = object.iri.as(typeof(self.to_iri))\nobject\n"}},{"id":"object?:ActivityPub::Actor?-instance-method","html_id":"object?:ActivityPub::Actor?-instance-method","name":"object?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/relationship/social/follow.cr","line_number":10,"url":null},"def":{"name":"object?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@object || (@object = (ActivityPub::Actor.find?(iri: self.to_iri) || nil))"}}],"macros":[],"types":[]}]}]},{"html_id":"ktistec/RelationshipsController","path":"RelationshipsController.html","kind":"class","full_name":"RelationshipsController","name":"RelationshipsController","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"}],"extended_modules":[{"html_id":"ktistec/Ktistec/Open","kind":"module","full_name":"Ktistec::Open","name":"Open"}],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"id":"paginate(collection,env)-class-method","html_id":"paginate(collection,env)-class-method","name":"paginate","doc":null,"summary":null,"abstract":false,"args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(collection, env)","args_html":"(collection, env)","location":{"filename":"src/controllers/relationships.cr","line_number":5,"url":null},"def":{"name":"paginate","args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"path = env.request.path\nquery = env.params.query\npage = 1\nbegin\n  if (p = query[\"page\"].to_i) > 0\n    page = p\n  end\nrescue ArgumentError | KeyError\nend\nrender(\"./src/views/partials/paginator.html.ecr\")\n"}},{"id":"pagination_params(env)-class-method","html_id":"pagination_params(env)-class-method","name":"pagination_params","doc":null,"summary":null,"abstract":false,"args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(env)","args_html":"(env)","location":{"filename":"src/controllers/relationships.cr","line_number":5,"url":null},"def":{"name":"pagination_params","args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"{Math.max(env.params.query[\"page\"]?.try(&.to_i) || 1, 1), Math.min(env.params.query[\"size\"]?.try(&.to_i) || 10, 1000)}"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/RemoteFollowsController","path":"RemoteFollowsController.html","kind":"class","full_name":"RemoteFollowsController","name":"RemoteFollowsController","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"id":"paginate(collection,env)-class-method","html_id":"paginate(collection,env)-class-method","name":"paginate","doc":null,"summary":null,"abstract":false,"args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(collection, env)","args_html":"(collection, env)","location":{"filename":"src/controllers/remote_follows.cr","line_number":7,"url":null},"def":{"name":"paginate","args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"path = env.request.path\nquery = env.params.query\npage = 1\nbegin\n  if (p = query[\"page\"].to_i) > 0\n    page = p\n  end\nrescue ArgumentError | KeyError\nend\nrender(\"./src/views/partials/paginator.html.ecr\")\n"}},{"id":"pagination_params(env)-class-method","html_id":"pagination_params(env)-class-method","name":"pagination_params","doc":null,"summary":null,"abstract":false,"args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(env)","args_html":"(env)","location":{"filename":"src/controllers/remote_follows.cr","line_number":7,"url":null},"def":{"name":"pagination_params","args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"{Math.max(env.params.query[\"page\"]?.try(&.to_i) || 1, 1), Math.min(env.params.query[\"size\"]?.try(&.to_i) || 10, 1000)}"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/SearchesController","path":"SearchesController.html","kind":"class","full_name":"SearchesController","name":"SearchesController","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"}],"extended_modules":[{"html_id":"ktistec/Ktistec/Open","kind":"module","full_name":"Ktistec::Open","name":"Open"}],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"id":"paginate(collection,env)-class-method","html_id":"paginate(collection,env)-class-method","name":"paginate","doc":null,"summary":null,"abstract":false,"args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(collection, env)","args_html":"(collection, env)","location":{"filename":"src/controllers/searches.cr","line_number":7,"url":null},"def":{"name":"paginate","args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"path = env.request.path\nquery = env.params.query\npage = 1\nbegin\n  if (p = query[\"page\"].to_i) > 0\n    page = p\n  end\nrescue ArgumentError | KeyError\nend\nrender(\"./src/views/partials/paginator.html.ecr\")\n"}},{"id":"pagination_params(env)-class-method","html_id":"pagination_params(env)-class-method","name":"pagination_params","doc":null,"summary":null,"abstract":false,"args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(env)","args_html":"(env)","location":{"filename":"src/controllers/searches.cr","line_number":7,"url":null},"def":{"name":"pagination_params","args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"{Math.max(env.params.query[\"page\"]?.try(&.to_i) || 1, 1), Math.min(env.params.query[\"size\"]?.try(&.to_i) || 10, 1000)}"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/Session","path":"Session.html","kind":"class","full_name":"Session","name":"Session","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"}],"extended_modules":[{"html_id":"ktistec/Ktistec/Model/ClassMethods","kind":"module","full_name":"Ktistec::Model::ClassMethods","name":"ClassMethods"}],"subclasses":[],"including_types":[],"namespace":null,"doc":"Client session.\n","summary":"<p>Client session.</p>","class_methods":[{"id":"clean_up_stale_sessions(time=1.day.ago)-class-method","html_id":"clean_up_stale_sessions(time=1.day.ago)-class-method","name":"clean_up_stale_sessions","doc":null,"summary":null,"abstract":false,"args":[{"name":"time","doc":null,"default_value":"1.day.ago","external_name":"time","restriction":""}],"args_string":"(time = <span class=\"n\">1</span>.day.ago)","args_html":"(time = <span class=\"n\">1</span>.day.ago)","location":{"filename":"src/models/session.cr","line_number":51,"url":null},"def":{"name":"clean_up_stale_sessions","args":[{"name":"time","doc":null,"default_value":"1.day.ago","external_name":"time","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"delete = \"DELETE FROM sessions WHERE account_id IS NULL AND updated_at < ?\"\nKtistec.database.exec(delete, time)\n"}}],"constructors":[{"id":"new(_accountaccount:Account)-class-method","html_id":"new(_accountaccount:Account)-class-method","name":"new","doc":"Allocates a new session for an account.\n","summary":"<p>Allocates a new session for an account.</p>","abstract":false,"args":[{"name":"account","doc":null,"default_value":"","external_name":"_account","restriction":"Account"}],"args_string":"(_account account : Account)","args_html":"(_account account : <a href=\"Account.html\">Account</a>)","location":{"filename":"src/models/session.cr","line_number":14,"url":null},"def":{"name":"new","args":[{"name":"account","doc":null,"default_value":"","external_name":"_account","restriction":"Account"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new(account_id: account.id)"}}],"instance_methods":[{"id":"_belongs_to_account:Account?-instance-method","html_id":"_belongs_to_account:Account?-instance-method","name":"_belongs_to_account","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Account?","args_html":" : <a href=\"Account.html\">Account</a>?","location":{"filename":"src/models/session.cr","line_number":49,"url":null},"def":{"name":"_belongs_to_account","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Account | ::Nil","visibility":"Public","body":"@account"}},{"id":"account:Account-instance-method","html_id":"account:Account-instance-method","name":"account","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Account","args_html":" : <a href=\"Account.html\">Account</a>","location":{"filename":"src/models/session.cr","line_number":49,"url":null},"def":{"name":"account","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Account","visibility":"Public","body":"@account || (@account = (Account.find?(id: self.account_id) || (raise(NotFound.new(\"#{self.class} account id=#{self.account_id}: not found\")))))"}},{"id":"account=(account:Account):Account-instance-method","html_id":"account=(account:Account):Account-instance-method","name":"account=","doc":null,"summary":null,"abstract":false,"args":[{"name":"account","doc":null,"default_value":"","external_name":"account","restriction":"Account"}],"args_string":"(account : Account) : Account","args_html":"(account : <a href=\"Account.html\">Account</a>) : <a href=\"Account.html\">Account</a>","location":{"filename":"src/models/session.cr","line_number":49,"url":null},"def":{"name":"account=","args":[{"name":"account","doc":null,"default_value":"","external_name":"account","restriction":"Account"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Account","visibility":"Public","body":"@account = account\nself.account_id = account.id.as(typeof(self.account_id))\naccount\n"}},{"id":"account?:Account?-instance-method","html_id":"account?:Account?-instance-method","name":"account?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Account?","args_html":" : <a href=\"Account.html\">Account</a>?","location":{"filename":"src/models/session.cr","line_number":49,"url":null},"def":{"name":"account?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Account | ::Nil","visibility":"Public","body":"@account || (@account = (Account.find?(id: self.account_id) || nil))"}},{"id":"account_id:Int64?-instance-method","html_id":"account_id:Int64?-instance-method","name":"account_id","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Int64?","args_html":" : Int64?","location":{"filename":"src/models/session.cr","line_number":25,"url":null},"def":{"name":"account_id","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Int64 | ::Nil","visibility":"Public","body":"@account_id"}},{"id":"account_id=(account_id:Int64?)-instance-method","html_id":"account_id=(account_id:Int64?)-instance-method","name":"account_id=","doc":null,"summary":null,"abstract":false,"args":[{"name":"account_id","doc":null,"default_value":"","external_name":"account_id","restriction":"Int64 | ::Nil"}],"args_string":"(account_id : Int64?)","args_html":"(account_id : Int64?)","location":{"filename":"src/models/session.cr","line_number":25,"url":null},"def":{"name":"account_id=","args":[{"name":"account_id","doc":null,"default_value":"","external_name":"account_id","restriction":"Int64 | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@account_id = account_id"}},{"id":"body-instance-method","html_id":"body-instance-method","name":"body","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/session.cr","line_number":27,"url":null},"def":{"name":"body","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"JSON.parse(body_json)"}},{"id":"body=(body)-instance-method","html_id":"body=(body)-instance-method","name":"body=","doc":null,"summary":null,"abstract":false,"args":[{"name":"body","doc":null,"default_value":"","external_name":"body","restriction":""}],"args_string":"(body)","args_html":"(body)","location":{"filename":"src/models/session.cr","line_number":31,"url":null},"def":{"name":"body=","args":[{"name":"body","doc":null,"default_value":"","external_name":"body","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self.body_json = body.to_json\nbody\n"}},{"id":"body_json:String?-instance-method","html_id":"body_json:String?-instance-method","name":"body_json","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/session.cr","line_number":22,"url":null},"def":{"name":"body_json","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"if (value = @body_json).nil?\n  @body_json = (\"{}\")\nelse\n  value\nend"}},{"id":"body_json=(body_json:String)-instance-method","html_id":"body_json=(body_json:String)-instance-method","name":"body_json=","doc":null,"summary":null,"abstract":false,"args":[{"name":"body_json","doc":null,"default_value":"","external_name":"body_json","restriction":"String"}],"args_string":"(body_json : String)","args_html":"(body_json : String)","location":{"filename":"src/models/session.cr","line_number":22,"url":null},"def":{"name":"body_json=","args":[{"name":"body_json","doc":null,"default_value":"","external_name":"body_json","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@body_json = body_json"}},{"id":"session_key:String?-instance-method","html_id":"session_key:String?-instance-method","name":"session_key","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/session.cr","line_number":19,"url":null},"def":{"name":"session_key","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"if (value = @session_key).nil?\n  @session_key = (Random::Secure.urlsafe_base64)\nelse\n  value\nend"}},{"id":"session_key=(session_key:String)-instance-method","html_id":"session_key=(session_key:String)-instance-method","name":"session_key=","doc":null,"summary":null,"abstract":false,"args":[{"name":"session_key","doc":null,"default_value":"","external_name":"session_key","restriction":"String"}],"args_string":"(session_key : String)","args_html":"(session_key : String)","location":{"filename":"src/models/session.cr","line_number":19,"url":null},"def":{"name":"session_key=","args":[{"name":"session_key","doc":null,"default_value":"","external_name":"session_key","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@session_key = session_key"}},{"id":"string(key,value)-instance-method","html_id":"string(key,value)-instance-method","name":"string","doc":null,"summary":null,"abstract":false,"args":[{"name":"key","doc":null,"default_value":"","external_name":"key","restriction":""},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"args_string":"(key, value)","args_html":"(key, value)","location":{"filename":"src/models/session.cr","line_number":36,"url":null},"def":{"name":"string","args":[{"name":"key","doc":null,"default_value":"","external_name":"key","restriction":""},{"name":"value","doc":null,"default_value":"","external_name":"value","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self.body = self.body.as_h.merge({key => value})\nsave\n"}},{"id":"string(key)-instance-method","html_id":"string(key)-instance-method","name":"string","doc":null,"summary":null,"abstract":false,"args":[{"name":"key","doc":null,"default_value":"","external_name":"key","restriction":""}],"args_string":"(key)","args_html":"(key)","location":{"filename":"src/models/session.cr","line_number":41,"url":null},"def":{"name":"string","args":[{"name":"key","doc":null,"default_value":"","external_name":"key","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self.body[key].as_s"}},{"id":"string?(key)-instance-method","html_id":"string?(key)-instance-method","name":"string?","doc":null,"summary":null,"abstract":false,"args":[{"name":"key","doc":null,"default_value":"","external_name":"key","restriction":""}],"args_string":"(key)","args_html":"(key)","location":{"filename":"src/models/session.cr","line_number":45,"url":null},"def":{"name":"string?","args":[{"name":"key","doc":null,"default_value":"","external_name":"key","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"self.body[key]?.try(&.as_s)"}}],"macros":[],"types":[]},{"html_id":"ktistec/SessionsController","path":"SessionsController.html","kind":"class","full_name":"SessionsController","name":"SessionsController","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"id":"paginate(collection,env)-class-method","html_id":"paginate(collection,env)-class-method","name":"paginate","doc":null,"summary":null,"abstract":false,"args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(collection, env)","args_html":"(collection, env)","location":{"filename":"src/controllers/sessions.cr","line_number":4,"url":null},"def":{"name":"paginate","args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"path = env.request.path\nquery = env.params.query\npage = 1\nbegin\n  if (p = query[\"page\"].to_i) > 0\n    page = p\n  end\nrescue ArgumentError | KeyError\nend\nrender(\"./src/views/partials/paginator.html.ecr\")\n"}},{"id":"pagination_params(env)-class-method","html_id":"pagination_params(env)-class-method","name":"pagination_params","doc":null,"summary":null,"abstract":false,"args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(env)","args_html":"(env)","location":{"filename":"src/controllers/sessions.cr","line_number":4,"url":null},"def":{"name":"pagination_params","args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"{Math.max(env.params.query[\"page\"]?.try(&.to_i) || 1, 1), Math.min(env.params.query[\"size\"]?.try(&.to_i) || 10, 1000)}"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/SettingsController","path":"SettingsController.html","kind":"class","full_name":"SettingsController","name":"SettingsController","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"id":"paginate(collection,env)-class-method","html_id":"paginate(collection,env)-class-method","name":"paginate","doc":null,"summary":null,"abstract":false,"args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(collection, env)","args_html":"(collection, env)","location":{"filename":"src/controllers/settings.cr","line_number":6,"url":null},"def":{"name":"paginate","args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"path = env.request.path\nquery = env.params.query\npage = 1\nbegin\n  if (p = query[\"page\"].to_i) > 0\n    page = p\n  end\nrescue ArgumentError | KeyError\nend\nrender(\"./src/views/partials/paginator.html.ecr\")\n"}},{"id":"pagination_params(env)-class-method","html_id":"pagination_params(env)-class-method","name":"pagination_params","doc":null,"summary":null,"abstract":false,"args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(env)","args_html":"(env)","location":{"filename":"src/controllers/settings.cr","line_number":6,"url":null},"def":{"name":"pagination_params","args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"{Math.max(env.params.query[\"page\"]?.try(&.to_i) || 1, 1), Math.min(env.params.query[\"size\"]?.try(&.to_i) || 10, 1000)}"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/SuggestionsController","path":"SuggestionsController.html","kind":"class","full_name":"SuggestionsController","name":"SuggestionsController","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"id":"paginate(collection,env)-class-method","html_id":"paginate(collection,env)-class-method","name":"paginate","doc":null,"summary":null,"abstract":false,"args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(collection, env)","args_html":"(collection, env)","location":{"filename":"src/controllers/suggestions.cr","line_number":6,"url":null},"def":{"name":"paginate","args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"path = env.request.path\nquery = env.params.query\npage = 1\nbegin\n  if (p = query[\"page\"].to_i) > 0\n    page = p\n  end\nrescue ArgumentError | KeyError\nend\nrender(\"./src/views/partials/paginator.html.ecr\")\n"}},{"id":"pagination_params(env)-class-method","html_id":"pagination_params(env)-class-method","name":"pagination_params","doc":null,"summary":null,"abstract":false,"args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(env)","args_html":"(env)","location":{"filename":"src/controllers/suggestions.cr","line_number":6,"url":null},"def":{"name":"pagination_params","args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"{Math.max(env.params.query[\"page\"]?.try(&.to_i) || 1, 1), Math.min(env.params.query[\"size\"]?.try(&.to_i) || 10, 1000)}"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/Tag","path":"Tag.html","kind":"class","full_name":"Tag","name":"Tag","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"}],"extended_modules":[{"html_id":"ktistec/Ktistec/Model/ClassMethods","kind":"module","full_name":"Ktistec::Model::ClassMethods","name":"ClassMethods"}],"subclasses":[{"html_id":"ktistec/Tag/Hashtag","kind":"class","full_name":"Tag::Hashtag","name":"Hashtag"},{"html_id":"ktistec/Tag/Mention","kind":"class","full_name":"Tag::Mention","name":"Mention"}],"including_types":[],"namespace":null,"doc":"Tag.\n","summary":"<p>Tag.</p>","class_methods":[],"constructors":[],"instance_methods":[{"id":"after_destroy-instance-method","html_id":"after_destroy-instance-method","name":"after_destroy","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/tag.cr","line_number":82,"url":null},"def":{"name":"after_destroy","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"recount"}},{"id":"after_save-instance-method","html_id":"after_save-instance-method","name":"after_save","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/tag.cr","line_number":78,"url":null},"def":{"name":"after_save","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"recount"}},{"id":"count-instance-method","html_id":"count-instance-method","name":"count","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/tag.cr","line_number":51,"url":null},"def":{"name":"count","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"query = \"  SELECT ifnull(sum(count), 0) FROM tag_statistics WHERE type = ? AND name = ?\"\nKtistec.database.scalar(query, self.short_type, self.name)\n"}},{"id":"href:String?-instance-method","html_id":"href:String?-instance-method","name":"href","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/tag.cr","line_number":90,"url":null},"def":{"name":"href","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@href"}},{"id":"href=(href:String?)-instance-method","html_id":"href=(href:String?)-instance-method","name":"href=","doc":null,"summary":null,"abstract":false,"args":[{"name":"href","doc":null,"default_value":"","external_name":"href","restriction":"String | ::Nil"}],"args_string":"(href : String?)","args_html":"(href : String?)","location":{"filename":"src/models/tag.cr","line_number":90,"url":null},"def":{"name":"href=","args":[{"name":"href","doc":null,"default_value":"","external_name":"href","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@href = href"}},{"id":"name:String-instance-method","html_id":"name:String-instance-method","name":"name","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","args_html":" : String","location":{"filename":"src/models/tag.cr","line_number":87,"url":null},"def":{"name":"name","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@name"}},{"id":"name=(name:String)-instance-method","html_id":"name=(name:String)-instance-method","name":"name=","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"}],"args_string":"(name : String)","args_html":"(name : String)","location":{"filename":"src/models/tag.cr","line_number":87,"url":null},"def":{"name":"name=","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@name = name"}},{"id":"short_type-instance-method","html_id":"short_type-instance-method","name":"short_type","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/tag.cr","line_number":47,"url":null},"def":{"name":"short_type","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(self.class.to_s.split(\"::\")).last.underscore"}},{"id":"subject_iri:String?-instance-method","html_id":"subject_iri:String?-instance-method","name":"subject_iri","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/tag.cr","line_number":12,"url":null},"def":{"name":"subject_iri","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"if (value = @subject_iri).nil?\n  @subject_iri = (\"\")\nelse\n  value\nend"}},{"id":"subject_iri=(subject_iri:String)-instance-method","html_id":"subject_iri=(subject_iri:String)-instance-method","name":"subject_iri=","doc":null,"summary":null,"abstract":false,"args":[{"name":"subject_iri","doc":null,"default_value":"","external_name":"subject_iri","restriction":"String"}],"args_string":"(subject_iri : String)","args_html":"(subject_iri : String)","location":{"filename":"src/models/tag.cr","line_number":12,"url":null},"def":{"name":"subject_iri=","args":[{"name":"subject_iri","doc":null,"default_value":"","external_name":"subject_iri","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@subject_iri = subject_iri"}}],"macros":[],"types":[{"html_id":"ktistec/Tag/Hashtag","path":"Tag/Hashtag.html","kind":"class","full_name":"Tag::Hashtag","name":"Hashtag","abstract":false,"superclass":{"html_id":"ktistec/Tag","kind":"class","full_name":"Tag","name":"Tag"},"ancestors":[{"html_id":"ktistec/Tag","kind":"class","full_name":"Tag","name":"Tag"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Tag","kind":"class","full_name":"Tag","name":"Tag"},"doc":null,"summary":null,"class_methods":[{"id":"match(prefix,limit=1)-class-method","html_id":"match(prefix,limit=1)-class-method","name":"match","doc":null,"summary":null,"abstract":false,"args":[{"name":"prefix","doc":null,"default_value":"","external_name":"prefix","restriction":""},{"name":"limit","doc":null,"default_value":"1","external_name":"limit","restriction":""}],"args_string":"(prefix, limit = <span class=\"n\">1</span>)","args_html":"(prefix, limit = <span class=\"n\">1</span>)","location":{"filename":"src/models/tag/hashtag.cr","line_number":6,"url":null},"def":{"name":"match","args":[{"name":"prefix","doc":null,"default_value":"","external_name":"prefix","restriction":""},{"name":"limit","doc":null,"default_value":"1","external_name":"limit","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"query = \"    SELECT name, count\\n      FROM tag_statistics\\n     WHERE type = ?\\n       AND name LIKE ?\\n  ORDER BY count DESC\\n     LIMIT ?\"\nKtistec.database.query_all(query, short_type, prefix + \"%\", limit, as: {String, Int64})\n"}},{"id":"objects_with_tag(name,page=1,size=10)-class-method","html_id":"objects_with_tag(name,page=1,size=10)-class-method","name":"objects_with_tag","doc":null,"summary":null,"abstract":false,"args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"page","doc":null,"default_value":"1","external_name":"page","restriction":""},{"name":"size","doc":null,"default_value":"10","external_name":"size","restriction":""}],"args_string":"(name, page = <span class=\"n\">1</span>, size = <span class=\"n\">10</span>)","args_html":"(name, page = <span class=\"n\">1</span>, size = <span class=\"n\">10</span>)","location":{"filename":"src/models/tag/hashtag.cr","line_number":10,"url":null},"def":{"name":"objects_with_tag","args":[{"name":"name","doc":null,"default_value":"","external_name":"name","restriction":""},{"name":"page","doc":null,"default_value":"1","external_name":"page","restriction":""},{"name":"size","doc":null,"default_value":"10","external_name":"size","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"query = \"  SELECT #{ActivityPub::Object.columns(prefix: \"o\")}\\n    FROM objects AS o\\n   WHERE EXISTS (\\n        SELECT 1\\n          FROM tags AS t\\n         WHERE t.type = \\\"#{Tag::Hashtag}\\\"\\n           AND t.subject_iri = o.iri\\n           AND t.name = ?)\\n     AND o.published IS NOT NULL\\n     AND o.deleted_at IS NULL\\n     AND o.visible = 1\\n     AND o.id NOT IN (\\n        SELECT o.id\\n          FROM objects AS o\\n         WHERE EXISTS (\\n              SELECT 1\\n                FROM tags AS t\\n               WHERE t.type = \\\"#{Tag::Hashtag}\\\"\\n                 AND t.subject_iri = o.iri\\n                 AND t.name = ?)\\n           AND o.published IS NOT NULL\\n           AND o.deleted_at IS NULL\\n           AND o.visible = 1\\n      ORDER BY o.published DESC\\n         LIMIT ?)\\nORDER BY o.published DESC\\n   LIMIT ?\"\nActivityPub::Object.query_and_paginate(query, name, name, page: page, size: size)\n"}},{"id":"short_type-class-method","html_id":"short_type-class-method","name":"short_type","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/tag/hashtag.cr","line_number":6,"url":null},"def":{"name":"short_type","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(self.to_s.split(\"::\")).last.underscore"}}],"constructors":[],"instance_methods":[{"id":"_belongs_to_subject:ActivityPub::Object|ActivityPub::Actor?-instance-method","html_id":"_belongs_to_subject:ActivityPub::Object|ActivityPub::Actor?-instance-method","name":"_belongs_to_subject","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Object | ActivityPub::Actor?","args_html":" : <a href=\"../ActivityPub/Object.html\">ActivityPub::Object</a> | <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/tag/hashtag.cr","line_number":7,"url":null},"def":{"name":"_belongs_to_subject","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object | ActivityPub::Actor | ::Nil","visibility":"Public","body":"@subject"}},{"id":"subject:ActivityPub::Object|ActivityPub::Actor-instance-method","html_id":"subject:ActivityPub::Object|ActivityPub::Actor-instance-method","name":"subject","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Object | ActivityPub::Actor","args_html":" : <a href=\"../ActivityPub/Object.html\">ActivityPub::Object</a> | <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/tag/hashtag.cr","line_number":7,"url":null},"def":{"name":"subject","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object | ActivityPub::Actor","visibility":"Public","body":"@subject || (@subject = ((ActivityPub::Object.find?(iri: self.subject_iri) || ActivityPub::Actor.find?(iri: self.subject_iri)) || (raise(NotFound.new(\"#{self.class} subject iri=#{self.subject_iri}: not found\")))))"}},{"id":"subject=(subject:ActivityPub::Object|ActivityPub::Actor):ActivityPub::Object|ActivityPub::Actor-instance-method","html_id":"subject=(subject:ActivityPub::Object|ActivityPub::Actor):ActivityPub::Object|ActivityPub::Actor-instance-method","name":"subject=","doc":null,"summary":null,"abstract":false,"args":[{"name":"subject","doc":null,"default_value":"","external_name":"subject","restriction":"ActivityPub::Object | ActivityPub::Actor"}],"args_string":"(subject : ActivityPub::Object | ActivityPub::Actor) : ActivityPub::Object | ActivityPub::Actor","args_html":"(subject : <a href=\"../ActivityPub/Object.html\">ActivityPub::Object</a> | <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>) : <a href=\"../ActivityPub/Object.html\">ActivityPub::Object</a> | <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/tag/hashtag.cr","line_number":7,"url":null},"def":{"name":"subject=","args":[{"name":"subject","doc":null,"default_value":"","external_name":"subject","restriction":"ActivityPub::Object | ActivityPub::Actor"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object | ActivityPub::Actor","visibility":"Public","body":"@subject = subject\nself.subject_iri = subject.iri.as(typeof(self.subject_iri))\nsubject\n"}},{"id":"subject?:ActivityPub::Object|ActivityPub::Actor?-instance-method","html_id":"subject?:ActivityPub::Object|ActivityPub::Actor?-instance-method","name":"subject?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Object | ActivityPub::Actor?","args_html":" : <a href=\"../ActivityPub/Object.html\">ActivityPub::Object</a> | <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/tag/hashtag.cr","line_number":7,"url":null},"def":{"name":"subject?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object | ActivityPub::Actor | ::Nil","visibility":"Public","body":"@subject || (@subject = ((ActivityPub::Object.find?(iri: self.subject_iri) || ActivityPub::Actor.find?(iri: self.subject_iri)) || nil))"}}],"macros":[],"types":[]},{"html_id":"ktistec/Tag/Mention","path":"Tag/Mention.html","kind":"class","full_name":"Tag::Mention","name":"Mention","abstract":false,"superclass":{"html_id":"ktistec/Tag","kind":"class","full_name":"Tag","name":"Tag"},"ancestors":[{"html_id":"ktistec/Tag","kind":"class","full_name":"Tag","name":"Tag"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Tag","kind":"class","full_name":"Tag","name":"Tag"},"doc":null,"summary":null,"class_methods":[{"id":"match(prefix,limit=1)-class-method","html_id":"match(prefix,limit=1)-class-method","name":"match","doc":null,"summary":null,"abstract":false,"args":[{"name":"prefix","doc":null,"default_value":"","external_name":"prefix","restriction":""},{"name":"limit","doc":null,"default_value":"1","external_name":"limit","restriction":""}],"args_string":"(prefix, limit = <span class=\"n\">1</span>)","args_html":"(prefix, limit = <span class=\"n\">1</span>)","location":{"filename":"src/models/tag/mention.cr","line_number":5,"url":null},"def":{"name":"match","args":[{"name":"prefix","doc":null,"default_value":"","external_name":"prefix","restriction":""},{"name":"limit","doc":null,"default_value":"1","external_name":"limit","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"query = \"    SELECT name, count\\n      FROM tag_statistics\\n     WHERE type = ?\\n       AND name LIKE ?\\n  ORDER BY count DESC\\n     LIMIT ?\"\nKtistec.database.query_all(query, short_type, prefix + \"%\", limit, as: {String, Int64})\n"}},{"id":"short_type-class-method","html_id":"short_type-class-method","name":"short_type","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/tag/mention.cr","line_number":5,"url":null},"def":{"name":"short_type","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"(self.to_s.split(\"::\")).last.underscore"}}],"constructors":[],"instance_methods":[{"id":"_belongs_to_subject:ActivityPub::Object?-instance-method","html_id":"_belongs_to_subject:ActivityPub::Object?-instance-method","name":"_belongs_to_subject","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Object?","args_html":" : <a href=\"../ActivityPub/Object.html\">ActivityPub::Object</a>?","location":{"filename":"src/models/tag/mention.cr","line_number":6,"url":null},"def":{"name":"_belongs_to_subject","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object | ::Nil","visibility":"Public","body":"@subject"}},{"id":"subject:ActivityPub::Object-instance-method","html_id":"subject:ActivityPub::Object-instance-method","name":"subject","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Object","args_html":" : <a href=\"../ActivityPub/Object.html\">ActivityPub::Object</a>","location":{"filename":"src/models/tag/mention.cr","line_number":6,"url":null},"def":{"name":"subject","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object","visibility":"Public","body":"@subject || (@subject = (ActivityPub::Object.find?(iri: self.subject_iri) || (raise(NotFound.new(\"#{self.class} subject iri=#{self.subject_iri}: not found\")))))"}},{"id":"subject=(subject:ActivityPub::Object):ActivityPub::Object-instance-method","html_id":"subject=(subject:ActivityPub::Object):ActivityPub::Object-instance-method","name":"subject=","doc":null,"summary":null,"abstract":false,"args":[{"name":"subject","doc":null,"default_value":"","external_name":"subject","restriction":"ActivityPub::Object"}],"args_string":"(subject : ActivityPub::Object) : ActivityPub::Object","args_html":"(subject : <a href=\"../ActivityPub/Object.html\">ActivityPub::Object</a>) : <a href=\"../ActivityPub/Object.html\">ActivityPub::Object</a>","location":{"filename":"src/models/tag/mention.cr","line_number":6,"url":null},"def":{"name":"subject=","args":[{"name":"subject","doc":null,"default_value":"","external_name":"subject","restriction":"ActivityPub::Object"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object","visibility":"Public","body":"@subject = subject\nself.subject_iri = subject.iri.as(typeof(self.subject_iri))\nsubject\n"}},{"id":"subject?:ActivityPub::Object?-instance-method","html_id":"subject?:ActivityPub::Object?-instance-method","name":"subject?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Object?","args_html":" : <a href=\"../ActivityPub/Object.html\">ActivityPub::Object</a>?","location":{"filename":"src/models/tag/mention.cr","line_number":6,"url":null},"def":{"name":"subject?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Object | ::Nil","visibility":"Public","body":"@subject || (@subject = (ActivityPub::Object.find?(iri: self.subject_iri) || nil))"}}],"macros":[],"types":[]}]},{"html_id":"ktistec/TagsController","path":"TagsController.html","kind":"class","full_name":"TagsController","name":"TagsController","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"id":"paginate(collection,env)-class-method","html_id":"paginate(collection,env)-class-method","name":"paginate","doc":null,"summary":null,"abstract":false,"args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(collection, env)","args_html":"(collection, env)","location":{"filename":"src/controllers/tags.cr","line_number":5,"url":null},"def":{"name":"paginate","args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"path = env.request.path\nquery = env.params.query\npage = 1\nbegin\n  if (p = query[\"page\"].to_i) > 0\n    page = p\n  end\nrescue ArgumentError | KeyError\nend\nrender(\"./src/views/partials/paginator.html.ecr\")\n"}},{"id":"pagination_params(env)-class-method","html_id":"pagination_params(env)-class-method","name":"pagination_params","doc":null,"summary":null,"abstract":false,"args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(env)","args_html":"(env)","location":{"filename":"src/controllers/tags.cr","line_number":5,"url":null},"def":{"name":"pagination_params","args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"{Math.max(env.params.query[\"page\"]?.try(&.to_i) || 1, 1), Math.min(env.params.query[\"size\"]?.try(&.to_i) || 10, 1000)}"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/Task","path":"Task.html","kind":"class","full_name":"Task","name":"Task","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"}],"extended_modules":[{"html_id":"ktistec/Ktistec/Model/ClassMethods","kind":"module","full_name":"Ktistec::Model::ClassMethods","name":"ClassMethods"}],"subclasses":[{"html_id":"ktistec/Task/Deliver","kind":"class","full_name":"Task::Deliver","name":"Deliver"},{"html_id":"ktistec/Task/RefreshActor","kind":"class","full_name":"Task::RefreshActor","name":"RefreshActor"},{"html_id":"ktistec/Task/Terminate","kind":"class","full_name":"Task::Terminate","name":"Terminate"}],"including_types":[],"namespace":null,"doc":"Asynchronous task.\n","summary":"<p>Asynchronous task.</p>","class_methods":[{"id":"scheduled(now=Time.utc)-class-method","html_id":"scheduled(now=Time.utc)-class-method","name":"scheduled","doc":null,"summary":null,"abstract":false,"args":[{"name":"now","doc":null,"default_value":"Time.utc","external_name":"now","restriction":""}],"args_string":"(now = <span class=\"t\">Time</span>.utc)","args_html":"(now = <span class=\"t\">Time</span>.utc)","location":{"filename":"src/models/task.cr","line_number":54,"url":null},"def":{"name":"scheduled","args":[{"name":"now","doc":null,"default_value":"Time.utc","external_name":"now","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"query = \"  running = 0 AND complete = 0 AND backtrace IS NULL\\n  AND (next_attempt_at IS NULL OR next_attempt_at < ?)\\n  ORDER BY next_attempt_at, created_at\"\nwhere(query, now)\n"}}],"constructors":[],"instance_methods":[{"id":"backtrace:Array(String)?-instance-method","html_id":"backtrace:Array(String)?-instance-method","name":"backtrace","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(String)?","args_html":" : <a href=\"Array.html\">Array</a>(String)?","location":{"filename":"src/models/task.cr","line_number":38,"url":null},"def":{"name":"backtrace","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(String) | ::Nil","visibility":"Public","body":"@backtrace"}},{"id":"backtrace=(backtrace:Array(String)?)-instance-method","html_id":"backtrace=(backtrace:Array(String)?)-instance-method","name":"backtrace=","doc":null,"summary":null,"abstract":false,"args":[{"name":"backtrace","doc":null,"default_value":"","external_name":"backtrace","restriction":"Array(String) | ::Nil"}],"args_string":"(backtrace : Array(String)?)","args_html":"(backtrace : <a href=\"Array.html\">Array</a>(String)?)","location":{"filename":"src/models/task.cr","line_number":38,"url":null},"def":{"name":"backtrace=","args":[{"name":"backtrace","doc":null,"default_value":"","external_name":"backtrace","restriction":"Array(String) | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@backtrace = backtrace"}},{"id":"complete:Bool?-instance-method","html_id":"complete:Bool?-instance-method","name":"complete","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Bool?","args_html":" : Bool?","location":{"filename":"src/models/task.cr","line_number":35,"url":null},"def":{"name":"complete","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Bool | ::Nil","visibility":"Public","body":"if (value = @complete).nil?\n  @complete = (false)\nelse\n  value\nend"}},{"id":"complete=(complete:Bool)-instance-method","html_id":"complete=(complete:Bool)-instance-method","name":"complete=","doc":null,"summary":null,"abstract":false,"args":[{"name":"complete","doc":null,"default_value":"","external_name":"complete","restriction":"Bool"}],"args_string":"(complete : Bool)","args_html":"(complete : Bool)","location":{"filename":"src/models/task.cr","line_number":35,"url":null},"def":{"name":"complete=","args":[{"name":"complete","doc":null,"default_value":"","external_name":"complete","restriction":"Bool"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@complete = complete"}},{"id":"failures:Array(Failure)?-instance-method","html_id":"failures:Array(Failure)?-instance-method","name":"failures","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(Failure)?","args_html":" : <a href=\"Array.html\">Array</a>(<a href=\"Task/Failure.html\">Failure</a>)?","location":{"filename":"src/models/task.cr","line_number":18,"url":null},"def":{"name":"failures","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(Failure) | ::Nil","visibility":"Public","body":"if (value = @failures).nil?\n  @failures = ([] of Failure)\nelse\n  value\nend"}},{"id":"failures=(failures:Array(Failure))-instance-method","html_id":"failures=(failures:Array(Failure))-instance-method","name":"failures=","doc":null,"summary":null,"abstract":false,"args":[{"name":"failures","doc":null,"default_value":"","external_name":"failures","restriction":"Array(Failure)"}],"args_string":"(failures : Array(Failure))","args_html":"(failures : <a href=\"Array.html\">Array</a>(<a href=\"Task/Failure.html\">Failure</a>))","location":{"filename":"src/models/task.cr","line_number":18,"url":null},"def":{"name":"failures=","args":[{"name":"failures","doc":null,"default_value":"","external_name":"failures","restriction":"Array(Failure)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@failures = failures"}},{"id":"last_attempt_at:Time?-instance-method","html_id":"last_attempt_at:Time?-instance-method","name":"last_attempt_at","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Time?","args_html":" : Time?","location":{"filename":"src/models/task.cr","line_number":44,"url":null},"def":{"name":"last_attempt_at","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Time | ::Nil","visibility":"Public","body":"@last_attempt_at"}},{"id":"last_attempt_at=(last_attempt_at:Time?)-instance-method","html_id":"last_attempt_at=(last_attempt_at:Time?)-instance-method","name":"last_attempt_at=","doc":null,"summary":null,"abstract":false,"args":[{"name":"last_attempt_at","doc":null,"default_value":"","external_name":"last_attempt_at","restriction":"Time | ::Nil"}],"args_string":"(last_attempt_at : Time?)","args_html":"(last_attempt_at : Time?)","location":{"filename":"src/models/task.cr","line_number":44,"url":null},"def":{"name":"last_attempt_at=","args":[{"name":"last_attempt_at","doc":null,"default_value":"","external_name":"last_attempt_at","restriction":"Time | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@last_attempt_at = last_attempt_at"}},{"id":"next_attempt_at:Time?-instance-method","html_id":"next_attempt_at:Time?-instance-method","name":"next_attempt_at","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Time?","args_html":" : Time?","location":{"filename":"src/models/task.cr","line_number":41,"url":null},"def":{"name":"next_attempt_at","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Time | ::Nil","visibility":"Public","body":"@next_attempt_at"}},{"id":"next_attempt_at=(next_attempt_at:Time?)-instance-method","html_id":"next_attempt_at=(next_attempt_at:Time?)-instance-method","name":"next_attempt_at=","doc":null,"summary":null,"abstract":false,"args":[{"name":"next_attempt_at","doc":null,"default_value":"","external_name":"next_attempt_at","restriction":"Time | ::Nil"}],"args_string":"(next_attempt_at : Time?)","args_html":"(next_attempt_at : Time?)","location":{"filename":"src/models/task.cr","line_number":41,"url":null},"def":{"name":"next_attempt_at=","args":[{"name":"next_attempt_at","doc":null,"default_value":"","external_name":"next_attempt_at","restriction":"Time | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@next_attempt_at = next_attempt_at"}},{"id":"past_due?(now=Time.utc)-instance-method","html_id":"past_due?(now=Time.utc)-instance-method","name":"past_due?","doc":null,"summary":null,"abstract":false,"args":[{"name":"now","doc":null,"default_value":"Time.utc","external_name":"now","restriction":""}],"args_string":"(now = <span class=\"t\">Time</span>.utc)","args_html":"(now = <span class=\"t\">Time</span>.utc)","location":{"filename":"src/models/task.cr","line_number":50,"url":null},"def":{"name":"past_due?","args":[{"name":"now","doc":null,"default_value":"Time.utc","external_name":"now","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"next_attempt_at.nil? || next_attempt_at.try(&.<(now))"}},{"id":"perform-instance-method","html_id":"perform-instance-method","name":"perform","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/task.cr","line_number":68,"url":null},"def":{"name":"perform","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"raise(NotImplementedError.new(\"Task#perform must be implemented in each subclass\"))"}},{"id":"runnable?-instance-method","html_id":"runnable?-instance-method","name":"runnable?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/task.cr","line_number":46,"url":null},"def":{"name":"runnable?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"((!running) && (!complete)) && (!backtrace)"}},{"id":"running:Bool?-instance-method","html_id":"running:Bool?-instance-method","name":"running","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Bool?","args_html":" : Bool?","location":{"filename":"src/models/task.cr","line_number":32,"url":null},"def":{"name":"running","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Bool | ::Nil","visibility":"Public","body":"if (value = @running).nil?\n  @running = (false)\nelse\n  value\nend"}},{"id":"running=(running:Bool)-instance-method","html_id":"running=(running:Bool)-instance-method","name":"running=","doc":null,"summary":null,"abstract":false,"args":[{"name":"running","doc":null,"default_value":"","external_name":"running","restriction":"Bool"}],"args_string":"(running : Bool)","args_html":"(running : Bool)","location":{"filename":"src/models/task.cr","line_number":32,"url":null},"def":{"name":"running=","args":[{"name":"running","doc":null,"default_value":"","external_name":"running","restriction":"Bool"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@running = running"}},{"id":"schedule(next_attempt_at=nil)-instance-method","html_id":"schedule(next_attempt_at=nil)-instance-method","name":"schedule","doc":null,"summary":null,"abstract":false,"args":[{"name":"next_attempt_at","doc":null,"default_value":"nil","external_name":"next_attempt_at","restriction":""}],"args_string":"(next_attempt_at = <span class=\"n\">nil</span>)","args_html":"(next_attempt_at = <span class=\"n\">nil</span>)","location":{"filename":"src/models/task.cr","line_number":63,"url":null},"def":{"name":"schedule","args":[{"name":"next_attempt_at","doc":null,"default_value":"nil","external_name":"next_attempt_at","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@next_attempt_at = next_attempt_at\nif runnable?\nelse\n  raise(\"Not runnable\")\nend\nsave\n"}},{"id":"source_iri:String-instance-method","html_id":"source_iri:String-instance-method","name":"source_iri","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","args_html":" : String","location":{"filename":"src/models/task.cr","line_number":12,"url":null},"def":{"name":"source_iri","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@source_iri"}},{"id":"source_iri=(source_iri:String)-instance-method","html_id":"source_iri=(source_iri:String)-instance-method","name":"source_iri=","doc":null,"summary":null,"abstract":false,"args":[{"name":"source_iri","doc":null,"default_value":"","external_name":"source_iri","restriction":"String"}],"args_string":"(source_iri : String)","args_html":"(source_iri : String)","location":{"filename":"src/models/task.cr","line_number":12,"url":null},"def":{"name":"source_iri=","args":[{"name":"source_iri","doc":null,"default_value":"","external_name":"source_iri","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@source_iri = source_iri"}},{"id":"state:String?-instance-method","html_id":"state:String?-instance-method","name":"state","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String?","args_html":" : String?","location":{"filename":"src/models/task.cr","line_number":73,"url":null},"def":{"name":"state","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String | ::Nil","visibility":"Public","body":"@state"}},{"id":"state=(state:String?)-instance-method","html_id":"state=(state:String?)-instance-method","name":"state=","doc":null,"summary":null,"abstract":false,"args":[{"name":"state","doc":null,"default_value":"","external_name":"state","restriction":"String | ::Nil"}],"args_string":"(state : String?)","args_html":"(state : String?)","location":{"filename":"src/models/task.cr","line_number":73,"url":null},"def":{"name":"state=","args":[{"name":"state","doc":null,"default_value":"","external_name":"state","restriction":"String | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@state = state"}},{"id":"subject_iri:String-instance-method","html_id":"subject_iri:String-instance-method","name":"subject_iri","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","args_html":" : String","location":{"filename":"src/models/task.cr","line_number":15,"url":null},"def":{"name":"subject_iri","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@subject_iri"}},{"id":"subject_iri=(subject_iri:String)-instance-method","html_id":"subject_iri=(subject_iri:String)-instance-method","name":"subject_iri=","doc":null,"summary":null,"abstract":false,"args":[{"name":"subject_iri","doc":null,"default_value":"","external_name":"subject_iri","restriction":"String"}],"args_string":"(subject_iri : String)","args_html":"(subject_iri : String)","location":{"filename":"src/models/task.cr","line_number":15,"url":null},"def":{"name":"subject_iri=","args":[{"name":"subject_iri","doc":null,"default_value":"","external_name":"subject_iri","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@subject_iri = subject_iri"}}],"macros":[],"types":[{"html_id":"ktistec/Task/Deliver","path":"Task/Deliver.html","kind":"class","full_name":"Task::Deliver","name":"Deliver","abstract":false,"superclass":{"html_id":"ktistec/Task","kind":"class","full_name":"Task","name":"Task"},"ancestors":[{"html_id":"ktistec/Ktistec/Open","kind":"module","full_name":"Ktistec::Open","name":"Open"},{"html_id":"ktistec/Task","kind":"class","full_name":"Task","name":"Task"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/Ktistec/Open","kind":"module","full_name":"Ktistec::Open","name":"Open"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Task","kind":"class","full_name":"Task","name":"Task"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"_belongs_to_activity:ActivityPub::Activity?-instance-method","html_id":"_belongs_to_activity:ActivityPub::Activity?-instance-method","name":"_belongs_to_activity","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Activity?","args_html":" : <a href=\"../ActivityPub/Activity.html\">ActivityPub::Activity</a>?","location":{"filename":"src/models/task/deliver.cr","line_number":17,"url":null},"def":{"name":"_belongs_to_activity","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Activity | ::Nil","visibility":"Public","body":"@activity"}},{"id":"_belongs_to_sender:ActivityPub::Actor?-instance-method","html_id":"_belongs_to_sender:ActivityPub::Actor?-instance-method","name":"_belongs_to_sender","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/task/deliver.cr","line_number":14,"url":null},"def":{"name":"_belongs_to_sender","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@sender"}},{"id":"activity:ActivityPub::Activity-instance-method","html_id":"activity:ActivityPub::Activity-instance-method","name":"activity","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Activity","args_html":" : <a href=\"../ActivityPub/Activity.html\">ActivityPub::Activity</a>","location":{"filename":"src/models/task/deliver.cr","line_number":17,"url":null},"def":{"name":"activity","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Activity","visibility":"Public","body":"@activity || (@activity = (ActivityPub::Activity.find?(iri: self.subject_iri) || (raise(NotFound.new(\"#{self.class} activity iri=#{self.subject_iri}: not found\")))))"}},{"id":"activity=(activity:ActivityPub::Activity):ActivityPub::Activity-instance-method","html_id":"activity=(activity:ActivityPub::Activity):ActivityPub::Activity-instance-method","name":"activity=","doc":null,"summary":null,"abstract":false,"args":[{"name":"activity","doc":null,"default_value":"","external_name":"activity","restriction":"ActivityPub::Activity"}],"args_string":"(activity : ActivityPub::Activity) : ActivityPub::Activity","args_html":"(activity : <a href=\"../ActivityPub/Activity.html\">ActivityPub::Activity</a>) : <a href=\"../ActivityPub/Activity.html\">ActivityPub::Activity</a>","location":{"filename":"src/models/task/deliver.cr","line_number":17,"url":null},"def":{"name":"activity=","args":[{"name":"activity","doc":null,"default_value":"","external_name":"activity","restriction":"ActivityPub::Activity"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Activity","visibility":"Public","body":"@activity = activity\nself.subject_iri = activity.iri.as(typeof(self.subject_iri))\nactivity\n"}},{"id":"activity?:ActivityPub::Activity?-instance-method","html_id":"activity?:ActivityPub::Activity?-instance-method","name":"activity?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Activity?","args_html":" : <a href=\"../ActivityPub/Activity.html\">ActivityPub::Activity</a>?","location":{"filename":"src/models/task/deliver.cr","line_number":17,"url":null},"def":{"name":"activity?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Activity | ::Nil","visibility":"Public","body":"@activity || (@activity = (ActivityPub::Activity.find?(iri: self.subject_iri) || nil))"}},{"id":"deliver_to-instance-method","html_id":"deliver_to-instance-method","name":"deliver_to","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/task/deliver.cr","line_number":46,"url":null},"def":{"name":"deliver_to","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@deliver_to || (@deliver_to = (temp = self.state.presence) ? (State.from_json(temp)).deliver_to : nil)"}},{"id":"deliver_to=(deliver_to:Array(String)?)-instance-method","html_id":"deliver_to=(deliver_to:Array(String)?)-instance-method","name":"deliver_to=","doc":null,"summary":null,"abstract":false,"args":[{"name":"deliver_to","doc":null,"default_value":"","external_name":"deliver_to","restriction":"Array(String) | ::Nil"}],"args_string":"(deliver_to : Array(String)?)","args_html":"(deliver_to : <a href=\"../Array.html\">Array</a>(String)?)","location":{"filename":"src/models/task/deliver.cr","line_number":52,"url":null},"def":{"name":"deliver_to=","args":[{"name":"deliver_to","doc":null,"default_value":"","external_name":"deliver_to","restriction":"Array(String) | ::Nil"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@deliver_to = deliver_to\nstate = (temp = self.state.presence) ? State.from_json(temp) : State.new\nif deliver_to\n  state.deliver_to = deliver_to\nend\nself.state = state.to_json\ndeliver_to\n"}},{"id":"perform-instance-method","html_id":"perform-instance-method","name":"perform","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/task/deliver.cr","line_number":135,"url":null},"def":{"name":"perform","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"recipients.each do |recipient|\n  if recipient.local?\n    Relationship::Content::Inbox.new(owner: recipient, activity: activity, confirmed: true).save\n  else\n    if (    inbox = recipient.inbox)\n      body = activity.to_json_ld\n      headers = Ktistec::Signature.sign(sender, inbox, body)\n      response = HTTP::Client.post(inbox, headers, body)\n      if response.success?\n      else\n        message = \"failed to deliver to #{inbox}: #{response.body}\"\n        failures << (Failure.new(message))\n        Log.info do\n          message\n        end\n      end\n    else\n      message = \"recipient has no inbox: #{recipient}\"\n      failures << (Failure.new(message))\n      Log.info do\n        message\n      end\n    end\n  end\nend"}},{"id":"sender:ActivityPub::Actor-instance-method","html_id":"sender:ActivityPub::Actor-instance-method","name":"sender","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor","args_html":" : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/task/deliver.cr","line_number":14,"url":null},"def":{"name":"sender","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@sender || (@sender = (ActivityPub::Actor.find?(iri: self.source_iri) || (raise(NotFound.new(\"#{self.class} sender iri=#{self.source_iri}: not found\")))))"}},{"id":"sender=(sender:ActivityPub::Actor):ActivityPub::Actor-instance-method","html_id":"sender=(sender:ActivityPub::Actor):ActivityPub::Actor-instance-method","name":"sender=","doc":null,"summary":null,"abstract":false,"args":[{"name":"sender","doc":null,"default_value":"","external_name":"sender","restriction":"ActivityPub::Actor"}],"args_string":"(sender : ActivityPub::Actor) : ActivityPub::Actor","args_html":"(sender : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>) : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/task/deliver.cr","line_number":14,"url":null},"def":{"name":"sender=","args":[{"name":"sender","doc":null,"default_value":"","external_name":"sender","restriction":"ActivityPub::Actor"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@sender = sender\nself.source_iri = sender.iri.as(typeof(self.source_iri))\nsender\n"}},{"id":"sender?:ActivityPub::Actor?-instance-method","html_id":"sender?:ActivityPub::Actor?-instance-method","name":"sender?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/task/deliver.cr","line_number":14,"url":null},"def":{"name":"sender?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@sender || (@sender = (ActivityPub::Actor.find?(iri: self.source_iri) || nil))"}}],"macros":[],"types":[{"html_id":"ktistec/Task/Deliver/State","path":"Task/Deliver/State.html","kind":"class","full_name":"Task::Deliver::State","name":"State","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Task/Deliver","kind":"class","full_name":"Task::Deliver","name":"Deliver"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","args_html":"(pull : JSON::PullParser)","location":{"filename":"src/models/task/deliver.cr","line_number":35,"url":null},"def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}},{"id":"new(deliver_to=[]ofString)-class-method","html_id":"new(deliver_to=[]ofString)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"deliver_to","doc":null,"default_value":"[] of String","external_name":"deliver_to","restriction":""}],"args_string":"(deliver_to = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">String</span>)","args_html":"(deliver_to = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">String</span>)","location":{"filename":"src/models/task/deliver.cr","line_number":39,"url":null},"def":{"name":"new","args":[{"name":"deliver_to","doc":null,"default_value":"[] of String","external_name":"deliver_to","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(deliver_to)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"deliver_to:Array(String)-instance-method","html_id":"deliver_to:Array(String)-instance-method","name":"deliver_to","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Array(String)","args_html":" : <a href=\"../../Array.html\">Array</a>(String)","location":{"filename":"src/models/task/deliver.cr","line_number":37,"url":null},"def":{"name":"deliver_to","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Array(String)","visibility":"Public","body":"@deliver_to"}},{"id":"deliver_to=(deliver_to:Array(String))-instance-method","html_id":"deliver_to=(deliver_to:Array(String))-instance-method","name":"deliver_to=","doc":null,"summary":null,"abstract":false,"args":[{"name":"deliver_to","doc":null,"default_value":"","external_name":"deliver_to","restriction":"Array(String)"}],"args_string":"(deliver_to : Array(String))","args_html":"(deliver_to : <a href=\"../../Array.html\">Array</a>(String))","location":{"filename":"src/models/task/deliver.cr","line_number":37,"url":null},"def":{"name":"deliver_to=","args":[{"name":"deliver_to","doc":null,"default_value":"","external_name":"deliver_to","restriction":"Array(String)"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@deliver_to = deliver_to"}}],"macros":[],"types":[]}]},{"html_id":"ktistec/Task/Failure","path":"Task/Failure.html","kind":"struct","full_name":"Task::Failure","name":"Failure","abstract":false,"superclass":{"html_id":"ktistec/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"ktistec/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"ktistec/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"ktistec/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Task","kind":"class","full_name":"Task","name":"Task"},"doc":null,"summary":null,"class_methods":[],"constructors":[{"id":"new(pull:JSON::PullParser)-class-method","html_id":"new(pull:JSON::PullParser)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","args_html":"(pull : JSON::PullParser)","location":{"filename":"src/models/task.cr","line_number":21,"url":null},"def":{"name":"new","args":[{"name":"pull","doc":null,"default_value":"","external_name":"pull","restriction":"::JSON::PullParser"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"new_from_json_pull_parser(pull)"}},{"id":"new(description,timestamp=Time.utc)-class-method","html_id":"new(description,timestamp=Time.utc)-class-method","name":"new","doc":null,"summary":null,"abstract":false,"args":[{"name":"description","doc":null,"default_value":"","external_name":"description","restriction":""},{"name":"timestamp","doc":null,"default_value":"Time.utc","external_name":"timestamp","restriction":""}],"args_string":"(description, timestamp = <span class=\"t\">Time</span>.utc)","args_html":"(description, timestamp = <span class=\"t\">Time</span>.utc)","location":{"filename":"src/models/task.cr","line_number":27,"url":null},"def":{"name":"new","args":[{"name":"description","doc":null,"default_value":"","external_name":"description","restriction":""},{"name":"timestamp","doc":null,"default_value":"Time.utc","external_name":"timestamp","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"_ = allocate\n_.initialize(description, timestamp)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"id":"description:String-instance-method","html_id":"description:String-instance-method","name":"description","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : String","args_html":" : String","location":{"filename":"src/models/task.cr","line_number":23,"url":null},"def":{"name":"description","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"String","visibility":"Public","body":"@description"}},{"id":"description=(description:String)-instance-method","html_id":"description=(description:String)-instance-method","name":"description=","doc":null,"summary":null,"abstract":false,"args":[{"name":"description","doc":null,"default_value":"","external_name":"description","restriction":"String"}],"args_string":"(description : String)","args_html":"(description : String)","location":{"filename":"src/models/task.cr","line_number":23,"url":null},"def":{"name":"description=","args":[{"name":"description","doc":null,"default_value":"","external_name":"description","restriction":"String"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@description = description"}},{"id":"timestamp:Time-instance-method","html_id":"timestamp:Time-instance-method","name":"timestamp","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : Time","args_html":" : Time","location":{"filename":"src/models/task.cr","line_number":25,"url":null},"def":{"name":"timestamp","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"Time","visibility":"Public","body":"@timestamp"}},{"id":"timestamp=(timestamp:Time)-instance-method","html_id":"timestamp=(timestamp:Time)-instance-method","name":"timestamp=","doc":null,"summary":null,"abstract":false,"args":[{"name":"timestamp","doc":null,"default_value":"","external_name":"timestamp","restriction":"Time"}],"args_string":"(timestamp : Time)","args_html":"(timestamp : Time)","location":{"filename":"src/models/task.cr","line_number":25,"url":null},"def":{"name":"timestamp=","args":[{"name":"timestamp","doc":null,"default_value":"","external_name":"timestamp","restriction":"Time"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"@timestamp = timestamp"}}],"macros":[],"types":[]},{"html_id":"ktistec/Task/RefreshActor","path":"Task/RefreshActor.html","kind":"class","full_name":"Task::RefreshActor","name":"RefreshActor","abstract":false,"superclass":{"html_id":"ktistec/Task","kind":"class","full_name":"Task","name":"Task"},"ancestors":[{"html_id":"ktistec/Task","kind":"class","full_name":"Task","name":"Task"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Task","kind":"class","full_name":"Task","name":"Task"},"doc":null,"summary":null,"class_methods":[{"id":"exists?(iri)-class-method","html_id":"exists?(iri)-class-method","name":"exists?","doc":null,"summary":null,"abstract":false,"args":[{"name":"iri","doc":null,"default_value":"","external_name":"iri","restriction":""}],"args_string":"(iri)","args_html":"(iri)","location":{"filename":"src/models/task/refresh_actor.cr","line_number":22,"url":null},"def":{"name":"exists?","args":[{"name":"iri","doc":null,"default_value":"","external_name":"iri","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"!(where(EXISTS_QUERY, iri)).empty?"}}],"constructors":[],"instance_methods":[{"id":"_belongs_to_actor:ActivityPub::Actor?-instance-method","html_id":"_belongs_to_actor:ActivityPub::Actor?-instance-method","name":"_belongs_to_actor","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/task/refresh_actor.cr","line_number":11,"url":null},"def":{"name":"_belongs_to_actor","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@actor"}},{"id":"_belongs_to_source:ActivityPub::Actor?-instance-method","html_id":"_belongs_to_source:ActivityPub::Actor?-instance-method","name":"_belongs_to_source","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/task/refresh_actor.cr","line_number":8,"url":null},"def":{"name":"_belongs_to_source","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@source"}},{"id":"actor:ActivityPub::Actor-instance-method","html_id":"actor:ActivityPub::Actor-instance-method","name":"actor","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor","args_html":" : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/task/refresh_actor.cr","line_number":11,"url":null},"def":{"name":"actor","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@actor || (@actor = (ActivityPub::Actor.find?(iri: self.subject_iri) || (raise(NotFound.new(\"#{self.class} actor iri=#{self.subject_iri}: not found\")))))"}},{"id":"actor=(actor:ActivityPub::Actor):ActivityPub::Actor-instance-method","html_id":"actor=(actor:ActivityPub::Actor):ActivityPub::Actor-instance-method","name":"actor=","doc":null,"summary":null,"abstract":false,"args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":"ActivityPub::Actor"}],"args_string":"(actor : ActivityPub::Actor) : ActivityPub::Actor","args_html":"(actor : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>) : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/task/refresh_actor.cr","line_number":11,"url":null},"def":{"name":"actor=","args":[{"name":"actor","doc":null,"default_value":"","external_name":"actor","restriction":"ActivityPub::Actor"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@actor = actor\nself.subject_iri = actor.iri.as(typeof(self.subject_iri))\nactor\n"}},{"id":"actor?:ActivityPub::Actor?-instance-method","html_id":"actor?:ActivityPub::Actor?-instance-method","name":"actor?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/task/refresh_actor.cr","line_number":11,"url":null},"def":{"name":"actor?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@actor || (@actor = (ActivityPub::Actor.find?(iri: self.subject_iri) || nil))"}},{"id":"perform-instance-method","html_id":"perform-instance-method","name":"perform","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/task/refresh_actor.cr","line_number":26,"url":null},"def":{"name":"perform","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if (instance = ActivityPub::Actor.dereference?(actor.iri, ignore_cached: true))\n  instance.save\nelse\n  message = \"failed to dereference #{actor.iri}\"\n  failures << (Failure.new(message))\n  Log.info do\n    message\n  end\nend"}},{"id":"source:ActivityPub::Actor-instance-method","html_id":"source:ActivityPub::Actor-instance-method","name":"source","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor","args_html":" : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/task/refresh_actor.cr","line_number":8,"url":null},"def":{"name":"source","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@source || (@source = (ActivityPub::Actor.find?(iri: self.source_iri) || (raise(NotFound.new(\"#{self.class} source iri=#{self.source_iri}: not found\")))))"}},{"id":"source=(source:ActivityPub::Actor):ActivityPub::Actor-instance-method","html_id":"source=(source:ActivityPub::Actor):ActivityPub::Actor-instance-method","name":"source=","doc":null,"summary":null,"abstract":false,"args":[{"name":"source","doc":null,"default_value":"","external_name":"source","restriction":"ActivityPub::Actor"}],"args_string":"(source : ActivityPub::Actor) : ActivityPub::Actor","args_html":"(source : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>) : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/task/refresh_actor.cr","line_number":8,"url":null},"def":{"name":"source=","args":[{"name":"source","doc":null,"default_value":"","external_name":"source","restriction":"ActivityPub::Actor"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@source = source\nself.source_iri = source.iri.as(typeof(self.source_iri))\nsource\n"}},{"id":"source?:ActivityPub::Actor?-instance-method","html_id":"source?:ActivityPub::Actor?-instance-method","name":"source?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/task/refresh_actor.cr","line_number":8,"url":null},"def":{"name":"source?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@source || (@source = (ActivityPub::Actor.find?(iri: self.source_iri) || nil))"}}],"macros":[],"types":[]},{"html_id":"ktistec/Task/Terminate","path":"Task/Terminate.html","kind":"class","full_name":"Task::Terminate","name":"Terminate","abstract":false,"superclass":{"html_id":"ktistec/Task","kind":"class","full_name":"Task","name":"Task"},"ancestors":[{"html_id":"ktistec/Task","kind":"class","full_name":"Task","name":"Task"},{"html_id":"ktistec/Ktistec/Model/Polymorphic","kind":"module","full_name":"Ktistec::Model::Polymorphic","name":"Polymorphic"},{"html_id":"ktistec/Ktistec/Model/Common","kind":"module","full_name":"Ktistec::Model::Common","name":"Common"},{"html_id":"ktistec/Ktistec/Model/InstanceMethods","kind":"module","full_name":"Ktistec::Model::InstanceMethods","name":"InstanceMethods"},{"html_id":"ktistec/Ktistec/Model","kind":"module","full_name":"Ktistec::Model","name":"Model"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":{"html_id":"ktistec/Task","kind":"class","full_name":"Task","name":"Task"},"doc":null,"summary":null,"class_methods":[],"constructors":[],"instance_methods":[{"id":"_belongs_to_source:ActivityPub::Actor?-instance-method","html_id":"_belongs_to_source:ActivityPub::Actor?-instance-method","name":"_belongs_to_source","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/task/terminate.cr","line_number":8,"url":null},"def":{"name":"_belongs_to_source","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@source"}},{"id":"_belongs_to_subject:ActivityPub::Actor?-instance-method","html_id":"_belongs_to_subject:ActivityPub::Actor?-instance-method","name":"_belongs_to_subject","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/task/terminate.cr","line_number":11,"url":null},"def":{"name":"_belongs_to_subject","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@subject"}},{"id":"perform-instance-method","html_id":"perform-instance-method","name":"perform","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/models/task/terminate.cr","line_number":20,"url":null},"def":{"name":"perform","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"if (object = subject.objects.first?)\n  Log.info do\n    \"Task::Terminate: deleting #{object.iri} published=#{!(!object.published)}\"\n  end\n  self.next_attempt_at = 30.seconds.from_now\n  if object.published\n    Task::Deliver.new(sender: subject, activity: object.make_delete_activity).schedule\n  end\n  object.delete\nelse\n  Log.info do\n    \"Task::Terminate: deleting #{subject.iri}\"\n  end\n  Task::Deliver.new(sender: subject, activity: subject.make_delete_activity).schedule\n  subject.delete\nend"}},{"id":"source:ActivityPub::Actor-instance-method","html_id":"source:ActivityPub::Actor-instance-method","name":"source","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor","args_html":" : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/task/terminate.cr","line_number":8,"url":null},"def":{"name":"source","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@source || (@source = (ActivityPub::Actor.find?(iri: self.source_iri) || (raise(NotFound.new(\"#{self.class} source iri=#{self.source_iri}: not found\")))))"}},{"id":"source=(source:ActivityPub::Actor):ActivityPub::Actor-instance-method","html_id":"source=(source:ActivityPub::Actor):ActivityPub::Actor-instance-method","name":"source=","doc":null,"summary":null,"abstract":false,"args":[{"name":"source","doc":null,"default_value":"","external_name":"source","restriction":"ActivityPub::Actor"}],"args_string":"(source : ActivityPub::Actor) : ActivityPub::Actor","args_html":"(source : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>) : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/task/terminate.cr","line_number":8,"url":null},"def":{"name":"source=","args":[{"name":"source","doc":null,"default_value":"","external_name":"source","restriction":"ActivityPub::Actor"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@source = source\nself.source_iri = source.iri.as(typeof(self.source_iri))\nsource\n"}},{"id":"source?:ActivityPub::Actor?-instance-method","html_id":"source?:ActivityPub::Actor?-instance-method","name":"source?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/task/terminate.cr","line_number":8,"url":null},"def":{"name":"source?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@source || (@source = (ActivityPub::Actor.find?(iri: self.source_iri) || nil))"}},{"id":"subject:ActivityPub::Actor-instance-method","html_id":"subject:ActivityPub::Actor-instance-method","name":"subject","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor","args_html":" : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/task/terminate.cr","line_number":11,"url":null},"def":{"name":"subject","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@subject || (@subject = (ActivityPub::Actor.find?(iri: self.subject_iri) || (raise(NotFound.new(\"#{self.class} subject iri=#{self.subject_iri}: not found\")))))"}},{"id":"subject=(subject:ActivityPub::Actor):ActivityPub::Actor-instance-method","html_id":"subject=(subject:ActivityPub::Actor):ActivityPub::Actor-instance-method","name":"subject=","doc":null,"summary":null,"abstract":false,"args":[{"name":"subject","doc":null,"default_value":"","external_name":"subject","restriction":"ActivityPub::Actor"}],"args_string":"(subject : ActivityPub::Actor) : ActivityPub::Actor","args_html":"(subject : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>) : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>","location":{"filename":"src/models/task/terminate.cr","line_number":11,"url":null},"def":{"name":"subject=","args":[{"name":"subject","doc":null,"default_value":"","external_name":"subject","restriction":"ActivityPub::Actor"}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor","visibility":"Public","body":"@subject = subject\nself.subject_iri = subject.iri.as(typeof(self.subject_iri))\nsubject\n"}},{"id":"subject?:ActivityPub::Actor?-instance-method","html_id":"subject?:ActivityPub::Actor?-instance-method","name":"subject?","doc":null,"summary":null,"abstract":false,"args":[],"args_string":" : ActivityPub::Actor?","args_html":" : <a href=\"../ActivityPub/Actor.html\">ActivityPub::Actor</a>?","location":{"filename":"src/models/task/terminate.cr","line_number":11,"url":null},"def":{"name":"subject?","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"ActivityPub::Actor | ::Nil","visibility":"Public","body":"@subject || (@subject = (ActivityPub::Actor.find?(iri: self.subject_iri) || nil))"}}],"macros":[],"types":[]}]},{"html_id":"ktistec/TaskWorker","path":"TaskWorker.html","kind":"class","full_name":"TaskWorker","name":"TaskWorker","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"id":"clean_up_running_tasks-class-method","html_id":"clean_up_running_tasks-class-method","name":"clean_up_running_tasks","doc":null,"summary":null,"abstract":false,"args":[],"args_string":"","args_html":"","location":{"filename":"src/workers/task_worker.cr","line_number":27,"url":null},"def":{"name":"clean_up_running_tasks","args":[],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"update = \"UPDATE tasks SET running = 0 WHERE running = 1\"\nKtistec.database.exec(update)\n"}}],"constructors":[],"instance_methods":[{"id":"work(now=Time.utc)-instance-method","html_id":"work(now=Time.utc)-instance-method","name":"work","doc":null,"summary":null,"abstract":false,"args":[{"name":"now","doc":null,"default_value":"Time.utc","external_name":"now","restriction":""}],"args_string":"(now = <span class=\"t\">Time</span>.utc)","args_html":"(now = <span class=\"t\">Time</span>.utc)","location":{"filename":"src/workers/task_worker.cr","line_number":4,"url":null},"def":{"name":"work","args":[{"name":"now","doc":null,"default_value":"Time.utc","external_name":"now","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"tasks = Task.scheduled(now)\nids = tasks.map do |__arg0|\n  __arg0.id.to_s\nend.join(\",\")\nupdate = \"UPDATE tasks SET running = 1 WHERE id IN (#{ids})\"\nKtistec.database.exec(update)\ntasks.each do |task|\n  begin\n    next_attempt_at = task.next_attempt_at\n    task.perform\n  rescue ex\n    message = ex.message ? \"#{ex.class}: #{ex.message}\" : ex.class.to_s\n    task.backtrace = [message] + ex.backtrace\n  ensure\n    task.running = false\n    if (task.next_attempt_at != next_attempt_at) || task.backtrace\n    else\n      task.complete = true\n    end\n    task.last_attempt_at = Time.utc\n    task.save(skip_validation: true, skip_associated: true)\n  end\nend\n!tasks.empty?\n"}}],"macros":[],"types":[]},{"html_id":"ktistec/UploadsController","path":"UploadsController.html","kind":"class","full_name":"UploadsController","name":"UploadsController","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"id":"paginate(collection,env)-class-method","html_id":"paginate(collection,env)-class-method","name":"paginate","doc":null,"summary":null,"abstract":false,"args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(collection, env)","args_html":"(collection, env)","location":{"filename":"src/controllers/uploads.cr","line_number":6,"url":null},"def":{"name":"paginate","args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"path = env.request.path\nquery = env.params.query\npage = 1\nbegin\n  if (p = query[\"page\"].to_i) > 0\n    page = p\n  end\nrescue ArgumentError | KeyError\nend\nrender(\"./src/views/partials/paginator.html.ecr\")\n"}},{"id":"pagination_params(env)-class-method","html_id":"pagination_params(env)-class-method","name":"pagination_params","doc":null,"summary":null,"abstract":false,"args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(env)","args_html":"(env)","location":{"filename":"src/controllers/uploads.cr","line_number":6,"url":null},"def":{"name":"pagination_params","args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"{Math.max(env.params.query[\"page\"]?.try(&.to_i) || 1, 1), Math.min(env.params.query[\"size\"]?.try(&.to_i) || 10, 1000)}"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]},{"html_id":"ktistec/WellKnownController","path":"WellKnownController.html","kind":"class","full_name":"WellKnownController","name":"WellKnownController","abstract":false,"superclass":{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"},{"html_id":"ktistec/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"ktistec/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[],"repository_name":"ktistec","program":false,"enum":false,"alias":false,"aliased":null,"aliased_html":null,"const":false,"constants":[],"included_modules":[{"html_id":"ktistec/Ktistec/Controller","kind":"module","full_name":"Ktistec::Controller","name":"Controller"}],"extended_modules":[],"subclasses":[],"including_types":[],"namespace":null,"doc":null,"summary":null,"class_methods":[{"id":"paginate(collection,env)-class-method","html_id":"paginate(collection,env)-class-method","name":"paginate","doc":null,"summary":null,"abstract":false,"args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(collection, env)","args_html":"(collection, env)","location":{"filename":"src/controllers/well_known.cr","line_number":4,"url":null},"def":{"name":"paginate","args":[{"name":"collection","doc":null,"default_value":"","external_name":"collection","restriction":""},{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"path = env.request.path\nquery = env.params.query\npage = 1\nbegin\n  if (p = query[\"page\"].to_i) > 0\n    page = p\n  end\nrescue ArgumentError | KeyError\nend\nrender(\"./src/views/partials/paginator.html.ecr\")\n"}},{"id":"pagination_params(env)-class-method","html_id":"pagination_params(env)-class-method","name":"pagination_params","doc":null,"summary":null,"abstract":false,"args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"args_string":"(env)","args_html":"(env)","location":{"filename":"src/controllers/well_known.cr","line_number":4,"url":null},"def":{"name":"pagination_params","args":[{"name":"env","doc":null,"default_value":"","external_name":"env","restriction":""}],"double_splat":null,"splat_index":null,"yields":null,"block_arg":null,"return_type":"","visibility":"Public","body":"{Math.max(env.params.query[\"page\"]?.try(&.to_i) || 1, 1), Math.min(env.params.query[\"size\"]?.try(&.to_i) || 10, 1000)}"}}],"constructors":[],"instance_methods":[],"macros":[],"types":[]}]}})